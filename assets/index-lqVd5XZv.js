function bj(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const d in a)if(d!=="default"&&!(d in e)){const p=Object.getOwnPropertyDescriptor(a,d);p&&Object.defineProperty(e,d,p.get?p:{enumerable:!0,get:()=>a[d]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))a(d);new MutationObserver(d=>{for(const p of d)if(p.type==="childList")for(const m of p.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function r(d){const p={};return d.integrity&&(p.integrity=d.integrity),d.referrerPolicy&&(p.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?p.credentials="include":d.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function a(d){if(d.ep)return;d.ep=!0;const p=r(d);fetch(d.href,p)}})();function Fu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var nx={exports:{}},Iy={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yT;function xj(){if(yT)return Iy;yT=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,d,p){var m=null;if(p!==void 0&&(m=""+p),d.key!==void 0&&(m=""+d.key),"key"in d){p={};for(var s in d)s!=="key"&&(p[s]=d[s])}else p=d;return d=p.ref,{$$typeof:e,type:a,key:m,ref:d!==void 0?d:null,props:p}}return Iy.Fragment=t,Iy.jsx=r,Iy.jsxs=r,Iy}var vT;function wj(){return vT||(vT=1,nx.exports=xj()),nx.exports}var X=wj(),rx={exports:{}},Pn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _T;function Sj(){if(_T)return Pn;_T=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),p=Symbol.for("react.consumer"),m=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),C=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),R=Symbol.iterator;function j(Ae){return Ae===null||typeof Ae!="object"?null:(Ae=R&&Ae[R]||Ae["@@iterator"],typeof Ae=="function"?Ae:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,H={};function Q(Ae,qe,_t){this.props=Ae,this.context=qe,this.refs=H,this.updater=_t||G}Q.prototype.isReactComponent={},Q.prototype.setState=function(Ae,qe){if(typeof Ae!="object"&&typeof Ae!="function"&&Ae!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ae,qe,"setState")},Q.prototype.forceUpdate=function(Ae){this.updater.enqueueForceUpdate(this,Ae,"forceUpdate")};function te(){}te.prototype=Q.prototype;function ne(Ae,qe,_t){this.props=Ae,this.context=qe,this.refs=H,this.updater=_t||G}var me=ne.prototype=new te;me.constructor=ne,V(me,Q.prototype),me.isPureReactComponent=!0;var fe=Array.isArray;function _e(){}var ye={H:null,A:null,T:null,S:null},Oe=Object.prototype.hasOwnProperty;function nt(Ae,qe,_t){var Tt=_t.ref;return{$$typeof:e,type:Ae,key:qe,ref:Tt!==void 0?Tt:null,props:_t}}function ft(Ae,qe){return nt(Ae.type,qe,Ae.props)}function rt(Ae){return typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===e}function at(Ae){var qe={"=":"=0",":":"=2"};return"$"+Ae.replace(/[=:]/g,function(_t){return qe[_t]})}var Et=/\/+/g;function At(Ae,qe){return typeof Ae=="object"&&Ae!==null&&Ae.key!=null?at(""+Ae.key):qe.toString(36)}function zt(Ae){switch(Ae.status){case"fulfilled":return Ae.value;case"rejected":throw Ae.reason;default:switch(typeof Ae.status=="string"?Ae.then(_e,_e):(Ae.status="pending",Ae.then(function(qe){Ae.status==="pending"&&(Ae.status="fulfilled",Ae.value=qe)},function(qe){Ae.status==="pending"&&(Ae.status="rejected",Ae.reason=qe)})),Ae.status){case"fulfilled":return Ae.value;case"rejected":throw Ae.reason}}throw Ae}function Le(Ae,qe,_t,Tt,jt){var Ht=typeof Ae;(Ht==="undefined"||Ht==="boolean")&&(Ae=null);var bt=!1;if(Ae===null)bt=!0;else switch(Ht){case"bigint":case"string":case"number":bt=!0;break;case"object":switch(Ae.$$typeof){case e:case t:bt=!0;break;case A:return bt=Ae._init,Le(bt(Ae._payload),qe,_t,Tt,jt)}}if(bt)return jt=jt(Ae),bt=Tt===""?"."+At(Ae,0):Tt,fe(jt)?(_t="",bt!=null&&(_t=bt.replace(Et,"$&/")+"/"),Le(jt,qe,_t,"",function(Rt){return Rt})):jt!=null&&(rt(jt)&&(jt=ft(jt,_t+(jt.key==null||Ae&&Ae.key===jt.key?"":(""+jt.key).replace(Et,"$&/")+"/")+bt)),qe.push(jt)),1;bt=0;var nn=Tt===""?".":Tt+":";if(fe(Ae))for(var pt=0;pt<Ae.length;pt++)Tt=Ae[pt],Ht=nn+At(Tt,pt),bt+=Le(Tt,qe,_t,Ht,jt);else if(pt=j(Ae),typeof pt=="function")for(Ae=pt.call(Ae),pt=0;!(Tt=Ae.next()).done;)Tt=Tt.value,Ht=nn+At(Tt,pt++),bt+=Le(Tt,qe,_t,Ht,jt);else if(Ht==="object"){if(typeof Ae.then=="function")return Le(zt(Ae),qe,_t,Tt,jt);throw qe=String(Ae),Error("Objects are not valid as a React child (found: "+(qe==="[object Object]"?"object with keys {"+Object.keys(Ae).join(", ")+"}":qe)+"). If you meant to render a collection of children, use an array instead.")}return bt}function Qe(Ae,qe,_t){if(Ae==null)return Ae;var Tt=[],jt=0;return Le(Ae,Tt,"","",function(Ht){return qe.call(_t,Ht,jt++)}),Tt}function Ve(Ae){if(Ae._status===-1){var qe=Ae._result;qe=qe(),qe.then(function(_t){(Ae._status===0||Ae._status===-1)&&(Ae._status=1,Ae._result=_t)},function(_t){(Ae._status===0||Ae._status===-1)&&(Ae._status=2,Ae._result=_t)}),Ae._status===-1&&(Ae._status=0,Ae._result=qe)}if(Ae._status===1)return Ae._result.default;throw Ae._result}var ht=typeof reportError=="function"?reportError:function(Ae){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var qe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Ae=="object"&&Ae!==null&&typeof Ae.message=="string"?String(Ae.message):String(Ae),error:Ae});if(!window.dispatchEvent(qe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Ae);return}console.error(Ae)},qt={map:Qe,forEach:function(Ae,qe,_t){Qe(Ae,function(){qe.apply(this,arguments)},_t)},count:function(Ae){var qe=0;return Qe(Ae,function(){qe++}),qe},toArray:function(Ae){return Qe(Ae,function(qe){return qe})||[]},only:function(Ae){if(!rt(Ae))throw Error("React.Children.only expected to receive a single React element child.");return Ae}};return Pn.Activity=D,Pn.Children=qt,Pn.Component=Q,Pn.Fragment=r,Pn.Profiler=d,Pn.PureComponent=ne,Pn.StrictMode=a,Pn.Suspense=M,Pn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ye,Pn.__COMPILER_RUNTIME={__proto__:null,c:function(Ae){return ye.H.useMemoCache(Ae)}},Pn.cache=function(Ae){return function(){return Ae.apply(null,arguments)}},Pn.cacheSignal=function(){return null},Pn.cloneElement=function(Ae,qe,_t){if(Ae==null)throw Error("The argument must be a React element, but you passed "+Ae+".");var Tt=V({},Ae.props),jt=Ae.key;if(qe!=null)for(Ht in qe.key!==void 0&&(jt=""+qe.key),qe)!Oe.call(qe,Ht)||Ht==="key"||Ht==="__self"||Ht==="__source"||Ht==="ref"&&qe.ref===void 0||(Tt[Ht]=qe[Ht]);var Ht=arguments.length-2;if(Ht===1)Tt.children=_t;else if(1<Ht){for(var bt=Array(Ht),nn=0;nn<Ht;nn++)bt[nn]=arguments[nn+2];Tt.children=bt}return nt(Ae.type,jt,Tt)},Pn.createContext=function(Ae){return Ae={$$typeof:m,_currentValue:Ae,_currentValue2:Ae,_threadCount:0,Provider:null,Consumer:null},Ae.Provider=Ae,Ae.Consumer={$$typeof:p,_context:Ae},Ae},Pn.createElement=function(Ae,qe,_t){var Tt,jt={},Ht=null;if(qe!=null)for(Tt in qe.key!==void 0&&(Ht=""+qe.key),qe)Oe.call(qe,Tt)&&Tt!=="key"&&Tt!=="__self"&&Tt!=="__source"&&(jt[Tt]=qe[Tt]);var bt=arguments.length-2;if(bt===1)jt.children=_t;else if(1<bt){for(var nn=Array(bt),pt=0;pt<bt;pt++)nn[pt]=arguments[pt+2];jt.children=nn}if(Ae&&Ae.defaultProps)for(Tt in bt=Ae.defaultProps,bt)jt[Tt]===void 0&&(jt[Tt]=bt[Tt]);return nt(Ae,Ht,jt)},Pn.createRef=function(){return{current:null}},Pn.forwardRef=function(Ae){return{$$typeof:s,render:Ae}},Pn.isValidElement=rt,Pn.lazy=function(Ae){return{$$typeof:A,_payload:{_status:-1,_result:Ae},_init:Ve}},Pn.memo=function(Ae,qe){return{$$typeof:C,type:Ae,compare:qe===void 0?null:qe}},Pn.startTransition=function(Ae){var qe=ye.T,_t={};ye.T=_t;try{var Tt=Ae(),jt=ye.S;jt!==null&&jt(_t,Tt),typeof Tt=="object"&&Tt!==null&&typeof Tt.then=="function"&&Tt.then(_e,ht)}catch(Ht){ht(Ht)}finally{qe!==null&&_t.types!==null&&(qe.types=_t.types),ye.T=qe}},Pn.unstable_useCacheRefresh=function(){return ye.H.useCacheRefresh()},Pn.use=function(Ae){return ye.H.use(Ae)},Pn.useActionState=function(Ae,qe,_t){return ye.H.useActionState(Ae,qe,_t)},Pn.useCallback=function(Ae,qe){return ye.H.useCallback(Ae,qe)},Pn.useContext=function(Ae){return ye.H.useContext(Ae)},Pn.useDebugValue=function(){},Pn.useDeferredValue=function(Ae,qe){return ye.H.useDeferredValue(Ae,qe)},Pn.useEffect=function(Ae,qe){return ye.H.useEffect(Ae,qe)},Pn.useEffectEvent=function(Ae){return ye.H.useEffectEvent(Ae)},Pn.useId=function(){return ye.H.useId()},Pn.useImperativeHandle=function(Ae,qe,_t){return ye.H.useImperativeHandle(Ae,qe,_t)},Pn.useInsertionEffect=function(Ae,qe){return ye.H.useInsertionEffect(Ae,qe)},Pn.useLayoutEffect=function(Ae,qe){return ye.H.useLayoutEffect(Ae,qe)},Pn.useMemo=function(Ae,qe){return ye.H.useMemo(Ae,qe)},Pn.useOptimistic=function(Ae,qe){return ye.H.useOptimistic(Ae,qe)},Pn.useReducer=function(Ae,qe,_t){return ye.H.useReducer(Ae,qe,_t)},Pn.useRef=function(Ae){return ye.H.useRef(Ae)},Pn.useState=function(Ae){return ye.H.useState(Ae)},Pn.useSyncExternalStore=function(Ae,qe,_t){return ye.H.useSyncExternalStore(Ae,qe,_t)},Pn.useTransition=function(){return ye.H.useTransition()},Pn.version="19.2.0",Pn}var bT;function pg(){return bT||(bT=1,rx.exports=Sj()),rx.exports}var F=pg();const Ut=Fu(F),dS=bj({__proto__:null,default:Ut},[F]);var ix={exports:{}},zy={},ax={exports:{}},ox={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xT;function Tj(){return xT||(xT=1,(function(e){function t(Le,Qe){var Ve=Le.length;Le.push(Qe);e:for(;0<Ve;){var ht=Ve-1>>>1,qt=Le[ht];if(0<d(qt,Qe))Le[ht]=Qe,Le[Ve]=qt,Ve=ht;else break e}}function r(Le){return Le.length===0?null:Le[0]}function a(Le){if(Le.length===0)return null;var Qe=Le[0],Ve=Le.pop();if(Ve!==Qe){Le[0]=Ve;e:for(var ht=0,qt=Le.length,Ae=qt>>>1;ht<Ae;){var qe=2*(ht+1)-1,_t=Le[qe],Tt=qe+1,jt=Le[Tt];if(0>d(_t,Ve))Tt<qt&&0>d(jt,_t)?(Le[ht]=jt,Le[Tt]=Ve,ht=Tt):(Le[ht]=_t,Le[qe]=Ve,ht=qe);else if(Tt<qt&&0>d(jt,Ve))Le[ht]=jt,Le[Tt]=Ve,ht=Tt;else break e}}return Qe}function d(Le,Qe){var Ve=Le.sortIndex-Qe.sortIndex;return Ve!==0?Ve:Le.id-Qe.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var p=performance;e.unstable_now=function(){return p.now()}}else{var m=Date,s=m.now();e.unstable_now=function(){return m.now()-s}}var M=[],C=[],A=1,D=null,R=3,j=!1,G=!1,V=!1,H=!1,Q=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function me(Le){for(var Qe=r(C);Qe!==null;){if(Qe.callback===null)a(C);else if(Qe.startTime<=Le)a(C),Qe.sortIndex=Qe.expirationTime,t(M,Qe);else break;Qe=r(C)}}function fe(Le){if(V=!1,me(Le),!G)if(r(M)!==null)G=!0,_e||(_e=!0,at());else{var Qe=r(C);Qe!==null&&zt(fe,Qe.startTime-Le)}}var _e=!1,ye=-1,Oe=5,nt=-1;function ft(){return H?!0:!(e.unstable_now()-nt<Oe)}function rt(){if(H=!1,_e){var Le=e.unstable_now();nt=Le;var Qe=!0;try{e:{G=!1,V&&(V=!1,te(ye),ye=-1),j=!0;var Ve=R;try{t:{for(me(Le),D=r(M);D!==null&&!(D.expirationTime>Le&&ft());){var ht=D.callback;if(typeof ht=="function"){D.callback=null,R=D.priorityLevel;var qt=ht(D.expirationTime<=Le);if(Le=e.unstable_now(),typeof qt=="function"){D.callback=qt,me(Le),Qe=!0;break t}D===r(M)&&a(M),me(Le)}else a(M);D=r(M)}if(D!==null)Qe=!0;else{var Ae=r(C);Ae!==null&&zt(fe,Ae.startTime-Le),Qe=!1}}break e}finally{D=null,R=Ve,j=!1}Qe=void 0}}finally{Qe?at():_e=!1}}}var at;if(typeof ne=="function")at=function(){ne(rt)};else if(typeof MessageChannel<"u"){var Et=new MessageChannel,At=Et.port2;Et.port1.onmessage=rt,at=function(){At.postMessage(null)}}else at=function(){Q(rt,0)};function zt(Le,Qe){ye=Q(function(){Le(e.unstable_now())},Qe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Le){Le.callback=null},e.unstable_forceFrameRate=function(Le){0>Le||125<Le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Oe=0<Le?Math.floor(1e3/Le):5},e.unstable_getCurrentPriorityLevel=function(){return R},e.unstable_next=function(Le){switch(R){case 1:case 2:case 3:var Qe=3;break;default:Qe=R}var Ve=R;R=Qe;try{return Le()}finally{R=Ve}},e.unstable_requestPaint=function(){H=!0},e.unstable_runWithPriority=function(Le,Qe){switch(Le){case 1:case 2:case 3:case 4:case 5:break;default:Le=3}var Ve=R;R=Le;try{return Qe()}finally{R=Ve}},e.unstable_scheduleCallback=function(Le,Qe,Ve){var ht=e.unstable_now();switch(typeof Ve=="object"&&Ve!==null?(Ve=Ve.delay,Ve=typeof Ve=="number"&&0<Ve?ht+Ve:ht):Ve=ht,Le){case 1:var qt=-1;break;case 2:qt=250;break;case 5:qt=1073741823;break;case 4:qt=1e4;break;default:qt=5e3}return qt=Ve+qt,Le={id:A++,callback:Qe,priorityLevel:Le,startTime:Ve,expirationTime:qt,sortIndex:-1},Ve>ht?(Le.sortIndex=Ve,t(C,Le),r(M)===null&&Le===r(C)&&(V?(te(ye),ye=-1):V=!0,zt(fe,Ve-ht))):(Le.sortIndex=qt,t(M,Le),G||j||(G=!0,_e||(_e=!0,at()))),Le},e.unstable_shouldYield=ft,e.unstable_wrapCallback=function(Le){var Qe=R;return function(){var Ve=R;R=Qe;try{return Le.apply(this,arguments)}finally{R=Ve}}}})(ox)),ox}var wT;function Mj(){return wT||(wT=1,ax.exports=Tj()),ax.exports}var sx={exports:{}},yo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ST;function Cj(){if(ST)return yo;ST=1;var e=pg();function t(M){var C="https://react.dev/errors/"+M;if(1<arguments.length){C+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)C+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+M+"; visit "+C+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},d=Symbol.for("react.portal");function p(M,C,A){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:D==null?null:""+D,children:M,containerInfo:C,implementation:A}}var m=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(M,C){if(M==="font")return"";if(typeof C=="string")return C==="use-credentials"?C:""}return yo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,yo.createPortal=function(M,C){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!C||C.nodeType!==1&&C.nodeType!==9&&C.nodeType!==11)throw Error(t(299));return p(M,C,null,A)},yo.flushSync=function(M){var C=m.T,A=a.p;try{if(m.T=null,a.p=2,M)return M()}finally{m.T=C,a.p=A,a.d.f()}},yo.preconnect=function(M,C){typeof M=="string"&&(C?(C=C.crossOrigin,C=typeof C=="string"?C==="use-credentials"?C:"":void 0):C=null,a.d.C(M,C))},yo.prefetchDNS=function(M){typeof M=="string"&&a.d.D(M)},yo.preinit=function(M,C){if(typeof M=="string"&&C&&typeof C.as=="string"){var A=C.as,D=s(A,C.crossOrigin),R=typeof C.integrity=="string"?C.integrity:void 0,j=typeof C.fetchPriority=="string"?C.fetchPriority:void 0;A==="style"?a.d.S(M,typeof C.precedence=="string"?C.precedence:void 0,{crossOrigin:D,integrity:R,fetchPriority:j}):A==="script"&&a.d.X(M,{crossOrigin:D,integrity:R,fetchPriority:j,nonce:typeof C.nonce=="string"?C.nonce:void 0})}},yo.preinitModule=function(M,C){if(typeof M=="string")if(typeof C=="object"&&C!==null){if(C.as==null||C.as==="script"){var A=s(C.as,C.crossOrigin);a.d.M(M,{crossOrigin:A,integrity:typeof C.integrity=="string"?C.integrity:void 0,nonce:typeof C.nonce=="string"?C.nonce:void 0})}}else C==null&&a.d.M(M)},yo.preload=function(M,C){if(typeof M=="string"&&typeof C=="object"&&C!==null&&typeof C.as=="string"){var A=C.as,D=s(A,C.crossOrigin);a.d.L(M,A,{crossOrigin:D,integrity:typeof C.integrity=="string"?C.integrity:void 0,nonce:typeof C.nonce=="string"?C.nonce:void 0,type:typeof C.type=="string"?C.type:void 0,fetchPriority:typeof C.fetchPriority=="string"?C.fetchPriority:void 0,referrerPolicy:typeof C.referrerPolicy=="string"?C.referrerPolicy:void 0,imageSrcSet:typeof C.imageSrcSet=="string"?C.imageSrcSet:void 0,imageSizes:typeof C.imageSizes=="string"?C.imageSizes:void 0,media:typeof C.media=="string"?C.media:void 0})}},yo.preloadModule=function(M,C){if(typeof M=="string")if(C){var A=s(C.as,C.crossOrigin);a.d.m(M,{as:typeof C.as=="string"&&C.as!=="script"?C.as:void 0,crossOrigin:A,integrity:typeof C.integrity=="string"?C.integrity:void 0})}else a.d.m(M)},yo.requestFormReset=function(M){a.d.r(M)},yo.unstable_batchedUpdates=function(M,C){return M(C)},yo.useFormState=function(M,C,A){return m.H.useFormState(M,C,A)},yo.useFormStatus=function(){return m.H.useHostTransitionStatus()},yo.version="19.2.0",yo}var TT;function vP(){if(TT)return sx.exports;TT=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),sx.exports=Cj(),sx.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MT;function Ej(){if(MT)return zy;MT=1;var e=Mj(),t=pg(),r=vP();function a(o){var h="https://react.dev/errors/"+o;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+o+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function p(o){var h=o,y=o;if(o.alternate)for(;h.return;)h=h.return;else{o=h;do h=o,(h.flags&4098)!==0&&(y=h.return),o=h.return;while(o)}return h.tag===3?y:null}function m(o){if(o.tag===13){var h=o.memoizedState;if(h===null&&(o=o.alternate,o!==null&&(h=o.memoizedState)),h!==null)return h.dehydrated}return null}function s(o){if(o.tag===31){var h=o.memoizedState;if(h===null&&(o=o.alternate,o!==null&&(h=o.memoizedState)),h!==null)return h.dehydrated}return null}function M(o){if(p(o)!==o)throw Error(a(188))}function C(o){var h=o.alternate;if(!h){if(h=p(o),h===null)throw Error(a(188));return h!==o?null:o}for(var y=o,w=h;;){var O=y.return;if(O===null)break;var L=O.alternate;if(L===null){if(w=O.return,w!==null){y=w;continue}break}if(O.child===L.child){for(L=O.child;L;){if(L===y)return M(O),o;if(L===w)return M(O),h;L=L.sibling}throw Error(a(188))}if(y.return!==w.return)y=O,w=L;else{for(var Y=!1,le=O.child;le;){if(le===y){Y=!0,y=O,w=L;break}if(le===w){Y=!0,w=O,y=L;break}le=le.sibling}if(!Y){for(le=L.child;le;){if(le===y){Y=!0,y=L,w=O;break}if(le===w){Y=!0,w=L,y=O;break}le=le.sibling}if(!Y)throw Error(a(189))}}if(y.alternate!==w)throw Error(a(190))}if(y.tag!==3)throw Error(a(188));return y.stateNode.current===y?o:h}function A(o){var h=o.tag;if(h===5||h===26||h===27||h===6)return o;for(o=o.child;o!==null;){if(h=A(o),h!==null)return h;o=o.sibling}return null}var D=Object.assign,R=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),ye=Symbol.for("react.memo"),Oe=Symbol.for("react.lazy"),nt=Symbol.for("react.activity"),ft=Symbol.for("react.memo_cache_sentinel"),rt=Symbol.iterator;function at(o){return o===null||typeof o!="object"?null:(o=rt&&o[rt]||o["@@iterator"],typeof o=="function"?o:null)}var Et=Symbol.for("react.client.reference");function At(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===Et?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case V:return"Fragment";case Q:return"Profiler";case H:return"StrictMode";case fe:return"Suspense";case _e:return"SuspenseList";case nt:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case G:return"Portal";case ne:return o.displayName||"Context";case te:return(o._context.displayName||"Context")+".Consumer";case me:var h=o.render;return o=o.displayName,o||(o=h.displayName||h.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case ye:return h=o.displayName||null,h!==null?h:At(o.type)||"Memo";case Oe:h=o._payload,o=o._init;try{return At(o(h))}catch{}}return null}var zt=Array.isArray,Le=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Qe=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ve={pending:!1,data:null,method:null,action:null},ht=[],qt=-1;function Ae(o){return{current:o}}function qe(o){0>qt||(o.current=ht[qt],ht[qt]=null,qt--)}function _t(o,h){qt++,ht[qt]=o.current,o.current=h}var Tt=Ae(null),jt=Ae(null),Ht=Ae(null),bt=Ae(null);function nn(o,h){switch(_t(Ht,h),_t(jt,o),_t(Tt,null),h.nodeType){case 9:case 11:o=(o=h.documentElement)&&(o=o.namespaceURI)?Sy(o):0;break;default:if(o=h.tagName,h=h.namespaceURI)h=Sy(h),o=Rc(h,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}qe(Tt),_t(Tt,o)}function pt(){qe(Tt),qe(jt),qe(Ht)}function Rt(o){o.memoizedState!==null&&_t(bt,o);var h=Tt.current,y=Rc(h,o.type);h!==y&&(_t(jt,o),_t(Tt,y))}function Ft(o){jt.current===o&&(qe(Tt),qe(jt)),bt.current===o&&(qe(bt),et._currentValue=Ve)}var ot,rn;function Wt(o){if(ot===void 0)try{throw Error()}catch(y){var h=y.stack.trim().match(/\n( *(at )?)/);ot=h&&h[1]||"",rn=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ot+o+rn}var Vn=!1;function Zn(o,h){if(!o||Vn)return"";Vn=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(h){var vt=function(){throw Error()};if(Object.defineProperty(vt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(vt,[])}catch(it){var tt=it}Reflect.construct(o,[],vt)}else{try{vt.call()}catch(it){tt=it}o.call(vt.prototype)}}else{try{throw Error()}catch(it){tt=it}(vt=o())&&typeof vt.catch=="function"&&vt.catch(function(){})}}catch(it){if(it&&tt&&typeof it.stack=="string")return[it.stack,tt.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var O=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");O&&O.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var L=w.DetermineComponentFrameRoot(),Y=L[0],le=L[1];if(Y&&le){var Pe=Y.split(`
`),Je=le.split(`
`);for(O=w=0;w<Pe.length&&!Pe[w].includes("DetermineComponentFrameRoot");)w++;for(;O<Je.length&&!Je[O].includes("DetermineComponentFrameRoot");)O++;if(w===Pe.length||O===Je.length)for(w=Pe.length-1,O=Je.length-1;1<=w&&0<=O&&Pe[w]!==Je[O];)O--;for(;1<=w&&0<=O;w--,O--)if(Pe[w]!==Je[O]){if(w!==1||O!==1)do if(w--,O--,0>O||Pe[w]!==Je[O]){var ct=`
`+Pe[w].replace(" at new "," at ");return o.displayName&&ct.includes("<anonymous>")&&(ct=ct.replace("<anonymous>",o.displayName)),ct}while(1<=w&&0<=O);break}}}finally{Vn=!1,Error.prepareStackTrace=y}return(y=o?o.displayName||o.name:"")?Wt(y):""}function Wr(o,h){switch(o.tag){case 26:case 27:case 5:return Wt(o.type);case 16:return Wt("Lazy");case 13:return o.child!==h&&h!==null?Wt("Suspense Fallback"):Wt("Suspense");case 19:return Wt("SuspenseList");case 0:case 15:return Zn(o.type,!1);case 11:return Zn(o.type.render,!1);case 1:return Zn(o.type,!0);case 31:return Wt("Activity");default:return""}}function Pa(o){try{var h="",y=null;do h+=Wr(o,y),y=o,o=o.return;while(o);return h}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}var Oi=Object.prototype.hasOwnProperty,qo=e.unstable_scheduleCallback,fs=e.unstable_cancelCallback,wo=e.unstable_shouldYield,ha=e.unstable_requestPaint,Rr=e.unstable_now,ec=e.unstable_getCurrentPriorityLevel,Ji=e.unstable_ImmediatePriority,So=e.unstable_UserBlockingPriority,Ii=e.unstable_NormalPriority,ze=e.unstable_LowPriority,ie=e.unstable_IdlePriority,ae=e.log,ce=e.unstable_setDisableYieldValue,Se=null,Me=null;function Ie(o){if(typeof ae=="function"&&ce(o),Me&&typeof Me.setStrictMode=="function")try{Me.setStrictMode(Se,o)}catch{}}var $e=Math.clz32?Math.clz32:st,Be=Math.log,Ue=Math.LN2;function st(o){return o>>>=0,o===0?32:31-(Be(o)/Ue|0)|0}var Ge=256,Mt=262144,Lt=4194304;function ke(o){var h=o&42;if(h!==0)return h;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function wn(o,h,y){var w=o.pendingLanes;if(w===0)return 0;var O=0,L=o.suspendedLanes,Y=o.pingedLanes;o=o.warmLanes;var le=w&134217727;return le!==0?(w=le&~L,w!==0?O=ke(w):(Y&=le,Y!==0?O=ke(Y):y||(y=le&~o,y!==0&&(O=ke(y))))):(le=w&~L,le!==0?O=ke(le):Y!==0?O=ke(Y):y||(y=w&~o,y!==0&&(O=ke(y)))),O===0?0:h!==0&&h!==O&&(h&L)===0&&(L=O&-O,y=h&-h,L>=y||L===32&&(y&4194048)!==0)?h:O}function On(o,h){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&h)===0}function $t(o,h){switch(o){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sn(){var o=Lt;return Lt<<=1,(Lt&62914560)===0&&(Lt=4194304),o}function xr(o){for(var h=[],y=0;31>y;y++)h.push(o);return h}function jr(o,h){o.pendingLanes|=h,h!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function ti(o,h,y,w,O,L){var Y=o.pendingLanes;o.pendingLanes=y,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=y,o.entangledLanes&=y,o.errorRecoveryDisabledLanes&=y,o.shellSuspendCounter=0;var le=o.entanglements,Pe=o.expirationTimes,Je=o.hiddenUpdates;for(y=Y&~y;0<y;){var ct=31-$e(y),vt=1<<ct;le[ct]=0,Pe[ct]=-1;var tt=Je[ct];if(tt!==null)for(Je[ct]=null,ct=0;ct<tt.length;ct++){var it=tt[ct];it!==null&&(it.lane&=-536870913)}y&=~vt}w!==0&&wi(o,w,0),L!==0&&O===0&&o.tag!==0&&(o.suspendedLanes|=L&~(Y&~h))}function wi(o,h,y){o.pendingLanes|=h,o.suspendedLanes&=~h;var w=31-$e(h);o.entangledLanes|=h,o.entanglements[w]=o.entanglements[w]|1073741824|y&261930}function ir(o,h){var y=o.entangledLanes|=h;for(o=o.entanglements;y;){var w=31-$e(y),O=1<<w;O&h|o[w]&h&&(o[w]|=h),y&=~O}}function ni(o,h){var y=h&-h;return y=(y&42)!==0?1:qn(y),(y&(o.suspendedLanes|h))!==0?0:y}function qn(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function yt(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function To(){var o=Qe.p;return o!==0?o:(o=window.event,o===void 0?32:Bi(o.type))}function da(o,h){var y=Qe.p;try{return Qe.p=o,h()}finally{Qe.p=y}}var ri=Math.random().toString(36).slice(2),Ln="__reactFiber$"+ri,xt="__reactProps$"+ri,mn="__reactContainer$"+ri,yn="__reactEvents$"+ri,Da="__reactListeners$"+ri,Go="__reactHandles$"+ri,Mo="__reactResources$"+ri,pn="__reactMarker$"+ri;function al(o){delete o[Ln],delete o[xt],delete o[yn],delete o[Da],delete o[Go]}function Ho(o){var h=o[Ln];if(h)return h;for(var y=o.parentNode;y;){if(h=y[mn]||y[Ln]){if(y=h.alternate,h.child!==null||y!==null&&y.child!==null)for(o=Um(o);o!==null;){if(y=o[Ln])return y;o=Um(o)}return h}o=y,y=o.parentNode}return null}function to(o){if(o=o[Ln]||o[mn]){var h=o.tag;if(h===5||h===6||h===13||h===31||h===26||h===27||h===3)return o}return null}function ps(o){var h=o.tag;if(h===5||h===26||h===27||h===6)return o.stateNode;throw Error(a(33))}function fa(o){var h=o[Mo];return h||(h=o[Mo]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Ar(o){o[pn]=!0}var Br=new Set,pa={};function Xn(o,h){Zo(o,h),Zo(o+"Capture",h)}function Zo(o,h){for(pa[o]=h,o=0;o<h.length;o++)Br.add(h[o])}var Gc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ud={},ol={};function ms(o){return Oi.call(ol,o)?!0:Oi.call(ud,o)?!1:Gc.test(o)?ol[o]=!0:(ud[o]=!0,!1)}function qu(o,h,y){if(ms(h))if(y===null)o.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":o.removeAttribute(h);return;case"boolean":var w=h.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){o.removeAttribute(h);return}}o.setAttribute(h,""+y)}}function Hc(o,h,y){if(y===null)o.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttribute(h,""+y)}}function Wo(o,h,y,w){if(w===null)o.removeAttribute(y);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(y);return}o.setAttributeNS(h,y,""+w)}}function zi(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function mf(o){var h=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Ig(o,h,y){var w=Object.getOwnPropertyDescriptor(o.constructor.prototype,h);if(!o.hasOwnProperty(h)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var O=w.get,L=w.set;return Object.defineProperty(o,h,{configurable:!0,get:function(){return O.call(this)},set:function(Y){y=""+Y,L.call(this,Y)}}),Object.defineProperty(o,h,{enumerable:w.enumerable}),{getValue:function(){return y},setValue:function(Y){y=""+Y},stopTracking:function(){o._valueTracker=null,delete o[h]}}}}function gf(o){if(!o._valueTracker){var h=mf(o)?"checked":"value";o._valueTracker=Ig(o,h,""+o[h])}}function Wp(o){if(!o)return!1;var h=o._valueTracker;if(!h)return!0;var y=h.getValue(),w="";return o&&(w=mf(o)?o.checked?"true":"false":o.value),o=w,o!==y?(h.setValue(o),!0):!1}function Gu(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var yf=/[\n"\\]/g;function Si(o){return o.replace(yf,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function Hu(o,h,y,w,O,L,Y,le){o.name="",Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?o.type=Y:o.removeAttribute("type"),h!=null?Y==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+zi(h)):o.value!==""+zi(h)&&(o.value=""+zi(h)):Y!=="submit"&&Y!=="reset"||o.removeAttribute("value"),h!=null?gs(o,Y,zi(h)):y!=null?gs(o,Y,zi(y)):w!=null&&o.removeAttribute("value"),O==null&&L!=null&&(o.defaultChecked=!!L),O!=null&&(o.checked=O&&typeof O!="function"&&typeof O!="symbol"),le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?o.name=""+zi(le):o.removeAttribute("name")}function vf(o,h,y,w,O,L,Y,le){if(L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(o.type=L),h!=null||y!=null){if(!(L!=="submit"&&L!=="reset"||h!=null)){gf(o);return}y=y!=null?""+zi(y):"",h=h!=null?""+zi(h):y,le||h===o.value||(o.value=h),o.defaultValue=h}w=w??O,w=typeof w!="function"&&typeof w!="symbol"&&!!w,o.checked=le?o.checked:!!w,o.defaultChecked=!!w,Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(o.name=Y),gf(o)}function gs(o,h,y){h==="number"&&Gu(o.ownerDocument)===o||o.defaultValue===""+y||(o.defaultValue=""+y)}function sl(o,h,y,w){if(o=o.options,h){h={};for(var O=0;O<y.length;O++)h["$"+y[O]]=!0;for(y=0;y<o.length;y++)O=h.hasOwnProperty("$"+o[y].value),o[y].selected!==O&&(o[y].selected=O),O&&w&&(o[y].defaultSelected=!0)}else{for(y=""+zi(y),h=null,O=0;O<o.length;O++){if(o[O].value===y){o[O].selected=!0,w&&(o[O].defaultSelected=!0);return}h!==null||o[O].disabled||(h=o[O])}h!==null&&(h.selected=!0)}}function Yp(o,h,y){if(h!=null&&(h=""+zi(h),h!==o.value&&(o.value=h),y==null)){o.defaultValue!==h&&(o.defaultValue=h);return}o.defaultValue=y!=null?""+zi(y):""}function Zc(o,h,y,w){if(h==null){if(w!=null){if(y!=null)throw Error(a(92));if(zt(w)){if(1<w.length)throw Error(a(93));w=w[0]}y=w}y==null&&(y=""),h=y}y=zi(h),o.defaultValue=y,w=o.textContent,w===y&&w!==""&&w!==null&&(o.value=w),gf(o)}function Yo(o,h){if(h){var y=o.firstChild;if(y&&y===o.lastChild&&y.nodeType===3){y.nodeValue=h;return}}o.textContent=h}var _f=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ui(o,h,y){var w=h.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?w?o.setProperty(h,""):h==="float"?o.cssFloat="":o[h]="":w?o.setProperty(h,y):typeof y!="number"||y===0||_f.has(h)?h==="float"?o.cssFloat=y:o[h]=(""+y).trim():o[h]=y+"px"}function Dn(o,h,y){if(h!=null&&typeof h!="object")throw Error(a(62));if(o=o.style,y!=null){for(var w in y)!y.hasOwnProperty(w)||h!=null&&h.hasOwnProperty(w)||(w.indexOf("--")===0?o.setProperty(w,""):w==="float"?o.cssFloat="":o[w]="");for(var O in h)w=h[O],h.hasOwnProperty(O)&&y[O]!==w&&Ui(o,O,w)}else for(var L in h)h.hasOwnProperty(L)&&Ui(o,L,h[L])}function ll(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ea=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xn(o){return tc.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function ka(){}var nc=null;function cl(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var hi=null,Fr=null;function di(o){var h=to(o);if(h&&(o=h.stateNode)){var y=o[xt]||null;e:switch(o=h.stateNode,h.type){case"input":if(Hu(o,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),h=y.name,y.type==="radio"&&h!=null){for(y=o;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+Si(""+h)+'"][type="radio"]'),h=0;h<y.length;h++){var w=y[h];if(w!==o&&w.form===o.form){var O=w[xt]||null;if(!O)throw Error(a(90));Hu(w,O.value,O.defaultValue,O.defaultValue,O.checked,O.defaultChecked,O.type,O.name)}}for(h=0;h<y.length;h++)w=y[h],w.form===o.form&&Wp(w)}break e;case"textarea":Yp(o,y.value,y.defaultValue);break e;case"select":h=y.value,h!=null&&sl(o,!!y.multiple,h,!1)}}}var fi=!1;function hr(o,h,y){if(fi)return o(h,y);fi=!0;try{var w=o(h);return w}finally{if(fi=!1,(hi!==null||Fr!==null)&&(Sm(),hi&&(h=hi,o=Fr,Fr=hi=null,di(h),o)))for(h=0;h<o.length;h++)di(o[h])}}function Xo(o,h){var y=o.stateNode;if(y===null)return null;var w=y[xt]||null;if(w===null)return null;y=w[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(o=o.type,w=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!w;break e;default:o=!1}if(o)return null;if(y&&typeof y!="function")throw Error(a(231,h,typeof y));return y}var Lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ta=!1;if(Lr)try{var Ti={};Object.defineProperty(Ti,"passive",{get:function(){ta=!0}}),window.addEventListener("test",Ti,Ti),window.removeEventListener("test",Ti,Ti)}catch{ta=!1}var no=null,Kn=null,yr=null;function Mn(){if(yr)return yr;var o,h=Kn,y=h.length,w,O="value"in no?no.value:no.textContent,L=O.length;for(o=0;o<y&&h[o]===O[o];o++);var Y=y-o;for(w=1;w<=Y&&h[y-w]===O[L-w];w++);return yr=O.slice(o,1<w?1-w:void 0)}function on(o){var h=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&h===13&&(o=13)):o=h,o===10&&(o=13),32<=o||o===13?o:0}function ys(){return!0}function vn(){return!1}function Ri(o){function h(y,w,O,L,Y){this._reactName=y,this._targetInst=O,this.type=w,this.nativeEvent=L,this.target=Y,this.currentTarget=null;for(var le in o)o.hasOwnProperty(le)&&(y=o[le],this[le]=y?y(L):L[le]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?ys:vn,this.isPropagationStopped=vn,this}return D(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=ys)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=ys)},persist:function(){},isPersistent:ys}),h}var Ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wc=Ri(Ur),vs=D({},Ur,{view:0,detail:0}),Zu=Ri(vs),ul,rc,ic,ac=D({},vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wu,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==ic&&(ic&&o.type==="mousemove"?(ul=o.screenX-ic.screenX,rc=o.screenY-ic.screenY):rc=ul=0,ic=o),ul)},movementY:function(o){return"movementY"in o?o.movementY:rc}}),Yc=Ri(ac),Ko=D({},ac,{dataTransfer:0}),Mi=Ri(Ko),oc=D({},vs,{relatedTarget:0}),sc=Ri(oc),hl=D({},Ur,{animationName:0,elapsedTime:0,pseudoElement:0}),Ci=Ri(hl),hd=D({},Ur,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),dd=Ri(hd),Xp=D({},Ur,{data:0}),Kp=Ri(Xp),pi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ro={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fd(o){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(o):(o=ro[o])?!!h[o]:!1}function Wu(){return fd}var Yu=D({},vs,{key:function(o){if(o.key){var h=pi[o.key]||o.key;if(h!=="Unidentified")return h}return o.type==="keypress"?(o=on(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Xc[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wu,charCode:function(o){return o.type==="keypress"?on(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?on(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),_s=Ri(Yu),Co=D({},ac,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bf=Ri(Co),pd=D({},vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wu}),zg=Ri(pd),xf=D({},Ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rg=Ri(xf),md=D({},ac,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),wf=Ri(md),gd=D({},Ur,{newState:0,oldState:0}),Kc=Ri(gd),Sf=[9,13,27,32],Oa=Lr&&"CompositionEvent"in window,Qc=null;Lr&&"documentMode"in document&&(Qc=document.documentMode);var Tf=Lr&&"TextEvent"in window&&!Qc,lc=Lr&&(!Oa||Qc&&8<Qc&&11>=Qc),Jc=" ",Qp=!1;function Xu(o,h){switch(o){case"keyup":return Sf.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jp(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Eo=!1;function em(o,h){switch(o){case"compositionend":return Jp(h);case"keypress":return h.which!==32?null:(Qp=!0,Jc);case"textInput":return o=h.data,o===Jc&&Qp?null:o;default:return null}}function Mf(o,h){if(Eo)return o==="compositionend"||!Oa&&Xu(o,h)?(o=Mn(),yr=Kn=no=null,Eo=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return lc&&h.locale!=="ko"?null:h.data;default:return null}}var tm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cf(o){var h=o&&o.nodeName&&o.nodeName.toLowerCase();return h==="input"?!!tm[o.type]:h==="textarea"}function yd(o,h,y,w){hi?Fr?Fr.push(w):Fr=[w]:hi=w,h=fp(h,"onChange"),0<h.length&&(y=new Wc("onChange","change",null,y,w),o.push({event:y,listeners:h}))}var eu=null,tu=null;function Ku(o){l_(o,0)}function Qu(o){var h=ps(o);if(Wp(h))return o}function dl(o,h){if(o==="change")return h}var Ef=!1;if(Lr){var vd;if(Lr){var bs="oninput"in document;if(!bs){var Af=document.createElement("div");Af.setAttribute("oninput","return;"),bs=typeof Af.oninput=="function"}vd=bs}else vd=!1;Ef=vd&&(!document.documentMode||9<document.documentMode)}function Ju(){eu&&(eu.detachEvent("onpropertychange",nm),tu=eu=null)}function nm(o){if(o.propertyName==="value"&&Qu(tu)){var h=[];yd(h,tu,o,cl(o)),hr(Ku,h)}}function rm(o,h,y){o==="focusin"?(Ju(),eu=h,tu=y,eu.attachEvent("onpropertychange",nm)):o==="focusout"&&Ju()}function Pf(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Qu(tu)}function im(o,h){if(o==="click")return Qu(h)}function am(o,h){if(o==="input"||o==="change")return Qu(h)}function Df(o,h){return o===h&&(o!==0||1/o===1/h)||o!==o&&h!==h}var na=typeof Object.is=="function"?Object.is:Df;function fl(o,h){if(na(o,h))return!0;if(typeof o!="object"||o===null||typeof h!="object"||h===null)return!1;var y=Object.keys(o),w=Object.keys(h);if(y.length!==w.length)return!1;for(w=0;w<y.length;w++){var O=y[w];if(!Oi.call(h,O)||!na(o[O],h[O]))return!1}return!0}function Qo(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function _d(o,h){var y=Qo(o);o=0;for(var w;y;){if(y.nodeType===3){if(w=o+y.textContent.length,o<=h&&w>=h)return{node:y,offset:h-o};o=w}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=Qo(y)}}function bd(o,h){return o&&h?o===h?!0:o&&o.nodeType===3?!1:h&&h.nodeType===3?bd(o,h.parentNode):"contains"in o?o.contains(h):o.compareDocumentPosition?!!(o.compareDocumentPosition(h)&16):!1:!1}function Nn(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var h=Gu(o.document);h instanceof o.HTMLIFrameElement;){try{var y=typeof h.contentWindow.location.href=="string"}catch{y=!1}if(y)o=h.contentWindow;else break;h=Gu(o.document)}return h}function xd(o){var h=o&&o.nodeName&&o.nodeName.toLowerCase();return h&&(h==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||h==="textarea"||o.contentEditable==="true")}var kf=Lr&&"documentMode"in document&&11>=document.documentMode,io=null,eh=null,th=null,Of=!1;function om(o,h,y){var w=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;Of||io==null||io!==Gu(w)||(w=io,"selectionStart"in w&&xd(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),th&&fl(th,w)||(th=w,w=fp(eh,"onSelect"),0<w.length&&(h=new Wc("onSelect","select",null,h,y),o.push({event:h,listeners:w}),h.target=io)))}function cc(o,h){var y={};return y[o.toLowerCase()]=h.toLowerCase(),y["Webkit"+o]="webkit"+h,y["Moz"+o]="moz"+h,y}var uc={animationend:cc("Animation","AnimationEnd"),animationiteration:cc("Animation","AnimationIteration"),animationstart:cc("Animation","AnimationStart"),transitionrun:cc("Transition","TransitionRun"),transitionstart:cc("Transition","TransitionStart"),transitioncancel:cc("Transition","TransitionCancel"),transitionend:cc("Transition","TransitionEnd")},If={},zf={};Lr&&(zf=document.createElement("div").style,"AnimationEvent"in window||(delete uc.animationend.animation,delete uc.animationiteration.animation,delete uc.animationstart.animation),"TransitionEvent"in window||delete uc.transitionend.transition);function Jo(o){if(If[o])return If[o];if(!uc[o])return o;var h=uc[o],y;for(y in h)if(h.hasOwnProperty(y)&&y in zf)return If[o]=h[y];return o}var nh=Jo("animationend"),rh=Jo("animationiteration"),wd=Jo("animationstart"),hc=Jo("transitionrun"),ih=Jo("transitionstart"),nu=Jo("transitioncancel"),Ia=Jo("transitionend"),Rf=new Map,Sd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sd.push("scrollEnd");function za(o,h){Rf.set(o,h),Xn(h,[o])}var es=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},ra=[],xs=0,dc=0;function fc(){for(var o=xs,h=dc=xs=0;h<o;){var y=ra[h];ra[h++]=null;var w=ra[h];ra[h++]=null;var O=ra[h];ra[h++]=null;var L=ra[h];if(ra[h++]=null,w!==null&&O!==null){var Y=w.pending;Y===null?O.next=O:(O.next=Y.next,Y.next=O),w.pending=O}L!==0&&jf(y,O,L)}}function ah(o,h,y,w){ra[xs++]=o,ra[xs++]=h,ra[xs++]=y,ra[xs++]=w,dc|=w,o.lanes|=w,o=o.alternate,o!==null&&(o.lanes|=w)}function pl(o,h,y,w){return ah(o,h,y,w),ml(o)}function ao(o,h){return ah(o,null,null,h),ml(o)}function jf(o,h,y){o.lanes|=y;var w=o.alternate;w!==null&&(w.lanes|=y);for(var O=!1,L=o.return;L!==null;)L.childLanes|=y,w=L.alternate,w!==null&&(w.childLanes|=y),L.tag===22&&(o=L.stateNode,o===null||o._visibility&1||(O=!0)),o=L,L=L.return;return o.tag===3?(L=o.stateNode,O&&h!==null&&(O=31-$e(y),o=L.hiddenUpdates,w=o[O],w===null?o[O]=[h]:w.push(h),h.lane=y|536870912),L):null}function ml(o){if(50<qr)throw qr=0,ap=null,Error(a(185));for(var h=o.return;h!==null;)o=h,h=o.return;return o.tag===3?o.stateNode:null}var _n={};function Td(o,h,y,w){this.tag=o,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ra(o,h,y,w){return new Td(o,h,y,w)}function oh(o){return o=o.prototype,!(!o||!o.isReactComponent)}function ja(o,h){var y=o.alternate;return y===null?(y=Ra(o.tag,h,o.key,o.mode),y.elementType=o.elementType,y.type=o.type,y.stateNode=o.stateNode,y.alternate=o,o.alternate=y):(y.pendingProps=h,y.type=o.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=o.flags&65011712,y.childLanes=o.childLanes,y.lanes=o.lanes,y.child=o.child,y.memoizedProps=o.memoizedProps,y.memoizedState=o.memoizedState,y.updateQueue=o.updateQueue,h=o.dependencies,y.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},y.sibling=o.sibling,y.index=o.index,y.ref=o.ref,y.refCleanup=o.refCleanup,y}function sm(o,h){o.flags&=65011714;var y=o.alternate;return y===null?(o.childLanes=0,o.lanes=h,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=y.childLanes,o.lanes=y.lanes,o.child=y.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=y.memoizedProps,o.memoizedState=y.memoizedState,o.updateQueue=y.updateQueue,o.type=y.type,h=y.dependencies,o.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),o}function pc(o,h,y,w,O,L){var Y=0;if(w=o,typeof o=="function")oh(o)&&(Y=1);else if(typeof o=="string")Y=J(o,y,Tt.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case nt:return o=Ra(31,y,h,O),o.elementType=nt,o.lanes=L,o;case V:return ws(y.children,O,L,h);case H:Y=8,O|=24;break;case Q:return o=Ra(12,y,h,O|2),o.elementType=Q,o.lanes=L,o;case fe:return o=Ra(13,y,h,O),o.elementType=fe,o.lanes=L,o;case _e:return o=Ra(19,y,h,O),o.elementType=_e,o.lanes=L,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case ne:Y=10;break e;case te:Y=9;break e;case me:Y=11;break e;case ye:Y=14;break e;case Oe:Y=16,w=null;break e}Y=29,y=Error(a(130,o===null?"null":typeof o,"")),w=null}return h=Ra(Y,y,h,O),h.elementType=o,h.type=w,h.lanes=L,h}function ws(o,h,y,w){return o=Ra(7,o,w,h),o.lanes=y,o}function Lf(o,h,y){return o=Ra(6,o,null,h),o.lanes=y,o}function Md(o){var h=Ra(18,null,null,0);return h.stateNode=o,h}function ru(o,h,y){return h=Ra(4,o.children!==null?o.children:[],o.key,h),h.lanes=y,h.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},h}var sh=new WeakMap;function ia(o,h){if(typeof o=="object"&&o!==null){var y=sh.get(o);return y!==void 0?y:(h={value:o,source:h,stack:Pa(h)},sh.set(o,h),h)}return{value:o,source:h,stack:Pa(h)}}var Ss=[],gl=0,mc=null,yl=0,$i=[],Ei=0,Ao=null,ts=1,ma="";function Ts(o,h){Ss[gl++]=yl,Ss[gl++]=mc,mc=o,yl=h}function Nf(o,h,y){$i[Ei++]=ts,$i[Ei++]=ma,$i[Ei++]=Ao,Ao=o;var w=ts;o=ma;var O=32-$e(w)-1;w&=~(1<<O),y+=1;var L=32-$e(h)+O;if(30<L){var Y=O-O%5;L=(w&(1<<Y)-1).toString(32),w>>=Y,O-=Y,ts=1<<32-$e(h)+O|y<<O|w,ma=L+o}else ts=1<<L|y<<O|w,ma=o}function gc(o){o.return!==null&&(Ts(o,1),Nf(o,1,0))}function iu(o){for(;o===mc;)mc=Ss[--gl],Ss[gl]=null,yl=Ss[--gl],Ss[gl]=null;for(;o===Ao;)Ao=$i[--Ei],$i[Ei]=null,ma=$i[--Ei],$i[Ei]=null,ts=$i[--Ei],$i[Ei]=null}function lh(o,h){$i[Ei++]=ts,$i[Ei++]=ma,$i[Ei++]=Ao,ts=h.id,ma=h.overflow,Ao=o}var ii=null,Jn=null,kn=!1,Po=null,La=!1,Pr=Error(a(519));function ga(o){var h=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ns(ia(h,o)),Pr}function Na(o){var h=o.stateNode,y=o.type,w=o.memoizedProps;switch(h[Ln]=o,h[xt]=w,y){case"dialog":Fn("cancel",h),Fn("close",h);break;case"iframe":case"object":case"embed":Fn("load",h);break;case"video":case"audio":for(y=0;y<hp.length;y++)Fn(hp[y],h);break;case"source":Fn("error",h);break;case"img":case"image":case"link":Fn("error",h),Fn("load",h);break;case"details":Fn("toggle",h);break;case"input":Fn("invalid",h),vf(h,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0);break;case"select":Fn("invalid",h);break;case"textarea":Fn("invalid",h),Zc(h,w.value,w.defaultValue,w.children)}y=w.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||h.textContent===""+y||w.suppressHydrationWarning===!0||xy(h.textContent,y)?(w.popover!=null&&(Fn("beforetoggle",h),Fn("toggle",h)),w.onScroll!=null&&Fn("scroll",h),w.onScrollEnd!=null&&Fn("scrollend",h),w.onClick!=null&&(h.onclick=ka),h=!0):h=!1,h||ga(o,!0)}function Cd(o){for(ii=o.return;ii;)switch(ii.tag){case 5:case 31:case 13:La=!1;return;case 27:case 3:La=!0;return;default:ii=ii.return}}function Ms(o){if(o!==ii)return!1;if(!kn)return Cd(o),kn=!0,!1;var h=o.tag,y;if((y=h!==3&&h!==27)&&((y=h===5)&&(y=o.type,y=!(y!=="form"&&y!=="button")||Lm(o.type,o.memoizedProps)),y=!y),y&&Jn&&ga(o),Cd(o),h===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(a(317));Jn=Ey(o)}else if(h===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(a(317));Jn=Ey(o)}else h===27?(h=Jn,Us(o.type)?(o=Fm,Fm=null,Jn=o):Jn=h):Jn=ii?fo(o.stateNode.nextSibling):null;return!0}function Cs(){Jn=ii=null,kn=!1}function Es(){var o=Po;return o!==null&&(Ha===null?Ha=o:Ha.push.apply(Ha,o),Po=null),o}function ns(o){Po===null?Po=[o]:Po.push(o)}var yc=Ae(null),rs=null,Do=null;function As(o,h,y){_t(yc,h._currentValue),h._currentValue=y}function ko(o){o._currentValue=yc.current,qe(yc)}function ch(o,h,y){for(;o!==null;){var w=o.alternate;if((o.childLanes&h)!==h?(o.childLanes|=h,w!==null&&(w.childLanes|=h)):w!==null&&(w.childLanes&h)!==h&&(w.childLanes|=h),o===y)break;o=o.return}}function vl(o,h,y,w){var O=o.child;for(O!==null&&(O.return=o);O!==null;){var L=O.dependencies;if(L!==null){var Y=O.child;L=L.firstContext;e:for(;L!==null;){var le=L;L=O;for(var Pe=0;Pe<h.length;Pe++)if(le.context===h[Pe]){L.lanes|=y,le=L.alternate,le!==null&&(le.lanes|=y),ch(L.return,y,o),w||(Y=null);break e}L=le.next}}else if(O.tag===18){if(Y=O.return,Y===null)throw Error(a(341));Y.lanes|=y,L=Y.alternate,L!==null&&(L.lanes|=y),ch(Y,y,o),Y=null}else Y=O.child;if(Y!==null)Y.return=O;else for(Y=O;Y!==null;){if(Y===o){Y=null;break}if(O=Y.sibling,O!==null){O.return=Y.return,Y=O;break}Y=Y.return}O=Y}}function oo(o,h,y,w){o=null;for(var O=h,L=!1;O!==null;){if(!L){if((O.flags&524288)!==0)L=!0;else if((O.flags&262144)!==0)break}if(O.tag===10){var Y=O.alternate;if(Y===null)throw Error(a(387));if(Y=Y.memoizedProps,Y!==null){var le=O.type;na(O.pendingProps.value,Y.value)||(o!==null?o.push(le):o=[le])}}else if(O===bt.current){if(Y=O.alternate,Y===null)throw Error(a(387));Y.memoizedState.memoizedState!==O.memoizedState.memoizedState&&(o!==null?o.push(et):o=[et])}O=O.return}o!==null&&vl(h,o,y,w),h.flags|=262144}function uh(o){for(o=o.firstContext;o!==null;){if(!na(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function _l(o){rs=o,Do=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Ai(o){return Bf(rs,o)}function hh(o,h){return rs===null&&_l(o),Bf(o,h)}function Bf(o,h){var y=h._currentValue;if(h={context:h,memoizedValue:y,next:null},Do===null){if(o===null)throw Error(a(308));Do=h,o.dependencies={lanes:0,firstContext:h},o.flags|=524288}else Do=Do.next=h;return y}var au=typeof AbortController<"u"?AbortController:function(){var o=[],h=this.signal={aborted:!1,addEventListener:function(y,w){o.push(w)}};this.abort=function(){h.aborted=!0,o.forEach(function(y){return y()})}},ou=e.unstable_scheduleCallback,ya=e.unstable_NormalPriority,dr={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dh(){return{controller:new au,data:new Map,refCount:0}}function Vi(o){o.refCount--,o.refCount===0&&ou(ya,function(){o.controller.abort()})}var aa=null,bl=0,ji=0,Ba=null;function jg(o,h){if(aa===null){var y=aa=[];bl=0,ji=Su(),Ba={status:"pending",value:void 0,then:function(w){y.push(w)}}}return bl++,h.then(Ed,Ed),h}function Ed(){if(--bl===0&&aa!==null){Ba!==null&&(Ba.status="fulfilled");var o=aa;aa=null,ji=0,Ba=null;for(var h=0;h<o.length;h++)(0,o[h])()}}function Lg(o,h){var y=[],w={status:"pending",value:null,reason:null,then:function(O){y.push(O)}};return o.then(function(){w.status="fulfilled",w.value=h;for(var O=0;O<y.length;O++)(0,y[O])(h)},function(O){for(w.status="rejected",w.reason=O,O=0;O<y.length;O++)(0,y[O])(void 0)}),w}var su=Le.S;Le.S=function(o,h){Qv=Rr(),typeof h=="object"&&h!==null&&typeof h.then=="function"&&jg(o,h),su!==null&&su(o,h)};var xl=Ae(null);function vc(){var o=xl.current;return o!==null?o:gr.pooledCache}function so(o,h){h===null?_t(xl,xl.current):_t(xl,h.pool)}function It(){var o=vc();return o===null?null:{parent:dr._currentValue,pool:o}}var _c=Error(a(460)),fh=Error(a(474)),wl=Error(a(542)),Sl={then:function(){}};function Tl(o){return o=o.status,o==="fulfilled"||o==="rejected"}function bc(o,h,y){switch(y=o[y],y===void 0?o.push(h):y!==h&&(h.then(ka,ka),h=y),h.status){case"fulfilled":return h.value;case"rejected":throw o=h.reason,ph(o),o;default:if(typeof h.status=="string")h.then(ka,ka);else{if(o=gr,o!==null&&100<o.shellSuspendCounter)throw Error(a(482));o=h,o.status="pending",o.then(function(w){if(h.status==="pending"){var O=h;O.status="fulfilled",O.value=w}},function(w){if(h.status==="pending"){var O=h;O.status="rejected",O.reason=w}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw o=h.reason,ph(o),o}throw is=h,_c}}function gn(o){try{var h=o._init;return h(o._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(is=y,_c):y}}var is=null;function Ff(){if(is===null)throw Error(a(459));var o=is;return is=null,o}function ph(o){if(o===_c||o===wl)throw Error(a(483))}var Ml=null,lu=0;function mh(o){var h=lu;return lu+=1,Ml===null&&(Ml=[]),bc(Ml,o,h)}function Cl(o,h){h=h.props.ref,o.ref=h!==void 0?h:null}function gh(o,h){throw h.$$typeof===R?Error(a(525)):(o=Object.prototype.toString.call(h),Error(a(31,o==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":o)))}function Uf(o){function h(Fe,je){if(o){var Ke=Fe.deletions;Ke===null?(Fe.deletions=[je],Fe.flags|=16):Ke.push(je)}}function y(Fe,je){if(!o)return null;for(;je!==null;)h(Fe,je),je=je.sibling;return null}function w(Fe){for(var je=new Map;Fe!==null;)Fe.key!==null?je.set(Fe.key,Fe):je.set(Fe.index,Fe),Fe=Fe.sibling;return je}function O(Fe,je){return Fe=ja(Fe,je),Fe.index=0,Fe.sibling=null,Fe}function L(Fe,je,Ke){return Fe.index=Ke,o?(Ke=Fe.alternate,Ke!==null?(Ke=Ke.index,Ke<je?(Fe.flags|=67108866,je):Ke):(Fe.flags|=67108866,je)):(Fe.flags|=1048576,je)}function Y(Fe){return o&&Fe.alternate===null&&(Fe.flags|=67108866),Fe}function le(Fe,je,Ke,mt){return je===null||je.tag!==6?(je=Lf(Ke,Fe.mode,mt),je.return=Fe,je):(je=O(je,Ke),je.return=Fe,je)}function Pe(Fe,je,Ke,mt){var an=Ke.type;return an===V?ct(Fe,je,Ke.props.children,mt,Ke.key):je!==null&&(je.elementType===an||typeof an=="object"&&an!==null&&an.$$typeof===Oe&&gn(an)===je.type)?(je=O(je,Ke.props),Cl(je,Ke),je.return=Fe,je):(je=pc(Ke.type,Ke.key,Ke.props,null,Fe.mode,mt),Cl(je,Ke),je.return=Fe,je)}function Je(Fe,je,Ke,mt){return je===null||je.tag!==4||je.stateNode.containerInfo!==Ke.containerInfo||je.stateNode.implementation!==Ke.implementation?(je=ru(Ke,Fe.mode,mt),je.return=Fe,je):(je=O(je,Ke.children||[]),je.return=Fe,je)}function ct(Fe,je,Ke,mt,an){return je===null||je.tag!==7?(je=ws(Ke,Fe.mode,mt,an),je.return=Fe,je):(je=O(je,Ke),je.return=Fe,je)}function vt(Fe,je,Ke){if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return je=Lf(""+je,Fe.mode,Ke),je.return=Fe,je;if(typeof je=="object"&&je!==null){switch(je.$$typeof){case j:return Ke=pc(je.type,je.key,je.props,null,Fe.mode,Ke),Cl(Ke,je),Ke.return=Fe,Ke;case G:return je=ru(je,Fe.mode,Ke),je.return=Fe,je;case Oe:return je=gn(je),vt(Fe,je,Ke)}if(zt(je)||at(je))return je=ws(je,Fe.mode,Ke,null),je.return=Fe,je;if(typeof je.then=="function")return vt(Fe,mh(je),Ke);if(je.$$typeof===ne)return vt(Fe,hh(Fe,je),Ke);gh(Fe,je)}return null}function tt(Fe,je,Ke,mt){var an=je!==null?je.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return an!==null?null:le(Fe,je,""+Ke,mt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case j:return Ke.key===an?Pe(Fe,je,Ke,mt):null;case G:return Ke.key===an?Je(Fe,je,Ke,mt):null;case Oe:return Ke=gn(Ke),tt(Fe,je,Ke,mt)}if(zt(Ke)||at(Ke))return an!==null?null:ct(Fe,je,Ke,mt,null);if(typeof Ke.then=="function")return tt(Fe,je,mh(Ke),mt);if(Ke.$$typeof===ne)return tt(Fe,je,hh(Fe,Ke),mt);gh(Fe,Ke)}return null}function it(Fe,je,Ke,mt,an){if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return Fe=Fe.get(Ke)||null,le(je,Fe,""+mt,an);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case j:return Fe=Fe.get(mt.key===null?Ke:mt.key)||null,Pe(je,Fe,mt,an);case G:return Fe=Fe.get(mt.key===null?Ke:mt.key)||null,Je(je,Fe,mt,an);case Oe:return mt=gn(mt),it(Fe,je,Ke,mt,an)}if(zt(mt)||at(mt))return Fe=Fe.get(Ke)||null,ct(je,Fe,mt,an,null);if(typeof mt.then=="function")return it(Fe,je,Ke,mh(mt),an);if(mt.$$typeof===ne)return it(Fe,je,Ke,hh(je,mt),an);gh(je,mt)}return null}function Yt(Fe,je,Ke,mt){for(var an=null,nr=null,Nt=je,cn=je=0,En=null;Nt!==null&&cn<Ke.length;cn++){Nt.index>cn?(En=Nt,Nt=null):En=Nt.sibling;var An=tt(Fe,Nt,Ke[cn],mt);if(An===null){Nt===null&&(Nt=En);break}o&&Nt&&An.alternate===null&&h(Fe,Nt),je=L(An,je,cn),nr===null?an=An:nr.sibling=An,nr=An,Nt=En}if(cn===Ke.length)return y(Fe,Nt),kn&&Ts(Fe,cn),an;if(Nt===null){for(;cn<Ke.length;cn++)Nt=vt(Fe,Ke[cn],mt),Nt!==null&&(je=L(Nt,je,cn),nr===null?an=Nt:nr.sibling=Nt,nr=Nt);return kn&&Ts(Fe,cn),an}for(Nt=w(Nt);cn<Ke.length;cn++)En=it(Nt,Fe,cn,Ke[cn],mt),En!==null&&(o&&En.alternate!==null&&Nt.delete(En.key===null?cn:En.key),je=L(En,je,cn),nr===null?an=En:nr.sibling=En,nr=En);return o&&Nt.forEach(function(go){return h(Fe,go)}),kn&&Ts(Fe,cn),an}function fn(Fe,je,Ke,mt){if(Ke==null)throw Error(a(151));for(var an=null,nr=null,Nt=je,cn=je=0,En=null,An=Ke.next();Nt!==null&&!An.done;cn++,An=Ke.next()){Nt.index>cn?(En=Nt,Nt=null):En=Nt.sibling;var go=tt(Fe,Nt,An.value,mt);if(go===null){Nt===null&&(Nt=En);break}o&&Nt&&go.alternate===null&&h(Fe,Nt),je=L(go,je,cn),nr===null?an=go:nr.sibling=go,nr=go,Nt=En}if(An.done)return y(Fe,Nt),kn&&Ts(Fe,cn),an;if(Nt===null){for(;!An.done;cn++,An=Ke.next())An=vt(Fe,An.value,mt),An!==null&&(je=L(An,je,cn),nr===null?an=An:nr.sibling=An,nr=An);return kn&&Ts(Fe,cn),an}for(Nt=w(Nt);!An.done;cn++,An=Ke.next())An=it(Nt,Fe,cn,An.value,mt),An!==null&&(o&&An.alternate!==null&&Nt.delete(An.key===null?cn:An.key),je=L(An,je,cn),nr===null?an=An:nr.sibling=An,nr=An);return o&&Nt.forEach(function(Fl){return h(Fe,Fl)}),kn&&Ts(Fe,cn),an}function br(Fe,je,Ke,mt){if(typeof Ke=="object"&&Ke!==null&&Ke.type===V&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case j:e:{for(var an=Ke.key;je!==null;){if(je.key===an){if(an=Ke.type,an===V){if(je.tag===7){y(Fe,je.sibling),mt=O(je,Ke.props.children),mt.return=Fe,Fe=mt;break e}}else if(je.elementType===an||typeof an=="object"&&an!==null&&an.$$typeof===Oe&&gn(an)===je.type){y(Fe,je.sibling),mt=O(je,Ke.props),Cl(mt,Ke),mt.return=Fe,Fe=mt;break e}y(Fe,je);break}else h(Fe,je);je=je.sibling}Ke.type===V?(mt=ws(Ke.props.children,Fe.mode,mt,Ke.key),mt.return=Fe,Fe=mt):(mt=pc(Ke.type,Ke.key,Ke.props,null,Fe.mode,mt),Cl(mt,Ke),mt.return=Fe,Fe=mt)}return Y(Fe);case G:e:{for(an=Ke.key;je!==null;){if(je.key===an)if(je.tag===4&&je.stateNode.containerInfo===Ke.containerInfo&&je.stateNode.implementation===Ke.implementation){y(Fe,je.sibling),mt=O(je,Ke.children||[]),mt.return=Fe,Fe=mt;break e}else{y(Fe,je);break}else h(Fe,je);je=je.sibling}mt=ru(Ke,Fe.mode,mt),mt.return=Fe,Fe=mt}return Y(Fe);case Oe:return Ke=gn(Ke),br(Fe,je,Ke,mt)}if(zt(Ke))return Yt(Fe,je,Ke,mt);if(at(Ke)){if(an=at(Ke),typeof an!="function")throw Error(a(150));return Ke=an.call(Ke),fn(Fe,je,Ke,mt)}if(typeof Ke.then=="function")return br(Fe,je,mh(Ke),mt);if(Ke.$$typeof===ne)return br(Fe,je,hh(Fe,Ke),mt);gh(Fe,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint"?(Ke=""+Ke,je!==null&&je.tag===6?(y(Fe,je.sibling),mt=O(je,Ke),mt.return=Fe,Fe=mt):(y(Fe,je),mt=Lf(Ke,Fe.mode,mt),mt.return=Fe,Fe=mt),Y(Fe)):y(Fe,je)}return function(Fe,je,Ke,mt){try{lu=0;var an=br(Fe,je,Ke,mt);return Ml=null,an}catch(Nt){if(Nt===_c||Nt===wl)throw Nt;var nr=Ra(29,Nt,null,Fe.mode);return nr.lanes=mt,nr.return=Fe,nr}finally{}}}var El=Uf(!0),$f=Uf(!1),Ps=!1;function as(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function er(o,h){o=o.updateQueue,h.updateQueue===o&&(h.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Ds(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function lo(o,h,y){var w=o.updateQueue;if(w===null)return null;if(w=w.shared,(Hn&2)!==0){var O=w.pending;return O===null?h.next=h:(h.next=O.next,O.next=h),w.pending=h,h=ml(o),jf(o,null,y),h}return ah(o,w,h,y),ml(o)}function Al(o,h,y){if(h=h.updateQueue,h!==null&&(h=h.shared,(y&4194048)!==0)){var w=h.lanes;w&=o.pendingLanes,y|=w,h.lanes=y,ir(o,y)}}function yh(o,h){var y=o.updateQueue,w=o.alternate;if(w!==null&&(w=w.updateQueue,y===w)){var O=null,L=null;if(y=y.firstBaseUpdate,y!==null){do{var Y={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};L===null?O=L=Y:L=L.next=Y,y=y.next}while(y!==null);L===null?O=L=h:L=L.next=h}else O=L=h;y={baseState:w.baseState,firstBaseUpdate:O,lastBaseUpdate:L,shared:w.shared,callbacks:w.callbacks},o.updateQueue=y;return}o=y.lastBaseUpdate,o===null?y.firstBaseUpdate=h:o.next=h,y.lastBaseUpdate=h}var xc=!1;function cu(){if(xc){var o=Ba;if(o!==null)throw o}}function wc(o,h,y,w){xc=!1;var O=o.updateQueue;Ps=!1;var L=O.firstBaseUpdate,Y=O.lastBaseUpdate,le=O.shared.pending;if(le!==null){O.shared.pending=null;var Pe=le,Je=Pe.next;Pe.next=null,Y===null?L=Je:Y.next=Je,Y=Pe;var ct=o.alternate;ct!==null&&(ct=ct.updateQueue,le=ct.lastBaseUpdate,le!==Y&&(le===null?ct.firstBaseUpdate=Je:le.next=Je,ct.lastBaseUpdate=Pe))}if(L!==null){var vt=O.baseState;Y=0,ct=Je=Pe=null,le=L;do{var tt=le.lane&-536870913,it=tt!==le.lane;if(it?($n&tt)===tt:(w&tt)===tt){tt!==0&&tt===ji&&(xc=!0),ct!==null&&(ct=ct.next={lane:0,tag:le.tag,payload:le.payload,callback:null,next:null});e:{var Yt=o,fn=le;tt=h;var br=y;switch(fn.tag){case 1:if(Yt=fn.payload,typeof Yt=="function"){vt=Yt.call(br,vt,tt);break e}vt=Yt;break e;case 3:Yt.flags=Yt.flags&-65537|128;case 0:if(Yt=fn.payload,tt=typeof Yt=="function"?Yt.call(br,vt,tt):Yt,tt==null)break e;vt=D({},vt,tt);break e;case 2:Ps=!0}}tt=le.callback,tt!==null&&(o.flags|=64,it&&(o.flags|=8192),it=O.callbacks,it===null?O.callbacks=[tt]:it.push(tt))}else it={lane:tt,tag:le.tag,payload:le.payload,callback:le.callback,next:null},ct===null?(Je=ct=it,Pe=vt):ct=ct.next=it,Y|=tt;if(le=le.next,le===null){if(le=O.shared.pending,le===null)break;it=le,le=it.next,it.next=null,O.lastBaseUpdate=it,O.shared.pending=null}}while(!0);ct===null&&(Pe=vt),O.baseState=Pe,O.firstBaseUpdate=Je,O.lastBaseUpdate=ct,L===null&&(O.shared.lanes=0),bu|=Y,o.lanes=Y,o.memoizedState=vt}}function Oo(o,h){if(typeof o!="function")throw Error(a(191,o));o.call(h)}function vh(o,h){var y=o.callbacks;if(y!==null)for(o.callbacks=null,o=0;o<y.length;o++)Oo(y[o],h)}var Bt=Ae(null),Kt=Ae(0);function Sc(o,h){o=Rl,_t(Kt,o),_t(Bt,h),Rl=o|h.baseLanes}function Ad(){_t(Kt,Rl),_t(Bt,Bt.current)}function uu(){Rl=Kt.current,qe(Bt),qe(Kt)}var fr=Ae(null),Fa=null;function Pi(o){var h=o.alternate;_t(vr,vr.current&1),_t(fr,o),Fa===null&&(h===null||Bt.current!==null||h.memoizedState!==null)&&(Fa=o)}function ks(o){_t(vr,vr.current),_t(fr,o),Fa===null&&(Fa=o)}function lm(o){o.tag===22?(_t(vr,vr.current),_t(fr,o),Fa===null&&(Fa=o)):Pl()}function Pl(){_t(vr,vr.current),_t(fr,fr.current)}function Ua(o){qe(fr),Fa===o&&(Fa=null),qe(vr)}var vr=Ae(0);function pr(o){for(var h=o;h!==null;){if(h.tag===13){var y=h.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||Cy(y)||Mu(y)))return h}else if(h.tag===19&&(h.memoizedProps.revealOrder==="forwards"||h.memoizedProps.revealOrder==="backwards"||h.memoizedProps.revealOrder==="unstable_legacy-backwards"||h.memoizedProps.revealOrder==="together")){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===o)break;for(;h.sibling===null;){if(h.return===null||h.return===o)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var tr=0,dn=null,Gn=null,wr=null,Tc=!1,os=!1,Os=!1,Io=0,zo=0,Dl=null,Pd=0;function sr(){throw Error(a(321))}function _h(o,h){if(h===null)return!1;for(var y=0;y<h.length&&y<o.length;y++)if(!na(o[y],h[y]))return!1;return!0}function bh(o,h,y,w,O,L){return tr=L,dn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Le.H=o===null||o.memoizedState===null?kd:ls,Os=!1,L=y(w,O),Os=!1,os&&(L=Dd(h,y,w,O)),xh(o),L}function xh(o){Le.H=Cc;var h=Gn!==null&&Gn.next!==null;if(tr=0,wr=Gn=dn=null,Tc=!1,zo=0,Dl=null,h)throw Error(a(300));o===null||mi||(o=o.dependencies,o!==null&&uh(o)&&(mi=!0))}function Dd(o,h,y,w){dn=o;var O=0;do{if(os&&(Dl=null),zo=0,os=!1,25<=O)throw Error(a(301));if(O+=1,wr=Gn=null,o.updateQueue!=null){var L=o.updateQueue;L.lastEffect=null,L.events=null,L.stores=null,L.memoCache!=null&&(L.memoCache.index=0)}Le.H=Od,L=h(y,w)}while(os);return L}function b(){var o=Le.H,h=o.useState()[0];return h=typeof h.then=="function"?I(h):h,o=o.useState()[0],(Gn!==null?Gn.memoizedState:null)!==o&&(dn.flags|=1024),h}function n(){var o=Io!==0;return Io=0,o}function u(o,h,y){h.updateQueue=o.updateQueue,h.flags&=-2053,o.lanes&=~y}function g(o){if(Tc){for(o=o.memoizedState;o!==null;){var h=o.queue;h!==null&&(h.pending=null),o=o.next}Tc=!1}tr=0,wr=Gn=dn=null,os=!1,zo=Io=0,Dl=null}function _(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wr===null?dn.memoizedState=wr=o:wr=wr.next=o,wr}function x(){if(Gn===null){var o=dn.alternate;o=o!==null?o.memoizedState:null}else o=Gn.next;var h=wr===null?dn.memoizedState:wr.next;if(h!==null)wr=h,Gn=o;else{if(o===null)throw dn.alternate===null?Error(a(467)):Error(a(310));Gn=o,o={memoizedState:Gn.memoizedState,baseState:Gn.baseState,baseQueue:Gn.baseQueue,queue:Gn.queue,next:null},wr===null?dn.memoizedState=wr=o:wr=wr.next=o}return wr}function E(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function I(o){var h=zo;return zo+=1,Dl===null&&(Dl=[]),o=bc(Dl,o,h),h=dn,(wr===null?h.memoizedState:wr.next)===null&&(h=h.alternate,Le.H=h===null||h.memoizedState===null?kd:ls),o}function z(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return I(o);if(o.$$typeof===ne)return Ai(o)}throw Error(a(438,String(o)))}function U(o){var h=null,y=dn.updateQueue;if(y!==null&&(h=y.memoCache),h==null){var w=dn.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(h={data:w.data.map(function(O){return O.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),y===null&&(y=E(),dn.updateQueue=y),y.memoCache=h,y=h.data[h.index],y===void 0)for(y=h.data[h.index]=Array(o),w=0;w<o;w++)y[w]=ft;return h.index++,y}function $(o,h){return typeof h=="function"?h(o):h}function W(o){var h=x();return Z(h,Gn,o)}function Z(o,h,y){var w=o.queue;if(w===null)throw Error(a(311));w.lastRenderedReducer=y;var O=o.baseQueue,L=w.pending;if(L!==null){if(O!==null){var Y=O.next;O.next=L.next,L.next=Y}h.baseQueue=O=L,w.pending=null}if(L=o.baseState,O===null)o.memoizedState=L;else{h=O.next;var le=Y=null,Pe=null,Je=h,ct=!1;do{var vt=Je.lane&-536870913;if(vt!==Je.lane?($n&vt)===vt:(tr&vt)===vt){var tt=Je.revertLane;if(tt===0)Pe!==null&&(Pe=Pe.next={lane:0,revertLane:0,gesture:null,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null}),vt===ji&&(ct=!0);else if((tr&tt)===tt){Je=Je.next,tt===ji&&(ct=!0);continue}else vt={lane:0,revertLane:Je.revertLane,gesture:null,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},Pe===null?(le=Pe=vt,Y=L):Pe=Pe.next=vt,dn.lanes|=tt,bu|=tt;vt=Je.action,Os&&y(L,vt),L=Je.hasEagerState?Je.eagerState:y(L,vt)}else tt={lane:vt,revertLane:Je.revertLane,gesture:Je.gesture,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},Pe===null?(le=Pe=tt,Y=L):Pe=Pe.next=tt,dn.lanes|=vt,bu|=vt;Je=Je.next}while(Je!==null&&Je!==h);if(Pe===null?Y=L:Pe.next=le,!na(L,o.memoizedState)&&(mi=!0,ct&&(y=Ba,y!==null)))throw y;o.memoizedState=L,o.baseState=Y,o.baseQueue=Pe,w.lastRenderedState=L}return O===null&&(w.lanes=0),[o.memoizedState,w.dispatch]}function ee(o){var h=x(),y=h.queue;if(y===null)throw Error(a(311));y.lastRenderedReducer=o;var w=y.dispatch,O=y.pending,L=h.memoizedState;if(O!==null){y.pending=null;var Y=O=O.next;do L=o(L,Y.action),Y=Y.next;while(Y!==O);na(L,h.memoizedState)||(mi=!0),h.memoizedState=L,h.baseQueue===null&&(h.baseState=L),y.lastRenderedState=L}return[L,w]}function oe(o,h,y){var w=dn,O=x(),L=kn;if(L){if(y===void 0)throw Error(a(407));y=y()}else y=h();var Y=!na((Gn||O).memoizedState,y);if(Y&&(O.memoizedState=y,mi=!0),O=O.queue,Cn(pe.bind(null,w,O,o),[o]),O.getSnapshot!==h||Y||wr!==null&&wr.memoizedState.tag&1){if(w.flags|=2048,jn(9,{destroy:void 0},de.bind(null,w,O,y,h),null),gr===null)throw Error(a(349));L||(tr&127)!==0||he(w,h,y)}return y}function he(o,h,y){o.flags|=16384,o={getSnapshot:h,value:y},h=dn.updateQueue,h===null?(h=E(),dn.updateQueue=h,h.stores=[o]):(y=h.stores,y===null?h.stores=[o]:y.push(o))}function de(o,h,y,w){h.value=y,h.getSnapshot=w,ve(h)&&xe(o)}function pe(o,h,y){return y(function(){ve(h)&&xe(o)})}function ve(o){var h=o.getSnapshot;o=o.value;try{var y=h();return!na(o,y)}catch{return!0}}function xe(o){var h=ao(o,2);h!==null&&xa(h,o,2)}function be(o){var h=_();if(typeof o=="function"){var y=o;if(o=y(),Os){Ie(!0);try{y()}finally{Ie(!1)}}}return h.memoizedState=h.baseState=o,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$,lastRenderedState:o},h}function Ce(o,h,y,w){return o.baseState=y,Z(o,Gn,typeof w=="function"?w:$)}function De(o,h,y,w,O){if(ba(o))throw Error(a(485));if(o=h.action,o!==null){var L={payload:O,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){L.listeners.push(Y)}};Le.T!==null?y(!0):L.isTransition=!1,w(L),y=h.pending,y===null?(L.next=h.pending=L,we(h,L)):(L.next=y.next,h.pending=y.next=L)}}function we(o,h){var y=h.action,w=h.payload,O=o.state;if(h.isTransition){var L=Le.T,Y={};Le.T=Y;try{var le=y(O,w),Pe=Le.S;Pe!==null&&Pe(Y,le),Re(o,h,le)}catch(Je){He(o,h,Je)}finally{L!==null&&Y.types!==null&&(L.types=Y.types),Le.T=L}}else try{L=y(O,w),Re(o,h,L)}catch(Je){He(o,h,Je)}}function Re(o,h,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(w){Xe(o,h,w)},function(w){return He(o,h,w)}):Xe(o,h,y)}function Xe(o,h,y){h.status="fulfilled",h.value=y,We(h),o.state=y,h=o.pending,h!==null&&(y=h.next,y===h?o.pending=null:(y=y.next,h.next=y,we(o,y)))}function He(o,h,y){var w=o.pending;if(o.pending=null,w!==null){w=w.next;do h.status="rejected",h.reason=y,We(h),h=h.next;while(h!==w)}o.action=null}function We(o){o=o.listeners;for(var h=0;h<o.length;h++)(0,o[h])()}function Ye(o,h){return h}function wt(o,h){if(kn){var y=gr.formState;if(y!==null){e:{var w=dn;if(kn){if(Jn){t:{for(var O=Jn,L=La;O.nodeType!==8;){if(!L){O=null;break t}if(O=fo(O.nextSibling),O===null){O=null;break t}}L=O.data,O=L==="F!"||L==="F"?O:null}if(O){Jn=fo(O.nextSibling),w=O.data==="F!";break e}}ga(w)}w=!1}w&&(h=y[0])}}return y=_(),y.memoizedState=y.baseState=h,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ye,lastRenderedState:h},y.queue=w,y=du.bind(null,dn,w),w.dispatch=y,w=be(!1),L=Lo.bind(null,dn,!1,w.queue),w=_(),O={state:h,dispatch:null,action:o,pending:null},w.queue=O,y=De.bind(null,dn,O,L,y),O.dispatch=y,w.memoizedState=o,[h,y,!1]}function St(o){var h=x();return dt(h,Gn,o)}function dt(o,h,y){if(h=Z(o,h,Ye)[0],o=W($)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var w=I(h)}catch(Y){throw Y===_c?wl:Y}else w=h;h=x();var O=h.queue,L=O.dispatch;return y!==h.memoizedState&&(dn.flags|=2048,jn(9,{destroy:void 0},Vt.bind(null,O,y),null)),[w,L,o]}function Vt(o,h){o.action=h}function un(o){var h=x(),y=Gn;if(y!==null)return dt(h,y,o);x(),h=h.memoizedState,y=x();var w=y.queue.dispatch;return y.memoizedState=o,[h,w,!1]}function jn(o,h,y,w){return o={tag:o,create:y,deps:w,inst:h,next:null},h=dn.updateQueue,h===null&&(h=E(),dn.updateQueue=h),y=h.lastEffect,y===null?h.lastEffect=o.next=o:(w=y.next,y.next=o,o.next=w,h.lastEffect=o),o}function Wn(){return x().memoizedState}function Yn(o,h,y,w){var O=_();dn.flags|=o,O.memoizedState=jn(1|h,{destroy:void 0},y,w===void 0?null:w)}function mr(o,h,y,w){var O=x();w=w===void 0?null:w;var L=O.memoizedState.inst;Gn!==null&&w!==null&&_h(w,Gn.memoizedState.deps)?O.memoizedState=jn(h,L,y,w):(dn.flags|=o,O.memoizedState=jn(1|h,L,y,w))}function lr(o,h){Yn(8390656,8,o,h)}function Cn(o,h){mr(2048,8,o,h)}function Sr(o){dn.flags|=4;var h=dn.updateQueue;if(h===null)h=E(),dn.updateQueue=h,h.events=[o];else{var y=h.events;y===null?h.events=[o]:y.push(o)}}function Di(o){var h=x().memoizedState;return Sr({ref:h,nextImpl:o}),function(){if((Hn&2)!==0)throw Error(a(440));return h.impl.apply(void 0,arguments)}}function $r(o,h){return mr(4,2,o,h)}function Vr(o,h){return mr(4,4,o,h)}function qi(o,h){if(typeof h=="function"){o=o();var y=h(o);return function(){typeof y=="function"?y():h(null)}}if(h!=null)return o=o(),h.current=o,function(){h.current=null}}function Is(o,h,y){y=y!=null?y.concat([o]):null,mr(4,4,qi.bind(null,h,o),y)}function $a(){}function zs(o,h){var y=x();h=h===void 0?null:h;var w=y.memoizedState;return h!==null&&_h(h,w[1])?w[0]:(y.memoizedState=[o,h],o)}function kl(o,h){var y=x();h=h===void 0?null:h;var w=y.memoizedState;if(h!==null&&_h(h,w[1]))return w[0];if(w=o(),Os){Ie(!0);try{o()}finally{Ie(!1)}}return y.memoizedState=[w,h],w}function hu(o,h,y){return y===void 0||(tr&1073741824)!==0&&($n&261930)===0?o.memoizedState=h:(o.memoizedState=y,o=ry(),dn.lanes|=o,bu|=o,y)}function Mc(o,h,y,w){return na(y,h)?y:Bt.current!==null?(o=hu(o,y,w),na(o,h)||(mi=!0),o):(tr&42)===0||(tr&1073741824)!==0&&($n&261930)===0?(mi=!0,o.memoizedState=y):(o=ry(),dn.lanes|=o,bu|=o,h)}function ss(o,h,y,w,O){var L=Qe.p;Qe.p=L!==0&&8>L?L:8;var Y=Le.T,le={};Le.T=le,Lo(o,!1,h,y);try{var Pe=O(),Je=Le.S;if(Je!==null&&Je(le,Pe),Pe!==null&&typeof Pe=="object"&&typeof Pe.then=="function"){var ct=Lg(Pe,w);jo(o,h,ct,ho(o))}else jo(o,h,w,ho(o))}catch(vt){jo(o,h,{then:function(){},status:"rejected",reason:vt},ho())}finally{Qe.p=L,Y!==null&&le.types!==null&&(Y.types=le.types),Le.T=Y}}function Va(){}function co(o,h,y,w){if(o.tag!==5)throw Error(a(476));var O=Ro(o).queue;ss(o,O,h,Ve,y===null?Va:function(){return va(o),y(w)})}function Ro(o){var h=o.memoizedState;if(h!==null)return h;h={memoizedState:Ve,baseState:Ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$,lastRenderedState:Ve},next:null};var y={};return h.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$,lastRenderedState:y},next:null},o.memoizedState=h,o=o.alternate,o!==null&&(o.memoizedState=h),h}function va(o){var h=Ro(o);h.next===null&&(h=o.alternate.memoizedState),jo(o,h.next.queue,{},ho())}function Dr(){return Ai(et)}function ai(){return x().memoizedState}function _a(){return x().memoizedState}function ki(o){for(var h=o.return;h!==null;){switch(h.tag){case 24:case 3:var y=ho();o=Ds(y);var w=lo(h,o,y);w!==null&&(xa(w,h,y),Al(w,h,y)),h={cache:dh()},o.payload=h;return}h=h.return}}function Vf(o,h,y){var w=ho();y={lane:w,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},ba(o)?Rs(h,y):(y=pl(o,h,y,w),y!==null&&(xa(y,o,w),js(y,h,w)))}function du(o,h,y){var w=ho();jo(o,h,y,w)}function jo(o,h,y,w){var O={lane:w,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(ba(o))Rs(h,O);else{var L=o.alternate;if(o.lanes===0&&(L===null||L.lanes===0)&&(L=h.lastRenderedReducer,L!==null))try{var Y=h.lastRenderedState,le=L(Y,y);if(O.hasEagerState=!0,O.eagerState=le,na(le,Y))return ah(o,h,O,0),gr===null&&fc(),!1}catch{}finally{}if(y=pl(o,h,O,w),y!==null)return xa(y,o,w),js(y,h,w),!0}return!1}function Lo(o,h,y,w){if(w={lane:2,revertLane:Su(),gesture:null,action:w,hasEagerState:!1,eagerState:null,next:null},ba(o)){if(h)throw Error(a(479))}else h=pl(o,y,w,2),h!==null&&xa(h,o,2)}function ba(o){var h=o.alternate;return o===dn||h!==null&&h===dn}function Rs(o,h){os=Tc=!0;var y=o.pending;y===null?h.next=h:(h.next=y.next,y.next=h),o.pending=h}function js(o,h,y){if((y&4194048)!==0){var w=h.lanes;w&=o.pendingLanes,y|=w,h.lanes=y,ir(o,y)}}var Cc={readContext:Ai,use:z,useCallback:sr,useContext:sr,useEffect:sr,useImperativeHandle:sr,useLayoutEffect:sr,useInsertionEffect:sr,useMemo:sr,useReducer:sr,useRef:sr,useState:sr,useDebugValue:sr,useDeferredValue:sr,useTransition:sr,useSyncExternalStore:sr,useId:sr,useHostTransitionStatus:sr,useFormState:sr,useActionState:sr,useOptimistic:sr,useMemoCache:sr,useCacheRefresh:sr};Cc.useEffectEvent=sr;var kd={readContext:Ai,use:z,useCallback:function(o,h){return _().memoizedState=[o,h===void 0?null:h],o},useContext:Ai,useEffect:lr,useImperativeHandle:function(o,h,y){y=y!=null?y.concat([o]):null,Yn(4194308,4,qi.bind(null,h,o),y)},useLayoutEffect:function(o,h){return Yn(4194308,4,o,h)},useInsertionEffect:function(o,h){Yn(4,2,o,h)},useMemo:function(o,h){var y=_();h=h===void 0?null:h;var w=o();if(Os){Ie(!0);try{o()}finally{Ie(!1)}}return y.memoizedState=[w,h],w},useReducer:function(o,h,y){var w=_();if(y!==void 0){var O=y(h);if(Os){Ie(!0);try{y(h)}finally{Ie(!1)}}}else O=h;return w.memoizedState=w.baseState=O,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:O},w.queue=o,o=o.dispatch=Vf.bind(null,dn,o),[w.memoizedState,o]},useRef:function(o){var h=_();return o={current:o},h.memoizedState=o},useState:function(o){o=be(o);var h=o.queue,y=du.bind(null,dn,h);return h.dispatch=y,[o.memoizedState,y]},useDebugValue:$a,useDeferredValue:function(o,h){var y=_();return hu(y,o,h)},useTransition:function(){var o=be(!1);return o=ss.bind(null,dn,o.queue,!0,!1),_().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,h,y){var w=dn,O=_();if(kn){if(y===void 0)throw Error(a(407));y=y()}else{if(y=h(),gr===null)throw Error(a(349));($n&127)!==0||he(w,h,y)}O.memoizedState=y;var L={value:y,getSnapshot:h};return O.queue=L,lr(pe.bind(null,w,L,o),[o]),w.flags|=2048,jn(9,{destroy:void 0},de.bind(null,w,L,y,h),null),y},useId:function(){var o=_(),h=gr.identifierPrefix;if(kn){var y=ma,w=ts;y=(w&~(1<<32-$e(w)-1)).toString(32)+y,h="_"+h+"R_"+y,y=Io++,0<y&&(h+="H"+y.toString(32)),h+="_"}else y=Pd++,h="_"+h+"r_"+y.toString(32)+"_";return o.memoizedState=h},useHostTransitionStatus:Dr,useFormState:wt,useActionState:wt,useOptimistic:function(o){var h=_();h.memoizedState=h.baseState=o;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=y,h=Lo.bind(null,dn,!0,y),y.dispatch=h,[o,h]},useMemoCache:U,useCacheRefresh:function(){return _().memoizedState=ki.bind(null,dn)},useEffectEvent:function(o){var h=_(),y={impl:o};return h.memoizedState=y,function(){if((Hn&2)!==0)throw Error(a(440));return y.impl.apply(void 0,arguments)}}},ls={readContext:Ai,use:z,useCallback:zs,useContext:Ai,useEffect:Cn,useImperativeHandle:Is,useInsertionEffect:$r,useLayoutEffect:Vr,useMemo:kl,useReducer:W,useRef:Wn,useState:function(){return W($)},useDebugValue:$a,useDeferredValue:function(o,h){var y=x();return Mc(y,Gn.memoizedState,o,h)},useTransition:function(){var o=W($)[0],h=x().memoizedState;return[typeof o=="boolean"?o:I(o),h]},useSyncExternalStore:oe,useId:ai,useHostTransitionStatus:Dr,useFormState:St,useActionState:St,useOptimistic:function(o,h){var y=x();return Ce(y,Gn,o,h)},useMemoCache:U,useCacheRefresh:_a};ls.useEffectEvent=Di;var Od={readContext:Ai,use:z,useCallback:zs,useContext:Ai,useEffect:Cn,useImperativeHandle:Is,useInsertionEffect:$r,useLayoutEffect:Vr,useMemo:kl,useReducer:ee,useRef:Wn,useState:function(){return ee($)},useDebugValue:$a,useDeferredValue:function(o,h){var y=x();return Gn===null?hu(y,o,h):Mc(y,Gn.memoizedState,o,h)},useTransition:function(){var o=ee($)[0],h=x().memoizedState;return[typeof o=="boolean"?o:I(o),h]},useSyncExternalStore:oe,useId:ai,useHostTransitionStatus:Dr,useFormState:un,useActionState:un,useOptimistic:function(o,h){var y=x();return Gn!==null?Ce(y,Gn,o,h):(y.baseState=o,[o,y.queue.dispatch])},useMemoCache:U,useCacheRefresh:_a};Od.useEffectEvent=Di;function wh(o,h,y,w){h=o.memoizedState,y=y(w,h),y=y==null?h:D({},h,y),o.memoizedState=y,o.lanes===0&&(o.updateQueue.baseState=y)}var Ec={enqueueSetState:function(o,h,y){o=o._reactInternals;var w=ho(),O=Ds(w);O.payload=h,y!=null&&(O.callback=y),h=lo(o,O,w),h!==null&&(xa(h,o,w),Al(h,o,w))},enqueueReplaceState:function(o,h,y){o=o._reactInternals;var w=ho(),O=Ds(w);O.tag=1,O.payload=h,y!=null&&(O.callback=y),h=lo(o,O,w),h!==null&&(xa(h,o,w),Al(h,o,w))},enqueueForceUpdate:function(o,h){o=o._reactInternals;var y=ho(),w=Ds(y);w.tag=2,h!=null&&(w.callback=h),h=lo(o,w,y),h!==null&&(xa(h,o,y),Al(h,o,y))}};function Ng(o,h,y,w,O,L,Y){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(w,L,Y):h.prototype&&h.prototype.isPureReactComponent?!fl(y,w)||!fl(O,L):!0}function fu(o,h,y,w){o=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(y,w),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(y,w),h.state!==o&&Ec.enqueueReplaceState(h,h.state,null)}function No(o,h){var y=h;if("ref"in h){y={};for(var w in h)w!=="ref"&&(y[w]=h[w])}if(o=o.defaultProps){y===h&&(y=D({},y));for(var O in o)y[O]===void 0&&(y[O]=o[O])}return y}function Bg(o){es(o)}function Rv(o){console.error(o)}function cm(o){es(o)}function qf(o,h){try{var y=o.onUncaughtError;y(h.value,{componentStack:h.stack})}catch(w){setTimeout(function(){throw w})}}function Gf(o,h,y){try{var w=o.onCaughtError;w(y.value,{componentStack:y.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(O){setTimeout(function(){throw O})}}function um(o,h,y){return y=Ds(y),y.tag=3,y.payload={element:null},y.callback=function(){qf(o,h)},y}function jv(o){return o=Ds(o),o.tag=3,o}function hm(o,h,y,w){var O=y.type.getDerivedStateFromError;if(typeof O=="function"){var L=w.value;o.payload=function(){return O(L)},o.callback=function(){Gf(h,y,w)}}var Y=y.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(o.callback=function(){Gf(h,y,w),typeof O!="function"&&(Oc===null?Oc=new Set([this]):Oc.add(this));var le=w.stack;this.componentDidCatch(w.value,{componentStack:le!==null?le:""})})}function Fb(o,h,y,w,O){if(y.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(h=y.alternate,h!==null&&oo(h,y,O,!0),y=fr.current,y!==null){switch(y.tag){case 31:case 13:return Fa===null?Tm():y.alternate===null&&oi===0&&(oi=3),y.flags&=-257,y.flags|=65536,y.lanes=O,w===Sl?y.flags|=16384:(h=y.updateQueue,h===null?y.updateQueue=new Set([w]):h.add(w),lp(o,w,O)),!1;case 22:return y.flags|=65536,w===Sl?y.flags|=16384:(h=y.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([w])},y.updateQueue=h):(y=h.retryQueue,y===null?h.retryQueue=new Set([w]):y.add(w)),lp(o,w,O)),!1}throw Error(a(435,y.tag))}return lp(o,w,O),Tm(),!1}if(kn)return h=fr.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=O,w!==Pr&&(o=Error(a(422),{cause:w}),ns(ia(o,y)))):(w!==Pr&&(h=Error(a(423),{cause:w}),ns(ia(h,y))),o=o.current.alternate,o.flags|=65536,O&=-O,o.lanes|=O,w=ia(w,y),O=um(o.stateNode,w,O),yh(o,O),oi!==4&&(oi=2)),!1;var L=Error(a(520),{cause:w});if(L=ia(L,y),kh===null?kh=[L]:kh.push(L),oi!==4&&(oi=2),h===null)return!0;w=ia(w,y),y=h;do{switch(y.tag){case 3:return y.flags|=65536,o=O&-O,y.lanes|=o,o=um(y.stateNode,w,o),yh(y,o),!1;case 1:if(h=y.type,L=y.stateNode,(y.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(Oc===null||!Oc.has(L))))return y.flags|=65536,O&=-O,y.lanes|=O,O=jv(O),hm(O,o,y,w),yh(y,O),!1}y=y.return}while(y!==null);return!1}var Hf=Error(a(461)),mi=!1;function Gi(o,h,y,w){h.child=o===null?$f(h,null,y,w):El(h,o.child,y,w)}function Sh(o,h,y,w,O){y=y.render;var L=h.ref;if("ref"in w){var Y={};for(var le in w)le!=="ref"&&(Y[le]=w[le])}else Y=w;return _l(h),w=bh(o,h,y,Y,L,O),le=n(),o!==null&&!mi?(u(o,h,O),Ls(o,h,O)):(kn&&le&&gc(h),h.flags|=1,Gi(o,h,w,O),h.child)}function Lv(o,h,y,w,O){if(o===null){var L=y.type;return typeof L=="function"&&!oh(L)&&L.defaultProps===void 0&&y.compare===null?(h.tag=15,h.type=L,Th(o,h,L,w,O)):(o=pc(y.type,null,w,h,h.mode,O),o.ref=h.ref,o.return=h,h.child=o)}if(L=o.child,!qg(o,O)){var Y=L.memoizedProps;if(y=y.compare,y=y!==null?y:fl,y(Y,w)&&o.ref===h.ref)return Ls(o,h,O)}return h.flags|=1,o=ja(L,w),o.ref=h.ref,o.return=h,h.child=o}function Th(o,h,y,w,O){if(o!==null){var L=o.memoizedProps;if(fl(L,w)&&o.ref===h.ref)if(mi=!1,h.pendingProps=w=L,qg(o,O))(o.flags&131072)!==0&&(mi=!0);else return h.lanes=o.lanes,Ls(o,h,O)}return Yf(o,h,y,w,O)}function Zf(o,h,y,w){var O=w.children,L=o!==null?o.memoizedState:null;if(o===null&&h.stateNode===null&&(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),w.mode==="hidden"){if((h.flags&128)!==0){if(L=L!==null?L.baseLanes|y:y,o!==null){for(w=h.child=o.child,O=0;w!==null;)O=O|w.lanes|w.childLanes,w=w.sibling;w=O&~L}else w=0,h.child=null;return Nv(o,h,L,y,w)}if((y&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},o!==null&&so(h,L!==null?L.cachePool:null),L!==null?Sc(h,L):Ad(),lm(h);else return w=h.lanes=536870912,Nv(o,h,L!==null?L.baseLanes|y:y,y,w)}else L!==null?(so(h,L.cachePool),Sc(h,L),Pl(),h.memoizedState=null):(o!==null&&so(h,null),Ad(),Pl());return Gi(o,h,O,y),h.child}function pu(o,h){return o!==null&&o.tag===22||h.stateNode!==null||(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.sibling}function Nv(o,h,y,w,O){var L=vc();return L=L===null?null:{parent:dr._currentValue,pool:L},h.memoizedState={baseLanes:y,cachePool:L},o!==null&&so(h,null),Ad(),lm(h),o!==null&&oo(o,h,w,!0),h.childLanes=O,null}function dm(o,h){return h=Kf({mode:h.mode,children:h.children},o.mode),h.ref=o.ref,o.child=h,h.return=o,h}function Bv(o,h,y){return El(h,o.child,null,y),o=dm(h,h.pendingProps),o.flags|=2,Ua(h),h.memoizedState=null,o}function Ub(o,h,y){var w=h.pendingProps,O=(h.flags&128)!==0;if(h.flags&=-129,o===null){if(kn){if(w.mode==="hidden")return o=dm(h,w),h.lanes=536870912,pu(null,o);if(ks(h),(o=Jn)?(o=m_(o,La),o=o!==null&&o.data==="&"?o:null,o!==null&&(h.memoizedState={dehydrated:o,treeContext:Ao!==null?{id:ts,overflow:ma}:null,retryLane:536870912,hydrationErrors:null},y=Md(o),y.return=h,h.child=y,ii=h,Jn=null)):o=null,o===null)throw ga(h);return h.lanes=536870912,null}return dm(h,w)}var L=o.memoizedState;if(L!==null){var Y=L.dehydrated;if(ks(h),O)if(h.flags&256)h.flags&=-257,h=Bv(o,h,y);else if(h.memoizedState!==null)h.child=o.child,h.flags|=128,h=null;else throw Error(a(558));else if(mi||oo(o,h,y,!1),O=(y&o.childLanes)!==0,mi||O){if(w=gr,w!==null&&(Y=ni(w,y),Y!==0&&Y!==L.retryLane))throw L.retryLane=Y,ao(o,Y),xa(w,o,Y),Hf;Tm(),h=Bv(o,h,y)}else o=L.treeContext,Jn=fo(Y.nextSibling),ii=h,kn=!0,Po=null,La=!1,o!==null&&lh(h,o),h=dm(h,w),h.flags|=4096;return h}return o=ja(o.child,{mode:w.mode,children:w.children}),o.ref=h.ref,h.child=o,o.return=h,o}function Wf(o,h){var y=h.ref;if(y===null)o!==null&&o.ref!==null&&(h.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(a(284));(o===null||o.ref!==y)&&(h.flags|=4194816)}}function Yf(o,h,y,w,O){return _l(h),y=bh(o,h,y,w,void 0,O),w=n(),o!==null&&!mi?(u(o,h,O),Ls(o,h,O)):(kn&&w&&gc(h),h.flags|=1,Gi(o,h,y,O),h.child)}function Fg(o,h,y,w,O,L){return _l(h),h.updateQueue=null,y=Dd(h,w,y,O),xh(o),w=n(),o!==null&&!mi?(u(o,h,L),Ls(o,h,L)):(kn&&w&&gc(h),h.flags|=1,Gi(o,h,y,L),h.child)}function Ug(o,h,y,w,O){if(_l(h),h.stateNode===null){var L=_n,Y=y.contextType;typeof Y=="object"&&Y!==null&&(L=Ai(Y)),L=new y(w,L),h.memoizedState=L.state!==null&&L.state!==void 0?L.state:null,L.updater=Ec,h.stateNode=L,L._reactInternals=h,L=h.stateNode,L.props=w,L.state=h.memoizedState,L.refs={},as(h),Y=y.contextType,L.context=typeof Y=="object"&&Y!==null?Ai(Y):_n,L.state=h.memoizedState,Y=y.getDerivedStateFromProps,typeof Y=="function"&&(wh(h,y,Y,w),L.state=h.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof L.getSnapshotBeforeUpdate=="function"||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(Y=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),Y!==L.state&&Ec.enqueueReplaceState(L,L.state,null),wc(h,w,L,O),cu(),L.state=h.memoizedState),typeof L.componentDidMount=="function"&&(h.flags|=4194308),w=!0}else if(o===null){L=h.stateNode;var le=h.memoizedProps,Pe=No(y,le);L.props=Pe;var Je=L.context,ct=y.contextType;Y=_n,typeof ct=="object"&&ct!==null&&(Y=Ai(ct));var vt=y.getDerivedStateFromProps;ct=typeof vt=="function"||typeof L.getSnapshotBeforeUpdate=="function",le=h.pendingProps!==le,ct||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(le||Je!==Y)&&fu(h,L,w,Y),Ps=!1;var tt=h.memoizedState;L.state=tt,wc(h,w,L,O),cu(),Je=h.memoizedState,le||tt!==Je||Ps?(typeof vt=="function"&&(wh(h,y,vt,w),Je=h.memoizedState),(Pe=Ps||Ng(h,y,Pe,w,tt,Je,Y))?(ct||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(h.flags|=4194308)):(typeof L.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=w,h.memoizedState=Je),L.props=w,L.state=Je,L.context=Y,w=Pe):(typeof L.componentDidMount=="function"&&(h.flags|=4194308),w=!1)}else{L=h.stateNode,er(o,h),Y=h.memoizedProps,ct=No(y,Y),L.props=ct,vt=h.pendingProps,tt=L.context,Je=y.contextType,Pe=_n,typeof Je=="object"&&Je!==null&&(Pe=Ai(Je)),le=y.getDerivedStateFromProps,(Je=typeof le=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(Y!==vt||tt!==Pe)&&fu(h,L,w,Pe),Ps=!1,tt=h.memoizedState,L.state=tt,wc(h,w,L,O),cu();var it=h.memoizedState;Y!==vt||tt!==it||Ps||o!==null&&o.dependencies!==null&&uh(o.dependencies)?(typeof le=="function"&&(wh(h,y,le,w),it=h.memoizedState),(ct=Ps||Ng(h,y,ct,w,tt,it,Pe)||o!==null&&o.dependencies!==null&&uh(o.dependencies))?(Je||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(w,it,Pe),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(w,it,Pe)),typeof L.componentDidUpdate=="function"&&(h.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof L.componentDidUpdate!="function"||Y===o.memoizedProps&&tt===o.memoizedState||(h.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||Y===o.memoizedProps&&tt===o.memoizedState||(h.flags|=1024),h.memoizedProps=w,h.memoizedState=it),L.props=w,L.state=it,L.context=Pe,w=ct):(typeof L.componentDidUpdate!="function"||Y===o.memoizedProps&&tt===o.memoizedState||(h.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||Y===o.memoizedProps&&tt===o.memoizedState||(h.flags|=1024),w=!1)}return L=w,Wf(o,h),w=(h.flags&128)!==0,L||w?(L=h.stateNode,y=w&&typeof y.getDerivedStateFromError!="function"?null:L.render(),h.flags|=1,o!==null&&w?(h.child=El(h,o.child,null,O),h.child=El(h,null,y,O)):Gi(o,h,y,O),h.memoizedState=L.state,o=h.child):o=Ls(o,h,O),o}function Fv(o,h,y,w){return Cs(),h.flags|=256,Gi(o,h,y,w),h.child}var $g={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fm(o){return{baseLanes:o,cachePool:It()}}function pm(o,h,y){return o=o!==null?o.childLanes&~y:0,h&&(o|=Fo),o}function Uv(o,h,y){var w=h.pendingProps,O=!1,L=(h.flags&128)!==0,Y;if((Y=L)||(Y=o!==null&&o.memoizedState===null?!1:(vr.current&2)!==0),Y&&(O=!0,h.flags&=-129),Y=(h.flags&32)!==0,h.flags&=-33,o===null){if(kn){if(O?Pi(h):Pl(),(o=Jn)?(o=m_(o,La),o=o!==null&&o.data!=="&"?o:null,o!==null&&(h.memoizedState={dehydrated:o,treeContext:Ao!==null?{id:ts,overflow:ma}:null,retryLane:536870912,hydrationErrors:null},y=Md(o),y.return=h,h.child=y,ii=h,Jn=null)):o=null,o===null)throw ga(h);return Mu(o)?h.lanes=32:h.lanes=536870912,null}var le=w.children;return w=w.fallback,O?(Pl(),O=h.mode,le=Kf({mode:"hidden",children:le},O),w=ws(w,O,y,null),le.return=h,w.return=h,le.sibling=w,h.child=le,w=h.child,w.memoizedState=fm(y),w.childLanes=pm(o,Y,y),h.memoizedState=$g,pu(null,w)):(Pi(h),Xf(h,le))}var Pe=o.memoizedState;if(Pe!==null&&(le=Pe.dehydrated,le!==null)){if(L)h.flags&256?(Pi(h),h.flags&=-257,h=Qf(o,h,y)):h.memoizedState!==null?(Pl(),h.child=o.child,h.flags|=128,h=null):(Pl(),le=w.fallback,O=h.mode,w=Kf({mode:"visible",children:w.children},O),le=ws(le,O,y,null),le.flags|=2,w.return=h,le.return=h,w.sibling=le,h.child=w,El(h,o.child,null,y),w=h.child,w.memoizedState=fm(y),w.childLanes=pm(o,Y,y),h.memoizedState=$g,h=pu(null,w));else if(Pi(h),Mu(le)){if(Y=le.nextSibling&&le.nextSibling.dataset,Y)var Je=Y.dgst;Y=Je,w=Error(a(419)),w.stack="",w.digest=Y,ns({value:w,source:null,stack:null}),h=Qf(o,h,y)}else if(mi||oo(o,h,y,!1),Y=(y&o.childLanes)!==0,mi||Y){if(Y=gr,Y!==null&&(w=ni(Y,y),w!==0&&w!==Pe.retryLane))throw Pe.retryLane=w,ao(o,w),xa(Y,o,w),Hf;Cy(le)||Tm(),h=Qf(o,h,y)}else Cy(le)?(h.flags|=192,h.child=o.child,h=null):(o=Pe.treeContext,Jn=fo(le.nextSibling),ii=h,kn=!0,Po=null,La=!1,o!==null&&lh(h,o),h=Xf(h,w.children),h.flags|=4096);return h}return O?(Pl(),le=w.fallback,O=h.mode,Pe=o.child,Je=Pe.sibling,w=ja(Pe,{mode:"hidden",children:w.children}),w.subtreeFlags=Pe.subtreeFlags&65011712,Je!==null?le=ja(Je,le):(le=ws(le,O,y,null),le.flags|=2),le.return=h,w.return=h,w.sibling=le,h.child=w,pu(null,w),w=h.child,le=o.child.memoizedState,le===null?le=fm(y):(O=le.cachePool,O!==null?(Pe=dr._currentValue,O=O.parent!==Pe?{parent:Pe,pool:Pe}:O):O=It(),le={baseLanes:le.baseLanes|y,cachePool:O}),w.memoizedState=le,w.childLanes=pm(o,Y,y),h.memoizedState=$g,pu(o.child,w)):(Pi(h),y=o.child,o=y.sibling,y=ja(y,{mode:"visible",children:w.children}),y.return=h,y.sibling=null,o!==null&&(Y=h.deletions,Y===null?(h.deletions=[o],h.flags|=16):Y.push(o)),h.child=y,h.memoizedState=null,y)}function Xf(o,h){return h=Kf({mode:"visible",children:h},o.mode),h.return=o,o.child=h}function Kf(o,h){return o=Ra(22,o,null,h),o.lanes=0,o}function Qf(o,h,y){return El(h,o.child,null,y),o=Xf(h,h.pendingProps.children),o.flags|=2,h.memoizedState=null,o}function Id(o,h,y){o.lanes|=h;var w=o.alternate;w!==null&&(w.lanes|=h),ch(o.return,h,y)}function oa(o,h,y,w,O,L){var Y=o.memoizedState;Y===null?o.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:w,tail:y,tailMode:O,treeForkCount:L}:(Y.isBackwards=h,Y.rendering=null,Y.renderingStartTime=0,Y.last=w,Y.tail=y,Y.tailMode=O,Y.treeForkCount=L)}function Vg(o,h,y){var w=h.pendingProps,O=w.revealOrder,L=w.tail;w=w.children;var Y=vr.current,le=(Y&2)!==0;if(le?(Y=Y&1|2,h.flags|=128):Y&=1,_t(vr,Y),Gi(o,h,w,y),w=kn?yl:0,!le&&o!==null&&(o.flags&128)!==0)e:for(o=h.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Id(o,y,h);else if(o.tag===19)Id(o,y,h);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===h)break e;for(;o.sibling===null;){if(o.return===null||o.return===h)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(O){case"forwards":for(y=h.child,O=null;y!==null;)o=y.alternate,o!==null&&pr(o)===null&&(O=y),y=y.sibling;y=O,y===null?(O=h.child,h.child=null):(O=y.sibling,y.sibling=null),oa(h,!1,O,y,L,w);break;case"backwards":case"unstable_legacy-backwards":for(y=null,O=h.child,h.child=null;O!==null;){if(o=O.alternate,o!==null&&pr(o)===null){h.child=O;break}o=O.sibling,O.sibling=y,y=O,O=o}oa(h,!0,y,null,L,w);break;case"together":oa(h,!1,null,null,void 0,w);break;default:h.memoizedState=null}return h.child}function Ls(o,h,y){if(o!==null&&(h.dependencies=o.dependencies),bu|=h.lanes,(y&h.childLanes)===0)if(o!==null){if(oo(o,h,y,!1),(y&h.childLanes)===0)return null}else return null;if(o!==null&&h.child!==o.child)throw Error(a(153));if(h.child!==null){for(o=h.child,y=ja(o,o.pendingProps),h.child=y,y.return=h;o.sibling!==null;)o=o.sibling,y=y.sibling=ja(o,o.pendingProps),y.return=h;y.sibling=null}return h.child}function qg(o,h){return(o.lanes&h)!==0?!0:(o=o.dependencies,!!(o!==null&&uh(o)))}function $v(o,h,y){switch(h.tag){case 3:nn(h,h.stateNode.containerInfo),As(h,dr,o.memoizedState.cache),Cs();break;case 27:case 5:Rt(h);break;case 4:nn(h,h.stateNode.containerInfo);break;case 10:As(h,h.type,h.memoizedProps.value);break;case 31:if(h.memoizedState!==null)return h.flags|=128,ks(h),null;break;case 13:var w=h.memoizedState;if(w!==null)return w.dehydrated!==null?(Pi(h),h.flags|=128,null):(y&h.child.childLanes)!==0?Uv(o,h,y):(Pi(h),o=Ls(o,h,y),o!==null?o.sibling:null);Pi(h);break;case 19:var O=(o.flags&128)!==0;if(w=(y&h.childLanes)!==0,w||(oo(o,h,y,!1),w=(y&h.childLanes)!==0),O){if(w)return Vg(o,h,y);h.flags|=128}if(O=h.memoizedState,O!==null&&(O.rendering=null,O.tail=null,O.lastEffect=null),_t(vr,vr.current),w)break;return null;case 22:return h.lanes=0,Zf(o,h,y,h.pendingProps);case 24:As(h,dr,o.memoizedState.cache)}return Ls(o,h,y)}function Vv(o,h,y){if(o!==null)if(o.memoizedProps!==h.pendingProps)mi=!0;else{if(!qg(o,y)&&(h.flags&128)===0)return mi=!1,$v(o,h,y);mi=(o.flags&131072)!==0}else mi=!1,kn&&(h.flags&1048576)!==0&&Nf(h,yl,h.index);switch(h.lanes=0,h.tag){case 16:e:{var w=h.pendingProps;if(o=gn(h.elementType),h.type=o,typeof o=="function")oh(o)?(w=No(o,w),h.tag=1,h=Ug(null,h,o,w,y)):(h.tag=0,h=Yf(null,h,o,w,y));else{if(o!=null){var O=o.$$typeof;if(O===me){h.tag=11,h=Sh(null,h,o,w,y);break e}else if(O===ye){h.tag=14,h=Lv(null,h,o,w,y);break e}}throw h=At(o)||o,Error(a(306,h,""))}}return h;case 0:return Yf(o,h,h.type,h.pendingProps,y);case 1:return w=h.type,O=No(w,h.pendingProps),Ug(o,h,w,O,y);case 3:e:{if(nn(h,h.stateNode.containerInfo),o===null)throw Error(a(387));w=h.pendingProps;var L=h.memoizedState;O=L.element,er(o,h),wc(h,w,null,y);var Y=h.memoizedState;if(w=Y.cache,As(h,dr,w),w!==L.cache&&vl(h,[dr],y,!0),cu(),w=Y.element,L.isDehydrated)if(L={element:w,isDehydrated:!1,cache:Y.cache},h.updateQueue.baseState=L,h.memoizedState=L,h.flags&256){h=Fv(o,h,w,y);break e}else if(w!==O){O=ia(Error(a(424)),h),ns(O),h=Fv(o,h,w,y);break e}else{switch(o=h.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Jn=fo(o.firstChild),ii=h,kn=!0,Po=null,La=!0,y=$f(h,null,w,y),h.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(Cs(),w===O){h=Ls(o,h,y);break e}Gi(o,h,w,y)}h=h.child}return h;case 26:return Wf(o,h),o===null?(y=b_(h.type,null,h.pendingProps,null))?h.memoizedState=y:kn||(y=h.type,o=h.pendingProps,w=jm(Ht.current).createElement(y),w[Ln]=h,w[xt]=o,yi(w,y,o),Ar(w),h.stateNode=w):h.memoizedState=b_(h.type,o.memoizedProps,h.pendingProps,o.memoizedState),null;case 27:return Rt(h),o===null&&kn&&(w=h.stateNode=g_(h.type,h.pendingProps,Ht.current),ii=h,La=!0,O=Jn,Us(h.type)?(Fm=O,Jn=fo(w.firstChild)):Jn=O),Gi(o,h,h.pendingProps.children,y),Wf(o,h),o===null&&(h.flags|=4194304),h.child;case 5:return o===null&&kn&&((O=w=Jn)&&(w=Bm(w,h.type,h.pendingProps,La),w!==null?(h.stateNode=w,ii=h,Jn=fo(w.firstChild),La=!1,O=!0):O=!1),O||ga(h)),Rt(h),O=h.type,L=h.pendingProps,Y=o!==null?o.memoizedProps:null,w=L.children,Lm(O,L)?w=null:Y!==null&&Lm(O,Y)&&(h.flags|=32),h.memoizedState!==null&&(O=bh(o,h,b,null,null,y),et._currentValue=O),Wf(o,h),Gi(o,h,w,y),h.child;case 6:return o===null&&kn&&((o=y=Jn)&&(y=tx(y,h.pendingProps,La),y!==null?(h.stateNode=y,ii=h,Jn=null,o=!0):o=!1),o||ga(h)),null;case 13:return Uv(o,h,y);case 4:return nn(h,h.stateNode.containerInfo),w=h.pendingProps,o===null?h.child=El(h,null,w,y):Gi(o,h,w,y),h.child;case 11:return Sh(o,h,h.type,h.pendingProps,y);case 7:return Gi(o,h,h.pendingProps,y),h.child;case 8:return Gi(o,h,h.pendingProps.children,y),h.child;case 12:return Gi(o,h,h.pendingProps.children,y),h.child;case 10:return w=h.pendingProps,As(h,h.type,w.value),Gi(o,h,w.children,y),h.child;case 9:return O=h.type._context,w=h.pendingProps.children,_l(h),O=Ai(O),w=w(O),h.flags|=1,Gi(o,h,w,y),h.child;case 14:return Lv(o,h,h.type,h.pendingProps,y);case 15:return Th(o,h,h.type,h.pendingProps,y);case 19:return Vg(o,h,y);case 31:return Ub(o,h,y);case 22:return Zf(o,h,y,h.pendingProps);case 24:return _l(h),w=Ai(dr),o===null?(O=vc(),O===null&&(O=gr,L=dh(),O.pooledCache=L,L.refCount++,L!==null&&(O.pooledCacheLanes|=y),O=L),h.memoizedState={parent:w,cache:O},as(h),As(h,dr,O)):((o.lanes&y)!==0&&(er(o,h),wc(h,null,null,y),cu()),O=o.memoizedState,L=h.memoizedState,O.parent!==w?(O={parent:w,cache:w},h.memoizedState=O,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=O),As(h,dr,w)):(w=L.cache,As(h,dr,w),w!==O.cache&&vl(h,[dr],y,!0))),Gi(o,h,h.pendingProps.children,y),h.child;case 29:throw h.pendingProps}throw Error(a(156,h.tag))}function Ac(o){o.flags|=4}function mm(o,h,y,w,O){if((h=(o.mode&32)!==0)&&(h=!1),h){if(o.flags|=16777216,(O&335544128)===O)if(o.stateNode.complete)o.flags|=8192;else if(e_())o.flags|=8192;else throw is=Sl,fh}else o.flags&=-16777217}function qv(o,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!re(h))if(e_())o.flags|=8192;else throw is=Sl,fh}function zd(o,h){h!==null&&(o.flags|=4),o.flags&16384&&(h=o.tag!==22?Sn():536870912,o.lanes|=h,Dh|=h)}function Rd(o,h){if(!kn)switch(o.tailMode){case"hidden":h=o.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?o.tail=null:y.sibling=null;break;case"collapsed":y=o.tail;for(var w=null;y!==null;)y.alternate!==null&&(w=y),y=y.sibling;w===null?h||o.tail===null?o.tail=null:o.tail.sibling=null:w.sibling=null}}function kr(o){var h=o.alternate!==null&&o.alternate.child===o.child,y=0,w=0;if(h)for(var O=o.child;O!==null;)y|=O.lanes|O.childLanes,w|=O.subtreeFlags&65011712,w|=O.flags&65011712,O.return=o,O=O.sibling;else for(O=o.child;O!==null;)y|=O.lanes|O.childLanes,w|=O.subtreeFlags,w|=O.flags,O.return=o,O=O.sibling;return o.subtreeFlags|=w,o.childLanes=y,h}function $b(o,h,y){var w=h.pendingProps;switch(iu(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kr(h),null;case 1:return kr(h),null;case 3:return y=h.stateNode,w=null,o!==null&&(w=o.memoizedState.cache),h.memoizedState.cache!==w&&(h.flags|=2048),ko(dr),pt(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(o===null||o.child===null)&&(Ms(h)?Ac(h):o===null||o.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Es())),kr(h),null;case 26:var O=h.type,L=h.memoizedState;return o===null?(Ac(h),L!==null?(kr(h),qv(h,L)):(kr(h),mm(h,O,null,w,y))):L?L!==o.memoizedState?(Ac(h),kr(h),qv(h,L)):(kr(h),h.flags&=-16777217):(o=o.memoizedProps,o!==w&&Ac(h),kr(h),mm(h,O,o,w,y)),null;case 27:if(Ft(h),y=Ht.current,O=h.type,o!==null&&h.stateNode!=null)o.memoizedProps!==w&&Ac(h);else{if(!w){if(h.stateNode===null)throw Error(a(166));return kr(h),null}o=Tt.current,Ms(h)?Na(h):(o=g_(O,w,y),h.stateNode=o,Ac(h))}return kr(h),null;case 5:if(Ft(h),O=h.type,o!==null&&h.stateNode!=null)o.memoizedProps!==w&&Ac(h);else{if(!w){if(h.stateNode===null)throw Error(a(166));return kr(h),null}if(L=Tt.current,Ms(h))Na(h);else{var Y=jm(Ht.current);switch(L){case 1:L=Y.createElementNS("http://www.w3.org/2000/svg",O);break;case 2:L=Y.createElementNS("http://www.w3.org/1998/Math/MathML",O);break;default:switch(O){case"svg":L=Y.createElementNS("http://www.w3.org/2000/svg",O);break;case"math":L=Y.createElementNS("http://www.w3.org/1998/Math/MathML",O);break;case"script":L=Y.createElement("div"),L.innerHTML="<script><\/script>",L=L.removeChild(L.firstChild);break;case"select":L=typeof w.is=="string"?Y.createElement("select",{is:w.is}):Y.createElement("select"),w.multiple?L.multiple=!0:w.size&&(L.size=w.size);break;default:L=typeof w.is=="string"?Y.createElement(O,{is:w.is}):Y.createElement(O)}}L[Ln]=h,L[xt]=w;e:for(Y=h.child;Y!==null;){if(Y.tag===5||Y.tag===6)L.appendChild(Y.stateNode);else if(Y.tag!==4&&Y.tag!==27&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===h)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===h)break e;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}h.stateNode=L;e:switch(yi(L,O,w),O){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}w&&Ac(h)}}return kr(h),mm(h,h.type,o===null?null:o.memoizedProps,h.pendingProps,y),null;case 6:if(o&&h.stateNode!=null)o.memoizedProps!==w&&Ac(h);else{if(typeof w!="string"&&h.stateNode===null)throw Error(a(166));if(o=Ht.current,Ms(h)){if(o=h.stateNode,y=h.memoizedProps,w=null,O=ii,O!==null)switch(O.tag){case 27:case 5:w=O.memoizedProps}o[Ln]=h,o=!!(o.nodeValue===y||w!==null&&w.suppressHydrationWarning===!0||xy(o.nodeValue,y)),o||ga(h,!0)}else o=jm(o).createTextNode(w),o[Ln]=h,h.stateNode=o}return kr(h),null;case 31:if(y=h.memoizedState,o===null||o.memoizedState!==null){if(w=Ms(h),y!==null){if(o===null){if(!w)throw Error(a(318));if(o=h.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(a(557));o[Ln]=h}else Cs(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;kr(h),o=!1}else y=Es(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=y),o=!0;if(!o)return h.flags&256?(Ua(h),h):(Ua(h),null);if((h.flags&128)!==0)throw Error(a(558))}return kr(h),null;case 13:if(w=h.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(O=Ms(h),w!==null&&w.dehydrated!==null){if(o===null){if(!O)throw Error(a(318));if(O=h.memoizedState,O=O!==null?O.dehydrated:null,!O)throw Error(a(317));O[Ln]=h}else Cs(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;kr(h),O=!1}else O=Es(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=O),O=!0;if(!O)return h.flags&256?(Ua(h),h):(Ua(h),null)}return Ua(h),(h.flags&128)!==0?(h.lanes=y,h):(y=w!==null,o=o!==null&&o.memoizedState!==null,y&&(w=h.child,O=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(O=w.alternate.memoizedState.cachePool.pool),L=null,w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(L=w.memoizedState.cachePool.pool),L!==O&&(w.flags|=2048)),y!==o&&y&&(h.child.flags|=8192),zd(h,h.updateQueue),kr(h),null);case 4:return pt(),o===null&&km(h.stateNode.containerInfo),kr(h),null;case 10:return ko(h.type),kr(h),null;case 19:if(qe(vr),w=h.memoizedState,w===null)return kr(h),null;if(O=(h.flags&128)!==0,L=w.rendering,L===null)if(O)Rd(w,!1);else{if(oi!==0||o!==null&&(o.flags&128)!==0)for(o=h.child;o!==null;){if(L=pr(o),L!==null){for(h.flags|=128,Rd(w,!1),o=L.updateQueue,h.updateQueue=o,zd(h,o),h.subtreeFlags=0,o=y,y=h.child;y!==null;)sm(y,o),y=y.sibling;return _t(vr,vr.current&1|2),kn&&Ts(h,w.treeForkCount),h.child}o=o.sibling}w.tail!==null&&Rr()>Oh&&(h.flags|=128,O=!0,Rd(w,!1),h.lanes=4194304)}else{if(!O)if(o=pr(L),o!==null){if(h.flags|=128,O=!0,o=o.updateQueue,h.updateQueue=o,zd(h,o),Rd(w,!0),w.tail===null&&w.tailMode==="hidden"&&!L.alternate&&!kn)return kr(h),null}else 2*Rr()-w.renderingStartTime>Oh&&y!==536870912&&(h.flags|=128,O=!0,Rd(w,!1),h.lanes=4194304);w.isBackwards?(L.sibling=h.child,h.child=L):(o=w.last,o!==null?o.sibling=L:h.child=L,w.last=L)}return w.tail!==null?(o=w.tail,w.rendering=o,w.tail=o.sibling,w.renderingStartTime=Rr(),o.sibling=null,y=vr.current,_t(vr,O?y&1|2:y&1),kn&&Ts(h,w.treeForkCount),o):(kr(h),null);case 22:case 23:return Ua(h),uu(),w=h.memoizedState!==null,o!==null?o.memoizedState!==null!==w&&(h.flags|=8192):w&&(h.flags|=8192),w?(y&536870912)!==0&&(h.flags&128)===0&&(kr(h),h.subtreeFlags&6&&(h.flags|=8192)):kr(h),y=h.updateQueue,y!==null&&zd(h,y.retryQueue),y=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(y=o.memoizedState.cachePool.pool),w=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==y&&(h.flags|=2048),o!==null&&qe(xl),null;case 24:return y=null,o!==null&&(y=o.memoizedState.cache),h.memoizedState.cache!==y&&(h.flags|=2048),ko(dr),kr(h),null;case 25:return null;case 30:return null}throw Error(a(156,h.tag))}function Vb(o,h){switch(iu(h),h.tag){case 1:return o=h.flags,o&65536?(h.flags=o&-65537|128,h):null;case 3:return ko(dr),pt(),o=h.flags,(o&65536)!==0&&(o&128)===0?(h.flags=o&-65537|128,h):null;case 26:case 27:case 5:return Ft(h),null;case 31:if(h.memoizedState!==null){if(Ua(h),h.alternate===null)throw Error(a(340));Cs()}return o=h.flags,o&65536?(h.flags=o&-65537|128,h):null;case 13:if(Ua(h),o=h.memoizedState,o!==null&&o.dehydrated!==null){if(h.alternate===null)throw Error(a(340));Cs()}return o=h.flags,o&65536?(h.flags=o&-65537|128,h):null;case 19:return qe(vr),null;case 4:return pt(),null;case 10:return ko(h.type),null;case 22:case 23:return Ua(h),uu(),o!==null&&qe(xl),o=h.flags,o&65536?(h.flags=o&-65537|128,h):null;case 24:return ko(dr),null;case 25:return null;default:return null}}function Gv(o,h){switch(iu(h),h.tag){case 3:ko(dr),pt();break;case 26:case 27:case 5:Ft(h);break;case 4:pt();break;case 31:h.memoizedState!==null&&Ua(h);break;case 13:Ua(h);break;case 19:qe(vr);break;case 10:ko(h.type);break;case 22:case 23:Ua(h),uu(),o!==null&&qe(xl);break;case 24:ko(dr)}}function mu(o,h){try{var y=h.updateQueue,w=y!==null?y.lastEffect:null;if(w!==null){var O=w.next;y=O;do{if((y.tag&o)===o){w=void 0;var L=y.create,Y=y.inst;w=L(),Y.destroy=w}y=y.next}while(y!==O)}}catch(le){ar(h,h.return,le)}}function Ol(o,h,y){try{var w=h.updateQueue,O=w!==null?w.lastEffect:null;if(O!==null){var L=O.next;w=L;do{if((w.tag&o)===o){var Y=w.inst,le=Y.destroy;if(le!==void 0){Y.destroy=void 0,O=h;var Pe=y,Je=le;try{Je()}catch(ct){ar(O,Pe,ct)}}}w=w.next}while(w!==L)}}catch(ct){ar(h,h.return,ct)}}function Gg(o){var h=o.updateQueue;if(h!==null){var y=o.stateNode;try{vh(h,y)}catch(w){ar(o,o.return,w)}}}function gu(o,h,y){y.props=No(o.type,o.memoizedProps),y.state=o.memoizedState;try{y.componentWillUnmount()}catch(w){ar(o,h,w)}}function Pc(o,h){try{var y=o.ref;if(y!==null){switch(o.tag){case 26:case 27:case 5:var w=o.stateNode;break;case 30:w=o.stateNode;break;default:w=o.stateNode}typeof y=="function"?o.refCleanup=y(w):y.current=w}}catch(O){ar(o,h,O)}}function Il(o,h){var y=o.ref,w=o.refCleanup;if(y!==null)if(typeof w=="function")try{w()}catch(O){ar(o,h,O)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(O){ar(o,h,O)}else y.current=null}function Hv(o){var h=o.type,y=o.memoizedProps,w=o.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":y.autoFocus&&w.focus();break e;case"img":y.src?w.src=y.src:y.srcSet&&(w.srcset=y.srcSet)}}catch(O){ar(o,o.return,O)}}function Hg(o,h,y){try{var w=o.stateNode;Rh(w,o.type,y,h),w[xt]=h}catch(O){ar(o,o.return,O)}}function Zv(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Us(o.type)||o.tag===4}function Zg(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Zv(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Us(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Wg(o,h,y){var w=o.tag;if(w===5||w===6)o=o.stateNode,h?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(o,h):(h=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,h.appendChild(o),y=y._reactRootContainer,y!=null||h.onclick!==null||(h.onclick=ka));else if(w!==4&&(w===27&&Us(o.type)&&(y=o.stateNode,h=null),o=o.child,o!==null))for(Wg(o,h,y),o=o.sibling;o!==null;)Wg(o,h,y),o=o.sibling}function gm(o,h,y){var w=o.tag;if(w===5||w===6)o=o.stateNode,h?y.insertBefore(o,h):y.appendChild(o);else if(w!==4&&(w===27&&Us(o.type)&&(y=o.stateNode),o=o.child,o!==null))for(gm(o,h,y),o=o.sibling;o!==null;)gm(o,h,y),o=o.sibling}function ym(o){var h=o.stateNode,y=o.memoizedProps;try{for(var w=o.type,O=h.attributes;O.length;)h.removeAttributeNode(O[0]);yi(h,w,y),h[Ln]=o,h[xt]=y}catch(L){ar(o,o.return,L)}}var Dc=!1,gi=!1,Mh=!1,Wv=typeof WeakSet=="function"?WeakSet:Set,In=null;function jd(o,h){if(o=o.containerInfo,zm=tn,o=Nn(o),xd(o)){if("selectionStart"in o)var y={start:o.selectionStart,end:o.selectionEnd};else e:{y=(y=o.ownerDocument)&&y.defaultView||window;var w=y.getSelection&&y.getSelection();if(w&&w.rangeCount!==0){y=w.anchorNode;var O=w.anchorOffset,L=w.focusNode;w=w.focusOffset;try{y.nodeType,L.nodeType}catch{y=null;break e}var Y=0,le=-1,Pe=-1,Je=0,ct=0,vt=o,tt=null;t:for(;;){for(var it;vt!==y||O!==0&&vt.nodeType!==3||(le=Y+O),vt!==L||w!==0&&vt.nodeType!==3||(Pe=Y+w),vt.nodeType===3&&(Y+=vt.nodeValue.length),(it=vt.firstChild)!==null;)tt=vt,vt=it;for(;;){if(vt===o)break t;if(tt===y&&++Je===O&&(le=Y),tt===L&&++ct===w&&(Pe=Y),(it=vt.nextSibling)!==null)break;vt=tt,tt=vt.parentNode}vt=it}y=le===-1||Pe===-1?null:{start:le,end:Pe}}else y=null}y=y||{start:0,end:0}}else y=null;for(Rm={focusedElem:o,selectionRange:y},tn=!1,In=h;In!==null;)if(h=In,o=h.child,(h.subtreeFlags&1028)!==0&&o!==null)o.return=h,In=o;else for(;In!==null;){switch(h=In,L=h.alternate,o=h.flags,h.tag){case 0:if((o&4)!==0&&(o=h.updateQueue,o=o!==null?o.events:null,o!==null))for(y=0;y<o.length;y++)O=o[y],O.ref.impl=O.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&L!==null){o=void 0,y=h,O=L.memoizedProps,L=L.memoizedState,w=y.stateNode;try{var Yt=No(y.type,O);o=w.getSnapshotBeforeUpdate(Yt,L),w.__reactInternalSnapshotBeforeUpdate=o}catch(fn){ar(y,y.return,fn)}}break;case 3:if((o&1024)!==0){if(o=h.stateNode.containerInfo,y=o.nodeType,y===9)Wd(o);else if(y===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Wd(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(a(163))}if(o=h.sibling,o!==null){o.return=h.return,In=o;break}In=h.return}}function Yg(o,h,y){var w=y.flags;switch(y.tag){case 0:case 11:case 15:kc(o,y),w&4&&mu(5,y);break;case 1:if(kc(o,y),w&4)if(o=y.stateNode,h===null)try{o.componentDidMount()}catch(Y){ar(y,y.return,Y)}else{var O=No(y.type,h.memoizedProps);h=h.memoizedState;try{o.componentDidUpdate(O,h,o.__reactInternalSnapshotBeforeUpdate)}catch(Y){ar(y,y.return,Y)}}w&64&&Gg(y),w&512&&Pc(y,y.return);break;case 3:if(kc(o,y),w&64&&(o=y.updateQueue,o!==null)){if(h=null,y.child!==null)switch(y.child.tag){case 27:case 5:h=y.child.stateNode;break;case 1:h=y.child.stateNode}try{vh(o,h)}catch(Y){ar(y,y.return,Y)}}break;case 27:h===null&&w&4&&ym(y);case 26:case 5:kc(o,y),h===null&&w&4&&Hv(y),w&512&&Pc(y,y.return);break;case 12:kc(o,y);break;case 31:kc(o,y),w&4&&Ld(o,y);break;case 13:kc(o,y),w&4&&vm(o,y),w&64&&(o=y.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(y=Wb.bind(null,y),Zi(o,y))));break;case 22:if(w=y.memoizedState!==null||Dc,!w){h=h!==null&&h.memoizedState!==null||gi,O=Dc;var L=gi;Dc=w,(gi=h)&&!L?Bo(o,y,(y.subtreeFlags&8772)!==0):kc(o,y),Dc=O,gi=L}break;case 30:break;default:kc(o,y)}}function Jf(o){var h=o.alternate;h!==null&&(o.alternate=null,Jf(h)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(h=o.stateNode,h!==null&&al(h)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Tr=null,Hi=!1;function zl(o,h,y){for(y=y.child;y!==null;)Xg(o,h,y),y=y.sibling}function Xg(o,h,y){if(Me&&typeof Me.onCommitFiberUnmount=="function")try{Me.onCommitFiberUnmount(Se,y)}catch{}switch(y.tag){case 26:gi||Il(y,h),zl(o,h,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:gi||Il(y,h);var w=Tr,O=Hi;Us(y.type)&&(Tr=y.stateNode,Hi=!1),zl(o,h,y),Yd(y.stateNode),Tr=w,Hi=O;break;case 5:gi||Il(y,h);case 6:if(w=Tr,O=Hi,Tr=null,zl(o,h,y),Tr=w,Hi=O,Tr!==null)if(Hi)try{(Tr.nodeType===9?Tr.body:Tr.nodeName==="HTML"?Tr.ownerDocument.body:Tr).removeChild(y.stateNode)}catch(L){ar(y,h,L)}else try{Tr.removeChild(y.stateNode)}catch(L){ar(y,h,L)}break;case 18:Tr!==null&&(Hi?(o=Tr,My(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,y.stateNode),Sa(o)):My(Tr,y.stateNode));break;case 4:w=Tr,O=Hi,Tr=y.stateNode.containerInfo,Hi=!0,zl(o,h,y),Tr=w,Hi=O;break;case 0:case 11:case 14:case 15:Ol(2,y,h),gi||Ol(4,y,h),zl(o,h,y);break;case 1:gi||(Il(y,h),w=y.stateNode,typeof w.componentWillUnmount=="function"&&gu(y,h,w)),zl(o,h,y);break;case 21:zl(o,h,y);break;case 22:gi=(w=gi)||y.memoizedState!==null,zl(o,h,y),gi=w;break;default:zl(o,h,y)}}function Ld(o,h){if(h.memoizedState===null&&(o=h.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Sa(o)}catch(y){ar(h,h.return,y)}}}function vm(o,h){if(h.memoizedState===null&&(o=h.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Sa(o)}catch(y){ar(h,h.return,y)}}function Nd(o){switch(o.tag){case 31:case 13:case 19:var h=o.stateNode;return h===null&&(h=o.stateNode=new Wv),h;case 22:return o=o.stateNode,h=o._retryCache,h===null&&(h=o._retryCache=new Wv),h;default:throw Error(a(435,o.tag))}}function Ch(o,h){var y=Nd(o);h.forEach(function(w){if(!y.has(w)){y.add(w);var O=Yb.bind(null,o,w);w.then(O,O)}})}function Li(o,h){var y=h.deletions;if(y!==null)for(var w=0;w<y.length;w++){var O=y[w],L=o,Y=h,le=Y;e:for(;le!==null;){switch(le.tag){case 27:if(Us(le.type)){Tr=le.stateNode,Hi=!1;break e}break;case 5:Tr=le.stateNode,Hi=!1;break e;case 3:case 4:Tr=le.stateNode.containerInfo,Hi=!0;break e}le=le.return}if(Tr===null)throw Error(a(160));Xg(L,Y,O),Tr=null,Hi=!1,L=O.alternate,L!==null&&(L.return=null),O.return=null}if(h.subtreeFlags&13886)for(h=h.child;h!==null;)Yv(h,o),h=h.sibling}var qa=null;function Yv(o,h){var y=o.alternate,w=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Li(h,o),Ga(o),w&4&&(Ol(3,o,o.return),mu(3,o),Ol(5,o,o.return));break;case 1:Li(h,o),Ga(o),w&512&&(gi||y===null||Il(y,y.return)),w&64&&Dc&&(o=o.updateQueue,o!==null&&(w=o.callbacks,w!==null&&(y=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=y===null?w:y.concat(w))));break;case 26:var O=qa;if(Li(h,o),Ga(o),w&512&&(gi||y===null||Il(y,y.return)),w&4){var L=y!==null?y.memoizedState:null;if(w=o.memoizedState,y===null)if(w===null)if(o.stateNode===null){e:{w=o.type,y=o.memoizedProps,O=O.ownerDocument||O;t:switch(w){case"title":L=O.getElementsByTagName("title")[0],(!L||L[pn]||L[Ln]||L.namespaceURI==="http://www.w3.org/2000/svg"||L.hasAttribute("itemprop"))&&(L=O.createElement(w),O.head.insertBefore(L,O.querySelector("head > title"))),yi(L,w,y),L[Ln]=o,Ar(L),w=L;break e;case"link":var Y=q("link","href",O).get(w+(y.href||""));if(Y){for(var le=0;le<Y.length;le++)if(L=Y[le],L.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&L.getAttribute("rel")===(y.rel==null?null:y.rel)&&L.getAttribute("title")===(y.title==null?null:y.title)&&L.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){Y.splice(le,1);break t}}L=O.createElement(w),yi(L,w,y),O.head.appendChild(L);break;case"meta":if(Y=q("meta","content",O).get(w+(y.content||""))){for(le=0;le<Y.length;le++)if(L=Y[le],L.getAttribute("content")===(y.content==null?null:""+y.content)&&L.getAttribute("name")===(y.name==null?null:y.name)&&L.getAttribute("property")===(y.property==null?null:y.property)&&L.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&L.getAttribute("charset")===(y.charSet==null?null:y.charSet)){Y.splice(le,1);break t}}L=O.createElement(w),yi(L,w,y),O.head.appendChild(L);break;default:throw Error(a(468,w))}L[Ln]=o,Ar(L),w=L}o.stateNode=w}else K(O,o.type,o.stateNode);else o.stateNode=T(O,w,o.memoizedProps);else L!==w?(L===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):L.count--,w===null?K(O,o.type,o.stateNode):T(O,w,o.memoizedProps)):w===null&&o.stateNode!==null&&Hg(o,o.memoizedProps,y.memoizedProps)}break;case 27:Li(h,o),Ga(o),w&512&&(gi||y===null||Il(y,y.return)),y!==null&&w&4&&Hg(o,o.memoizedProps,y.memoizedProps);break;case 5:if(Li(h,o),Ga(o),w&512&&(gi||y===null||Il(y,y.return)),o.flags&32){O=o.stateNode;try{Yo(O,"")}catch(Yt){ar(o,o.return,Yt)}}w&4&&o.stateNode!=null&&(O=o.memoizedProps,Hg(o,O,y!==null?y.memoizedProps:O)),w&1024&&(Mh=!0);break;case 6:if(Li(h,o),Ga(o),w&4){if(o.stateNode===null)throw Error(a(162));w=o.memoizedProps,y=o.stateNode;try{y.nodeValue=w}catch(Yt){ar(o,o.return,Yt)}}break;case 3:if(B=null,O=qa,qa=gp(h.containerInfo),Li(h,o),qa=O,Ga(o),w&4&&y!==null&&y.memoizedState.isDehydrated)try{Sa(h.containerInfo)}catch(Yt){ar(o,o.return,Yt)}Mh&&(Mh=!1,yu(o));break;case 4:w=qa,qa=gp(o.stateNode.containerInfo),Li(h,o),Ga(o),qa=w;break;case 12:Li(h,o),Ga(o);break;case 31:Li(h,o),Ga(o),w&4&&(w=o.updateQueue,w!==null&&(o.updateQueue=null,Ch(o,w)));break;case 13:Li(h,o),Ga(o),o.child.flags&8192&&o.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(ip=Rr()),w&4&&(w=o.updateQueue,w!==null&&(o.updateQueue=null,Ch(o,w)));break;case 22:O=o.memoizedState!==null;var Pe=y!==null&&y.memoizedState!==null,Je=Dc,ct=gi;if(Dc=Je||O,gi=ct||Pe,Li(h,o),gi=ct,Dc=Je,Ga(o),w&8192)e:for(h=o.stateNode,h._visibility=O?h._visibility&-2:h._visibility|1,O&&(y===null||Pe||Dc||gi||vu(o)),y=null,h=o;;){if(h.tag===5||h.tag===26){if(y===null){Pe=y=h;try{if(L=Pe.stateNode,O)Y=L.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{le=Pe.stateNode;var vt=Pe.memoizedProps.style,tt=vt!=null&&vt.hasOwnProperty("display")?vt.display:null;le.style.display=tt==null||typeof tt=="boolean"?"":(""+tt).trim()}}catch(Yt){ar(Pe,Pe.return,Yt)}}}else if(h.tag===6){if(y===null){Pe=h;try{Pe.stateNode.nodeValue=O?"":Pe.memoizedProps}catch(Yt){ar(Pe,Pe.return,Yt)}}}else if(h.tag===18){if(y===null){Pe=h;try{var it=Pe.stateNode;O?mp(it,!0):mp(Pe.stateNode,!1)}catch(Yt){ar(Pe,Pe.return,Yt)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===o)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===o)break e;for(;h.sibling===null;){if(h.return===null||h.return===o)break e;y===h&&(y=null),h=h.return}y===h&&(y=null),h.sibling.return=h.return,h=h.sibling}w&4&&(w=o.updateQueue,w!==null&&(y=w.retryQueue,y!==null&&(w.retryQueue=null,Ch(o,y))));break;case 19:Li(h,o),Ga(o),w&4&&(w=o.updateQueue,w!==null&&(o.updateQueue=null,Ch(o,w)));break;case 30:break;case 21:break;default:Li(h,o),Ga(o)}}function Ga(o){var h=o.flags;if(h&2){try{for(var y,w=o.return;w!==null;){if(Zv(w)){y=w;break}w=w.return}if(y==null)throw Error(a(160));switch(y.tag){case 27:var O=y.stateNode,L=Zg(o);gm(o,L,O);break;case 5:var Y=y.stateNode;y.flags&32&&(Yo(Y,""),y.flags&=-33);var le=Zg(o);gm(o,le,Y);break;case 3:case 4:var Pe=y.stateNode.containerInfo,Je=Zg(o);Wg(o,Je,Pe);break;default:throw Error(a(161))}}catch(ct){ar(o,o.return,ct)}o.flags&=-3}h&4096&&(o.flags&=-4097)}function yu(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var h=o;yu(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),o=o.sibling}}function kc(o,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)Yg(o,h.alternate,h),h=h.sibling}function vu(o){for(o=o.child;o!==null;){var h=o;switch(h.tag){case 0:case 11:case 14:case 15:Ol(4,h,h.return),vu(h);break;case 1:Il(h,h.return);var y=h.stateNode;typeof y.componentWillUnmount=="function"&&gu(h,h.return,y),vu(h);break;case 27:Yd(h.stateNode);case 26:case 5:Il(h,h.return),vu(h);break;case 22:h.memoizedState===null&&vu(h);break;case 30:vu(h);break;default:vu(h)}o=o.sibling}}function Bo(o,h,y){for(y=y&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var w=h.alternate,O=o,L=h,Y=L.flags;switch(L.tag){case 0:case 11:case 15:Bo(O,L,y),mu(4,L);break;case 1:if(Bo(O,L,y),w=L,O=w.stateNode,typeof O.componentDidMount=="function")try{O.componentDidMount()}catch(Je){ar(w,w.return,Je)}if(w=L,O=w.updateQueue,O!==null){var le=w.stateNode;try{var Pe=O.shared.hiddenCallbacks;if(Pe!==null)for(O.shared.hiddenCallbacks=null,O=0;O<Pe.length;O++)Oo(Pe[O],le)}catch(Je){ar(w,w.return,Je)}}y&&Y&64&&Gg(L),Pc(L,L.return);break;case 27:ym(L);case 26:case 5:Bo(O,L,y),y&&w===null&&Y&4&&Hv(L),Pc(L,L.return);break;case 12:Bo(O,L,y);break;case 31:Bo(O,L,y),y&&Y&4&&Ld(O,L);break;case 13:Bo(O,L,y),y&&Y&4&&vm(O,L);break;case 22:L.memoizedState===null&&Bo(O,L,y),Pc(L,L.return);break;case 30:break;default:Bo(O,L,y)}h=h.sibling}}function ep(o,h){var y=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(y=o.memoizedState.cachePool.pool),o=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(o=h.memoizedState.cachePool.pool),o!==y&&(o!=null&&o.refCount++,y!=null&&Vi(y))}function _m(o,h){o=null,h.alternate!==null&&(o=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==o&&(h.refCount++,o!=null&&Vi(o))}function cs(o,h,y,w){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Xv(o,h,y,w),h=h.sibling}function Xv(o,h,y,w){var O=h.flags;switch(h.tag){case 0:case 11:case 15:cs(o,h,y,w),O&2048&&mu(9,h);break;case 1:cs(o,h,y,w);break;case 3:cs(o,h,y,w),O&2048&&(o=null,h.alternate!==null&&(o=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==o&&(h.refCount++,o!=null&&Vi(o)));break;case 12:if(O&2048){cs(o,h,y,w),o=h.stateNode;try{var L=h.memoizedProps,Y=L.id,le=L.onPostCommit;typeof le=="function"&&le(Y,h.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Pe){ar(h,h.return,Pe)}}else cs(o,h,y,w);break;case 31:cs(o,h,y,w);break;case 13:cs(o,h,y,w);break;case 23:break;case 22:L=h.stateNode,Y=h.alternate,h.memoizedState!==null?L._visibility&2?cs(o,h,y,w):tp(o,h):L._visibility&2?cs(o,h,y,w):(L._visibility|=2,Bd(o,h,y,w,(h.subtreeFlags&10256)!==0||!1)),O&2048&&ep(Y,h);break;case 24:cs(o,h,y,w),O&2048&&_m(h.alternate,h);break;default:cs(o,h,y,w)}}function Bd(o,h,y,w,O){for(O=O&&((h.subtreeFlags&10256)!==0||!1),h=h.child;h!==null;){var L=o,Y=h,le=y,Pe=w,Je=Y.flags;switch(Y.tag){case 0:case 11:case 15:Bd(L,Y,le,Pe,O),mu(8,Y);break;case 23:break;case 22:var ct=Y.stateNode;Y.memoizedState!==null?ct._visibility&2?Bd(L,Y,le,Pe,O):tp(L,Y):(ct._visibility|=2,Bd(L,Y,le,Pe,O)),O&&Je&2048&&ep(Y.alternate,Y);break;case 24:Bd(L,Y,le,Pe,O),O&&Je&2048&&_m(Y.alternate,Y);break;default:Bd(L,Y,le,Pe,O)}h=h.sibling}}function tp(o,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var y=o,w=h,O=w.flags;switch(w.tag){case 22:tp(y,w),O&2048&&ep(w.alternate,w);break;case 24:tp(y,w),O&2048&&_m(w.alternate,w);break;default:tp(y,w)}h=h.sibling}}var np=8192;function Fd(o,h,y){if(o.subtreeFlags&np)for(o=o.child;o!==null;)Eh(o,h,y),o=o.sibling}function Eh(o,h,y){switch(o.tag){case 26:Fd(o,h,y),o.flags&np&&o.memoizedState!==null&&se(y,qa,o.memoizedState,o.memoizedProps);break;case 5:Fd(o,h,y);break;case 3:case 4:var w=qa;qa=gp(o.stateNode.containerInfo),Fd(o,h,y),qa=w;break;case 22:o.memoizedState===null&&(w=o.alternate,w!==null&&w.memoizedState!==null?(w=np,np=16777216,Fd(o,h,y),np=w):Fd(o,h,y));break;default:Fd(o,h,y)}}function Kv(o){var h=o.alternate;if(h!==null&&(o=h.child,o!==null)){h.child=null;do h=o.sibling,o.sibling=null,o=h;while(o!==null)}}function rp(o){var h=o.deletions;if((o.flags&16)!==0){if(h!==null)for(var y=0;y<h.length;y++){var w=h[y];In=w,Qg(w,o)}Kv(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Kg(o),o=o.sibling}function Kg(o){switch(o.tag){case 0:case 11:case 15:rp(o),o.flags&2048&&Ol(9,o,o.return);break;case 3:rp(o);break;case 12:rp(o);break;case 22:var h=o.stateNode;o.memoizedState!==null&&h._visibility&2&&(o.return===null||o.return.tag!==13)?(h._visibility&=-3,bm(o)):rp(o);break;default:rp(o)}}function bm(o){var h=o.deletions;if((o.flags&16)!==0){if(h!==null)for(var y=0;y<h.length;y++){var w=h[y];In=w,Qg(w,o)}Kv(o)}for(o=o.child;o!==null;){switch(h=o,h.tag){case 0:case 11:case 15:Ol(8,h,h.return),bm(h);break;case 22:y=h.stateNode,y._visibility&2&&(y._visibility&=-3,bm(h));break;default:bm(h)}o=o.sibling}}function Qg(o,h){for(;In!==null;){var y=In;switch(y.tag){case 0:case 11:case 15:Ol(8,y,h);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var w=y.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:Vi(y.memoizedState.cache)}if(w=y.child,w!==null)w.return=y,In=w;else e:for(y=o;In!==null;){w=In;var O=w.sibling,L=w.return;if(Jf(w),w===y){In=null;break e}if(O!==null){O.return=L,In=O;break e}In=L}}}var qb={getCacheForType:function(o){var h=Ai(dr),y=h.data.get(o);return y===void 0&&(y=o(),h.data.set(o,y)),y},cacheSignal:function(){return Ai(dr).controller.signal}},Jg=typeof WeakMap=="function"?WeakMap:Map,Hn=0,gr=null,Bn=null,$n=0,cr=0,uo=null,_u=!1,Ud=!1,Ah=!1,Rl=0,oi=0,bu=0,Ph=0,ey=0,Fo=0,Dh=0,kh=null,Ha=null,xm=!1,ip=0,Qv=0,Oh=1/0,wm=null,Oc=null,Ni=0,xu=null,$d=null,jl=0,ty=0,ny=null,Vd=null,qr=0,ap=null;function ho(){return(Hn&2)!==0&&$n!==0?$n&-$n:Le.T!==null?Su():To()}function ry(){if(Fo===0)if(($n&536870912)===0||kn){var o=Mt;Mt<<=1,(Mt&3932160)===0&&(Mt=262144),Fo=o}else Fo=536870912;return o=fr.current,o!==null&&(o.flags|=32),Fo}function xa(o,h,y){(o===gr&&(cr===2||cr===9)||o.cancelPendingCommit!==null)&&(qd(o,0),wu(o,$n,Fo,!1)),jr(o,y),((Hn&2)===0||o!==gr)&&(o===gr&&((Hn&2)===0&&(Ph|=y),oi===4&&wu(o,$n,Fo,!1)),Bs(o))}function Ih(o,h,y){if((Hn&6)!==0)throw Error(a(327));var w=!y&&(h&127)===0&&(h&o.expiredLanes)===0||On(o,h),O=w?r_(o,h):oy(o,h,!0),L=w;do{if(O===0){Ud&&!w&&wu(o,h,0,!1);break}else{if(y=o.current.alternate,L&&!Gb(y)){O=oy(o,h,!1),L=!1;continue}if(O===2){if(L=h,o.errorRecoveryDisabledLanes&L)var Y=0;else Y=o.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){h=Y;e:{var le=o;O=kh;var Pe=le.current.memoizedState.isDehydrated;if(Pe&&(qd(le,Y).flags|=256),Y=oy(le,Y,!1),Y!==2){if(Ah&&!Pe){le.errorRecoveryDisabledLanes|=L,Ph|=L,O=4;break e}L=Ha,Ha=O,L!==null&&(Ha===null?Ha=L:Ha.push.apply(Ha,L))}O=Y}if(L=!1,O!==2)continue}}if(O===1){qd(o,0),wu(o,h,0,!0);break}e:{switch(w=o,L=O,L){case 0:case 1:throw Error(a(345));case 4:if((h&4194048)!==h)break;case 6:wu(w,h,Fo,!_u);break e;case 2:Ha=null;break;case 3:case 5:break;default:throw Error(a(329))}if((h&62914560)===h&&(O=ip+300-Rr(),10<O)){if(wu(w,h,Fo,!_u),wn(w,0,!0)!==0)break e;jl=h,w.timeoutHandle=Ty(iy.bind(null,w,y,Ha,wm,xm,h,Fo,Ph,Dh,_u,L,"Throttled",-0,0),O);break e}iy(w,y,Ha,wm,xm,h,Fo,Ph,Dh,_u,L,null,-0,0)}}break}while(!0);Bs(o)}function iy(o,h,y,w,O,L,Y,le,Pe,Je,ct,vt,tt,it){if(o.timeoutHandle=-1,vt=h.subtreeFlags,vt&8192||(vt&16785408)===16785408){vt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ka},Eh(h,L,vt);var Yt=(L&62914560)===L?ip-Rr():(L&4194048)===L?Qv-Rr():0;if(Yt=ge(vt,Yt),Yt!==null){jl=L,o.cancelPendingCommit=Yt(sp.bind(null,o,h,L,y,w,O,Y,le,Pe,ct,vt,null,tt,it)),wu(o,L,Y,!Je);return}}sp(o,h,L,y,w,O,Y,le,Pe)}function Gb(o){for(var h=o;;){var y=h.tag;if((y===0||y===11||y===15)&&h.flags&16384&&(y=h.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var w=0;w<y.length;w++){var O=y[w],L=O.getSnapshot;O=O.value;try{if(!na(L(),O))return!1}catch{return!1}}if(y=h.child,h.subtreeFlags&16384&&y!==null)y.return=h,h=y;else{if(h===o)break;for(;h.sibling===null;){if(h.return===null||h.return===o)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function wu(o,h,y,w){h&=~ey,h&=~Ph,o.suspendedLanes|=h,o.pingedLanes&=~h,w&&(o.warmLanes|=h),w=o.expirationTimes;for(var O=h;0<O;){var L=31-$e(O),Y=1<<L;w[L]=-1,O&=~Y}y!==0&&wi(o,y,h)}function Sm(){return(Hn&6)===0?(zh(0),!1):!0}function ay(){if(Bn!==null){if(cr===0)var o=Bn.return;else o=Bn,Do=rs=null,g(o),Ml=null,lu=0,o=Bn;for(;o!==null;)Gv(o.alternate,o),o=o.return;Bn=null}}function qd(o,h){var y=o.timeoutHandle;y!==-1&&(o.timeoutHandle=-1,ex(y)),y=o.cancelPendingCommit,y!==null&&(o.cancelPendingCommit=null,y()),jl=0,ay(),gr=o,Bn=y=ja(o.current,null),$n=h,cr=0,uo=null,_u=!1,Ud=On(o,h),Ah=!1,Dh=Fo=ey=Ph=bu=oi=0,Ha=kh=null,xm=!1,(h&8)!==0&&(h|=h&32);var w=o.entangledLanes;if(w!==0)for(o=o.entanglements,w&=h;0<w;){var O=31-$e(w),L=1<<O;h|=o[O],w&=~L}return Rl=h,fc(),y}function Jv(o,h){dn=null,Le.H=Cc,h===_c||h===wl?(h=Ff(),cr=3):h===fh?(h=Ff(),cr=4):cr=h===Hf?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,uo=h,Bn===null&&(oi=1,qf(o,ia(h,o.current)))}function e_(){var o=fr.current;return o===null?!0:($n&4194048)===$n?Fa===null:($n&62914560)===$n||($n&536870912)!==0?o===Fa:!1}function t_(){var o=Le.H;return Le.H=Cc,o===null?Cc:o}function n_(){var o=Le.A;return Le.A=qb,o}function Tm(){oi=4,_u||($n&4194048)!==$n&&fr.current!==null||(Ud=!0),(bu&134217727)===0&&(Ph&134217727)===0||gr===null||wu(gr,$n,Fo,!1)}function oy(o,h,y){var w=Hn;Hn|=2;var O=t_(),L=n_();(gr!==o||$n!==h)&&(wm=null,qd(o,h)),h=!1;var Y=oi;e:do try{if(cr!==0&&Bn!==null){var le=Bn,Pe=uo;switch(cr){case 8:ay(),Y=6;break e;case 3:case 2:case 9:case 6:fr.current===null&&(h=!0);var Je=cr;if(cr=0,uo=null,Ll(o,le,Pe,Je),y&&Ud){Y=0;break e}break;default:Je=cr,cr=0,uo=null,Ll(o,le,Pe,Je)}}Hb(),Y=oi;break}catch(ct){Jv(o,ct)}while(!0);return h&&o.shellSuspendCounter++,Do=rs=null,Hn=w,Le.H=O,Le.A=L,Bn===null&&(gr=null,$n=0,fc()),Y}function Hb(){for(;Bn!==null;)ly(Bn)}function r_(o,h){var y=Hn;Hn|=2;var w=t_(),O=n_();gr!==o||$n!==h?(wm=null,Oh=Rr()+500,qd(o,h)):Ud=On(o,h);e:do try{if(cr!==0&&Bn!==null){h=Bn;var L=uo;t:switch(cr){case 1:cr=0,uo=null,Ll(o,h,L,1);break;case 2:case 9:if(Tl(L)){cr=0,uo=null,Ic(h);break}h=function(){cr!==2&&cr!==9||gr!==o||(cr=7),Bs(o)},L.then(h,h);break e;case 3:cr=7;break e;case 4:cr=5;break e;case 7:Tl(L)?(cr=0,uo=null,Ic(h)):(cr=0,uo=null,Ll(o,h,L,7));break;case 5:var Y=null;switch(Bn.tag){case 26:Y=Bn.memoizedState;case 5:case 27:var le=Bn;if(Y?re(Y):le.stateNode.complete){cr=0,uo=null;var Pe=le.sibling;if(Pe!==null)Bn=Pe;else{var Je=le.return;Je!==null?(Bn=Je,zc(Je)):Bn=null}break t}}cr=0,uo=null,Ll(o,h,L,5);break;case 6:cr=0,uo=null,Ll(o,h,L,6);break;case 8:ay(),oi=6;break e;default:throw Error(a(462))}}sy();break}catch(ct){Jv(o,ct)}while(!0);return Do=rs=null,Le.H=w,Le.A=O,Hn=y,Bn!==null?0:(gr=null,$n=0,fc(),oi)}function sy(){for(;Bn!==null&&!wo();)ly(Bn)}function ly(o){var h=Vv(o.alternate,o,Rl);o.memoizedProps=o.pendingProps,h===null?zc(o):Bn=h}function Ic(o){var h=o,y=h.alternate;switch(h.tag){case 15:case 0:h=Fg(y,h,h.pendingProps,h.type,void 0,$n);break;case 11:h=Fg(y,h,h.pendingProps,h.type.render,h.ref,$n);break;case 5:g(h);default:Gv(y,h),h=Bn=sm(h,Rl),h=Vv(y,h,Rl)}o.memoizedProps=o.pendingProps,h===null?zc(o):Bn=h}function Ll(o,h,y,w){Do=rs=null,g(h),Ml=null,lu=0;var O=h.return;try{if(Fb(o,O,h,y,$n)){oi=1,qf(o,ia(y,o.current)),Bn=null;return}}catch(L){if(O!==null)throw Bn=O,L;oi=1,qf(o,ia(y,o.current)),Bn=null;return}h.flags&32768?(kn||w===1?o=!0:Ud||($n&536870912)!==0?o=!1:(_u=o=!0,(w===2||w===9||w===3||w===6)&&(w=fr.current,w!==null&&w.tag===13&&(w.flags|=16384))),op(h,o)):zc(h)}function zc(o){var h=o;do{if((h.flags&32768)!==0){op(h,_u);return}o=h.return;var y=$b(h.alternate,h,Rl);if(y!==null){Bn=y;return}if(h=h.sibling,h!==null){Bn=h;return}Bn=h=o}while(h!==null);oi===0&&(oi=5)}function op(o,h){do{var y=Vb(o.alternate,o);if(y!==null){y.flags&=32767,Bn=y;return}if(y=o.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!h&&(o=o.sibling,o!==null)){Bn=o;return}Bn=o=y}while(o!==null);oi=6,Bn=null}function sp(o,h,y,w,O,L,Y,le,Pe){o.cancelPendingCommit=null;do Mm();while(Ni!==0);if((Hn&6)!==0)throw Error(a(327));if(h!==null){if(h===o.current)throw Error(a(177));if(L=h.lanes|h.childLanes,L|=dc,ti(o,y,L,Y,le,Pe),o===gr&&(Bn=gr=null,$n=0),$d=h,xu=o,jl=y,ty=L,ny=O,Vd=w,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,Xb(Ii,function(){return hy(),null})):(o.callbackNode=null,o.callbackPriority=0),w=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||w){w=Le.T,Le.T=null,O=Qe.p,Qe.p=2,Y=Hn,Hn|=4;try{jd(o,h,y)}finally{Hn=Y,Qe.p=O,Le.T=w}}Ni=1,i_(),a_(),cy()}}function i_(){if(Ni===1){Ni=0;var o=xu,h=$d,y=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||y){y=Le.T,Le.T=null;var w=Qe.p;Qe.p=2;var O=Hn;Hn|=4;try{Yv(h,o);var L=Rm,Y=Nn(o.containerInfo),le=L.focusedElem,Pe=L.selectionRange;if(Y!==le&&le&&le.ownerDocument&&bd(le.ownerDocument.documentElement,le)){if(Pe!==null&&xd(le)){var Je=Pe.start,ct=Pe.end;if(ct===void 0&&(ct=Je),"selectionStart"in le)le.selectionStart=Je,le.selectionEnd=Math.min(ct,le.value.length);else{var vt=le.ownerDocument||document,tt=vt&&vt.defaultView||window;if(tt.getSelection){var it=tt.getSelection(),Yt=le.textContent.length,fn=Math.min(Pe.start,Yt),br=Pe.end===void 0?fn:Math.min(Pe.end,Yt);!it.extend&&fn>br&&(Y=br,br=fn,fn=Y);var Fe=_d(le,fn),je=_d(le,br);if(Fe&&je&&(it.rangeCount!==1||it.anchorNode!==Fe.node||it.anchorOffset!==Fe.offset||it.focusNode!==je.node||it.focusOffset!==je.offset)){var Ke=vt.createRange();Ke.setStart(Fe.node,Fe.offset),it.removeAllRanges(),fn>br?(it.addRange(Ke),it.extend(je.node,je.offset)):(Ke.setEnd(je.node,je.offset),it.addRange(Ke))}}}}for(vt=[],it=le;it=it.parentNode;)it.nodeType===1&&vt.push({element:it,left:it.scrollLeft,top:it.scrollTop});for(typeof le.focus=="function"&&le.focus(),le=0;le<vt.length;le++){var mt=vt[le];mt.element.scrollLeft=mt.left,mt.element.scrollTop=mt.top}}tn=!!zm,Rm=zm=null}finally{Hn=O,Qe.p=w,Le.T=y}}o.current=h,Ni=2}}function a_(){if(Ni===2){Ni=0;var o=xu,h=$d,y=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||y){y=Le.T,Le.T=null;var w=Qe.p;Qe.p=2;var O=Hn;Hn|=4;try{Yg(o,h.alternate,h)}finally{Hn=O,Qe.p=w,Le.T=y}}Ni=3}}function cy(){if(Ni===4||Ni===3){Ni=0,ha();var o=xu,h=$d,y=jl,w=Vd;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?Ni=5:(Ni=0,$d=xu=null,uy(o,o.pendingLanes));var O=o.pendingLanes;if(O===0&&(Oc=null),yt(y),h=h.stateNode,Me&&typeof Me.onCommitFiberRoot=="function")try{Me.onCommitFiberRoot(Se,h,void 0,(h.current.flags&128)===128)}catch{}if(w!==null){h=Le.T,O=Qe.p,Qe.p=2,Le.T=null;try{for(var L=o.onRecoverableError,Y=0;Y<w.length;Y++){var le=w[Y];L(le.value,{componentStack:le.stack})}}finally{Le.T=h,Qe.p=O}}(jl&3)!==0&&Mm(),Bs(o),O=o.pendingLanes,(y&261930)!==0&&(O&42)!==0?o===ap?qr++:(qr=0,ap=o):qr=0,zh(0)}}function uy(o,h){(o.pooledCacheLanes&=h)===0&&(h=o.pooledCache,h!=null&&(o.pooledCache=null,Vi(h)))}function Mm(){return i_(),a_(),cy(),hy()}function hy(){if(Ni!==5)return!1;var o=xu,h=ty;ty=0;var y=yt(jl),w=Le.T,O=Qe.p;try{Qe.p=32>y?32:y,Le.T=null,y=ny,ny=null;var L=xu,Y=jl;if(Ni=0,$d=xu=null,jl=0,(Hn&6)!==0)throw Error(a(331));var le=Hn;if(Hn|=4,Kg(L.current),Xv(L,L.current,Y,y),Hn=le,zh(0,!1),Me&&typeof Me.onPostCommitFiberRoot=="function")try{Me.onPostCommitFiberRoot(Se,L)}catch{}return!0}finally{Qe.p=O,Le.T=w,uy(o,h)}}function dy(o,h,y){h=ia(y,h),h=um(o.stateNode,h,2),o=lo(o,h,2),o!==null&&(jr(o,2),Bs(o))}function ar(o,h,y){if(o.tag===3)dy(o,o,y);else for(;h!==null;){if(h.tag===3){dy(h,o,y);break}else if(h.tag===1){var w=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Oc===null||!Oc.has(w))){o=ia(y,o),y=jv(2),w=lo(h,y,2),w!==null&&(hm(y,w,h,o),jr(w,2),Bs(w));break}}h=h.return}}function lp(o,h,y){var w=o.pingCache;if(w===null){w=o.pingCache=new Jg;var O=new Set;w.set(h,O)}else O=w.get(h),O===void 0&&(O=new Set,w.set(h,O));O.has(y)||(Ah=!0,O.add(y),o=Zb.bind(null,o,h,y),h.then(o,o))}function Zb(o,h,y){var w=o.pingCache;w!==null&&w.delete(h),o.pingedLanes|=o.suspendedLanes&y,o.warmLanes&=~y,gr===o&&($n&y)===y&&(oi===4||oi===3&&($n&62914560)===$n&&300>Rr()-ip?(Hn&2)===0&&qd(o,0):ey|=y,Dh===$n&&(Dh=0)),Bs(o)}function fy(o,h){h===0&&(h=Sn()),o=ao(o,h),o!==null&&(jr(o,h),Bs(o))}function Wb(o){var h=o.memoizedState,y=0;h!==null&&(y=h.retryLane),fy(o,y)}function Yb(o,h){var y=0;switch(o.tag){case 31:case 13:var w=o.stateNode,O=o.memoizedState;O!==null&&(y=O.retryLane);break;case 19:w=o.stateNode;break;case 22:w=o.stateNode._retryCache;break;default:throw Error(a(314))}w!==null&&w.delete(h),fy(o,y)}function Xb(o,h){return qo(o,h)}var Cm=null,Gd=null,Em=!1,cp=!1,Ns=!1,Za=0;function Bs(o){o!==Gd&&o.next===null&&(Gd===null?Cm=Gd=o:Gd=Gd.next=o),cp=!0,Em||(Em=!0,py())}function zh(o,h){if(!Ns&&cp){Ns=!0;do for(var y=!1,w=Cm;w!==null;){if(o!==0){var O=w.pendingLanes;if(O===0)var L=0;else{var Y=w.suspendedLanes,le=w.pingedLanes;L=(1<<31-$e(42|o)+1)-1,L&=O&~(Y&~le),L=L&201326741?L&201326741|1:L?L|2:0}L!==0&&(y=!0,Pm(w,L))}else L=$n,L=wn(w,w===gr?L:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(L&3)===0||On(w,L)||(y=!0,Pm(w,L));w=w.next}while(y);Ns=!1}}function Kb(){up()}function up(){cp=Em=!1;var o=0;Za!==0&&h_()&&(o=Za);for(var h=Rr(),y=null,w=Cm;w!==null;){var O=w.next,L=Am(w,h);L===0?(w.next=null,y===null?Cm=O:y.next=O,O===null&&(Gd=y)):(y=w,(o!==0||(L&3)!==0)&&(cp=!0)),w=O}Ni!==0&&Ni!==5||zh(o),Za!==0&&(Za=0)}function Am(o,h){for(var y=o.suspendedLanes,w=o.pingedLanes,O=o.expirationTimes,L=o.pendingLanes&-62914561;0<L;){var Y=31-$e(L),le=1<<Y,Pe=O[Y];Pe===-1?((le&y)===0||(le&w)!==0)&&(O[Y]=$t(le,h)):Pe<=h&&(o.expiredLanes|=le),L&=~le}if(h=gr,y=$n,y=wn(o,o===h?y:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),w=o.callbackNode,y===0||o===h&&(cr===2||cr===9)||o.cancelPendingCommit!==null)return w!==null&&w!==null&&fs(w),o.callbackNode=null,o.callbackPriority=0;if((y&3)===0||On(o,y)){if(h=y&-y,h===o.callbackPriority)return h;switch(w!==null&&fs(w),yt(y)){case 2:case 8:y=So;break;case 32:y=Ii;break;case 268435456:y=ie;break;default:y=Ii}return w=o_.bind(null,o),y=qo(y,w),o.callbackPriority=h,o.callbackNode=y,h}return w!==null&&w!==null&&fs(w),o.callbackPriority=2,o.callbackNode=null,2}function o_(o,h){if(Ni!==0&&Ni!==5)return o.callbackNode=null,o.callbackPriority=0,null;var y=o.callbackNode;if(Mm()&&o.callbackNode!==y)return null;var w=$n;return w=wn(o,o===gr?w:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),w===0?null:(Ih(o,w,h),Am(o,Rr()),o.callbackNode!=null&&o.callbackNode===y?o_.bind(null,o):null)}function Pm(o,h){if(Mm())return null;Ih(o,h,!0)}function py(){f_(function(){(Hn&6)!==0?qo(Ji,Kb):up()})}function Su(){if(Za===0){var o=ji;o===0&&(o=Ge,Ge<<=1,(Ge&261888)===0&&(Ge=256)),Za=o}return Za}function my(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:xn(""+o)}function gy(o,h){var y=h.ownerDocument.createElement("input");return y.name=h.name,y.value=h.value,o.id&&y.setAttribute("form",o.id),h.parentNode.insertBefore(y,h),o=new FormData(o),y.parentNode.removeChild(y),o}function yy(o,h,y,w,O){if(h==="submit"&&y&&y.stateNode===O){var L=my((O[xt]||null).action),Y=w.submitter;Y&&(h=(h=Y[xt]||null)?my(h.formAction):Y.getAttribute("formAction"),h!==null&&(L=h,Y=null));var le=new Wc("action","action",null,w,O);o.push({event:le,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(Za!==0){var Pe=Y?gy(O,Y):new FormData(O);co(y,{pending:!0,data:Pe,method:O.method,action:L},null,Pe)}}else typeof L=="function"&&(le.preventDefault(),Pe=Y?gy(O,Y):new FormData(O),co(y,{pending:!0,data:Pe,method:O.method,action:L},L,Pe))},currentTarget:O}]})}}for(var Dm=0;Dm<Sd.length;Dm++){var Hd=Sd[Dm],s_=Hd.toLowerCase(),Qb=Hd[0].toUpperCase()+Hd.slice(1);za(s_,"on"+Qb)}za(nh,"onAnimationEnd"),za(rh,"onAnimationIteration"),za(wd,"onAnimationStart"),za("dblclick","onDoubleClick"),za("focusin","onFocus"),za("focusout","onBlur"),za(hc,"onTransitionRun"),za(ih,"onTransitionStart"),za(nu,"onTransitionCancel"),za(Ia,"onTransitionEnd"),Zo("onMouseEnter",["mouseout","mouseover"]),Zo("onMouseLeave",["mouseout","mouseover"]),Zo("onPointerEnter",["pointerout","pointerover"]),Zo("onPointerLeave",["pointerout","pointerover"]),Xn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hp));function l_(o,h){h=(h&4)!==0;for(var y=0;y<o.length;y++){var w=o[y],O=w.event;w=w.listeners;e:{var L=void 0;if(h)for(var Y=w.length-1;0<=Y;Y--){var le=w[Y],Pe=le.instance,Je=le.currentTarget;if(le=le.listener,Pe!==L&&O.isPropagationStopped())break e;L=le,O.currentTarget=Je;try{L(O)}catch(ct){es(ct)}O.currentTarget=null,L=Pe}else for(Y=0;Y<w.length;Y++){if(le=w[Y],Pe=le.instance,Je=le.currentTarget,le=le.listener,Pe!==L&&O.isPropagationStopped())break e;L=le,O.currentTarget=Je;try{L(O)}catch(ct){es(ct)}O.currentTarget=null,L=Pe}}}}function Fn(o,h){var y=h[yn];y===void 0&&(y=h[yn]=new Set);var w=o+"__bubble";y.has(w)||(vy(h,o,2,!1),y.add(w))}function dp(o,h,y){var w=0;h&&(w|=4),vy(y,o,w,h)}var Fs="_reactListening"+Math.random().toString(36).slice(2);function km(o){if(!o[Fs]){o[Fs]=!0,Br.forEach(function(y){y!=="selectionchange"&&(Jb.has(y)||dp(y,!1,o),dp(y,!0,o))});var h=o.nodeType===9?o:o.ownerDocument;h===null||h[Fs]||(h[Fs]=!0,dp("selectionchange",!1,h))}}function vy(o,h,y,w){switch(Bi(h)){case 2:var O=ln;break;case 8:O=Qt;break;default:O=Gt}y=O.bind(null,h,y,o),O=void 0,!ta||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(O=!0),w?O!==void 0?o.addEventListener(h,y,{capture:!0,passive:O}):o.addEventListener(h,y,!0):O!==void 0?o.addEventListener(h,y,{passive:O}):o.addEventListener(h,y,!1)}function Om(o,h,y,w,O){var L=w;if((h&1)===0&&(h&2)===0&&w!==null)e:for(;;){if(w===null)return;var Y=w.tag;if(Y===3||Y===4){var le=w.stateNode.containerInfo;if(le===O)break;if(Y===4)for(Y=w.return;Y!==null;){var Pe=Y.tag;if((Pe===3||Pe===4)&&Y.stateNode.containerInfo===O)return;Y=Y.return}for(;le!==null;){if(Y=Ho(le),Y===null)return;if(Pe=Y.tag,Pe===5||Pe===6||Pe===26||Pe===27){w=L=Y;continue e}le=le.parentNode}}w=w.return}hr(function(){var Je=L,ct=cl(y),vt=[];e:{var tt=Rf.get(o);if(tt!==void 0){var it=Wc,Yt=o;switch(o){case"keypress":if(on(y)===0)break e;case"keydown":case"keyup":it=_s;break;case"focusin":Yt="focus",it=sc;break;case"focusout":Yt="blur",it=sc;break;case"beforeblur":case"afterblur":it=sc;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":it=Yc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":it=Mi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":it=zg;break;case nh:case rh:case wd:it=Ci;break;case Ia:it=Rg;break;case"scroll":case"scrollend":it=Zu;break;case"wheel":it=wf;break;case"copy":case"cut":case"paste":it=dd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":it=bf;break;case"toggle":case"beforetoggle":it=Kc}var fn=(h&4)!==0,br=!fn&&(o==="scroll"||o==="scrollend"),Fe=fn?tt!==null?tt+"Capture":null:tt;fn=[];for(var je=Je,Ke;je!==null;){var mt=je;if(Ke=mt.stateNode,mt=mt.tag,mt!==5&&mt!==26&&mt!==27||Ke===null||Fe===null||(mt=Xo(je,Fe),mt!=null&&fn.push(Zd(je,mt,Ke))),br)break;je=je.return}0<fn.length&&(tt=new it(tt,Yt,null,y,ct),vt.push({event:tt,listeners:fn}))}}if((h&7)===0){e:{if(tt=o==="mouseover"||o==="pointerover",it=o==="mouseout"||o==="pointerout",tt&&y!==nc&&(Yt=y.relatedTarget||y.fromElement)&&(Ho(Yt)||Yt[mn]))break e;if((it||tt)&&(tt=ct.window===ct?ct:(tt=ct.ownerDocument)?tt.defaultView||tt.parentWindow:window,it?(Yt=y.relatedTarget||y.toElement,it=Je,Yt=Yt?Ho(Yt):null,Yt!==null&&(br=p(Yt),fn=Yt.tag,Yt!==br||fn!==5&&fn!==27&&fn!==6)&&(Yt=null)):(it=null,Yt=Je),it!==Yt)){if(fn=Yc,mt="onMouseLeave",Fe="onMouseEnter",je="mouse",(o==="pointerout"||o==="pointerover")&&(fn=bf,mt="onPointerLeave",Fe="onPointerEnter",je="pointer"),br=it==null?tt:ps(it),Ke=Yt==null?tt:ps(Yt),tt=new fn(mt,je+"leave",it,y,ct),tt.target=br,tt.relatedTarget=Ke,mt=null,Ho(ct)===Je&&(fn=new fn(Fe,je+"enter",Yt,y,ct),fn.target=Ke,fn.relatedTarget=br,mt=fn),br=mt,it&&Yt)t:{for(fn=_y,Fe=it,je=Yt,Ke=0,mt=Fe;mt;mt=fn(mt))Ke++;mt=0;for(var an=je;an;an=fn(an))mt++;for(;0<Ke-mt;)Fe=fn(Fe),Ke--;for(;0<mt-Ke;)je=fn(je),mt--;for(;Ke--;){if(Fe===je||je!==null&&Fe===je.alternate){fn=Fe;break t}Fe=fn(Fe),je=fn(je)}fn=null}else fn=null;it!==null&&by(vt,tt,it,fn,!1),Yt!==null&&br!==null&&by(vt,br,Yt,fn,!0)}}e:{if(tt=Je?ps(Je):window,it=tt.nodeName&&tt.nodeName.toLowerCase(),it==="select"||it==="input"&&tt.type==="file")var nr=dl;else if(Cf(tt))if(Ef)nr=am;else{nr=Pf;var Nt=rm}else it=tt.nodeName,!it||it.toLowerCase()!=="input"||tt.type!=="checkbox"&&tt.type!=="radio"?Je&&ll(Je.elementType)&&(nr=dl):nr=im;if(nr&&(nr=nr(o,Je))){yd(vt,nr,y,ct);break e}Nt&&Nt(o,tt,Je),o==="focusout"&&Je&&tt.type==="number"&&Je.memoizedProps.value!=null&&gs(tt,"number",tt.value)}switch(Nt=Je?ps(Je):window,o){case"focusin":(Cf(Nt)||Nt.contentEditable==="true")&&(io=Nt,eh=Je,th=null);break;case"focusout":th=eh=io=null;break;case"mousedown":Of=!0;break;case"contextmenu":case"mouseup":case"dragend":Of=!1,om(vt,y,ct);break;case"selectionchange":if(kf)break;case"keydown":case"keyup":om(vt,y,ct)}var cn;if(Oa)e:{switch(o){case"compositionstart":var En="onCompositionStart";break e;case"compositionend":En="onCompositionEnd";break e;case"compositionupdate":En="onCompositionUpdate";break e}En=void 0}else Eo?Xu(o,y)&&(En="onCompositionEnd"):o==="keydown"&&y.keyCode===229&&(En="onCompositionStart");En&&(lc&&y.locale!=="ko"&&(Eo||En!=="onCompositionStart"?En==="onCompositionEnd"&&Eo&&(cn=Mn()):(no=ct,Kn="value"in no?no.value:no.textContent,Eo=!0)),Nt=fp(Je,En),0<Nt.length&&(En=new Kp(En,o,null,y,ct),vt.push({event:En,listeners:Nt}),cn?En.data=cn:(cn=Jp(y),cn!==null&&(En.data=cn)))),(cn=Tf?em(o,y):Mf(o,y))&&(En=fp(Je,"onBeforeInput"),0<En.length&&(Nt=new Kp("onBeforeInput","beforeinput",null,y,ct),vt.push({event:Nt,listeners:En}),Nt.data=cn)),yy(vt,o,Je,y,ct)}l_(vt,h)})}function Zd(o,h,y){return{instance:o,listener:h,currentTarget:y}}function fp(o,h){for(var y=h+"Capture",w=[];o!==null;){var O=o,L=O.stateNode;if(O=O.tag,O!==5&&O!==26&&O!==27||L===null||(O=Xo(o,y),O!=null&&w.unshift(Zd(o,O,L)),O=Xo(o,h),O!=null&&w.push(Zd(o,O,L))),o.tag===3)return w;o=o.return}return[]}function _y(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function by(o,h,y,w,O){for(var L=h._reactName,Y=[];y!==null&&y!==w;){var le=y,Pe=le.alternate,Je=le.stateNode;if(le=le.tag,Pe!==null&&Pe===w)break;le!==5&&le!==26&&le!==27||Je===null||(Pe=Je,O?(Je=Xo(y,L),Je!=null&&Y.unshift(Zd(y,Je,Pe))):O||(Je=Xo(y,L),Je!=null&&Y.push(Zd(y,Je,Pe)))),y=y.return}Y.length!==0&&o.push({event:h,listeners:Y})}var pp=/\r\n?/g,c_=/\u0000|\uFFFD/g;function Im(o){return(typeof o=="string"?o:""+o).replace(pp,`
`).replace(c_,"")}function xy(o,h){return h=Im(h),Im(o)===h}function zn(o,h,y,w,O,L){switch(y){case"children":typeof w=="string"?h==="body"||h==="textarea"&&w===""||Yo(o,w):(typeof w=="number"||typeof w=="bigint")&&h!=="body"&&Yo(o,""+w);break;case"className":Hc(o,"class",w);break;case"tabIndex":Hc(o,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":Hc(o,y,w);break;case"style":Dn(o,w,L);break;case"data":if(h!=="object"){Hc(o,"data",w);break}case"src":case"href":if(w===""&&(h!=="a"||y!=="href")){o.removeAttribute(y);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){o.removeAttribute(y);break}w=xn(""+w),o.setAttribute(y,w);break;case"action":case"formAction":if(typeof w=="function"){o.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof L=="function"&&(y==="formAction"?(h!=="input"&&zn(o,h,"name",O.name,O,null),zn(o,h,"formEncType",O.formEncType,O,null),zn(o,h,"formMethod",O.formMethod,O,null),zn(o,h,"formTarget",O.formTarget,O,null)):(zn(o,h,"encType",O.encType,O,null),zn(o,h,"method",O.method,O,null),zn(o,h,"target",O.target,O,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){o.removeAttribute(y);break}w=xn(""+w),o.setAttribute(y,w);break;case"onClick":w!=null&&(o.onclick=ka);break;case"onScroll":w!=null&&Fn("scroll",o);break;case"onScrollEnd":w!=null&&Fn("scrollend",o);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(a(61));if(y=w.__html,y!=null){if(O.children!=null)throw Error(a(60));o.innerHTML=y}}break;case"multiple":o.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":o.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){o.removeAttribute("xlink:href");break}y=xn(""+w),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?o.setAttribute(y,""+w):o.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?o.setAttribute(y,""):o.removeAttribute(y);break;case"capture":case"download":w===!0?o.setAttribute(y,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?o.setAttribute(y,w):o.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?o.setAttribute(y,w):o.removeAttribute(y);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?o.removeAttribute(y):o.setAttribute(y,w);break;case"popover":Fn("beforetoggle",o),Fn("toggle",o),qu(o,"popover",w);break;case"xlinkActuate":Wo(o,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":Wo(o,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":Wo(o,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":Wo(o,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":Wo(o,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":Wo(o,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":Wo(o,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":Wo(o,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":Wo(o,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":qu(o,"is",w);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=ea.get(y)||y,qu(o,y,w))}}function Tu(o,h,y,w,O,L){switch(y){case"style":Dn(o,w,L);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(a(61));if(y=w.__html,y!=null){if(O.children!=null)throw Error(a(60));o.innerHTML=y}}break;case"children":typeof w=="string"?Yo(o,w):(typeof w=="number"||typeof w=="bigint")&&Yo(o,""+w);break;case"onScroll":w!=null&&Fn("scroll",o);break;case"onScrollEnd":w!=null&&Fn("scrollend",o);break;case"onClick":w!=null&&(o.onclick=ka);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!pa.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(O=y.endsWith("Capture"),h=y.slice(2,O?y.length-7:void 0),L=o[xt]||null,L=L!=null?L[y]:null,typeof L=="function"&&o.removeEventListener(h,L,O),typeof w=="function")){typeof L!="function"&&L!==null&&(y in o?o[y]=null:o.hasAttribute(y)&&o.removeAttribute(y)),o.addEventListener(h,w,O);break e}y in o?o[y]=w:w===!0?o.setAttribute(y,""):qu(o,y,w)}}}function yi(o,h,y){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fn("error",o),Fn("load",o);var w=!1,O=!1,L;for(L in y)if(y.hasOwnProperty(L)){var Y=y[L];if(Y!=null)switch(L){case"src":w=!0;break;case"srcSet":O=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:zn(o,h,L,Y,y,null)}}O&&zn(o,h,"srcSet",y.srcSet,y,null),w&&zn(o,h,"src",y.src,y,null);return;case"input":Fn("invalid",o);var le=L=Y=O=null,Pe=null,Je=null;for(w in y)if(y.hasOwnProperty(w)){var ct=y[w];if(ct!=null)switch(w){case"name":O=ct;break;case"type":Y=ct;break;case"checked":Pe=ct;break;case"defaultChecked":Je=ct;break;case"value":L=ct;break;case"defaultValue":le=ct;break;case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(a(137,h));break;default:zn(o,h,w,ct,y,null)}}vf(o,L,le,Pe,Je,Y,O,!1);return;case"select":Fn("invalid",o),w=Y=L=null;for(O in y)if(y.hasOwnProperty(O)&&(le=y[O],le!=null))switch(O){case"value":L=le;break;case"defaultValue":Y=le;break;case"multiple":w=le;default:zn(o,h,O,le,y,null)}h=L,y=Y,o.multiple=!!w,h!=null?sl(o,!!w,h,!1):y!=null&&sl(o,!!w,y,!0);return;case"textarea":Fn("invalid",o),L=O=w=null;for(Y in y)if(y.hasOwnProperty(Y)&&(le=y[Y],le!=null))switch(Y){case"value":w=le;break;case"defaultValue":O=le;break;case"children":L=le;break;case"dangerouslySetInnerHTML":if(le!=null)throw Error(a(91));break;default:zn(o,h,Y,le,y,null)}Zc(o,w,O,L);return;case"option":for(Pe in y)if(y.hasOwnProperty(Pe)&&(w=y[Pe],w!=null))switch(Pe){case"selected":o.selected=w&&typeof w!="function"&&typeof w!="symbol";break;default:zn(o,h,Pe,w,y,null)}return;case"dialog":Fn("beforetoggle",o),Fn("toggle",o),Fn("cancel",o),Fn("close",o);break;case"iframe":case"object":Fn("load",o);break;case"video":case"audio":for(w=0;w<hp.length;w++)Fn(hp[w],o);break;case"image":Fn("error",o),Fn("load",o);break;case"details":Fn("toggle",o);break;case"embed":case"source":case"link":Fn("error",o),Fn("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Je in y)if(y.hasOwnProperty(Je)&&(w=y[Je],w!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:zn(o,h,Je,w,y,null)}return;default:if(ll(h)){for(ct in y)y.hasOwnProperty(ct)&&(w=y[ct],w!==void 0&&Tu(o,h,ct,w,y,void 0));return}}for(le in y)y.hasOwnProperty(le)&&(w=y[le],w!=null&&zn(o,h,le,w,y,null))}function Rh(o,h,y,w){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var O=null,L=null,Y=null,le=null,Pe=null,Je=null,ct=null;for(it in y){var vt=y[it];if(y.hasOwnProperty(it)&&vt!=null)switch(it){case"checked":break;case"value":break;case"defaultValue":Pe=vt;default:w.hasOwnProperty(it)||zn(o,h,it,null,w,vt)}}for(var tt in w){var it=w[tt];if(vt=y[tt],w.hasOwnProperty(tt)&&(it!=null||vt!=null))switch(tt){case"type":L=it;break;case"name":O=it;break;case"checked":Je=it;break;case"defaultChecked":ct=it;break;case"value":Y=it;break;case"defaultValue":le=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(a(137,h));break;default:it!==vt&&zn(o,h,tt,it,w,vt)}}Hu(o,Y,le,Pe,Je,ct,L,O);return;case"select":it=Y=le=tt=null;for(L in y)if(Pe=y[L],y.hasOwnProperty(L)&&Pe!=null)switch(L){case"value":break;case"multiple":it=Pe;default:w.hasOwnProperty(L)||zn(o,h,L,null,w,Pe)}for(O in w)if(L=w[O],Pe=y[O],w.hasOwnProperty(O)&&(L!=null||Pe!=null))switch(O){case"value":tt=L;break;case"defaultValue":le=L;break;case"multiple":Y=L;default:L!==Pe&&zn(o,h,O,L,w,Pe)}h=le,y=Y,w=it,tt!=null?sl(o,!!y,tt,!1):!!w!=!!y&&(h!=null?sl(o,!!y,h,!0):sl(o,!!y,y?[]:"",!1));return;case"textarea":it=tt=null;for(le in y)if(O=y[le],y.hasOwnProperty(le)&&O!=null&&!w.hasOwnProperty(le))switch(le){case"value":break;case"children":break;default:zn(o,h,le,null,w,O)}for(Y in w)if(O=w[Y],L=y[Y],w.hasOwnProperty(Y)&&(O!=null||L!=null))switch(Y){case"value":tt=O;break;case"defaultValue":it=O;break;case"children":break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(a(91));break;default:O!==L&&zn(o,h,Y,O,w,L)}Yp(o,tt,it);return;case"option":for(var Yt in y)if(tt=y[Yt],y.hasOwnProperty(Yt)&&tt!=null&&!w.hasOwnProperty(Yt))switch(Yt){case"selected":o.selected=!1;break;default:zn(o,h,Yt,null,w,tt)}for(Pe in w)if(tt=w[Pe],it=y[Pe],w.hasOwnProperty(Pe)&&tt!==it&&(tt!=null||it!=null))switch(Pe){case"selected":o.selected=tt&&typeof tt!="function"&&typeof tt!="symbol";break;default:zn(o,h,Pe,tt,w,it)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fn in y)tt=y[fn],y.hasOwnProperty(fn)&&tt!=null&&!w.hasOwnProperty(fn)&&zn(o,h,fn,null,w,tt);for(Je in w)if(tt=w[Je],it=y[Je],w.hasOwnProperty(Je)&&tt!==it&&(tt!=null||it!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(a(137,h));break;default:zn(o,h,Je,tt,w,it)}return;default:if(ll(h)){for(var br in y)tt=y[br],y.hasOwnProperty(br)&&tt!==void 0&&!w.hasOwnProperty(br)&&Tu(o,h,br,void 0,w,tt);for(ct in w)tt=w[ct],it=y[ct],!w.hasOwnProperty(ct)||tt===it||tt===void 0&&it===void 0||Tu(o,h,ct,tt,w,it);return}}for(var Fe in y)tt=y[Fe],y.hasOwnProperty(Fe)&&tt!=null&&!w.hasOwnProperty(Fe)&&zn(o,h,Fe,null,w,tt);for(vt in w)tt=w[vt],it=y[vt],!w.hasOwnProperty(vt)||tt===it||tt==null&&it==null||zn(o,h,vt,tt,w,it)}function wy(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function u_(){if(typeof performance.getEntriesByType=="function"){for(var o=0,h=0,y=performance.getEntriesByType("resource"),w=0;w<y.length;w++){var O=y[w],L=O.transferSize,Y=O.initiatorType,le=O.duration;if(L&&le&&wy(Y)){for(Y=0,le=O.responseEnd,w+=1;w<y.length;w++){var Pe=y[w],Je=Pe.startTime;if(Je>le)break;var ct=Pe.transferSize,vt=Pe.initiatorType;ct&&wy(vt)&&(Pe=Pe.responseEnd,Y+=ct*(Pe<le?1:(le-Je)/(Pe-Je)))}if(--w,h+=8*(L+Y)/(O.duration/1e3),o++,10<o)break}}if(0<o)return h/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var zm=null,Rm=null;function jm(o){return o.nodeType===9?o:o.ownerDocument}function Sy(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Rc(o,h){if(o===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&h==="foreignObject"?0:o}function Lm(o,h){return o==="textarea"||o==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Nm=null;function h_(){var o=window.event;return o&&o.type==="popstate"?o===Nm?!1:(Nm=o,!0):(Nm=null,!1)}var Ty=typeof setTimeout=="function"?setTimeout:void 0,ex=typeof clearTimeout=="function"?clearTimeout:void 0,d_=typeof Promise=="function"?Promise:void 0,f_=typeof queueMicrotask=="function"?queueMicrotask:typeof d_<"u"?function(o){return d_.resolve(null).then(o).catch(p_)}:Ty;function p_(o){setTimeout(function(){throw o})}function Us(o){return o==="head"}function My(o,h){var y=h,w=0;do{var O=y.nextSibling;if(o.removeChild(y),O&&O.nodeType===8)if(y=O.data,y==="/$"||y==="/&"){if(w===0){o.removeChild(O),Sa(h);return}w--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")w++;else if(y==="html")Yd(o.ownerDocument.documentElement);else if(y==="head"){y=o.ownerDocument.head,Yd(y);for(var L=y.firstChild;L;){var Y=L.nextSibling,le=L.nodeName;L[pn]||le==="SCRIPT"||le==="STYLE"||le==="LINK"&&L.rel.toLowerCase()==="stylesheet"||y.removeChild(L),L=Y}}else y==="body"&&Yd(o.ownerDocument.body);y=O}while(y);Sa(h)}function mp(o,h){var y=o;o=0;do{var w=y.nextSibling;if(y.nodeType===1?h?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(h?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),w&&w.nodeType===8)if(y=w.data,y==="/$"){if(o===0)break;o--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||o++;y=w}while(y)}function Wd(o){var h=o.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var y=h;switch(h=h.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":Wd(y),al(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}o.removeChild(y)}}function Bm(o,h,y,w){for(;o.nodeType===1;){var O=y;if(o.nodeName.toLowerCase()!==h.toLowerCase()){if(!w&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(w){if(!o[pn])switch(h){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(L=o.getAttribute("rel"),L==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(L!==O.rel||o.getAttribute("href")!==(O.href==null||O.href===""?null:O.href)||o.getAttribute("crossorigin")!==(O.crossOrigin==null?null:O.crossOrigin)||o.getAttribute("title")!==(O.title==null?null:O.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(L=o.getAttribute("src"),(L!==(O.src==null?null:O.src)||o.getAttribute("type")!==(O.type==null?null:O.type)||o.getAttribute("crossorigin")!==(O.crossOrigin==null?null:O.crossOrigin))&&L&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(h==="input"&&o.type==="hidden"){var L=O.name==null?null:""+O.name;if(O.type==="hidden"&&o.getAttribute("name")===L)return o}else return o;if(o=fo(o.nextSibling),o===null)break}return null}function tx(o,h,y){if(h==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!y||(o=fo(o.nextSibling),o===null))return null;return o}function m_(o,h){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=fo(o.nextSibling),o===null))return null;return o}function Cy(o){return o.data==="$?"||o.data==="$~"}function Mu(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function Zi(o,h){var y=o.ownerDocument;if(o.data==="$~")o._reactRetry=h;else if(o.data!=="$?"||y.readyState!=="loading")h();else{var w=function(){h(),y.removeEventListener("DOMContentLoaded",w)};y.addEventListener("DOMContentLoaded",w),o._reactRetry=w}}function fo(o){for(;o!=null;o=o.nextSibling){var h=o.nodeType;if(h===1||h===3)break;if(h===8){if(h=o.data,h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"||h==="F!"||h==="F")break;if(h==="/$"||h==="/&")return null}}return o}var Fm=null;function Ey(o){o=o.nextSibling;for(var h=0;o;){if(o.nodeType===8){var y=o.data;if(y==="/$"||y==="/&"){if(h===0)return fo(o.nextSibling);h--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||h++}o=o.nextSibling}return null}function Um(o){o=o.previousSibling;for(var h=0;o;){if(o.nodeType===8){var y=o.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(h===0)return o;h--}else y!=="/$"&&y!=="/&"||h++}o=o.previousSibling}return null}function g_(o,h,y){switch(h=jm(y),o){case"html":if(o=h.documentElement,!o)throw Error(a(452));return o;case"head":if(o=h.head,!o)throw Error(a(453));return o;case"body":if(o=h.body,!o)throw Error(a(454));return o;default:throw Error(a(451))}}function Yd(o){for(var h=o.attributes;h.length;)o.removeAttributeNode(h[0]);al(o)}var Uo=new Map,y_=new Set;function gp(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var $s=Qe.d;Qe.d={f:Ay,r:v_,D:__,C:Py,L:Vm,m:yp,X:ky,S:Dy,M:Oy};function Ay(){var o=$s.f(),h=Sm();return o||h}function v_(o){var h=to(o);h!==null&&h.tag===5&&h.type==="form"?va(h):$s.r(o)}var Nl=typeof document>"u"?null:document;function $m(o,h,y){var w=Nl;if(w&&typeof h=="string"&&h){var O=Si(h);O='link[rel="'+o+'"][href="'+O+'"]',typeof y=="string"&&(O+='[crossorigin="'+y+'"]'),y_.has(O)||(y_.add(O),o={rel:o,crossOrigin:y,href:h},w.querySelector(O)===null&&(h=w.createElement("link"),yi(h,"link",o),Ar(h),w.head.appendChild(h)))}}function __(o){$s.D(o),$m("dns-prefetch",o,null)}function Py(o,h){$s.C(o,h),$m("preconnect",o,h)}function Vm(o,h,y){$s.L(o,h,y);var w=Nl;if(w&&o&&h){var O='link[rel="preload"][as="'+Si(h)+'"]';h==="image"&&y&&y.imageSrcSet?(O+='[imagesrcset="'+Si(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(O+='[imagesizes="'+Si(y.imageSizes)+'"]')):O+='[href="'+Si(o)+'"]';var L=O;switch(h){case"style":L=c(o);break;case"script":L=v(o)}Uo.has(L)||(o=D({rel:"preload",href:h==="image"&&y&&y.imageSrcSet?void 0:o,as:h},y),Uo.set(L,o),w.querySelector(O)!==null||h==="style"&&w.querySelector(i(L))||h==="script"&&w.querySelector(S(L))||(h=w.createElement("link"),yi(h,"link",o),Ar(h),w.head.appendChild(h)))}}function yp(o,h){$s.m(o,h);var y=Nl;if(y&&o){var w=h&&typeof h.as=="string"?h.as:"script",O='link[rel="modulepreload"][as="'+Si(w)+'"][href="'+Si(o)+'"]',L=O;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":L=v(o)}if(!Uo.has(L)&&(o=D({rel:"modulepreload",href:o},h),Uo.set(L,o),y.querySelector(O)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(S(L)))return}w=y.createElement("link"),yi(w,"link",o),Ar(w),y.head.appendChild(w)}}}function Dy(o,h,y){$s.S(o,h,y);var w=Nl;if(w&&o){var O=fa(w).hoistableStyles,L=c(o);h=h||"default";var Y=O.get(L);if(!Y){var le={loading:0,preload:null};if(Y=w.querySelector(i(L)))le.loading=5;else{o=D({rel:"stylesheet",href:o,"data-precedence":h},y),(y=Uo.get(L))&&k(o,y);var Pe=Y=w.createElement("link");Ar(Pe),yi(Pe,"link",o),Pe._p=new Promise(function(Je,ct){Pe.onload=Je,Pe.onerror=ct}),Pe.addEventListener("load",function(){le.loading|=1}),Pe.addEventListener("error",function(){le.loading|=2}),le.loading|=4,P(Y,h,w)}Y={type:"stylesheet",instance:Y,count:1,state:le},O.set(L,Y)}}}function ky(o,h){$s.X(o,h);var y=Nl;if(y&&o){var w=fa(y).hoistableScripts,O=v(o),L=w.get(O);L||(L=y.querySelector(S(O)),L||(o=D({src:o,async:!0},h),(h=Uo.get(O))&&N(o,h),L=y.createElement("script"),Ar(L),yi(L,"link",o),y.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},w.set(O,L))}}function Oy(o,h){$s.M(o,h);var y=Nl;if(y&&o){var w=fa(y).hoistableScripts,O=v(o),L=w.get(O);L||(L=y.querySelector(S(O)),L||(o=D({src:o,async:!0,type:"module"},h),(h=Uo.get(O))&&N(o,h),L=y.createElement("script"),Ar(L),yi(L,"link",o),y.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},w.set(O,L))}}function b_(o,h,y,w){var O=(O=Ht.current)?gp(O):null;if(!O)throw Error(a(446));switch(o){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(h=c(y.href),y=fa(O).hoistableStyles,w=y.get(h),w||(w={type:"style",instance:null,count:0,state:null},y.set(h,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){o=c(y.href);var L=fa(O).hoistableStyles,Y=L.get(o);if(Y||(O=O.ownerDocument||O,Y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},L.set(o,Y),(L=O.querySelector(i(o)))&&!L._p&&(Y.instance=L,Y.state.loading=5),Uo.has(o)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},Uo.set(o,y),L||f(O,o,y,Y.state))),h&&w===null)throw Error(a(528,""));return Y}if(h&&w!==null)throw Error(a(529,""));return null;case"script":return h=y.async,y=y.src,typeof y=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=v(y),y=fa(O).hoistableScripts,w=y.get(h),w||(w={type:"script",instance:null,count:0,state:null},y.set(h,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,o))}}function c(o){return'href="'+Si(o)+'"'}function i(o){return'link[rel="stylesheet"]['+o+"]"}function l(o){return D({},o,{"data-precedence":o.precedence,precedence:null})}function f(o,h,y,w){o.querySelector('link[rel="preload"][as="style"]['+h+"]")?w.loading=1:(h=o.createElement("link"),w.preload=h,h.addEventListener("load",function(){return w.loading|=1}),h.addEventListener("error",function(){return w.loading|=2}),yi(h,"link",y),Ar(h),o.head.appendChild(h))}function v(o){return'[src="'+Si(o)+'"]'}function S(o){return"script[async]"+o}function T(o,h,y){if(h.count++,h.instance===null)switch(h.type){case"style":var w=o.querySelector('style[data-href~="'+Si(y.href)+'"]');if(w)return h.instance=w,Ar(w),w;var O=D({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return w=(o.ownerDocument||o).createElement("style"),Ar(w),yi(w,"style",O),P(w,y.precedence,o),h.instance=w;case"stylesheet":O=c(y.href);var L=o.querySelector(i(O));if(L)return h.state.loading|=4,h.instance=L,Ar(L),L;w=l(y),(O=Uo.get(O))&&k(w,O),L=(o.ownerDocument||o).createElement("link"),Ar(L);var Y=L;return Y._p=new Promise(function(le,Pe){Y.onload=le,Y.onerror=Pe}),yi(L,"link",w),h.state.loading|=4,P(L,y.precedence,o),h.instance=L;case"script":return L=v(y.src),(O=o.querySelector(S(L)))?(h.instance=O,Ar(O),O):(w=y,(O=Uo.get(L))&&(w=D({},y),N(w,O)),o=o.ownerDocument||o,O=o.createElement("script"),Ar(O),yi(O,"link",w),o.head.appendChild(O),h.instance=O);case"void":return null;default:throw Error(a(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(w=h.instance,h.state.loading|=4,P(w,y.precedence,o));return h.instance}function P(o,h,y){for(var w=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),O=w.length?w[w.length-1]:null,L=O,Y=0;Y<w.length;Y++){var le=w[Y];if(le.dataset.precedence===h)L=le;else if(L!==O)break}L?L.parentNode.insertBefore(o,L.nextSibling):(h=y.nodeType===9?y.head:y,h.insertBefore(o,h.firstChild))}function k(o,h){o.crossOrigin==null&&(o.crossOrigin=h.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=h.referrerPolicy),o.title==null&&(o.title=h.title)}function N(o,h){o.crossOrigin==null&&(o.crossOrigin=h.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=h.referrerPolicy),o.integrity==null&&(o.integrity=h.integrity)}var B=null;function q(o,h,y){if(B===null){var w=new Map,O=B=new Map;O.set(y,w)}else O=B,w=O.get(y),w||(w=new Map,O.set(y,w));if(w.has(o))return w;for(w.set(o,null),y=y.getElementsByTagName(o),O=0;O<y.length;O++){var L=y[O];if(!(L[pn]||L[Ln]||o==="link"&&L.getAttribute("rel")==="stylesheet")&&L.namespaceURI!=="http://www.w3.org/2000/svg"){var Y=L.getAttribute(h)||"";Y=o+Y;var le=w.get(Y);le?le.push(L):w.set(Y,[L])}}return w}function K(o,h,y){o=o.ownerDocument||o,o.head.insertBefore(y,h==="title"?o.querySelector("head > title"):null)}function J(o,h,y){if(y===1||h.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return o=h.disabled,typeof h.precedence=="string"&&o==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function re(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function se(o,h,y,w){if(y.type==="stylesheet"&&(typeof w.media!="string"||matchMedia(w.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var O=c(w.href),L=h.querySelector(i(O));if(L){h=L._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(o.count++,o=Ne.bind(o),h.then(o,o)),y.state.loading|=4,y.instance=L,Ar(L);return}L=h.ownerDocument||h,w=l(w),(O=Uo.get(O))&&k(w,O),L=L.createElement("link"),Ar(L);var Y=L;Y._p=new Promise(function(le,Pe){Y.onload=le,Y.onerror=Pe}),yi(L,"link",w),y.instance=L}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(y,h),(h=y.state.preload)&&(y.state.loading&3)===0&&(o.count++,y=Ne.bind(o),h.addEventListener("load",y),h.addEventListener("error",y))}}var ue=0;function ge(o,h){return o.stylesheets&&o.count===0&&Ee(o,o.stylesheets),0<o.count||0<o.imgCount?function(y){var w=setTimeout(function(){if(o.stylesheets&&Ee(o,o.stylesheets),o.unsuspend){var L=o.unsuspend;o.unsuspend=null,L()}},6e4+h);0<o.imgBytes&&ue===0&&(ue=62500*u_());var O=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&Ee(o,o.stylesheets),o.unsuspend)){var L=o.unsuspend;o.unsuspend=null,L()}},(o.imgBytes>ue?50:800)+h);return o.unsuspend=y,function(){o.unsuspend=null,clearTimeout(w),clearTimeout(O)}}:null}function Ne(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ee(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Te=null;function Ee(o,h){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Te=new Map,h.forEach(Ze,o),Te=null,Ne.call(o))}function Ze(o,h){if(!(h.state.loading&4)){var y=Te.get(o);if(y)var w=y.get(null);else{y=new Map,Te.set(o,y);for(var O=o.querySelectorAll("link[data-precedence],style[data-precedence]"),L=0;L<O.length;L++){var Y=O[L];(Y.nodeName==="LINK"||Y.getAttribute("media")!=="not all")&&(y.set(Y.dataset.precedence,Y),w=Y)}w&&y.set(null,w)}O=h.instance,Y=O.getAttribute("data-precedence"),L=y.get(Y)||w,L===w&&y.set(null,O),y.set(Y,O),this.count++,w=Ne.bind(this),O.addEventListener("load",w),O.addEventListener("error",w),L?L.parentNode.insertBefore(O,L.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(O,o.firstChild)),h.state.loading|=4}}var et={$$typeof:ne,Provider:null,Consumer:null,_currentValue:Ve,_currentValue2:Ve,_threadCount:0};function gt(o,h,y,w,O,L,Y,le,Pe){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xr(0),this.hiddenUpdates=xr(null),this.identifierPrefix=w,this.onUncaughtError=O,this.onCaughtError=L,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Pe,this.incompleteTransitions=new Map}function Ot(o,h,y,w,O,L,Y,le,Pe,Je,ct,vt){return o=new gt(o,h,y,Y,Pe,Je,ct,vt,le),h=1,L===!0&&(h|=24),L=Ra(3,null,null,h),o.current=L,L.stateNode=o,h=dh(),h.refCount++,o.pooledCache=h,h.refCount++,L.memoizedState={element:w,isDehydrated:y,cache:h},as(L),o}function Ct(o){return o?(o=_n,o):_n}function Dt(o,h,y,w,O,L){O=Ct(O),w.context===null?w.context=O:w.pendingContext=O,w=Ds(h),w.payload={element:y},L=L===void 0?null:L,L!==null&&(w.callback=L),y=lo(o,w,h),y!==null&&(xa(y,o,h),Al(y,o,h))}function Zt(o,h){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var y=o.retryLane;o.retryLane=y!==0&&y<h?y:h}}function Pt(o,h){Zt(o,h),(o=o.alternate)&&Zt(o,h)}function kt(o){if(o.tag===13||o.tag===31){var h=ao(o,67108864);h!==null&&xa(h,o,67108864),Pt(o,67108864)}}function lt(o){if(o.tag===13||o.tag===31){var h=ho();h=qn(h);var y=ao(o,h);y!==null&&xa(y,o,h),Pt(o,h)}}var tn=!0;function ln(o,h,y,w){var O=Le.T;Le.T=null;var L=Qe.p;try{Qe.p=2,Gt(o,h,y,w)}finally{Qe.p=L,Le.T=O}}function Qt(o,h,y,w){var O=Le.T;Le.T=null;var L=Qe.p;try{Qe.p=8,Gt(o,h,y,w)}finally{Qe.p=L,Le.T=O}}function Gt(o,h,y,w){if(tn){var O=Tn(w);if(O===null)Om(o,h,w,_r,y),po(o,w);else if(Ya(O,o,h,y,w))w.stopPropagation();else if(po(o,w),h&4&&-1<wa.indexOf(o)){for(;O!==null;){var L=to(O);if(L!==null)switch(L.tag){case 3:if(L=L.stateNode,L.current.memoizedState.isDehydrated){var Y=ke(L.pendingLanes);if(Y!==0){var le=L;for(le.pendingLanes|=2,le.entangledLanes|=2;Y;){var Pe=1<<31-$e(Y);le.entanglements[1]|=Pe,Y&=~Pe}Bs(L),(Hn&6)===0&&(Oh=Rr()+500,zh(0))}}break;case 31:case 13:le=ao(L,2),le!==null&&xa(le,L,2),Sm(),Pt(L,2)}if(L=Tn(w),L===null&&Om(o,h,w,_r,y),L===O)break;O=L}O!==null&&w.stopPropagation()}else Om(o,h,w,null,y)}}function Tn(o){return o=cl(o),Yr(o)}var _r=null;function Yr(o){if(_r=null,o=Ho(o),o!==null){var h=p(o);if(h===null)o=null;else{var y=h.tag;if(y===13){if(o=m(h),o!==null)return o;o=null}else if(y===31){if(o=s(h),o!==null)return o;o=null}else if(y===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;o=null}else h!==o&&(o=null)}}return _r=o,null}function Bi(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ec()){case Ji:return 2;case So:return 8;case Ii:case ze:return 32;case ie:return 268435456;default:return 32}default:return 32}}var Wa=!1,si=null,Or=null,Qn=null,Gr=new Map,Xr=new Map,Ir=[],wa="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function po(o,h){switch(o){case"focusin":case"focusout":si=null;break;case"dragenter":case"dragleave":Or=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":Gr.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xr.delete(h.pointerId)}}function Hr(o,h,y,w,O,L){return o===null||o.nativeEvent!==L?(o={blockedOn:h,domEventName:y,eventSystemFlags:w,nativeEvent:L,targetContainers:[O]},h!==null&&(h=to(h),h!==null&&kt(h)),o):(o.eventSystemFlags|=w,h=o.targetContainers,O!==null&&h.indexOf(O)===-1&&h.push(O),o)}function Ya(o,h,y,w,O){switch(h){case"focusin":return si=Hr(si,o,h,y,w,O),!0;case"dragenter":return Or=Hr(Or,o,h,y,w,O),!0;case"mouseover":return Qn=Hr(Qn,o,h,y,w,O),!0;case"pointerover":var L=O.pointerId;return Gr.set(L,Hr(Gr.get(L)||null,o,h,y,w,O)),!0;case"gotpointercapture":return L=O.pointerId,Xr.set(L,Hr(Xr.get(L)||null,o,h,y,w,O)),!0}return!1}function li(o){var h=Ho(o.target);if(h!==null){var y=p(h);if(y!==null){if(h=y.tag,h===13){if(h=m(y),h!==null){o.blockedOn=h,da(o.priority,function(){lt(y)});return}}else if(h===31){if(h=s(y),h!==null){o.blockedOn=h,da(o.priority,function(){lt(y)});return}}else if(h===3&&y.stateNode.current.memoizedState.isDehydrated){o.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Kr(o){if(o.blockedOn!==null)return!1;for(var h=o.targetContainers;0<h.length;){var y=Tn(o.nativeEvent);if(y===null){y=o.nativeEvent;var w=new y.constructor(y.type,y);nc=w,y.target.dispatchEvent(w),nc=null}else return h=to(y),h!==null&&kt(h),o.blockedOn=y,!1;h.shift()}return!0}function vi(o,h,y){Kr(o)&&y.delete(h)}function ci(){Wa=!1,si!==null&&Kr(si)&&(si=null),Or!==null&&Kr(Or)&&(Or=null),Qn!==null&&Kr(Qn)&&(Qn=null),Gr.forEach(vi),Xr.forEach(vi)}function or(o,h){o.blockedOn===h&&(o.blockedOn=null,Wa||(Wa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ci)))}var mo=null;function jh(o){mo!==o&&(mo=o,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){mo===o&&(mo=null);for(var h=0;h<o.length;h+=3){var y=o[h],w=o[h+1],O=o[h+2];if(typeof w!="function"){if(Yr(w||y)===null)continue;break}var L=to(y);L!==null&&(o.splice(h,3),h-=3,co(L,{pending:!0,data:O,method:y.method,action:w},w,O))}}))}function Sa(o){function h(Pe){return or(Pe,o)}si!==null&&or(si,o),Or!==null&&or(Or,o),Qn!==null&&or(Qn,o),Gr.forEach(h),Xr.forEach(h);for(var y=0;y<Ir.length;y++){var w=Ir[y];w.blockedOn===o&&(w.blockedOn=null)}for(;0<Ir.length&&(y=Ir[0],y.blockedOn===null);)li(y),y.blockedOn===null&&Ir.shift();if(y=(o.ownerDocument||o).$$reactFormReplay,y!=null)for(w=0;w<y.length;w+=3){var O=y[w],L=y[w+1],Y=O[xt]||null;if(typeof L=="function")Y||jh(y);else if(Y){var le=null;if(L&&L.hasAttribute("formAction")){if(O=L,Y=L[xt]||null)le=Y.formAction;else if(Yr(O)!==null)continue}else le=Y.action;typeof le=="function"?y[w+1]=le:(y.splice(w,3),w-=3),jh(y)}}}function x_(){function o(L){L.canIntercept&&L.info==="react-transition"&&L.intercept({handler:function(){return new Promise(function(Y){return O=Y})},focusReset:"manual",scroll:"manual"})}function h(){O!==null&&(O(),O=null),w||setTimeout(y,20)}function y(){if(!w&&!navigation.transition){var L=navigation.currentEntry;L&&L.url!=null&&navigation.navigate(L.url,{state:L.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var w=!1,O=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",h),navigation.addEventListener("navigateerror",h),setTimeout(y,100),function(){w=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",h),navigation.removeEventListener("navigateerror",h),O!==null&&(O(),O=null)}}}function Cu(o){this._internalRoot=o}Bl.prototype.render=Cu.prototype.render=function(o){var h=this._internalRoot;if(h===null)throw Error(a(409));var y=h.current,w=ho();Dt(y,w,o,h,null,null)},Bl.prototype.unmount=Cu.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var h=o.containerInfo;Dt(o.current,2,null,o,null,null),Sm(),h[mn]=null}};function Bl(o){this._internalRoot=o}Bl.prototype.unstable_scheduleHydration=function(o){if(o){var h=To();o={blockedOn:null,target:o,priority:h};for(var y=0;y<Ir.length&&h!==0&&h<Ir[y].priority;y++);Ir.splice(y,0,o),y===0&&li(o)}};var Lh=t.version;if(Lh!=="19.2.0")throw Error(a(527,Lh,"19.2.0"));Qe.findDOMNode=function(o){var h=o._reactInternals;if(h===void 0)throw typeof o.render=="function"?Error(a(188)):(o=Object.keys(o).join(","),Error(a(268,o)));return o=C(h),o=o!==null?A(o):null,o=o===null?null:o.stateNode,o};var Xd={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Le,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jc.isDisabled&&jc.supportsFiber)try{Se=jc.inject(Xd),Me=jc}catch{}}return zy.createRoot=function(o,h){if(!d(o))throw Error(a(299));var y=!1,w="",O=Bg,L=Rv,Y=cm;return h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onUncaughtError!==void 0&&(O=h.onUncaughtError),h.onCaughtError!==void 0&&(L=h.onCaughtError),h.onRecoverableError!==void 0&&(Y=h.onRecoverableError)),h=Ot(o,1,!1,null,null,y,w,null,O,L,Y,x_),o[mn]=h.current,km(o),new Cu(h)},zy.hydrateRoot=function(o,h,y){if(!d(o))throw Error(a(299));var w=!1,O="",L=Bg,Y=Rv,le=cm,Pe=null;return y!=null&&(y.unstable_strictMode===!0&&(w=!0),y.identifierPrefix!==void 0&&(O=y.identifierPrefix),y.onUncaughtError!==void 0&&(L=y.onUncaughtError),y.onCaughtError!==void 0&&(Y=y.onCaughtError),y.onRecoverableError!==void 0&&(le=y.onRecoverableError),y.formState!==void 0&&(Pe=y.formState)),h=Ot(o,1,!0,h,y??null,w,O,Pe,L,Y,le,x_),h.context=Ct(null),y=h.current,w=ho(),w=qn(w),O=Ds(w),O.callback=null,lo(y,O,w),y=w,h.current.lanes=y,jr(h,y),Bs(h),o[mn]=h.current,km(o),new Bl(h)},zy.version="19.2.0",zy}var CT;function Aj(){if(CT)return ix.exports;CT=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ix.exports=Ej(),ix.exports}var Pj=Aj();/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ET="popstate";function Dj(e={}){function t(a,d){let{pathname:p,search:m,hash:s}=a.location;return Q1("",{pathname:p,search:m,hash:s},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function r(a,d){return typeof d=="string"?d:Ky(d)}return Oj(t,r,null,e)}function bi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ju(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function kj(){return Math.random().toString(36).substring(2,10)}function AT(e,t){return{usr:e.state,key:e.key,idx:t}}function Q1(e,t,r=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?mg(t):t,state:r,key:t&&t.key||a||kj()}}function Ky({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function mg(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function Oj(e,t,r,a={}){let{window:d=document.defaultView,v5Compat:p=!1}=a,m=d.history,s="POP",M=null,C=A();C==null&&(C=0,m.replaceState({...m.state,idx:C},""));function A(){return(m.state||{idx:null}).idx}function D(){s="POP";let H=A(),Q=H==null?null:H-C;C=H,M&&M({action:s,location:V.location,delta:Q})}function R(H,Q){s="PUSH";let te=Q1(V.location,H,Q);C=A()+1;let ne=AT(te,C),me=V.createHref(te);try{m.pushState(ne,"",me)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;d.location.assign(me)}p&&M&&M({action:s,location:V.location,delta:1})}function j(H,Q){s="REPLACE";let te=Q1(V.location,H,Q);C=A();let ne=AT(te,C),me=V.createHref(te);m.replaceState(ne,"",me),p&&M&&M({action:s,location:V.location,delta:0})}function G(H){return Ij(H)}let V={get action(){return s},get location(){return e(d,m)},listen(H){if(M)throw new Error("A history only accepts one active listener");return d.addEventListener(ET,D),M=H,()=>{d.removeEventListener(ET,D),M=null}},createHref(H){return t(d,H)},createURL:G,encodeLocation(H){let Q=G(H);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:R,replace:j,go(H){return m.go(H)}};return V}function Ij(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),bi(r,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:Ky(e);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=r+a),new URL(a,r)}function _P(e,t,r="/"){return zj(e,t,r,!1)}function zj(e,t,r,a){let d=typeof t=="string"?mg(t):t,p=Yh(d.pathname||"/",r);if(p==null)return null;let m=bP(e);Rj(m);let s=null;for(let M=0;s==null&&M<m.length;++M){let C=Hj(p);s=qj(m[M],C,a)}return s}function bP(e,t=[],r=[],a="",d=!1){let p=(m,s,M=d,C)=>{let A={relativePath:C===void 0?m.path||"":C,caseSensitive:m.caseSensitive===!0,childrenIndex:s,route:m};if(A.relativePath.startsWith("/")){if(!A.relativePath.startsWith(a)&&M)return;bi(A.relativePath.startsWith(a),`Absolute route path "${A.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),A.relativePath=A.relativePath.slice(a.length)}let D=Hh([a,A.relativePath]),R=r.concat(A);m.children&&m.children.length>0&&(bi(m.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${D}".`),bP(m.children,t,R,D,M)),!(m.path==null&&!m.index)&&t.push({path:D,score:$j(D,m.index),routesMeta:R})};return e.forEach((m,s)=>{if(m.path===""||!m.path?.includes("?"))p(m,s);else for(let M of xP(m.path))p(m,s,!0,M)}),t}function xP(e){let t=e.split("/");if(t.length===0)return[];let[r,...a]=t,d=r.endsWith("?"),p=r.replace(/\?$/,"");if(a.length===0)return d?[p,""]:[p];let m=xP(a.join("/")),s=[];return s.push(...m.map(M=>M===""?p:[p,M].join("/"))),d&&s.push(...m),s.map(M=>e.startsWith("/")&&M===""?"/":M)}function Rj(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Vj(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var jj=/^:[\w-]+$/,Lj=3,Nj=2,Bj=1,Fj=10,Uj=-2,PT=e=>e==="*";function $j(e,t){let r=e.split("/"),a=r.length;return r.some(PT)&&(a+=Uj),t&&(a+=Nj),r.filter(d=>!PT(d)).reduce((d,p)=>d+(jj.test(p)?Lj:p===""?Bj:Fj),a)}function Vj(e,t){return e.length===t.length&&e.slice(0,-1).every((a,d)=>a===t[d])?e[e.length-1]-t[t.length-1]:0}function qj(e,t,r=!1){let{routesMeta:a}=e,d={},p="/",m=[];for(let s=0;s<a.length;++s){let M=a[s],C=s===a.length-1,A=p==="/"?t:t.slice(p.length)||"/",D=r0({path:M.relativePath,caseSensitive:M.caseSensitive,end:C},A),R=M.route;if(!D&&C&&r&&!a[a.length-1].route.index&&(D=r0({path:M.relativePath,caseSensitive:M.caseSensitive,end:!1},A)),!D)return null;Object.assign(d,D.params),m.push({params:d,pathname:Hh([p,D.pathname]),pathnameBase:Xj(Hh([p,D.pathnameBase])),route:R}),D.pathnameBase!=="/"&&(p=Hh([p,D.pathnameBase]))}return m}function r0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=Gj(e.path,e.caseSensitive,e.end),d=t.match(r);if(!d)return null;let p=d[0],m=p.replace(/(.)\/+$/,"$1"),s=d.slice(1);return{params:a.reduce((C,{paramName:A,isOptional:D},R)=>{if(A==="*"){let G=s[R]||"";m=p.slice(0,p.length-G.length).replace(/(.)\/+$/,"$1")}const j=s[R];return D&&!j?C[A]=void 0:C[A]=(j||"").replace(/%2F/g,"/"),C},{}),pathname:p,pathnameBase:m,pattern:e}}function Gj(e,t=!1,r=!0){ju(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],d="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,s,M)=>(a.push({paramName:s,isOptional:M!=null}),M?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(a.push({paramName:"*"}),d+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?d+="\\/*$":e!==""&&e!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,t?void 0:"i"),a]}function Hj(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ju(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Yh(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&a!=="/"?null:e.slice(r)||"/"}function Zj(e,t="/"){let{pathname:r,search:a="",hash:d=""}=typeof e=="string"?mg(e):e;return{pathname:r?r.startsWith("/")?r:Wj(r,t):t,search:Kj(a),hash:Qj(d)}}function Wj(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(d=>{d===".."?r.length>1&&r.pop():d!=="."&&r.push(d)}),r.length>1?r.join("/"):"/"}function lx(e,t,r,a){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Yj(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function wP(e){let t=Yj(e);return t.map((r,a)=>a===t.length-1?r.pathname:r.pathnameBase)}function SP(e,t,r,a=!1){let d;typeof e=="string"?d=mg(e):(d={...e},bi(!d.pathname||!d.pathname.includes("?"),lx("?","pathname","search",d)),bi(!d.pathname||!d.pathname.includes("#"),lx("#","pathname","hash",d)),bi(!d.search||!d.search.includes("#"),lx("#","search","hash",d)));let p=e===""||d.pathname==="",m=p?"/":d.pathname,s;if(m==null)s=r;else{let D=t.length-1;if(!a&&m.startsWith("..")){let R=m.split("/");for(;R[0]==="..";)R.shift(),D-=1;d.pathname=R.join("/")}s=D>=0?t[D]:"/"}let M=Zj(d,s),C=m&&m!=="/"&&m.endsWith("/"),A=(p||m===".")&&r.endsWith("/");return!M.pathname.endsWith("/")&&(C||A)&&(M.pathname+="/"),M}var Hh=e=>e.join("/").replace(/\/\/+/g,"/"),Xj=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Kj=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Qj=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Jj(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var TP=["POST","PUT","PATCH","DELETE"];new Set(TP);var eL=["GET",...TP];new Set(eL);var gg=F.createContext(null);gg.displayName="DataRouter";var Z0=F.createContext(null);Z0.displayName="DataRouterState";F.createContext(!1);var MP=F.createContext({isTransitioning:!1});MP.displayName="ViewTransition";var tL=F.createContext(new Map);tL.displayName="Fetchers";var nL=F.createContext(null);nL.displayName="Await";var Uu=F.createContext(null);Uu.displayName="Navigation";var fv=F.createContext(null);fv.displayName="Location";var nd=F.createContext({outlet:null,matches:[],isDataRoute:!1});nd.displayName="Route";var fS=F.createContext(null);fS.displayName="RouteError";function rL(e,{relative:t}={}){bi(pv(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=F.useContext(Uu),{hash:d,pathname:p,search:m}=mv(e,{relative:t}),s=p;return r!=="/"&&(s=p==="/"?r:Hh([r,p])),a.createHref({pathname:s,search:m,hash:d})}function pv(){return F.useContext(fv)!=null}function rd(){return bi(pv(),"useLocation() may be used only in the context of a <Router> component."),F.useContext(fv).location}var CP="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function EP(e){F.useContext(Uu).static||F.useLayoutEffect(e)}function W0(){let{isDataRoute:e}=F.useContext(nd);return e?gL():iL()}function iL(){bi(pv(),"useNavigate() may be used only in the context of a <Router> component.");let e=F.useContext(gg),{basename:t,navigator:r}=F.useContext(Uu),{matches:a}=F.useContext(nd),{pathname:d}=rd(),p=JSON.stringify(wP(a)),m=F.useRef(!1);return EP(()=>{m.current=!0}),F.useCallback((M,C={})=>{if(ju(m.current,CP),!m.current)return;if(typeof M=="number"){r.go(M);return}let A=SP(M,JSON.parse(p),d,C.relative==="path");e==null&&t!=="/"&&(A.pathname=A.pathname==="/"?t:Hh([t,A.pathname])),(C.replace?r.replace:r.push)(A,C.state,C)},[t,r,p,d,e])}F.createContext(null);function mv(e,{relative:t}={}){let{matches:r}=F.useContext(nd),{pathname:a}=rd(),d=JSON.stringify(wP(r));return F.useMemo(()=>SP(e,JSON.parse(d),a,t==="path"),[e,d,a,t])}function aL(e,t){return AP(e,t)}function AP(e,t,r,a,d){bi(pv(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:p}=F.useContext(Uu),{matches:m}=F.useContext(nd),s=m[m.length-1],M=s?s.params:{},C=s?s.pathname:"/",A=s?s.pathnameBase:"/",D=s&&s.route;{let te=D&&D.path||"";PP(C,!D||te.endsWith("*")||te.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${C}" (under <Route path="${te}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${te}"> to <Route path="${te==="/"?"*":`${te}/*`}">.`)}let R=rd(),j;if(t){let te=typeof t=="string"?mg(t):t;bi(A==="/"||te.pathname?.startsWith(A),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${A}" but pathname "${te.pathname}" was given in the \`location\` prop.`),j=te}else j=R;let G=j.pathname||"/",V=G;if(A!=="/"){let te=A.replace(/^\//,"").split("/");V="/"+G.replace(/^\//,"").split("/").slice(te.length).join("/")}let H=_P(e,{pathname:V});ju(D||H!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),ju(H==null||H[H.length-1].route.element!==void 0||H[H.length-1].route.Component!==void 0||H[H.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Q=uL(H&&H.map(te=>Object.assign({},te,{params:Object.assign({},M,te.params),pathname:Hh([A,p.encodeLocation?p.encodeLocation(te.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:te.pathname]),pathnameBase:te.pathnameBase==="/"?A:Hh([A,p.encodeLocation?p.encodeLocation(te.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:te.pathnameBase])})),m,r,a,d);return t&&Q?F.createElement(fv.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},Q):Q}function oL(){let e=mL(),t=Jj(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",d={padding:"0.5rem",backgroundColor:a},p={padding:"2px 4px",backgroundColor:a},m=null;return console.error("Error handled by React Router default ErrorBoundary:",e),m=F.createElement(F.Fragment,null,F.createElement("p",null,"💿 Hey developer 👋"),F.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",F.createElement("code",{style:p},"ErrorBoundary")," or"," ",F.createElement("code",{style:p},"errorElement")," prop on your route.")),F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},t),r?F.createElement("pre",{style:d},r):null,m)}var sL=F.createElement(oL,null),lL=class extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?F.createElement(nd.Provider,{value:this.props.routeContext},F.createElement(fS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function cL({routeContext:e,match:t,children:r}){let a=F.useContext(gg);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),F.createElement(nd.Provider,{value:e},r)}function uL(e,t=[],r=null,a=null,d=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let p=e,m=r?.errors;if(m!=null){let C=p.findIndex(A=>A.route.id&&m?.[A.route.id]!==void 0);bi(C>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(m).join(",")}`),p=p.slice(0,Math.min(p.length,C+1))}let s=!1,M=-1;if(r)for(let C=0;C<p.length;C++){let A=p[C];if((A.route.HydrateFallback||A.route.hydrateFallbackElement)&&(M=C),A.route.id){let{loaderData:D,errors:R}=r,j=A.route.loader&&!D.hasOwnProperty(A.route.id)&&(!R||R[A.route.id]===void 0);if(A.route.lazy||j){s=!0,M>=0?p=p.slice(0,M+1):p=[p[0]];break}}}return p.reduceRight((C,A,D)=>{let R,j=!1,G=null,V=null;r&&(R=m&&A.route.id?m[A.route.id]:void 0,G=A.route.errorElement||sL,s&&(M<0&&D===0?(PP("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,V=null):M===D&&(j=!0,V=A.route.hydrateFallbackElement||null)));let H=t.concat(p.slice(0,D+1)),Q=()=>{let te;return R?te=G:j?te=V:A.route.Component?te=F.createElement(A.route.Component,null):A.route.element?te=A.route.element:te=C,F.createElement(cL,{match:A,routeContext:{outlet:C,matches:H,isDataRoute:r!=null},children:te})};return r&&(A.route.ErrorBoundary||A.route.errorElement||D===0)?F.createElement(lL,{location:r.location,revalidation:r.revalidation,component:G,error:R,children:Q(),routeContext:{outlet:null,matches:H,isDataRoute:!0},unstable_onError:a}):Q()},null)}function pS(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hL(e){let t=F.useContext(gg);return bi(t,pS(e)),t}function dL(e){let t=F.useContext(Z0);return bi(t,pS(e)),t}function fL(e){let t=F.useContext(nd);return bi(t,pS(e)),t}function mS(e){let t=fL(e),r=t.matches[t.matches.length-1];return bi(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function pL(){return mS("useRouteId")}function mL(){let e=F.useContext(fS),t=dL("useRouteError"),r=mS("useRouteError");return e!==void 0?e:t.errors?.[r]}function gL(){let{router:e}=hL("useNavigate"),t=mS("useNavigate"),r=F.useRef(!1);return EP(()=>{r.current=!0}),F.useCallback(async(d,p={})=>{ju(r.current,CP),r.current&&(typeof d=="number"?e.navigate(d):await e.navigate(d,{fromRouteId:t,...p}))},[e,t])}var DT={};function PP(e,t,r){!t&&!DT[e]&&(DT[e]=!0,ju(!1,r))}F.memo(yL);function yL({routes:e,future:t,state:r,unstable_onError:a}){return AP(e,void 0,r,a,t)}function bp(e){bi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vL({basename:e="/",children:t=null,location:r,navigationType:a="POP",navigator:d,static:p=!1}){bi(!pv(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=e.replace(/^\/*/,"/"),s=F.useMemo(()=>({basename:m,navigator:d,static:p,future:{}}),[m,d,p]);typeof r=="string"&&(r=mg(r));let{pathname:M="/",search:C="",hash:A="",state:D=null,key:R="default"}=r,j=F.useMemo(()=>{let G=Yh(M,m);return G==null?null:{location:{pathname:G,search:C,hash:A,state:D,key:R},navigationType:a}},[m,M,C,A,D,R,a]);return ju(j!=null,`<Router basename="${m}"> is not able to match the URL "${M}${C}${A}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:F.createElement(Uu.Provider,{value:s},F.createElement(fv.Provider,{children:t,value:j}))}function _L({children:e,location:t}){return aL(J1(e),t)}function J1(e,t=[]){let r=[];return F.Children.forEach(e,(a,d)=>{if(!F.isValidElement(a))return;let p=[...t,d];if(a.type===F.Fragment){r.push.apply(r,J1(a.props.children,p));return}bi(a.type===bp,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),bi(!a.props.index||!a.props.children,"An index route cannot have child routes.");let m={id:a.props.id||p.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(m.children=J1(a.props.children,p)),r.push(m)}),r}var Y_="get",X_="application/x-www-form-urlencoded";function Y0(e){return e!=null&&typeof e.tagName=="string"}function bL(e){return Y0(e)&&e.tagName.toLowerCase()==="button"}function xL(e){return Y0(e)&&e.tagName.toLowerCase()==="form"}function wL(e){return Y0(e)&&e.tagName.toLowerCase()==="input"}function SL(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function TL(e,t){return e.button===0&&(!t||t==="_self")&&!SL(e)}var w_=null;function ML(){if(w_===null)try{new FormData(document.createElement("form"),0),w_=!1}catch{w_=!0}return w_}var CL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function cx(e){return e!=null&&!CL.has(e)?(ju(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${X_}"`),null):e}function EL(e,t){let r,a,d,p,m;if(xL(e)){let s=e.getAttribute("action");a=s?Yh(s,t):null,r=e.getAttribute("method")||Y_,d=cx(e.getAttribute("enctype"))||X_,p=new FormData(e)}else if(bL(e)||wL(e)&&(e.type==="submit"||e.type==="image")){let s=e.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let M=e.getAttribute("formaction")||s.getAttribute("action");if(a=M?Yh(M,t):null,r=e.getAttribute("formmethod")||s.getAttribute("method")||Y_,d=cx(e.getAttribute("formenctype"))||cx(s.getAttribute("enctype"))||X_,p=new FormData(s,e),!ML()){let{name:C,type:A,value:D}=e;if(A==="image"){let R=C?`${C}.`:"";p.append(`${R}x`,"0"),p.append(`${R}y`,"0")}else C&&p.append(C,D)}}else{if(Y0(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Y_,a=null,d=X_,m=e}return p&&d==="text/plain"&&(m=p,p=void 0),{action:a,method:r.toLowerCase(),encType:d,formData:p,body:m}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function gS(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function AL(e,t,r){let a=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return a.pathname==="/"?a.pathname=`_root.${r}`:t&&Yh(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${r}`,a}async function PL(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function DL(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function kL(e,t,r){let a=await Promise.all(e.map(async d=>{let p=t.routes[d.route.id];if(p){let m=await PL(p,r);return m.links?m.links():[]}return[]}));return RL(a.flat(1).filter(DL).filter(d=>d.rel==="stylesheet"||d.rel==="preload").map(d=>d.rel==="stylesheet"?{...d,rel:"prefetch",as:"style"}:{...d,rel:"prefetch"}))}function kT(e,t,r,a,d,p){let m=(M,C)=>r[C]?M.route.id!==r[C].route.id:!0,s=(M,C)=>r[C].pathname!==M.pathname||r[C].route.path?.endsWith("*")&&r[C].params["*"]!==M.params["*"];return p==="assets"?t.filter((M,C)=>m(M,C)||s(M,C)):p==="data"?t.filter((M,C)=>{let A=a.routes[M.route.id];if(!A||!A.hasLoader)return!1;if(m(M,C)||s(M,C))return!0;if(M.route.shouldRevalidate){let D=M.route.shouldRevalidate({currentUrl:new URL(d.pathname+d.search+d.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:M.params,defaultShouldRevalidate:!0});if(typeof D=="boolean")return D}return!0}):[]}function OL(e,t,{includeHydrateFallback:r}={}){return IL(e.map(a=>{let d=t.routes[a.route.id];if(!d)return[];let p=[d.module];return d.clientActionModule&&(p=p.concat(d.clientActionModule)),d.clientLoaderModule&&(p=p.concat(d.clientLoaderModule)),r&&d.hydrateFallbackModule&&(p=p.concat(d.hydrateFallbackModule)),d.imports&&(p=p.concat(d.imports)),p}).flat(1))}function IL(e){return[...new Set(e)]}function zL(e){let t={},r=Object.keys(e).sort();for(let a of r)t[a]=e[a];return t}function RL(e,t){let r=new Set;return new Set(t),e.reduce((a,d)=>{let p=JSON.stringify(zL(d));return r.has(p)||(r.add(p),a.push({key:p,link:d})),a},[])}function DP(){let e=F.useContext(gg);return gS(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function jL(){let e=F.useContext(Z0);return gS(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var yS=F.createContext(void 0);yS.displayName="FrameworkContext";function kP(){let e=F.useContext(yS);return gS(e,"You must render this element inside a <HydratedRouter> element"),e}function LL(e,t){let r=F.useContext(yS),[a,d]=F.useState(!1),[p,m]=F.useState(!1),{onFocus:s,onBlur:M,onMouseEnter:C,onMouseLeave:A,onTouchStart:D}=t,R=F.useRef(null);F.useEffect(()=>{if(e==="render"&&m(!0),e==="viewport"){let V=Q=>{Q.forEach(te=>{m(te.isIntersecting)})},H=new IntersectionObserver(V,{threshold:.5});return R.current&&H.observe(R.current),()=>{H.disconnect()}}},[e]),F.useEffect(()=>{if(a){let V=setTimeout(()=>{m(!0)},100);return()=>{clearTimeout(V)}}},[a]);let j=()=>{d(!0)},G=()=>{d(!1),m(!1)};return r?e!=="intent"?[p,R,{}]:[p,R,{onFocus:Ry(s,j),onBlur:Ry(M,G),onMouseEnter:Ry(C,j),onMouseLeave:Ry(A,G),onTouchStart:Ry(D,j)}]:[!1,R,{}]}function Ry(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function NL({page:e,...t}){let{router:r}=DP(),a=F.useMemo(()=>_P(r.routes,e,r.basename),[r.routes,e,r.basename]);return a?F.createElement(FL,{page:e,matches:a,...t}):null}function BL(e){let{manifest:t,routeModules:r}=kP(),[a,d]=F.useState([]);return F.useEffect(()=>{let p=!1;return kL(e,t,r).then(m=>{p||d(m)}),()=>{p=!0}},[e,t,r]),a}function FL({page:e,matches:t,...r}){let a=rd(),{manifest:d,routeModules:p}=kP(),{basename:m}=DP(),{loaderData:s,matches:M}=jL(),C=F.useMemo(()=>kT(e,t,M,d,a,"data"),[e,t,M,d,a]),A=F.useMemo(()=>kT(e,t,M,d,a,"assets"),[e,t,M,d,a]),D=F.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let G=new Set,V=!1;if(t.forEach(Q=>{let te=d.routes[Q.route.id];!te||!te.hasLoader||(!C.some(ne=>ne.route.id===Q.route.id)&&Q.route.id in s&&p[Q.route.id]?.shouldRevalidate||te.hasClientLoader?V=!0:G.add(Q.route.id))}),G.size===0)return[];let H=AL(e,m,"data");return V&&G.size>0&&H.searchParams.set("_routes",t.filter(Q=>G.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[H.pathname+H.search]},[m,s,a,d,C,t,e,p]),R=F.useMemo(()=>OL(A,d),[A,d]),j=BL(A);return F.createElement(F.Fragment,null,D.map(G=>F.createElement("link",{key:G,rel:"prefetch",as:"fetch",href:G,...r})),R.map(G=>F.createElement("link",{key:G,rel:"modulepreload",href:G,...r})),j.map(({key:G,link:V})=>F.createElement("link",{key:G,nonce:r.nonce,...V})))}function UL(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var OP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{OP&&(window.__reactRouterVersion="7.9.4")}catch{}function $L({basename:e,children:t,window:r}){let a=F.useRef();a.current==null&&(a.current=Dj({window:r,v5Compat:!0}));let d=a.current,[p,m]=F.useState({action:d.action,location:d.location}),s=F.useCallback(M=>{F.startTransition(()=>m(M))},[m]);return F.useLayoutEffect(()=>d.listen(s),[d,s]),F.createElement(vL,{basename:e,children:t,location:p.location,navigationType:p.action,navigator:d})}var IP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zP=F.forwardRef(function({onClick:t,discover:r="render",prefetch:a="none",relative:d,reloadDocument:p,replace:m,state:s,target:M,to:C,preventScrollReset:A,viewTransition:D,...R},j){let{basename:G}=F.useContext(Uu),V=typeof C=="string"&&IP.test(C),H,Q=!1;if(typeof C=="string"&&V&&(H=C,OP))try{let nt=new URL(window.location.href),ft=C.startsWith("//")?new URL(nt.protocol+C):new URL(C),rt=Yh(ft.pathname,G);ft.origin===nt.origin&&rt!=null?C=rt+ft.search+ft.hash:Q=!0}catch{ju(!1,`<Link to="${C}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let te=rL(C,{relative:d}),[ne,me,fe]=LL(a,R),_e=HL(C,{replace:m,state:s,target:M,preventScrollReset:A,relative:d,viewTransition:D});function ye(nt){t&&t(nt),nt.defaultPrevented||_e(nt)}let Oe=F.createElement("a",{...R,...fe,href:H||te,onClick:Q||p?t:ye,ref:UL(j,me),target:M,"data-discover":!V&&r==="render"?"true":void 0});return ne&&!V?F.createElement(F.Fragment,null,Oe,F.createElement(NL,{page:te})):Oe});zP.displayName="Link";var VL=F.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:a="",end:d=!1,style:p,to:m,viewTransition:s,children:M,...C},A){let D=mv(m,{relative:C.relative}),R=rd(),j=F.useContext(Z0),{navigator:G,basename:V}=F.useContext(Uu),H=j!=null&&KL(D)&&s===!0,Q=G.encodeLocation?G.encodeLocation(D).pathname:D.pathname,te=R.pathname,ne=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;r||(te=te.toLowerCase(),ne=ne?ne.toLowerCase():null,Q=Q.toLowerCase()),ne&&V&&(ne=Yh(ne,V)||ne);const me=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let fe=te===Q||!d&&te.startsWith(Q)&&te.charAt(me)==="/",_e=ne!=null&&(ne===Q||!d&&ne.startsWith(Q)&&ne.charAt(Q.length)==="/"),ye={isActive:fe,isPending:_e,isTransitioning:H},Oe=fe?t:void 0,nt;typeof a=="function"?nt=a(ye):nt=[a,fe?"active":null,_e?"pending":null,H?"transitioning":null].filter(Boolean).join(" ");let ft=typeof p=="function"?p(ye):p;return F.createElement(zP,{...C,"aria-current":Oe,className:nt,ref:A,style:ft,to:m,viewTransition:s},typeof M=="function"?M(ye):M)});VL.displayName="NavLink";var qL=F.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:a,replace:d,state:p,method:m=Y_,action:s,onSubmit:M,relative:C,preventScrollReset:A,viewTransition:D,...R},j)=>{let G=YL(),V=XL(s,{relative:C}),H=m.toLowerCase()==="get"?"get":"post",Q=typeof s=="string"&&IP.test(s),te=ne=>{if(M&&M(ne),ne.defaultPrevented)return;ne.preventDefault();let me=ne.nativeEvent.submitter,fe=me?.getAttribute("formmethod")||m;G(me||ne.currentTarget,{fetcherKey:t,method:fe,navigate:r,replace:d,state:p,relative:C,preventScrollReset:A,viewTransition:D})};return F.createElement("form",{ref:j,method:H,action:V,onSubmit:a?M:te,...R,"data-discover":!Q&&e==="render"?"true":void 0})});qL.displayName="Form";function GL(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RP(e){let t=F.useContext(gg);return bi(t,GL(e)),t}function HL(e,{target:t,replace:r,state:a,preventScrollReset:d,relative:p,viewTransition:m}={}){let s=W0(),M=rd(),C=mv(e,{relative:p});return F.useCallback(A=>{if(TL(A,t)){A.preventDefault();let D=r!==void 0?r:Ky(M)===Ky(C);s(e,{replace:D,state:a,preventScrollReset:d,relative:p,viewTransition:m})}},[M,s,C,r,a,t,e,d,p,m])}var ZL=0,WL=()=>`__${String(++ZL)}__`;function YL(){let{router:e}=RP("useSubmit"),{basename:t}=F.useContext(Uu),r=pL();return F.useCallback(async(a,d={})=>{let{action:p,method:m,encType:s,formData:M,body:C}=EL(a,t);if(d.navigate===!1){let A=d.fetcherKey||WL();await e.fetch(A,r,d.action||p,{preventScrollReset:d.preventScrollReset,formData:M,body:C,formMethod:d.method||m,formEncType:d.encType||s,flushSync:d.flushSync})}else await e.navigate(d.action||p,{preventScrollReset:d.preventScrollReset,formData:M,body:C,formMethod:d.method||m,formEncType:d.encType||s,replace:d.replace,state:d.state,fromRouteId:r,flushSync:d.flushSync,viewTransition:d.viewTransition})},[e,t,r])}function XL(e,{relative:t}={}){let{basename:r}=F.useContext(Uu),a=F.useContext(nd);bi(a,"useFormAction must be used inside a RouteContext");let[d]=a.matches.slice(-1),p={...mv(e||".",{relative:t})},m=rd();if(e==null){p.search=m.search;let s=new URLSearchParams(p.search),M=s.getAll("index");if(M.some(A=>A==="")){s.delete("index"),M.filter(D=>D).forEach(D=>s.append("index",D));let A=s.toString();p.search=A?`?${A}`:""}}return(!e||e===".")&&d.route.index&&(p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(p.pathname=p.pathname==="/"?r:Hh([r,p.pathname])),Ky(p)}function KL(e,{relative:t}={}){let r=F.useContext(MP);bi(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=RP("useViewTransitionState"),d=mv(e,{relative:t});if(!r.isTransitioning)return!1;let p=Yh(r.currentLocation.pathname,a)||r.currentLocation.pathname,m=Yh(r.nextLocation.pathname,a)||r.nextLocation.pathname;return r0(d.pathname,m)!=null||r0(d.pathname,p)!=null}var Vp=vP();const QL=Fu(Vp);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),eN=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,a)=>a?a.toUpperCase():r.toLowerCase()),OT=e=>{const t=eN(e);return t.charAt(0).toUpperCase()+t.slice(1)},jP=(...e)=>e.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim(),tN=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var nN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=F.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:d="",children:p,iconNode:m,...s},M)=>F.createElement("svg",{ref:M,...nN,width:t,height:t,stroke:e,strokeWidth:a?Number(r)*24/Number(t):r,className:jP("lucide",d),...!p&&!tN(s)&&{"aria-hidden":"true"},...s},[...m.map(([C,A])=>F.createElement(C,A)),...Array.isArray(p)?p:[p]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=(e,t)=>{const r=F.forwardRef(({className:a,...d},p)=>F.createElement(rN,{ref:p,iconNode:t,className:jP(`lucide-${JL(OT(e))}`,`lucide-${e}`,a),...d}));return r.displayName=OT(e),r};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],aN=rr("activity",iN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],sN=rr("arrow-right",oN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],vS=rr("bell",lN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],uN=rr("bot",cN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],IT=rr("calendar",hN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],LP=rr("chart-column",dN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],pN=rr("check",fN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],_S=rr("chevron-down",mN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],yN=rr("chevron-left",gN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],NP=rr("chevron-right",vN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],bN=rr("chevron-up",_N);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],wN=rr("circle-check-big",xN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],TN=rr("cloud",SN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],BP=rr("download",MN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],zT=rr("droplets",CN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],AN=rr("eye",EN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],i0=rr("file-text",PN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],kN=rr("house",DN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],IN=rr("info",ON);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],RN=rr("life-buoy",zN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ew=rr("map-pin",jN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],FP=rr("map",LN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],RT=rr("menu",NN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],FN=rr("search",BN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],$N=rr("send",UN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qN=rr("settings",VN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}]],HN=rr("sparkle",GN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],UP=rr("sparkles",ZN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],ux=rr("thermometer",WN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],a0=rr("triangle-alert",YN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],jT=rr("user",XN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],QN=rr("video",KN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],$P=rr("waves",JN);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],t3=rr("x",e3);function n3({onChangePage:e,isCollapsed:t,onClearSelected:r,user:a={name:"José Velarde",email:"jose@natek.pe"}}){const d=W0(),p=rd(),[m,s]=F.useState("Home"),M=[{title:"Home",icon:X.jsx(kN,{size:22}),path:"/",badge:0},{title:"Estaciones",icon:X.jsx(FP,{size:22}),path:"/stations",badge:3},{title:"Predicciones",icon:X.jsx(LP,{size:22}),path:"/predictions",badge:0},{title:"Reportes",icon:X.jsx(i0,{size:22}),path:"/reports",badge:1},{title:"Alertas",icon:X.jsx(vS,{size:22}),path:"/alerts",badge:5}],C=[{title:"Usuario",icon:X.jsx(jT,{size:20}),path:"/user"},{title:"Soporte",icon:X.jsx(RN,{size:20}),path:"/support"},{title:"API",icon:X.jsx(TN,{size:20}),path:"/api"}];F.useEffect(()=>{const D=M.find(R=>R.path===p.pathname)||C.find(R=>R.path===p.pathname);D&&s(D.title)},[p.pathname]);const A=D=>{s(D.title),e(D.title),d(D.path),D.title==="Estaciones"&&r?.()};return X.jsxs("aside",{className:`${t?"w-[68px]":"w-64"} p-3 h-[calc(100vh-4rem)] mt-11 fixed left-0 top-0
        flex flex-col justify-between overflow-y-auto overflow-x-hidden
        transition-all duration-200 ease-in-out`,children:[X.jsxs("div",{className:"flex flex-col justify-between flex-1",children:[X.jsx("nav",{className:"flex flex-col gap-2 mt-2",children:M.map(D=>{const R=m===D.title;return X.jsxs("button",{onClick:()=>A(D),className:`flex items-center justify-between px-3 py-2 rounded-md transition text-gray-700 dark:text-gray-200 group
                ${R?"bg-blue-500 text-white dark:bg-blue-900/30 dark:text-blue-300":"hover:bg-blue-100 dark:hover:bg-gray-800"}`,children:[X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("span",{className:`${R?"text-white dark:text-blue-400":"text-gray-500 dark:text-gray-400"}`,children:D.icon}),!t&&X.jsx("span",{className:"text-sm font-medium truncate",children:D.title})]}),D.badge>0&&X.jsx("span",{className:`text-xs font-semibold rounded-full ${t?"w-2 h-2":"px-2 py-0.5"} ${R?"bg-white text-blue-600":"bg-blue-500 text-white"}`,children:!t&&D.badge})]},D.title)})}),X.jsx("nav",{className:"flex flex-col gap-2 mt-6 border-t border-gray-300 pt-4 pb-4",children:C.map(D=>{const R=m===D.title;return X.jsx("button",{onClick:()=>A(D),className:`flex items-center justify-between px-3 py-2 rounded-md transition text-gray-700 dark:text-gray-200 group
                ${R?"bg-blue-500 text-white dark:bg-blue-900/30 dark:text-blue-300":"hover:bg-blue-100 dark:hover:bg-gray-800"}`,children:X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("span",{className:`${R?"text-white dark:text-blue-400":"text-gray-500 dark:text-gray-400"}`,children:D.icon}),!t&&X.jsx("span",{className:"text-sm font-medium truncate",children:D.title})]})},D.title)})})]}),X.jsxs("div",{className:`pl-1 border-t border-gray-300 pt-4 flex  items-center gap-3 transition-all min-w-0 ${t?"justify-between":"justify-start"}`,children:[X.jsx("div",{className:"flex items-center justify-center w-9 h-9 bg-blue-200 rounded-full flex-shrink-0",children:X.jsx(jT,{size:20,className:"text-blue-700"})}),!t&&X.jsxs("div",{className:"flex flex-col text-sm min-w-0",children:[X.jsx("span",{className:"font-semibold text-gray-800 truncate",children:a.name}),X.jsx("span",{className:"text-gray-500 text-xs truncate",children:a.email})]})]})]})}function r3({onClose:e}){const[t,r]=F.useState(""),[a,d]=F.useState([]),p=()=>{t.trim()&&(d(m=>[...m,{role:"user",text:t}]),r(""),setTimeout(()=>{d(m=>[...m,{role:"ai",text:"Esta es una respuesta de NATEK AI 🤖"}])},500))};return X.jsxs("div",{className:"flex flex-col h-full bg-white rounded-lg ml-4 ",children:[X.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 h-12",children:[X.jsxs("div",{className:"flex-1 flex justify-center items-center gap-2",children:[X.jsx(UP,{className:"text-blue-500",size:20}),X.jsx("h2",{className:"text-sm font-semibold text-gray-800",children:"Natek AI"})]}),X.jsx("button",{onClick:e,className:"p-1 rounded-md hover:bg-gray-100 text-gray-500",children:X.jsx(NP,{size:20})})]}),X.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-3 space-y-3 flex flex-col bg-gray-50",children:a.length===0?X.jsx("p",{className:"text-sm text-gray-500 text-center mt-4",children:"💬 Pregunta lo que necesites al asistente NATEK AI."}):a.map((m,s)=>X.jsx("div",{className:`flex ${m.role==="user"?"justify-end":"justify-start"}`,children:X.jsx("div",{className:`max-w-[80%] text-sm px-3 py-2 rounded-md break-words ${m.role==="user"?"bg-blue-500 text-white rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"}`,children:m.text})},s))}),X.jsxs("div",{className:"px-4 pt-3 pb-4 border-t border-gray-200 flex flex-col gap-3",children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx("input",{value:t,onChange:m=>r(m.target.value),onKeyDown:m=>m.key==="Enter"&&p(),placeholder:"Escribe tu mensaje...",className:"flex-1 px-3 py-2 text-sm border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400"}),X.jsx("button",{onClick:p,className:"p-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:X.jsx($N,{size:16})})]}),X.jsx("p",{className:"text-xs text-gray-400 text-center leading-tight",children:"NATEK AI puede cometer errores. Verifica la información antes de tomar decisiones."})]})]})}function i3(){const[e,t]=F.useState(null),r=p=>{t(m=>m===p?null:p)},a=()=>t(null),d=!!e;return X.jsxs("div",{className:"flex h-full transition-all duration-300",children:[X.jsxs("div",{className:`transition-all duration-300 overflow-hidden ${d?"w-[400px]":"w-0"} bg-gray-100`,children:[e==="ai"&&X.jsx(r3,{onClose:a}),e==="notifications"&&X.jsx("div",{className:"p-4 text-sm text-gray-600",children:"🔔 No hay notificaciones."}),e==="settings"&&X.jsx("div",{className:"p-4 text-sm text-gray-600",children:"⚙️ Configuraciones del sistema."})]}),X.jsxs("div",{className:"w-[64px] flex flex-col items-center gap-4 py-4",children:[X.jsx("button",{onClick:()=>r("ai"),className:`p-2 rounded-lg transition ${e==="ai"?"bg-blue-500 text-white":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:X.jsx(UP,{size:20})}),X.jsx("button",{onClick:()=>r("notifications"),className:`p-2 rounded-lg transition ${e==="notifications"?"bg-blue-500 text-white":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:X.jsx(vS,{size:20})}),X.jsx("button",{onClick:()=>r("settings"),className:`p-2 rounded-lg transition ${e==="settings"?"bg-blue-500 text-white":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:X.jsx(qN,{size:20})})]})]})}function a3({isSidebarOpen:e,toggleSidebar:t,pageTitle:r,selectedStationName:a}){const d=W0(),p=["Dashboard"];r&&p.push(r),r==="Estaciones"&&a&&p.push(a);const m=s=>{p[s]==="Estaciones"&&d("/stations")};return X.jsxs("header",{className:"h-16 w-full flex items-center justify-between  px-4 fixed top-0 left-0 z-50",children:[X.jsxs("div",{className:"flex items-center gap-8",children:[X.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-blue-200 transition","aria-label":"Toggle Sidebar",children:e?X.jsx(RT,{size:20}):X.jsx(RT,{size:20})}),X.jsx("div",{onClick:()=>d("/"),className:"flex items-center gap-2 cursor-pointer",children:X.jsx("img",{src:"logo.png",alt:"Natek Logo",className:"h-6 w-auto"})}),X.jsx("div",{className:"flex items-center gap-1 font-medium truncate",children:p.map((s,M)=>{const C=M===p.length-1,A=s==="Dashboard";return X.jsxs("span",{className:"flex items-center gap-1 truncate",children:[A?X.jsx("span",{className:"text-gray-400 truncate",children:s}):C?X.jsx("span",{className:"text-gray-800 font-bold truncate",children:s}):X.jsx("button",{onClick:()=>m(M),className:"text-gray-400 hover:text-blue-500 truncate",children:s}),!C&&X.jsx("span",{className:"mx-1 text-gray-400",children:"/"})]},M)})})]}),X.jsxs("div",{className:"flex items-center gap-4",children:[X.jsxs("div",{className:"relative hidden md:block w-128 bg-gray-200 rounded-md",children:[X.jsx(FN,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),X.jsx("input",{type:"text",placeholder:"Buscar estación o ubicación...",className:"pl-10 pr-3 py-2 w-full border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),X.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-200 flex items-center justify-center font-semibold text-blue-800",children:"JV"})]})]})}var K_={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.9.0/LICENSE.txt
 */var o3=K_.exports,LT;function s3(){return LT||(LT=1,(function(e,t){(function(r,a){e.exports=a()})(o3,(function(){var r={},a={};function d(m,s,M){if(a[m]=M,m==="index"){var C="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",A={};return a.shared(A),a.index(r,A),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([C],{type:"text/javascript"}))),r}}d("shared",["exports"],(function(m){function s(c,i,l,f){return new(l||(l=Promise))((function(v,S){function T(N){try{k(f.next(N))}catch(B){S(B)}}function P(N){try{k(f.throw(N))}catch(B){S(B)}}function k(N){var B;N.done?v(N.value):(B=N.value,B instanceof l?B:new l((function(q){q(B)}))).then(T,P)}k((f=f.apply(c,i||[])).next())}))}function M(c,i){this.x=c,this.y=i}function C(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var A,D;typeof SuppressedError=="function"&&SuppressedError,M.prototype={clone(){return new M(this.x,this.y)},add(c){return this.clone()._add(c)},sub(c){return this.clone()._sub(c)},multByPoint(c){return this.clone()._multByPoint(c)},divByPoint(c){return this.clone()._divByPoint(c)},mult(c){return this.clone()._mult(c)},div(c){return this.clone()._div(c)},rotate(c){return this.clone()._rotate(c)},rotateAround(c,i){return this.clone()._rotateAround(c,i)},matMult(c){return this.clone()._matMult(c)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(c){return this.x===c.x&&this.y===c.y},dist(c){return Math.sqrt(this.distSqr(c))},distSqr(c){const i=c.x-this.x,l=c.y-this.y;return i*i+l*l},angle(){return Math.atan2(this.y,this.x)},angleTo(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith(c){return this.angleWithSep(c.x,c.y)},angleWithSep(c,i){return Math.atan2(this.x*i-this.y*c,this.x*c+this.y*i)},_matMult(c){const i=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=i,this},_add(c){return this.x+=c.x,this.y+=c.y,this},_sub(c){return this.x-=c.x,this.y-=c.y,this},_mult(c){return this.x*=c,this.y*=c,this},_div(c){return this.x/=c,this.y/=c,this},_multByPoint(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint(c){return this.x/=c.x,this.y/=c.y,this},_unit(){return this._div(this.mag()),this},_perp(){const c=this.y;return this.y=this.x,this.x=-c,this},_rotate(c){const i=Math.cos(c),l=Math.sin(c),f=l*this.x+i*this.y;return this.x=i*this.x-l*this.y,this.y=f,this},_rotateAround(c,i){const l=Math.cos(c),f=Math.sin(c),v=i.y+f*(this.x-i.x)+l*(this.y-i.y);return this.x=i.x+l*(this.x-i.x)-f*(this.y-i.y),this.y=v,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:M},M.convert=function(c){if(c instanceof M)return c;if(Array.isArray(c))return new M(+c[0],+c[1]);if(c.x!==void 0&&c.y!==void 0)return new M(+c.x,+c.y);throw new Error("Expected [x, y] or {x, y} point format")};var R=(function(){if(D)return A;function c(i,l,f,v){this.cx=3*i,this.bx=3*(f-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(v-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=l,this.p2x=f,this.p2y=v}return D=1,A=c,c.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,l){if(l===void 0&&(l=1e-6),i<0)return 0;if(i>1)return 1;for(var f=i,v=0;v<8;v++){var S=this.sampleCurveX(f)-i;if(Math.abs(S)<l)return f;var T=this.sampleCurveDerivativeX(f);if(Math.abs(T)<1e-6)break;f-=S/T}var P=0,k=1;for(f=i,v=0;v<20&&(S=this.sampleCurveX(f),!(Math.abs(S-i)<l));v++)i>S?P=f:k=f,f=.5*(k-P)+P;return f},solve:function(i,l){return this.sampleCurveY(this.solveCurveX(i,l))}},A})(),j=C(R);let G,V;function H(){return G==null&&(G=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),G}function Q(){if(V==null&&(V=!1,H())){const i=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(i){for(let f=0;f<25;f++){const v=4*f;i.fillStyle=`rgb(${v},${v+1},${v+2})`,i.fillRect(f%5,Math.floor(f/5),1,1)}const l=i.getImageData(0,0,5,5).data;for(let f=0;f<100;f++)if(f%4!=3&&l[f]!==f){V=!0;break}}}return V||!1}var te=1e-6,ne=typeof Float32Array<"u"?Float32Array:Array;function me(){var c=new ne(9);return ne!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function fe(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function _e(){var c=new ne(3);return ne!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function ye(c){var i=c[0],l=c[1],f=c[2];return Math.sqrt(i*i+l*l+f*f)}function Oe(c,i,l){var f=new ne(3);return f[0]=c,f[1]=i,f[2]=l,f}function nt(c,i,l){return c[0]=i[0]+l[0],c[1]=i[1]+l[1],c[2]=i[2]+l[2],c}function ft(c,i,l){return c[0]=i[0]*l,c[1]=i[1]*l,c[2]=i[2]*l,c}function rt(c,i,l){var f=i[0],v=i[1],S=i[2],T=l[0],P=l[1],k=l[2];return c[0]=v*k-S*P,c[1]=S*T-f*k,c[2]=f*P-v*T,c}var at,Et=ye;function At(c,i,l){var f=i[0],v=i[1],S=i[2],T=i[3];return c[0]=l[0]*f+l[4]*v+l[8]*S+l[12]*T,c[1]=l[1]*f+l[5]*v+l[9]*S+l[13]*T,c[2]=l[2]*f+l[6]*v+l[10]*S+l[14]*T,c[3]=l[3]*f+l[7]*v+l[11]*S+l[15]*T,c}function zt(){var c=new ne(4);return ne!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function Le(c,i,l,f){var v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",S=Math.PI/360;i*=S,f*=S,l*=S;var T=Math.sin(i),P=Math.cos(i),k=Math.sin(l),N=Math.cos(l),B=Math.sin(f),q=Math.cos(f);switch(v){case"xyz":c[0]=T*N*q+P*k*B,c[1]=P*k*q-T*N*B,c[2]=P*N*B+T*k*q,c[3]=P*N*q-T*k*B;break;case"xzy":c[0]=T*N*q-P*k*B,c[1]=P*k*q-T*N*B,c[2]=P*N*B+T*k*q,c[3]=P*N*q+T*k*B;break;case"yxz":c[0]=T*N*q+P*k*B,c[1]=P*k*q-T*N*B,c[2]=P*N*B-T*k*q,c[3]=P*N*q+T*k*B;break;case"yzx":c[0]=T*N*q+P*k*B,c[1]=P*k*q+T*N*B,c[2]=P*N*B-T*k*q,c[3]=P*N*q-T*k*B;break;case"zxy":c[0]=T*N*q-P*k*B,c[1]=P*k*q+T*N*B,c[2]=P*N*B+T*k*q,c[3]=P*N*q-T*k*B;break;case"zyx":c[0]=T*N*q-P*k*B,c[1]=P*k*q+T*N*B,c[2]=P*N*B-T*k*q,c[3]=P*N*q+T*k*B;break;default:throw new Error("Unknown angle order "+v)}return c}function Qe(){var c=new ne(2);return ne!=Float32Array&&(c[0]=0,c[1]=0),c}function Ve(c,i){var l=new ne(2);return l[0]=c,l[1]=i,l}_e(),at=new ne(4),ne!=Float32Array&&(at[0]=0,at[1]=0,at[2]=0,at[3]=0),_e(),Oe(1,0,0),Oe(0,1,0),zt(),zt(),me(),Qe();const ht=8192;function qt(c,i,l){return i*(ht/(c.tileSize*Math.pow(2,l-c.tileID.overscaledZ)))}function Ae(c,i){return(c%i+i)%i}function qe(c,i,l){return c*(1-l)+i*l}function _t(c){if(c<=0)return 0;if(c>=1)return 1;const i=c*c,l=i*c;return 4*(c<.5?l:3*(c-i)+l-.75)}function Tt(c,i,l,f){const v=new j(c,i,l,f);return S=>v.solve(S)}const jt=Tt(.25,.1,.25,1);function Ht(c,i,l){return Math.min(l,Math.max(i,c))}function bt(c,i,l){const f=l-i,v=((c-i)%f+f)%f+i;return v===i?l:v}function nn(c,...i){for(const l of i)for(const f in l)c[f]=l[f];return c}let pt=1;function Rt(c,i,l){const f={};for(const v in c)f[v]=i.call(this,c[v],v,c);return f}function Ft(c,i,l){const f={};for(const v in c)i.call(this,c[v],v,c)&&(f[v]=c[v]);return f}function ot(c){return Array.isArray(c)?c.map(ot):typeof c=="object"&&c?Rt(c,ot):c}const rn={};function Wt(c){rn[c]||(typeof console<"u"&&console.warn(c),rn[c]=!0)}function Vn(c,i,l){return(l.y-c.y)*(i.x-c.x)>(i.y-c.y)*(l.x-c.x)}function Zn(c){return typeof WorkerGlobalScope<"u"&&c!==void 0&&c instanceof WorkerGlobalScope}let Wr=null;function Pa(c){if(Wr==null){const i=c.navigator?c.navigator.userAgent:null;Wr=!!c.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Wr}function Oi(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const qo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function fs(c,i,l,f,v){return s(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const S=new VideoFrame(c,{timestamp:0});try{const T=S?.format;if(!T||!T.startsWith("BGR")&&!T.startsWith("RGB"))throw new Error(`Unrecognized format ${T}`);const P=T.startsWith("BGR"),k=new Uint8ClampedArray(f*v*4);if(yield S.copyTo(k,(function(N,B,q,K,J){const re=4*Math.max(-B,0),se=(Math.max(0,q)-q)*K*4+re,ue=4*K,ge=Math.max(0,B),Ne=Math.max(0,q);return{rect:{x:ge,y:Ne,width:Math.min(N.width,B+K)-ge,height:Math.min(N.height,q+J)-Ne},layout:[{offset:se,stride:ue}]}})(c,i,l,f,v)),P)for(let N=0;N<k.length;N+=4){const B=k[N];k[N]=k[N+2],k[N+2]=B}return k}finally{S.close()}}))}let wo,ha;function Rr(c,i,l,f){return c.addEventListener(i,l,f),{unsubscribe:()=>{c.removeEventListener(i,l,f)}}}function ec(c){return c*Math.PI/180}function Ji(c){return c/Math.PI*180}const So={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Ii={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},ze="AbortError";function ie(){return new Error(ze)}const ae={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ce(c){return ae.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))]}const Se="global-dispatcher";class Me extends Error{constructor(i,l,f,v){super(`AJAXError: ${l} (${i}): ${f}`),this.status=i,this.statusText=l,this.url=f,this.body=v}}const Ie=()=>Zn(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,$e=function(c,i){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){const f=ce(c.url);if(f)return f(c,i);if(Zn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,targetMapId:Se},i)}if(!(/^file:/.test(l=c.url)||/^file:/.test(Ie())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(f,v){return s(this,void 0,void 0,(function*(){const S=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,cache:f.cache,referrer:Ie(),signal:v.signal});let T,P;f.type!=="json"||S.headers.has("Accept")||S.headers.set("Accept","application/json");try{T=yield fetch(S)}catch(N){throw new Me(0,N.message,f.url,new Blob)}if(!T.ok){const N=yield T.blob();throw new Me(T.status,T.statusText,f.url,N)}P=f.type==="arrayBuffer"||f.type==="image"?T.arrayBuffer():f.type==="json"?T.json():T.text();const k=yield P;if(v.signal.aborted)throw ie();return{data:k,cacheControl:T.headers.get("Cache-Control"),expires:T.headers.get("Expires")}}))})(c,i);if(Zn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,mustQueue:!0,targetMapId:Se},i)}var l;return(function(f,v){return new Promise(((S,T)=>{var P;const k=new XMLHttpRequest;k.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(k.responseType="arraybuffer");for(const N in f.headers)k.setRequestHeader(N,f.headers[N]);f.type==="json"&&(k.responseType="text",!((P=f.headers)===null||P===void 0)&&P.Accept||k.setRequestHeader("Accept","application/json")),k.withCredentials=f.credentials==="include",k.onerror=()=>{T(new Error(k.statusText))},k.onload=()=>{if(!v.signal.aborted)if((k.status>=200&&k.status<300||k.status===0)&&k.response!==null){let N=k.response;if(f.type==="json")try{N=JSON.parse(k.response)}catch(B){return void T(B)}S({data:N,cacheControl:k.getResponseHeader("Cache-Control"),expires:k.getResponseHeader("Expires")})}else{const N=new Blob([k.response],{type:k.getResponseHeader("Content-Type")});T(new Me(k.status,k.statusText,f.url,N))}},v.signal.addEventListener("abort",(()=>{k.abort(),T(ie())})),k.send(f.body)}))})(c,i)};function Be(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;const i=new URL(c),l=window.location;return i.protocol===l.protocol&&i.host===l.host}function Ue(c,i,l){l[c]&&l[c].indexOf(i)!==-1||(l[c]=l[c]||[],l[c].push(i))}function st(c,i,l){if(l&&l[c]){const f=l[c].indexOf(i);f!==-1&&l[c].splice(f,1)}}class Ge{constructor(i,l={}){nn(this,l),this.type=i}}class Mt extends Ge{constructor(i,l={}){super("error",nn({error:i},l))}}class Lt{on(i,l){return this._listeners=this._listeners||{},Ue(i,l,this._listeners),{unsubscribe:()=>{this.off(i,l)}}}off(i,l){return st(i,l,this._listeners),st(i,l,this._oneTimeListeners),this}once(i,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},Ue(i,l,this._oneTimeListeners),this):new Promise((f=>this.once(i,f)))}fire(i,l){typeof i=="string"&&(i=new Ge(i,l||{}));const f=i.type;if(this.listens(f)){i.target=this;const v=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const P of v)P.call(this,i);const S=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const P of S)st(f,P,this._oneTimeListeners),P.call(this,i);const T=this._eventedParent;T&&(nn(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),T.fire(i))}else i instanceof Mt&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,l){return this._eventedParent=i,this._eventedParentData=l,this}}var ke={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const wn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function On(c,i){const l={};for(const f in c)f!=="ref"&&(l[f]=c[f]);return wn.forEach((f=>{f in i&&(l[f]=i[f])})),l}function $t(c,i){if(Array.isArray(c)){if(!Array.isArray(i)||c.length!==i.length)return!1;for(let l=0;l<c.length;l++)if(!$t(c[l],i[l]))return!1;return!0}if(typeof c=="object"&&c!==null&&i!==null){if(typeof i!="object"||Object.keys(c).length!==Object.keys(i).length)return!1;for(const l in c)if(!$t(c[l],i[l]))return!1;return!0}return c===i}function Sn(c,i){c.push(i)}function xr(c,i,l){Sn(l,{command:"addSource",args:[c,i[c]]})}function jr(c,i,l){Sn(i,{command:"removeSource",args:[c]}),l[c]=!0}function ti(c,i,l,f){jr(c,l,f),xr(c,i,l)}function wi(c,i,l){let f;for(f in c[l])if(Object.prototype.hasOwnProperty.call(c[l],f)&&f!=="data"&&!$t(c[l][f],i[l][f]))return!1;for(f in i[l])if(Object.prototype.hasOwnProperty.call(i[l],f)&&f!=="data"&&!$t(c[l][f],i[l][f]))return!1;return!0}function ir(c,i,l,f,v,S){c=c||{},i=i||{};for(const T in c)Object.prototype.hasOwnProperty.call(c,T)&&($t(c[T],i[T])||l.push({command:S,args:[f,T,i[T],v]}));for(const T in i)Object.prototype.hasOwnProperty.call(i,T)&&!Object.prototype.hasOwnProperty.call(c,T)&&($t(c[T],i[T])||l.push({command:S,args:[f,T,i[T],v]}))}function ni(c){return c.id}function qn(c,i){return c[i.id]=i,c}class yt{constructor(i,l,f,v){this.message=(i?`${i}: `:"")+f,v&&(this.identifier=v),l!=null&&l.__line__&&(this.line=l.__line__)}}function To(c,...i){for(const l of i)for(const f in l)c[f]=l[f];return c}class da extends Error{constructor(i,l){super(l),this.message=l,this.key=i}}class ri{constructor(i,l=[]){this.parent=i,this.bindings={};for(const[f,v]of l)this.bindings[f]=v}concat(i){return new ri(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const Ln={kind:"null"},xt={kind:"number"},mn={kind:"string"},yn={kind:"boolean"},Da={kind:"color"},Go={kind:"projectionDefinition"},Mo={kind:"object"},pn={kind:"value"},al={kind:"collator"},Ho={kind:"formatted"},to={kind:"padding"},ps={kind:"colorArray"},fa={kind:"numberArray"},Ar={kind:"resolvedImage"},Br={kind:"variableAnchorOffsetCollection"};function pa(c,i){return{kind:"array",itemType:c,N:i}}function Xn(c){if(c.kind==="array"){const i=Xn(c.itemType);return typeof c.N=="number"?`array<${i}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${i}>`}return c.kind}const Zo=[Ln,xt,mn,yn,Da,Go,Ho,Mo,pa(pn),to,fa,ps,Ar,Br];function Gc(c,i){if(i.kind==="error")return null;if(c.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Gc(c.itemType,i.itemType))&&(typeof c.N!="number"||c.N===i.N))return null}else{if(c.kind===i.kind)return null;if(c.kind==="value"){for(const l of Zo)if(!Gc(l,i))return null}}return`Expected ${Xn(c)} but found ${Xn(i)} instead.`}function ud(c,i){return i.some((l=>l.kind===c.kind))}function ol(c,i){return i.some((l=>l==="null"?c===null:l==="array"?Array.isArray(c):l==="object"?c&&!Array.isArray(c)&&typeof c=="object":l===typeof c))}function ms(c,i){return c.kind==="array"&&i.kind==="array"?c.itemType.kind===i.itemType.kind&&typeof c.N=="number":c.kind===i.kind}const qu=.96422,Hc=.82521,Wo=4/29,zi=6/29,mf=3*zi*zi,Ig=zi*zi*zi,gf=Math.PI/180,Wp=180/Math.PI;function Gu(c){return(c%=360)<0&&(c+=360),c}function yf([c,i,l,f]){let v,S;const T=Hu((.2225045*(c=Si(c))+.7168786*(i=Si(i))+.0606169*(l=Si(l)))/1);c===i&&i===l?v=S=T:(v=Hu((.4360747*c+.3850649*i+.1430804*l)/qu),S=Hu((.0139322*c+.0971045*i+.7141733*l)/Hc));const P=116*T-16;return[P<0?0:P,500*(v-T),200*(T-S),f]}function Si(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function Hu(c){return c>Ig?Math.pow(c,1/3):c/mf+Wo}function vf([c,i,l,f]){let v=(c+16)/116,S=isNaN(i)?v:v+i/500,T=isNaN(l)?v:v-l/200;return v=1*sl(v),S=qu*sl(S),T=Hc*sl(T),[gs(3.1338561*S-1.6168667*v-.4906146*T),gs(-.9787684*S+1.9161415*v+.033454*T),gs(.0719453*S-.2289914*v+1.4052427*T),f]}function gs(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function sl(c){return c>zi?c*c*c:mf*(c-Wo)}const Yp=Object.hasOwn||function(c,i){return Object.prototype.hasOwnProperty.call(c,i)};function Zc(c,i){return Yp(c,i)?c[i]:void 0}function Yo(c){return parseInt(c.padEnd(2,c),16)/255}function _f(c,i){return Ui(i?c/100:c,0,1)}function Ui(c,i,l){return Math.min(Math.max(i,c),l)}function Dn(c){return!c.some(Number.isNaN)}const ll={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function ea(c,i,l){return c+l*(i-c)}function tc(c,i,l){return c.map(((f,v)=>ea(f,i[v],l)))}class xn{constructor(i,l,f,v=1,S=!0){this.r=i,this.g=l,this.b=f,this.a=v,S||(this.r*=v,this.g*=v,this.b*=v,v||this.overwriteGetter("rgb",[i,l,f,v]))}static parse(i){if(i instanceof xn)return i;if(typeof i!="string")return;const l=(function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const v=Zc(ll,f);if(v){const[T,P,k]=v;return[T/255,P/255,k/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const T=f.length<6?1:2;let P=1;return[Yo(f.slice(P,P+=T)),Yo(f.slice(P,P+=T)),Yo(f.slice(P,P+=T)),Yo(f.slice(P,P+T)||"ff")]}if(f.startsWith("rgb")){const T=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(T){const[P,k,N,B,q,K,J,re,se,ue,ge,Ne]=T,Te=[B||" ",J||" ",ue].join("");if(Te==="  "||Te==="  /"||Te===",,"||Te===",,,"){const Ee=[N,K,se].join(""),Ze=Ee==="%%%"?100:Ee===""?255:0;if(Ze){const et=[Ui(+k/Ze,0,1),Ui(+q/Ze,0,1),Ui(+re/Ze,0,1),ge?_f(+ge,Ne):1];if(Dn(et))return et}}return}}const S=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(S){const[T,P,k,N,B,q,K,J,re]=S,se=[k||" ",B||" ",K].join("");if(se==="  "||se==="  /"||se===",,"||se===",,,"){const ue=[+P,Ui(+N,0,100),Ui(+q,0,100),J?_f(+J,re):1];if(Dn(ue))return(function([ge,Ne,Te,Ee]){function Ze(et){const gt=(et+ge/30)%12,Ot=Ne*Math.min(Te,1-Te);return Te-Ot*Math.max(-1,Math.min(gt-3,9-gt,1))}return ge=Gu(ge),Ne/=100,Te/=100,[Ze(0),Ze(8),Ze(4),Ee]})(ue)}}})(i);return l?new xn(...l,!1):void 0}get rgb(){const{r:i,g:l,b:f,a:v}=this,S=v||1/0;return this.overwriteGetter("rgb",[i/S,l/S,f/S,v])}get hcl(){return this.overwriteGetter("hcl",(function(i){const[l,f,v,S]=yf(i),T=Math.sqrt(f*f+v*v);return[Math.round(1e4*T)?Gu(Math.atan2(v,f)*Wp):NaN,T,l,S]})(this.rgb))}get lab(){return this.overwriteGetter("lab",yf(this.rgb))}overwriteGetter(i,l){return Object.defineProperty(this,i,{value:l}),l}toString(){const[i,l,f,v]=this.rgb;return`rgba(${[i,l,f].map((S=>Math.round(255*S))).join(",")},${v})`}static interpolate(i,l,f,v="rgb"){switch(v){case"rgb":{const[S,T,P,k]=tc(i.rgb,l.rgb,f);return new xn(S,T,P,k,!1)}case"hcl":{const[S,T,P,k]=i.hcl,[N,B,q,K]=l.hcl;let J,re;if(isNaN(S)||isNaN(N))isNaN(S)?isNaN(N)?J=NaN:(J=N,P!==1&&P!==0||(re=B)):(J=S,q!==1&&q!==0||(re=T));else{let Te=N-S;N>S&&Te>180?Te-=360:N<S&&S-N>180&&(Te+=360),J=S+f*Te}const[se,ue,ge,Ne]=(function([Te,Ee,Ze,et]){return Te=isNaN(Te)?0:Te*gf,vf([Ze,Math.cos(Te)*Ee,Math.sin(Te)*Ee,et])})([J,re??ea(T,B,f),ea(P,q,f),ea(k,K,f)]);return new xn(se,ue,ge,Ne,!1)}case"lab":{const[S,T,P,k]=vf(tc(i.lab,l.lab,f));return new xn(S,T,P,k,!1)}}}}xn.black=new xn(0,0,0,1),xn.white=new xn(1,1,1,1),xn.transparent=new xn(0,0,0,0),xn.red=new xn(1,0,0,1);class ka{constructor(i,l,f){this.sensitivity=i?l?"variant":"case":l?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,l){return this.collator.compare(i,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const nc=["bottom","center","top"];class cl{constructor(i,l,f,v,S,T){this.text=i,this.image=l,this.scale=f,this.fontStack=v,this.textColor=S,this.verticalAlign=T}}class hi{constructor(i){this.sections=i}static fromString(i){return new hi([new cl(i,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((i=>i.text.length!==0||i.image&&i.image.name.length!==0))}static factory(i){return i instanceof hi?i:hi.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map((i=>i.text)).join("")}}class Fr{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Fr)return i;if(typeof i=="number")return new Fr([i,i,i,i]);if(Array.isArray(i)&&!(i.length<1||i.length>4)){for(const l of i)if(typeof l!="number")return;switch(i.length){case 1:i=[i[0],i[0],i[0],i[0]];break;case 2:i=[i[0],i[1],i[0],i[1]];break;case 3:i=[i[0],i[1],i[2],i[1]]}return new Fr(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,l,f){return new Fr(tc(i.values,l.values,f))}}class di{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof di)return i;if(typeof i=="number")return new di([i]);if(Array.isArray(i)){for(const l of i)if(typeof l!="number")return;return new di(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,l,f){return new di(tc(i.values,l.values,f))}}class fi{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof fi)return i;if(typeof i=="string"){const f=xn.parse(i);return f?new fi([f]):void 0}if(!Array.isArray(i))return;const l=[];for(const f of i){if(typeof f!="string")return;const v=xn.parse(f);if(!v)return;l.push(v)}return new fi(l)}toString(){return JSON.stringify(this.values)}static interpolate(i,l,f,v="rgb"){const S=[];if(i.values.length!=l.values.length)throw new Error(`colorArray: Arrays have mismatched length (${i.values.length} vs. ${l.values.length}), cannot interpolate.`);for(let T=0;T<i.values.length;T++)S.push(xn.interpolate(i.values[T],l.values[T],f,v));return new fi(S)}}class hr extends Error{constructor(i){super(i),this.name="RuntimeError"}toJSON(){return this.message}}const Xo=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Lr{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Lr)return i;if(Array.isArray(i)&&!(i.length<1)&&i.length%2==0){for(let l=0;l<i.length;l+=2){const f=i[l],v=i[l+1];if(typeof f!="string"||!Xo.has(f)||!Array.isArray(v)||v.length!==2||typeof v[0]!="number"||typeof v[1]!="number")return}return new Lr(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,l,f){const v=i.values,S=l.values;if(v.length!==S.length)throw new hr(`Cannot interpolate values of different length. from: ${i.toString()}, to: ${l.toString()}`);const T=[];for(let P=0;P<v.length;P+=2){if(v[P]!==S[P])throw new hr(`Cannot interpolate values containing mismatched anchors. from[${P}]: ${v[P]}, to[${P}]: ${S[P]}`);T.push(v[P]);const[k,N]=v[P+1],[B,q]=S[P+1];T.push([ea(k,B,f),ea(N,q,f)])}return new Lr(T)}}class ta{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new ta({name:i,available:!1}):null}}class Ti{constructor(i,l,f){this.from=i,this.to=l,this.transition=f}static interpolate(i,l,f){return new Ti(i,l,f)}static parse(i){return i instanceof Ti?i:Array.isArray(i)&&i.length===3&&typeof i[0]=="string"&&typeof i[1]=="string"&&typeof i[2]=="number"?new Ti(i[0],i[1],i[2]):typeof i=="object"&&typeof i.from=="string"&&typeof i.to=="string"&&typeof i.transition=="number"?new Ti(i.from,i.to,i.transition):typeof i=="string"?new Ti(i,i,1):void 0}}function no(c,i,l,f){return typeof c=="number"&&c>=0&&c<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof l=="number"&&l>=0&&l<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[c,i,l,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[c,i,l,f]:[c,i,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Kn(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Ti||c instanceof xn||c instanceof ka||c instanceof hi||c instanceof Fr||c instanceof di||c instanceof fi||c instanceof Lr||c instanceof ta)return!0;if(Array.isArray(c)){for(const i of c)if(!Kn(i))return!1;return!0}if(typeof c=="object"){for(const i in c)if(!Kn(c[i]))return!1;return!0}return!1}function yr(c){if(c===null)return Ln;if(typeof c=="string")return mn;if(typeof c=="boolean")return yn;if(typeof c=="number")return xt;if(c instanceof xn)return Da;if(c instanceof Ti)return Go;if(c instanceof ka)return al;if(c instanceof hi)return Ho;if(c instanceof Fr)return to;if(c instanceof di)return fa;if(c instanceof fi)return ps;if(c instanceof Lr)return Br;if(c instanceof ta)return Ar;if(Array.isArray(c)){const i=c.length;let l;for(const f of c){const v=yr(f);if(l){if(l===v)continue;l=pn;break}l=v}return pa(l||pn,i)}return Mo}function Mn(c){const i=typeof c;return c===null?"":i==="string"||i==="number"||i==="boolean"?String(c):c instanceof xn||c instanceof Ti||c instanceof hi||c instanceof Fr||c instanceof di||c instanceof fi||c instanceof Lr||c instanceof ta?c.toString():JSON.stringify(c)}class on{constructor(i,l){this.type=i,this.value=l}static parse(i,l){if(i.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!Kn(i[1]))return l.error("invalid value");const f=i[1];let v=yr(f);const S=l.expectedType;return v.kind!=="array"||v.N!==0||!S||S.kind!=="array"||typeof S.N=="number"&&S.N!==0||(v=S),new on(v,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const ys={string:mn,number:xt,boolean:yn,object:Mo};class vn{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");let f,v=1;const S=i[0];if(S==="array"){let P,k;if(i.length>2){const N=i[1];if(typeof N!="string"||!(N in ys)||N==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);P=ys[N],v++}else P=pn;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return l.error('The length argument to "array" must be a positive integer literal',2);k=i[2],v++}f=pa(P,k)}else{if(!ys[S])throw new Error(`Types doesn't contain name = ${S}`);f=ys[S]}const T=[];for(;v<i.length;v++){const P=l.parse(i[v],v,pn);if(!P)return null;T.push(P)}return new vn(f,T)}evaluate(i){for(let l=0;l<this.args.length;l++){const f=this.args[l].evaluate(i);if(!Gc(this.type,yr(f)))return f;if(l===this.args.length-1)throw new hr(`Expected value to be of type ${Xn(this.type)}, but found ${Xn(yr(f))} instead.`)}throw new Error}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every((i=>i.outputDefined()))}}const Ri={"to-boolean":yn,"to-color":Da,"to-number":xt,"to-string":mn};class Ur{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const f=i[0];if(!Ri[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&i.length!==2)return l.error("Expected one argument.");const v=Ri[f],S=[];for(let T=1;T<i.length;T++){const P=l.parse(i[T],T,pn);if(!P)return null;S.push(P)}return new Ur(v,S)}evaluate(i){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(i);case"color":{let l,f;for(const v of this.args){if(l=v.evaluate(i),f=null,l instanceof xn)return l;if(typeof l=="string"){const S=i.parseColor(l);if(S)return S}else if(Array.isArray(l)&&(f=l.length<3||l.length>4?`Invalid rgba value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:no(l[0],l[1],l[2],l[3]),!f))return new xn(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new hr(f||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const f of this.args){l=f.evaluate(i);const v=Fr.parse(l);if(v)return v}throw new hr(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"numberArray":{let l;for(const f of this.args){l=f.evaluate(i);const v=di.parse(l);if(v)return v}throw new hr(`Could not parse numberArray from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"colorArray":{let l;for(const f of this.args){l=f.evaluate(i);const v=fi.parse(l);if(v)return v}throw new hr(`Could not parse colorArray from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const f of this.args){l=f.evaluate(i);const v=Lr.parse(l);if(v)return v}throw new hr(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const f of this.args){if(l=f.evaluate(i),l===null)return 0;const v=Number(l);if(!isNaN(v))return v}throw new hr(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return hi.fromString(Mn(this.args[0].evaluate(i)));case"resolvedImage":return ta.fromString(Mn(this.args[0].evaluate(i)));case"projectionDefinition":return this.args[0].evaluate(i);default:return Mn(this.args[0].evaluate(i))}}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every((i=>i.outputDefined()))}}const Wc=["Unknown","Point","LineString","Polygon"];class vs{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Wc[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let l=this._parseColorCache.get(i);return l||(l=xn.parse(i),this._parseColorCache.set(i,l)),l}}class Zu{constructor(i,l,f=[],v,S=new ri,T=[]){this.registry=i,this.path=f,this.key=f.map((P=>`[${P}]`)).join(""),this.scope=S,this.errors=T,this.expectedType=v,this._isConstant=l}parse(i,l,f,v,S={}){return l?this.concat(l,f,v)._parse(i,S):this._parse(i,S)}_parse(i,l){function f(v,S,T){return T==="assert"?new vn(S,[v]):T==="coerce"?new Ur(S,[v]):v}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const v=i[0];if(typeof v!="string")return this.error(`Expression name must be a string, but found ${typeof v} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const S=this.registry[v];if(S){let T=S.parse(i,this);if(!T)return null;if(this.expectedType){const P=this.expectedType,k=T.type;if(P.kind!=="string"&&P.kind!=="number"&&P.kind!=="boolean"&&P.kind!=="object"&&P.kind!=="array"||k.kind!=="value"){if(P.kind==="projectionDefinition"&&["string","array"].includes(k.kind)||["color","formatted","resolvedImage"].includes(P.kind)&&["value","string"].includes(k.kind)||["padding","numberArray"].includes(P.kind)&&["value","number","array"].includes(k.kind)||P.kind==="colorArray"&&["value","string","array"].includes(k.kind)||P.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(k.kind))T=f(T,P,l.typeAnnotation||"coerce");else if(this.checkSubtype(P,k))return null}else T=f(T,P,l.typeAnnotation||"assert")}if(!(T instanceof on)&&T.type.kind!=="resolvedImage"&&this._isConstant(T)){const P=new vs;try{T=new on(T.type,T.evaluate(P))}catch(k){return this.error(k.message),null}}return T}return this.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,l,f){const v=typeof i=="number"?this.path.concat(i):this.path,S=f?this.scope.concat(f):this.scope;return new Zu(this.registry,this._isConstant,v,l||null,S,this.errors)}error(i,...l){const f=`${this.key}${l.map((v=>`[${v}]`)).join("")}`;this.errors.push(new da(f,i))}checkSubtype(i,l){const f=Gc(i,l);return f&&this.error(f),f}}class ul{constructor(i,l){this.type=l.type,this.bindings=[].concat(i),this.result=l}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const l of this.bindings)i(l[1]);i(this.result)}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const f=[];for(let S=1;S<i.length-1;S+=2){const T=i[S];if(typeof T!="string")return l.error(`Expected string, but found ${typeof T} instead.`,S);if(/[^a-zA-Z0-9_]/.test(T))return l.error("Variable names must contain only alphanumeric characters or '_'.",S);const P=l.parse(i[S+1],S+1);if(!P)return null;f.push([T,P])}const v=l.parse(i[i.length-1],i.length-1,l.expectedType,f);return v?new ul(f,v):null}outputDefined(){return this.result.outputDefined()}}class rc{constructor(i,l){this.type=l.type,this.name=i,this.boundExpression=l}static parse(i,l){if(i.length!==2||typeof i[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const f=i[1];return l.scope.has(f)?new rc(f,l.scope.get(f)):l.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}}class ic{constructor(i,l,f){this.type=i,this.index=l,this.input=f}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const f=l.parse(i[1],1,xt),v=l.parse(i[2],2,pa(l.expectedType||pn));return f&&v?new ic(v.type.itemType,f,v):null}evaluate(i){const l=this.index.evaluate(i),f=this.input.evaluate(i);if(l<0)throw new hr(`Array index out of bounds: ${l} < 0.`);if(l>=f.length)throw new hr(`Array index out of bounds: ${l} > ${f.length-1}.`);if(l!==Math.floor(l))throw new hr(`Array index must be an integer, but found ${l} instead.`);return f[l]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}}class ac{constructor(i,l){this.type=yn,this.needle=i,this.haystack=l}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const f=l.parse(i[1],1,pn),v=l.parse(i[2],2,pn);return f&&v?ud(f.type,[yn,mn,xt,Ln,pn])?new ac(f,v):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Xn(f.type)} instead`):null}evaluate(i){const l=this.needle.evaluate(i),f=this.haystack.evaluate(i);if(!f)return!1;if(!ol(l,["boolean","string","number","null"]))throw new hr(`Expected first argument to be of type boolean, string, number or null, but found ${Xn(yr(l))} instead.`);if(!ol(f,["string","array"]))throw new hr(`Expected second argument to be of type array or string, but found ${Xn(yr(f))} instead.`);return f.indexOf(l)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}}class Yc{constructor(i,l,f){this.type=xt,this.needle=i,this.haystack=l,this.fromIndex=f}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 2 or 3 arguments, but found ${i.length-1} instead.`);const f=l.parse(i[1],1,pn),v=l.parse(i[2],2,pn);if(!f||!v)return null;if(!ud(f.type,[yn,mn,xt,Ln,pn]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Xn(f.type)} instead`);if(i.length===4){const S=l.parse(i[3],3,xt);return S?new Yc(f,v,S):null}return new Yc(f,v)}evaluate(i){const l=this.needle.evaluate(i),f=this.haystack.evaluate(i);if(!ol(l,["boolean","string","number","null"]))throw new hr(`Expected first argument to be of type boolean, string, number or null, but found ${Xn(yr(l))} instead.`);let v;if(this.fromIndex&&(v=this.fromIndex.evaluate(i)),ol(f,["string"])){const S=f.indexOf(l,v);return S===-1?-1:[...f.slice(0,S)].length}if(ol(f,["array"]))return f.indexOf(l,v);throw new hr(`Expected second argument to be of type array or string, but found ${Xn(yr(f))} instead.`)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}}class Ko{constructor(i,l,f,v,S,T){this.inputType=i,this.type=l,this.input=f,this.cases=v,this.outputs=S,this.otherwise=T}static parse(i,l){if(i.length<5)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return l.error("Expected an even number of arguments.");let f,v;l.expectedType&&l.expectedType.kind!=="value"&&(v=l.expectedType);const S={},T=[];for(let N=2;N<i.length-1;N+=2){let B=i[N];const q=i[N+1];Array.isArray(B)||(B=[B]);const K=l.concat(N);if(B.length===0)return K.error("Expected at least one branch label.");for(const re of B){if(typeof re!="number"&&typeof re!="string")return K.error("Branch labels must be numbers or strings.");if(typeof re=="number"&&Math.abs(re)>Number.MAX_SAFE_INTEGER)return K.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof re=="number"&&Math.floor(re)!==re)return K.error("Numeric branch labels must be integer values.");if(f){if(K.checkSubtype(f,yr(re)))return null}else f=yr(re);if(S[String(re)]!==void 0)return K.error("Branch labels must be unique.");S[String(re)]=T.length}const J=l.parse(q,N,v);if(!J)return null;v=v||J.type,T.push(J)}const P=l.parse(i[1],1,pn);if(!P)return null;const k=l.parse(i[i.length-1],i.length-1,v);return k?P.type.kind!=="value"&&l.concat(1).checkSubtype(f,P.type)?null:new Ko(f,v,P,S,T,k):null}evaluate(i){const l=this.input.evaluate(i);return(yr(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every((i=>i.outputDefined()))&&this.otherwise.outputDefined()}}class Mi{constructor(i,l,f){this.type=i,this.branches=l,this.otherwise=f}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return l.error("Expected an odd number of arguments.");let f;l.expectedType&&l.expectedType.kind!=="value"&&(f=l.expectedType);const v=[];for(let T=1;T<i.length-1;T+=2){const P=l.parse(i[T],T,yn);if(!P)return null;const k=l.parse(i[T+1],T+1,f);if(!k)return null;v.push([P,k]),f=f||k.type}const S=l.parse(i[i.length-1],i.length-1,f);if(!S)return null;if(!f)throw new Error("Can't infer output type");return new Mi(f,v,S)}evaluate(i){for(const[l,f]of this.branches)if(l.evaluate(i))return f.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[l,f]of this.branches)i(l),i(f);i(this.otherwise)}outputDefined(){return this.branches.every((([i,l])=>l.outputDefined()))&&this.otherwise.outputDefined()}}class oc{constructor(i,l,f,v){this.type=i,this.input=l,this.beginIndex=f,this.endIndex=v}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 2 or 3 arguments, but found ${i.length-1} instead.`);const f=l.parse(i[1],1,pn),v=l.parse(i[2],2,xt);if(!f||!v)return null;if(!ud(f.type,[pa(pn),mn,pn]))return l.error(`Expected first argument to be of type array or string, but found ${Xn(f.type)} instead`);if(i.length===4){const S=l.parse(i[3],3,xt);return S?new oc(f.type,f,v,S):null}return new oc(f.type,f,v)}evaluate(i){const l=this.input.evaluate(i),f=this.beginIndex.evaluate(i);let v;if(this.endIndex&&(v=this.endIndex.evaluate(i)),ol(l,["string"]))return[...l].slice(f,v).join("");if(ol(l,["array"]))return l.slice(f,v);throw new hr(`Expected first argument to be of type array or string, but found ${Xn(yr(l))} instead.`)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}}function sc(c,i){const l=c.length-1;let f,v,S=0,T=l,P=0;for(;S<=T;)if(P=Math.floor((S+T)/2),f=c[P],v=c[P+1],f<=i){if(P===l||i<v)return P;S=P+1}else{if(!(f>i))throw new hr("Input is not a number.");T=P-1}return 0}class hl{constructor(i,l,f){this.type=i,this.input=l,this.labels=[],this.outputs=[];for(const[v,S]of f)this.labels.push(v),this.outputs.push(S)}static parse(i,l){if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");const f=l.parse(i[1],1,xt);if(!f)return null;const v=[];let S=null;l.expectedType&&l.expectedType.kind!=="value"&&(S=l.expectedType);for(let T=1;T<i.length;T+=2){const P=T===1?-1/0:i[T],k=i[T+1],N=T,B=T+1;if(typeof P!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',N);if(v.length&&v[v.length-1][0]>=P)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',N);const q=l.parse(k,B,S);if(!q)return null;S=S||q.type,v.push([P,q])}return new hl(S,f,v)}evaluate(i){const l=this.labels,f=this.outputs;if(l.length===1)return f[0].evaluate(i);const v=this.input.evaluate(i);if(v<=l[0])return f[0].evaluate(i);const S=l.length;return v>=l[S-1]?f[S-1].evaluate(i):f[sc(l,v)].evaluate(i)}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every((i=>i.outputDefined()))}}function Ci(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var hd,dd,Xp=(function(){if(dd)return hd;function c(i,l,f,v){this.cx=3*i,this.bx=3*(f-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(v-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=l,this.p2x=f,this.p2y=v}return dd=1,hd=c,c.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,l){if(l===void 0&&(l=1e-6),i<0)return 0;if(i>1)return 1;for(var f=i,v=0;v<8;v++){var S=this.sampleCurveX(f)-i;if(Math.abs(S)<l)return f;var T=this.sampleCurveDerivativeX(f);if(Math.abs(T)<1e-6)break;f-=S/T}var P=0,k=1;for(f=i,v=0;v<20&&(S=this.sampleCurveX(f),!(Math.abs(S-i)<l));v++)i>S?P=f:k=f,f=.5*(k-P)+P;return f},solve:function(i,l){return this.sampleCurveY(this.solveCurveX(i,l))}},hd})(),Kp=Ci(Xp);class pi{constructor(i,l,f,v,S){this.type=i,this.operator=l,this.interpolation=f,this.input=v,this.labels=[],this.outputs=[];for(const[T,P]of S)this.labels.push(T),this.outputs.push(P)}static interpolationFactor(i,l,f,v){let S=0;if(i.name==="exponential")S=Xc(l,i.base,f,v);else if(i.name==="linear")S=Xc(l,1,f,v);else if(i.name==="cubic-bezier"){const T=i.controlPoints;S=new Kp(T[0],T[1],T[2],T[3]).solve(Xc(l,1,f,v))}return S}static parse(i,l){let[f,v,S,...T]=i;if(!Array.isArray(v)||v.length===0)return l.error("Expected an interpolation type expression.",1);if(v[0]==="linear")v={name:"linear"};else if(v[0]==="exponential"){const N=v[1];if(typeof N!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:N}}else{if(v[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(v[0])}`,1,0);{const N=v.slice(1);if(N.length!==4||N.some((B=>typeof B!="number"||B<0||B>1)))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:N}}}if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(S=l.parse(S,2,xt),!S)return null;const P=[];let k=null;f!=="interpolate-hcl"&&f!=="interpolate-lab"||l.expectedType==ps?l.expectedType&&l.expectedType.kind!=="value"&&(k=l.expectedType):k=Da;for(let N=0;N<T.length;N+=2){const B=T[N],q=T[N+1],K=N+3,J=N+4;if(typeof B!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',K);if(P.length&&P[P.length-1][0]>=B)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',K);const re=l.parse(q,J,k);if(!re)return null;k=k||re.type,P.push([B,re])}return ms(k,xt)||ms(k,Go)||ms(k,Da)||ms(k,to)||ms(k,fa)||ms(k,ps)||ms(k,Br)||ms(k,pa(xt))?new pi(k,f,v,S,P):l.error(`Type ${Xn(k)} is not interpolatable.`)}evaluate(i){const l=this.labels,f=this.outputs;if(l.length===1)return f[0].evaluate(i);const v=this.input.evaluate(i);if(v<=l[0])return f[0].evaluate(i);const S=l.length;if(v>=l[S-1])return f[S-1].evaluate(i);const T=sc(l,v),P=pi.interpolationFactor(this.interpolation,v,l[T],l[T+1]),k=f[T].evaluate(i),N=f[T+1].evaluate(i);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return ea(k,N,P);case"color":return xn.interpolate(k,N,P);case"padding":return Fr.interpolate(k,N,P);case"colorArray":return fi.interpolate(k,N,P);case"numberArray":return di.interpolate(k,N,P);case"variableAnchorOffsetCollection":return Lr.interpolate(k,N,P);case"array":return tc(k,N,P);case"projectionDefinition":return Ti.interpolate(k,N,P)}case"interpolate-hcl":switch(this.type.kind){case"color":return xn.interpolate(k,N,P,"hcl");case"colorArray":return fi.interpolate(k,N,P,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return xn.interpolate(k,N,P,"lab");case"colorArray":return fi.interpolate(k,N,P,"lab")}}}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every((i=>i.outputDefined()))}}function Xc(c,i,l,f){const v=f-l,S=c-l;return v===0?0:i===1?S/v:(Math.pow(i,S)-1)/(Math.pow(i,v)-1)}const ro={color:xn.interpolate,number:ea,padding:Fr.interpolate,numberArray:di.interpolate,colorArray:fi.interpolate,variableAnchorOffsetCollection:Lr.interpolate,array:tc};class fd{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");let f=null;const v=l.expectedType;v&&v.kind!=="value"&&(f=v);const S=[];for(const P of i.slice(1)){const k=l.parse(P,1+S.length,f,void 0,{typeAnnotation:"omit"});if(!k)return null;f=f||k.type,S.push(k)}if(!f)throw new Error("No output type");const T=v&&S.some((P=>Gc(v,P.type)));return new fd(T?pn:f,S)}evaluate(i){let l,f=null,v=0;for(const S of this.args)if(v++,f=S.evaluate(i),f&&f instanceof ta&&!f.available&&(l||(l=f.name),f=null,v===this.args.length&&(f=l)),f!==null)break;return f}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every((i=>i.outputDefined()))}}function Wu(c,i){return c==="=="||c==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Yu(c,i,l,f){return f.compare(i,l)===0}function _s(c,i,l){const f=c!=="=="&&c!=="!=";return class VP{constructor(S,T,P){this.type=yn,this.lhs=S,this.rhs=T,this.collator=P,this.hasUntypedArgument=S.type.kind==="value"||T.type.kind==="value"}static parse(S,T){if(S.length!==3&&S.length!==4)return T.error("Expected two or three arguments.");const P=S[0];let k=T.parse(S[1],1,pn);if(!k)return null;if(!Wu(P,k.type))return T.concat(1).error(`"${P}" comparisons are not supported for type '${Xn(k.type)}'.`);let N=T.parse(S[2],2,pn);if(!N)return null;if(!Wu(P,N.type))return T.concat(2).error(`"${P}" comparisons are not supported for type '${Xn(N.type)}'.`);if(k.type.kind!==N.type.kind&&k.type.kind!=="value"&&N.type.kind!=="value")return T.error(`Cannot compare types '${Xn(k.type)}' and '${Xn(N.type)}'.`);f&&(k.type.kind==="value"&&N.type.kind!=="value"?k=new vn(N.type,[k]):k.type.kind!=="value"&&N.type.kind==="value"&&(N=new vn(k.type,[N])));let B=null;if(S.length===4){if(k.type.kind!=="string"&&N.type.kind!=="string"&&k.type.kind!=="value"&&N.type.kind!=="value")return T.error("Cannot use collator to compare non-string types.");if(B=T.parse(S[3],3,al),!B)return null}return new VP(k,N,B)}evaluate(S){const T=this.lhs.evaluate(S),P=this.rhs.evaluate(S);if(f&&this.hasUntypedArgument){const k=yr(T),N=yr(P);if(k.kind!==N.kind||k.kind!=="string"&&k.kind!=="number")throw new hr(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${k.kind}, ${N.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const k=yr(T),N=yr(P);if(k.kind!=="string"||N.kind!=="string")return i(S,T,P)}return this.collator?l(S,T,P,this.collator.evaluate(S)):i(S,T,P)}eachChild(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)}outputDefined(){return!0}}}const Co=_s("==",(function(c,i,l){return i===l}),Yu),bf=_s("!=",(function(c,i,l){return i!==l}),(function(c,i,l,f){return!Yu(0,i,l,f)})),pd=_s("<",(function(c,i,l){return i<l}),(function(c,i,l,f){return f.compare(i,l)<0})),zg=_s(">",(function(c,i,l){return i>l}),(function(c,i,l,f){return f.compare(i,l)>0})),xf=_s("<=",(function(c,i,l){return i<=l}),(function(c,i,l,f){return f.compare(i,l)<=0})),Rg=_s(">=",(function(c,i,l){return i>=l}),(function(c,i,l,f){return f.compare(i,l)>=0}));class md{constructor(i,l,f){this.type=al,this.locale=f,this.caseSensitive=i,this.diacriticSensitive=l}static parse(i,l){if(i.length!==2)return l.error("Expected one argument.");const f=i[1];if(typeof f!="object"||Array.isArray(f))return l.error("Collator options argument must be an object.");const v=l.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,yn);if(!v)return null;const S=l.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,yn);if(!S)return null;let T=null;return f.locale&&(T=l.parse(f.locale,1,mn),!T)?null:new md(v,S,T)}evaluate(i){return new ka(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}}class wf{constructor(i,l,f,v,S){this.type=mn,this.number=i,this.locale=l,this.currency=f,this.minFractionDigits=v,this.maxFractionDigits=S}static parse(i,l){if(i.length!==3)return l.error("Expected two arguments.");const f=l.parse(i[1],1,xt);if(!f)return null;const v=i[2];if(typeof v!="object"||Array.isArray(v))return l.error("NumberFormat options argument must be an object.");let S=null;if(v.locale&&(S=l.parse(v.locale,1,mn),!S))return null;let T=null;if(v.currency&&(T=l.parse(v.currency,1,mn),!T))return null;let P=null;if(v["min-fraction-digits"]&&(P=l.parse(v["min-fraction-digits"],1,xt),!P))return null;let k=null;return v["max-fraction-digits"]&&(k=l.parse(v["max-fraction-digits"],1,xt),!k)?null:new wf(f,S,T,P,k)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}}class gd{constructor(i){this.type=Ho,this.sections=i}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const f=i[1];if(!Array.isArray(f)&&typeof f=="object")return l.error("First argument must be an image or text section.");const v=[];let S=!1;for(let T=1;T<=i.length-1;++T){const P=i[T];if(S&&typeof P=="object"&&!Array.isArray(P)){S=!1;let k=null;if(P["font-scale"]&&(k=l.parse(P["font-scale"],1,xt),!k))return null;let N=null;if(P["text-font"]&&(N=l.parse(P["text-font"],1,pa(mn)),!N))return null;let B=null;if(P["text-color"]&&(B=l.parse(P["text-color"],1,Da),!B))return null;let q=null;if(P["vertical-align"]){if(typeof P["vertical-align"]=="string"&&!nc.includes(P["vertical-align"]))return l.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${P["vertical-align"]}' instead.`);if(q=l.parse(P["vertical-align"],1,mn),!q)return null}const K=v[v.length-1];K.scale=k,K.font=N,K.textColor=B,K.verticalAlign=q}else{const k=l.parse(i[T],1,pn);if(!k)return null;const N=k.type.kind;if(N!=="string"&&N!=="value"&&N!=="null"&&N!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,v.push({content:k,scale:null,font:null,textColor:null,verticalAlign:null})}}return new gd(v)}evaluate(i){return new hi(this.sections.map((l=>{const f=l.content.evaluate(i);return yr(f)===Ar?new cl("",f,null,null,null,l.verticalAlign?l.verticalAlign.evaluate(i):null):new cl(Mn(f),null,l.scale?l.scale.evaluate(i):null,l.font?l.font.evaluate(i).join(","):null,l.textColor?l.textColor.evaluate(i):null,l.verticalAlign?l.verticalAlign.evaluate(i):null)})))}eachChild(i){for(const l of this.sections)i(l.content),l.scale&&i(l.scale),l.font&&i(l.font),l.textColor&&i(l.textColor),l.verticalAlign&&i(l.verticalAlign)}outputDefined(){return!1}}class Kc{constructor(i){this.type=Ar,this.input=i}static parse(i,l){if(i.length!==2)return l.error("Expected two arguments.");const f=l.parse(i[1],1,mn);return f?new Kc(f):l.error("No image name provided.")}evaluate(i){const l=this.input.evaluate(i),f=ta.fromString(l);return f&&i.availableImages&&(f.available=i.availableImages.indexOf(l)>-1),f}eachChild(i){i(this.input)}outputDefined(){return!1}}class Sf{constructor(i){this.type=xt,this.input=i}static parse(i,l){if(i.length!==2)return l.error(`Expected 1 argument, but found ${i.length-1} instead.`);const f=l.parse(i[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${Xn(f.type)} instead.`):new Sf(f):null}evaluate(i){const l=this.input.evaluate(i);if(typeof l=="string")return[...l].length;if(Array.isArray(l))return l.length;throw new hr(`Expected value to be of type string or array, but found ${Xn(yr(l))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}}const Oa=8192;function Qc(c,i){const l=(180+c[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,v=Math.pow(2,i.z);return[Math.round(l*v*Oa),Math.round(f*v*Oa)]}function Tf(c,i){const l=Math.pow(2,i.z);return[(v=(c[0]/Oa+i.x)/l,360*v-180),(f=(c[1]/Oa+i.y)/l,360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90)];var f,v}function lc(c,i){c[0]=Math.min(c[0],i[0]),c[1]=Math.min(c[1],i[1]),c[2]=Math.max(c[2],i[0]),c[3]=Math.max(c[3],i[1])}function Jc(c,i){return!(c[0]<=i[0]||c[2]>=i[2]||c[1]<=i[1]||c[3]>=i[3])}function Qp(c,i,l){const f=c[0]-i[0],v=c[1]-i[1],S=c[0]-l[0],T=c[1]-l[1];return f*T-S*v==0&&f*S<=0&&v*T<=0}function Xu(c,i,l,f){return(v=[f[0]-l[0],f[1]-l[1]])[0]*(S=[i[0]-c[0],i[1]-c[1]])[1]-v[1]*S[0]!=0&&!(!Cf(c,i,l,f)||!Cf(l,f,c,i));var v,S}function Jp(c,i,l){for(const f of l)for(let v=0;v<f.length-1;++v)if(Xu(c,i,f[v],f[v+1]))return!0;return!1}function Eo(c,i,l=!1){let f=!1;for(const P of i)for(let k=0;k<P.length-1;k++){if(Qp(c,P[k],P[k+1]))return l;(S=P[k])[1]>(v=c)[1]!=(T=P[k+1])[1]>v[1]&&v[0]<(T[0]-S[0])*(v[1]-S[1])/(T[1]-S[1])+S[0]&&(f=!f)}var v,S,T;return f}function em(c,i){for(const l of i)if(Eo(c,l))return!0;return!1}function Mf(c,i){for(const l of c)if(!Eo(l,i))return!1;for(let l=0;l<c.length-1;++l)if(Jp(c[l],c[l+1],i))return!1;return!0}function tm(c,i){for(const l of i)if(Mf(c,l))return!0;return!1}function Cf(c,i,l,f){const v=f[0]-l[0],S=f[1]-l[1],T=(c[0]-l[0])*S-v*(c[1]-l[1]),P=(i[0]-l[0])*S-v*(i[1]-l[1]);return T>0&&P<0||T<0&&P>0}function yd(c,i,l){const f=[];for(let v=0;v<c.length;v++){const S=[];for(let T=0;T<c[v].length;T++){const P=Qc(c[v][T],l);lc(i,P),S.push(P)}f.push(S)}return f}function eu(c,i,l){const f=[];for(let v=0;v<c.length;v++){const S=yd(c[v],i,l);f.push(S)}return f}function tu(c,i,l,f){if(c[0]<l[0]||c[0]>l[2]){const v=.5*f;let S=c[0]-l[0]>v?-f:l[0]-c[0]>v?f:0;S===0&&(S=c[0]-l[2]>v?-f:l[2]-c[0]>v?f:0),c[0]+=S}lc(i,c)}function Ku(c,i,l,f){const v=Math.pow(2,f.z)*Oa,S=[f.x*Oa,f.y*Oa],T=[];for(const P of c)for(const k of P){const N=[k.x+S[0],k.y+S[1]];tu(N,i,l,v),T.push(N)}return T}function Qu(c,i,l,f){const v=Math.pow(2,f.z)*Oa,S=[f.x*Oa,f.y*Oa],T=[];for(const k of c){const N=[];for(const B of k){const q=[B.x+S[0],B.y+S[1]];lc(i,q),N.push(q)}T.push(N)}if(i[2]-i[0]<=v/2){(P=i)[0]=P[1]=1/0,P[2]=P[3]=-1/0;for(const k of T)for(const N of k)tu(N,i,l,v)}var P;return T}class dl{constructor(i,l){this.type=yn,this.geojson=i,this.geometries=l}static parse(i,l){if(i.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(Kn(i[1])){const f=i[1];if(f.type==="FeatureCollection"){const v=[];for(const S of f.features){const{type:T,coordinates:P}=S.geometry;T==="Polygon"&&v.push(P),T==="MultiPolygon"&&v.push(...P)}if(v.length)return new dl(f,{type:"MultiPolygon",coordinates:v})}else if(f.type==="Feature"){const v=f.geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new dl(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new dl(f,f)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return(function(l,f){const v=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],T=l.canonicalID();if(f.type==="Polygon"){const P=yd(f.coordinates,S,T),k=Ku(l.geometry(),v,S,T);if(!Jc(v,S))return!1;for(const N of k)if(!Eo(N,P))return!1}if(f.type==="MultiPolygon"){const P=eu(f.coordinates,S,T),k=Ku(l.geometry(),v,S,T);if(!Jc(v,S))return!1;for(const N of k)if(!em(N,P))return!1}return!0})(i,this.geometries);if(i.geometryType()==="LineString")return(function(l,f){const v=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],T=l.canonicalID();if(f.type==="Polygon"){const P=yd(f.coordinates,S,T),k=Qu(l.geometry(),v,S,T);if(!Jc(v,S))return!1;for(const N of k)if(!Mf(N,P))return!1}if(f.type==="MultiPolygon"){const P=eu(f.coordinates,S,T),k=Qu(l.geometry(),v,S,T);if(!Jc(v,S))return!1;for(const N of k)if(!tm(N,P))return!1}return!0})(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Ef=class{constructor(c=[],i=(l,f)=>l<f?-1:l>f?1:0){if(this.data=c,this.length=this.data.length,this.compare=i,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(this.length===0)return;const c=this.data[0],i=this.data.pop();return--this.length>0&&(this.data[0]=i,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:i,compare:l}=this,f=i[c];for(;c>0;){const v=c-1>>1,S=i[v];if(l(f,S)>=0)break;i[c]=S,c=v}i[c]=f}_down(c){const{data:i,compare:l}=this,f=this.length>>1,v=i[c];for(;c<f;){let S=1+(c<<1);const T=S+1;if(T<this.length&&l(i[T],i[S])<0&&(S=T),l(i[S],v)>=0)break;i[c]=i[S],c=S}i[c]=v}};function vd(c,i,l=0,f=c.length-1,v=Af){for(;f>l;){if(f-l>600){const k=f-l+1,N=i-l+1,B=Math.log(k),q=.5*Math.exp(2*B/3),K=.5*Math.sqrt(B*q*(k-q)/k)*(N-k/2<0?-1:1);vd(c,i,Math.max(l,Math.floor(i-N*q/k+K)),Math.min(f,Math.floor(i+(k-N)*q/k+K)),v)}const S=c[i];let T=l,P=f;for(bs(c,l,i),v(c[f],S)>0&&bs(c,l,f);T<P;){for(bs(c,T,P),T++,P--;v(c[T],S)<0;)T++;for(;v(c[P],S)>0;)P--}v(c[l],S)===0?bs(c,l,P):(P++,bs(c,P,f)),P<=i&&(l=P+1),i<=P&&(f=P-1)}}function bs(c,i,l){const f=c[i];c[i]=c[l],c[l]=f}function Af(c,i){return c<i?-1:c>i?1:0}function Ju(c,i){if(c.length<=1)return[c];const l=[];let f,v;for(const S of c){const T=rm(S);T!==0&&(S.area=Math.abs(T),v===void 0&&(v=T<0),v===T<0?(f&&l.push(f),f=[S]):f.push(S))}if(f&&l.push(f),i>1)for(let S=0;S<l.length;S++)l[S].length<=i||(vd(l[S],i,1,l[S].length-1,nm),l[S]=l[S].slice(0,i));return l}function nm(c,i){return i.area-c.area}function rm(c){let i=0;for(let l,f,v=0,S=c.length,T=S-1;v<S;T=v++)l=c[v],f=c[T],i+=(f.x-l.x)*(l.y+f.y);return i}const Pf=1/298.257223563,im=Pf*(2-Pf),am=Math.PI/180;class Df{constructor(i){const l=6378.137*am*1e3,f=Math.cos(i*am),v=1/(1-im*(1-f*f)),S=Math.sqrt(v);this.kx=l*S*f,this.ky=l*S*v*(1-im)}distance(i,l){const f=this.wrap(i[0]-l[0])*this.kx,v=(i[1]-l[1])*this.ky;return Math.sqrt(f*f+v*v)}pointOnLine(i,l){let f,v,S,T,P=1/0;for(let k=0;k<i.length-1;k++){let N=i[k][0],B=i[k][1],q=this.wrap(i[k+1][0]-N)*this.kx,K=(i[k+1][1]-B)*this.ky,J=0;q===0&&K===0||(J=(this.wrap(l[0]-N)*this.kx*q+(l[1]-B)*this.ky*K)/(q*q+K*K),J>1?(N=i[k+1][0],B=i[k+1][1]):J>0&&(N+=q/this.kx*J,B+=K/this.ky*J)),q=this.wrap(l[0]-N)*this.kx,K=(l[1]-B)*this.ky;const re=q*q+K*K;re<P&&(P=re,f=N,v=B,S=k,T=J)}return{point:[f,v],index:S,t:Math.max(0,Math.min(1,T))}}wrap(i){for(;i<-180;)i+=360;for(;i>180;)i-=360;return i}}function na(c,i){return i[0]-c[0]}function fl(c){return c[1]-c[0]+1}function Qo(c,i){return c[1]>=c[0]&&c[1]<i}function _d(c,i){if(c[0]>c[1])return[null,null];const l=fl(c);if(i){if(l===2)return[c,null];const v=Math.floor(l/2);return[[c[0],c[0]+v],[c[0]+v,c[1]]]}if(l===1)return[c,null];const f=Math.floor(l/2)-1;return[[c[0],c[0]+f],[c[0]+f+1,c[1]]]}function bd(c,i){if(!Qo(i,c.length))return[1/0,1/0,-1/0,-1/0];const l=[1/0,1/0,-1/0,-1/0];for(let f=i[0];f<=i[1];++f)lc(l,c[f]);return l}function Nn(c){const i=[1/0,1/0,-1/0,-1/0];for(const l of c)for(const f of l)lc(i,f);return i}function xd(c){return c[0]!==-1/0&&c[1]!==-1/0&&c[2]!==1/0&&c[3]!==1/0}function kf(c,i,l){if(!xd(c)||!xd(i))return NaN;let f=0,v=0;return c[2]<i[0]&&(f=i[0]-c[2]),c[0]>i[2]&&(f=c[0]-i[2]),c[1]>i[3]&&(v=c[1]-i[3]),c[3]<i[1]&&(v=i[1]-c[3]),l.distance([0,0],[f,v])}function io(c,i,l){const f=l.pointOnLine(i,c);return l.distance(c,f.point)}function eh(c,i,l,f,v){const S=Math.min(io(c,[l,f],v),io(i,[l,f],v)),T=Math.min(io(l,[c,i],v),io(f,[c,i],v));return Math.min(S,T)}function th(c,i,l,f,v){if(!Qo(i,c.length)||!Qo(f,l.length))return 1/0;let S=1/0;for(let T=i[0];T<i[1];++T){const P=c[T],k=c[T+1];for(let N=f[0];N<f[1];++N){const B=l[N],q=l[N+1];if(Xu(P,k,B,q))return 0;S=Math.min(S,eh(P,k,B,q,v))}}return S}function Of(c,i,l,f,v){if(!Qo(i,c.length)||!Qo(f,l.length))return NaN;let S=1/0;for(let T=i[0];T<=i[1];++T)for(let P=f[0];P<=f[1];++P)if(S=Math.min(S,v.distance(c[T],l[P])),S===0)return S;return S}function om(c,i,l){if(Eo(c,i,!0))return 0;let f=1/0;for(const v of i){const S=v[0],T=v[v.length-1];if(S!==T&&(f=Math.min(f,io(c,[T,S],l)),f===0))return f;const P=l.pointOnLine(v,c);if(f=Math.min(f,l.distance(c,P.point)),f===0)return f}return f}function cc(c,i,l,f){if(!Qo(i,c.length))return NaN;for(let S=i[0];S<=i[1];++S)if(Eo(c[S],l,!0))return 0;let v=1/0;for(let S=i[0];S<i[1];++S){const T=c[S],P=c[S+1];for(const k of l)for(let N=0,B=k.length,q=B-1;N<B;q=N++){const K=k[q],J=k[N];if(Xu(T,P,K,J))return 0;v=Math.min(v,eh(T,P,K,J,f))}}return v}function uc(c,i){for(const l of c)for(const f of l)if(Eo(f,i,!0))return!0;return!1}function If(c,i,l,f=1/0){const v=Nn(c),S=Nn(i);if(f!==1/0&&kf(v,S,l)>=f)return f;if(Jc(v,S)){if(uc(c,i))return 0}else if(uc(i,c))return 0;let T=1/0;for(const P of c)for(let k=0,N=P.length,B=N-1;k<N;B=k++){const q=P[B],K=P[k];for(const J of i)for(let re=0,se=J.length,ue=se-1;re<se;ue=re++){const ge=J[ue],Ne=J[re];if(Xu(q,K,ge,Ne))return 0;T=Math.min(T,eh(q,K,ge,Ne,l))}}return T}function zf(c,i,l,f,v,S){if(!S)return;const T=kf(bd(f,S),v,l);T<i&&c.push([T,S,[0,0]])}function Jo(c,i,l,f,v,S,T){if(!S||!T)return;const P=kf(bd(f,S),bd(v,T),l);P<i&&c.push([P,S,T])}function nh(c,i,l,f,v=1/0){let S=Math.min(f.distance(c[0],l[0][0]),v);if(S===0)return S;const T=new Ef([[0,[0,c.length-1],[0,0]]],na),P=Nn(l);for(;T.length>0;){const k=T.pop();if(k[0]>=S)continue;const N=k[1],B=i?50:100;if(fl(N)<=B){if(!Qo(N,c.length))return NaN;if(i){const q=cc(c,N,l,f);if(isNaN(q)||q===0)return q;S=Math.min(S,q)}else for(let q=N[0];q<=N[1];++q){const K=om(c[q],l,f);if(S=Math.min(S,K),S===0)return 0}}else{const q=_d(N,i);zf(T,S,f,c,P,q[0]),zf(T,S,f,c,P,q[1])}}return S}function rh(c,i,l,f,v,S=1/0){let T=Math.min(S,v.distance(c[0],l[0]));if(T===0)return T;const P=new Ef([[0,[0,c.length-1],[0,l.length-1]]],na);for(;P.length>0;){const k=P.pop();if(k[0]>=T)continue;const N=k[1],B=k[2],q=i?50:100,K=f?50:100;if(fl(N)<=q&&fl(B)<=K){if(!Qo(N,c.length)&&Qo(B,l.length))return NaN;let J;if(i&&f)J=th(c,N,l,B,v),T=Math.min(T,J);else if(i&&!f){const re=c.slice(N[0],N[1]+1);for(let se=B[0];se<=B[1];++se)if(J=io(l[se],re,v),T=Math.min(T,J),T===0)return T}else if(!i&&f){const re=l.slice(B[0],B[1]+1);for(let se=N[0];se<=N[1];++se)if(J=io(c[se],re,v),T=Math.min(T,J),T===0)return T}else J=Of(c,N,l,B,v),T=Math.min(T,J)}else{const J=_d(N,i),re=_d(B,f);Jo(P,T,v,c,l,J[0],re[0]),Jo(P,T,v,c,l,J[0],re[1]),Jo(P,T,v,c,l,J[1],re[0]),Jo(P,T,v,c,l,J[1],re[1])}}return T}function wd(c){return c.type==="MultiPolygon"?c.coordinates.map((i=>({type:"Polygon",coordinates:i}))):c.type==="MultiLineString"?c.coordinates.map((i=>({type:"LineString",coordinates:i}))):c.type==="MultiPoint"?c.coordinates.map((i=>({type:"Point",coordinates:i}))):[c]}class hc{constructor(i,l){this.type=xt,this.geojson=i,this.geometries=l}static parse(i,l){if(i.length!==2)return l.error(`'distance' expression requires exactly one argument, but found ${i.length-1} instead.`);if(Kn(i[1])){const f=i[1];if(f.type==="FeatureCollection")return new hc(f,f.features.map((v=>wd(v.geometry))).flat());if(f.type==="Feature")return new hc(f,wd(f.geometry));if("type"in f&&"coordinates"in f)return new hc(f,wd(f))}return l.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return(function(l,f){const v=l.geometry(),S=v.flat().map((k=>Tf([k.x,k.y],l.canonical)));if(v.length===0)return NaN;const T=new Df(S[0][1]);let P=1/0;for(const k of f){switch(k.type){case"Point":P=Math.min(P,rh(S,!1,[k.coordinates],!1,T,P));break;case"LineString":P=Math.min(P,rh(S,!1,k.coordinates,!0,T,P));break;case"Polygon":P=Math.min(P,nh(S,!1,k.coordinates,T,P))}if(P===0)return P}return P})(i,this.geometries);if(i.geometryType()==="LineString")return(function(l,f){const v=l.geometry(),S=v.flat().map((k=>Tf([k.x,k.y],l.canonical)));if(v.length===0)return NaN;const T=new Df(S[0][1]);let P=1/0;for(const k of f){switch(k.type){case"Point":P=Math.min(P,rh(S,!0,[k.coordinates],!1,T,P));break;case"LineString":P=Math.min(P,rh(S,!0,k.coordinates,!0,T,P));break;case"Polygon":P=Math.min(P,nh(S,!0,k.coordinates,T,P))}if(P===0)return P}return P})(i,this.geometries);if(i.geometryType()==="Polygon")return(function(l,f){const v=l.geometry();if(v.length===0||v[0].length===0)return NaN;const S=Ju(v,0).map((k=>k.map((N=>N.map((B=>Tf([B.x,B.y],l.canonical))))))),T=new Df(S[0][0][0][1]);let P=1/0;for(const k of f)for(const N of S){switch(k.type){case"Point":P=Math.min(P,nh([k.coordinates],!1,N,T,P));break;case"LineString":P=Math.min(P,nh(k.coordinates,!0,N,T,P));break;case"Polygon":P=Math.min(P,If(N,k.coordinates,T,P))}if(P===0)return P}return P})(i,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class ih{constructor(i){this.type=pn,this.key=i}static parse(i,l){if(i.length!==2)return l.error(`Expected 1 argument, but found ${i.length-1} instead.`);const f=i[1];return f==null?l.error("Global state property must be defined."):typeof f!="string"?l.error(`Global state property must be string, but found ${typeof i[1]} instead.`):new ih(f)}evaluate(i){var l;const f=(l=i.globals)===null||l===void 0?void 0:l.globalState;return f&&Object.keys(f).length!==0?Zc(f,this.key):null}eachChild(){}outputDefined(){return!1}}const nu={"==":Co,"!=":bf,">":zg,"<":pd,">=":Rg,"<=":xf,array:vn,at:ic,boolean:vn,case:Mi,coalesce:fd,collator:md,format:gd,image:Kc,in:ac,"index-of":Yc,interpolate:pi,"interpolate-hcl":pi,"interpolate-lab":pi,length:Sf,let:ul,literal:on,match:Ko,number:vn,"number-format":wf,object:vn,slice:oc,step:hl,string:vn,"to-boolean":Ur,"to-color":Ur,"to-number":Ur,"to-string":Ur,var:rc,within:dl,distance:hc,"global-state":ih};class Ia{constructor(i,l,f,v){this.name=i,this.type=l,this._evaluate=f,this.args=v}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}static parse(i,l){const f=i[0],v=Ia.definitions[f];if(!v)return l.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const S=Array.isArray(v)?v[0]:v.type,T=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,P=T.filter((([N])=>!Array.isArray(N)||N.length===i.length-1));let k=null;for(const[N,B]of P){k=new Zu(l.registry,ra,l.path,null,l.scope);const q=[];let K=!1;for(let J=1;J<i.length;J++){const re=i[J],se=Array.isArray(N)?N[J-1]:N.type,ue=k.parse(re,1+q.length,se);if(!ue){K=!0;break}q.push(ue)}if(!K)if(Array.isArray(N)&&N.length!==q.length)k.error(`Expected ${N.length} arguments, but found ${q.length} instead.`);else{for(let J=0;J<q.length;J++){const re=Array.isArray(N)?N[J]:N.type,se=q[J];k.concat(J+1).checkSubtype(re,se.type)}if(k.errors.length===0)return new Ia(f,S,B,q)}}if(P.length===1)l.errors.push(...k.errors);else{const N=(P.length?P:T).map((([q])=>{return K=q,Array.isArray(K)?`(${K.map(Xn).join(", ")})`:`(${Xn(K.type)}...)`;var K})).join(" | "),B=[];for(let q=1;q<i.length;q++){const K=l.parse(i[q],1+B.length);if(!K)return null;B.push(Xn(K.type))}l.error(`Expected arguments of type ${N}, but found (${B.join(", ")}) instead.`)}return null}static register(i,l){Ia.definitions=l;for(const f in l)i[f]=Ia}}function Rf(c,[i,l,f,v]){i=i.evaluate(c),l=l.evaluate(c),f=f.evaluate(c);const S=v?v.evaluate(c):1,T=no(i,l,f,S);if(T)throw new hr(T);return new xn(i/255,l/255,f/255,S,!1)}function Sd(c,i){return c in i}function za(c,i){const l=i[c];return l===void 0?null:l}function es(c){return{type:c}}function ra(c){if(c instanceof rc)return ra(c.boundExpression);if(c instanceof Ia&&c.name==="error"||c instanceof md||c instanceof dl||c instanceof hc||c instanceof ih)return!1;const i=c instanceof Ur||c instanceof vn;let l=!0;return c.eachChild((f=>{l=i?l&&ra(f):l&&f instanceof on})),!!l&&xs(c)&&fc(c,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function xs(c){if(c instanceof Ia&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof dl||c instanceof hc)return!1;let i=!0;return c.eachChild((l=>{i&&!xs(l)&&(i=!1)})),i}function dc(c){if(c instanceof Ia&&c.name==="feature-state")return!1;let i=!0;return c.eachChild((l=>{i&&!dc(l)&&(i=!1)})),i}function fc(c,i){if(c instanceof Ia&&i.indexOf(c.name)>=0)return!1;let l=!0;return c.eachChild((f=>{l&&!fc(f,i)&&(l=!1)})),l}function ah(c){return{result:"success",value:c}}function pl(c){return{result:"error",value:c}}function ao(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function jf(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function ml(c){return!!c.expression&&c.expression.interpolated}function _n(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Td(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)&&yr(c)===Mo}function Ra(c){return c}function oh(c,i){const l=c.stops&&typeof c.stops[0][0]=="object",f=l||!(l||c.property!==void 0),v=c.type||(ml(i)?"exponential":"interval"),S=(function(B){switch(B.type){case"color":return xn.parse;case"padding":return Fr.parse;case"numberArray":return di.parse;case"colorArray":return fi.parse;default:return null}})(i);if(S&&((c=To({},c)).stops&&(c.stops=c.stops.map((B=>[B[0],S(B[1])]))),c.default=S(c.default?c.default:i.default)),c.colorSpace&&(T=c.colorSpace)!=="rgb"&&T!=="hcl"&&T!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var T;const P=(function(B){switch(B){case"exponential":return ws;case"interval":return pc;case"categorical":return sm;case"identity":return Lf;default:throw new Error(`Unknown function type "${B}"`)}})(v);let k,N;if(v==="categorical"){k=Object.create(null);for(const B of c.stops)k[B[0]]=B[1];N=typeof c.stops[0][0]}if(l){const B={},q=[];for(let re=0;re<c.stops.length;re++){const se=c.stops[re],ue=se[0].zoom;B[ue]===void 0&&(B[ue]={zoom:ue,type:c.type,property:c.property,default:c.default,stops:[]},q.push(ue)),B[ue].stops.push([se[0].value,se[1]])}const K=[];for(const re of q)K.push([B[re].zoom,oh(B[re],i)]);const J={name:"linear"};return{kind:"composite",interpolationType:J,interpolationFactor:pi.interpolationFactor.bind(void 0,J),zoomStops:K.map((re=>re[0])),evaluate:({zoom:re},se)=>ws({stops:K,base:c.base},i,re).evaluate(re,se)}}if(f){const B=v==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:B,interpolationFactor:pi.interpolationFactor.bind(void 0,B),zoomStops:c.stops.map((q=>q[0])),evaluate:({zoom:q})=>P(c,i,q,k,N)}}return{kind:"source",evaluate(B,q){const K=q&&q.properties?q.properties[c.property]:void 0;return K===void 0?ja(c.default,i.default):P(c,i,K,k,N)}}}function ja(c,i,l){return c!==void 0?c:i!==void 0?i:l!==void 0?l:void 0}function sm(c,i,l,f,v){return ja(typeof l===v?f[l]:void 0,c.default,i.default)}function pc(c,i,l){if(_n(l)!=="number")return ja(c.default,i.default);const f=c.stops.length;if(f===1||l<=c.stops[0][0])return c.stops[0][1];if(l>=c.stops[f-1][0])return c.stops[f-1][1];const v=sc(c.stops.map((S=>S[0])),l);return c.stops[v][1]}function ws(c,i,l){const f=c.base!==void 0?c.base:1;if(_n(l)!=="number")return ja(c.default,i.default);const v=c.stops.length;if(v===1||l<=c.stops[0][0])return c.stops[0][1];if(l>=c.stops[v-1][0])return c.stops[v-1][1];const S=sc(c.stops.map((B=>B[0])),l),T=(function(B,q,K,J){const re=J-K,se=B-K;return re===0?0:q===1?se/re:(Math.pow(q,se)-1)/(Math.pow(q,re)-1)})(l,f,c.stops[S][0],c.stops[S+1][0]),P=c.stops[S][1],k=c.stops[S+1][1],N=ro[i.type]||Ra;return typeof P.evaluate=="function"?{evaluate(...B){const q=P.evaluate.apply(void 0,B),K=k.evaluate.apply(void 0,B);if(q!==void 0&&K!==void 0)return N(q,K,T,c.colorSpace)}}:N(P,k,T,c.colorSpace)}function Lf(c,i,l){switch(i.type){case"color":l=xn.parse(l);break;case"formatted":l=hi.fromString(l.toString());break;case"resolvedImage":l=ta.fromString(l.toString());break;case"padding":l=Fr.parse(l);break;case"colorArray":l=fi.parse(l);break;case"numberArray":l=di.parse(l);break;default:_n(l)===i.type||i.type==="enum"&&i.values[l]||(l=void 0)}return ja(l,c.default,i.default)}Ia.register(nu,{error:[{kind:"error"},[mn],(c,[i])=>{throw new hr(i.evaluate(c))}],typeof:[mn,[pn],(c,[i])=>Xn(yr(i.evaluate(c)))],"to-rgba":[pa(xt,4),[Da],(c,[i])=>{const[l,f,v,S]=i.evaluate(c).rgb;return[255*l,255*f,255*v,S]}],rgb:[Da,[xt,xt,xt],Rf],rgba:[Da,[xt,xt,xt,xt],Rf],has:{type:yn,overloads:[[[mn],(c,[i])=>Sd(i.evaluate(c),c.properties())],[[mn,Mo],(c,[i,l])=>Sd(i.evaluate(c),l.evaluate(c))]]},get:{type:pn,overloads:[[[mn],(c,[i])=>za(i.evaluate(c),c.properties())],[[mn,Mo],(c,[i,l])=>za(i.evaluate(c),l.evaluate(c))]]},"feature-state":[pn,[mn],(c,[i])=>za(i.evaluate(c),c.featureState||{})],properties:[Mo,[],c=>c.properties()],"geometry-type":[mn,[],c=>c.geometryType()],id:[pn,[],c=>c.id()],zoom:[xt,[],c=>c.globals.zoom],"heatmap-density":[xt,[],c=>c.globals.heatmapDensity||0],elevation:[xt,[],c=>c.globals.elevation||0],"line-progress":[xt,[],c=>c.globals.lineProgress||0],accumulated:[pn,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[xt,es(xt),(c,i)=>{let l=0;for(const f of i)l+=f.evaluate(c);return l}],"*":[xt,es(xt),(c,i)=>{let l=1;for(const f of i)l*=f.evaluate(c);return l}],"-":{type:xt,overloads:[[[xt,xt],(c,[i,l])=>i.evaluate(c)-l.evaluate(c)],[[xt],(c,[i])=>-i.evaluate(c)]]},"/":[xt,[xt,xt],(c,[i,l])=>i.evaluate(c)/l.evaluate(c)],"%":[xt,[xt,xt],(c,[i,l])=>i.evaluate(c)%l.evaluate(c)],ln2:[xt,[],()=>Math.LN2],pi:[xt,[],()=>Math.PI],e:[xt,[],()=>Math.E],"^":[xt,[xt,xt],(c,[i,l])=>Math.pow(i.evaluate(c),l.evaluate(c))],sqrt:[xt,[xt],(c,[i])=>Math.sqrt(i.evaluate(c))],log10:[xt,[xt],(c,[i])=>Math.log(i.evaluate(c))/Math.LN10],ln:[xt,[xt],(c,[i])=>Math.log(i.evaluate(c))],log2:[xt,[xt],(c,[i])=>Math.log(i.evaluate(c))/Math.LN2],sin:[xt,[xt],(c,[i])=>Math.sin(i.evaluate(c))],cos:[xt,[xt],(c,[i])=>Math.cos(i.evaluate(c))],tan:[xt,[xt],(c,[i])=>Math.tan(i.evaluate(c))],asin:[xt,[xt],(c,[i])=>Math.asin(i.evaluate(c))],acos:[xt,[xt],(c,[i])=>Math.acos(i.evaluate(c))],atan:[xt,[xt],(c,[i])=>Math.atan(i.evaluate(c))],min:[xt,es(xt),(c,i)=>Math.min(...i.map((l=>l.evaluate(c))))],max:[xt,es(xt),(c,i)=>Math.max(...i.map((l=>l.evaluate(c))))],abs:[xt,[xt],(c,[i])=>Math.abs(i.evaluate(c))],round:[xt,[xt],(c,[i])=>{const l=i.evaluate(c);return l<0?-Math.round(-l):Math.round(l)}],floor:[xt,[xt],(c,[i])=>Math.floor(i.evaluate(c))],ceil:[xt,[xt],(c,[i])=>Math.ceil(i.evaluate(c))],"filter-==":[yn,[mn,pn],(c,[i,l])=>c.properties()[i.value]===l.value],"filter-id-==":[yn,[pn],(c,[i])=>c.id()===i.value],"filter-type-==":[yn,[mn],(c,[i])=>c.geometryType()===i.value],"filter-<":[yn,[mn,pn],(c,[i,l])=>{const f=c.properties()[i.value],v=l.value;return typeof f==typeof v&&f<v}],"filter-id-<":[yn,[pn],(c,[i])=>{const l=c.id(),f=i.value;return typeof l==typeof f&&l<f}],"filter->":[yn,[mn,pn],(c,[i,l])=>{const f=c.properties()[i.value],v=l.value;return typeof f==typeof v&&f>v}],"filter-id->":[yn,[pn],(c,[i])=>{const l=c.id(),f=i.value;return typeof l==typeof f&&l>f}],"filter-<=":[yn,[mn,pn],(c,[i,l])=>{const f=c.properties()[i.value],v=l.value;return typeof f==typeof v&&f<=v}],"filter-id-<=":[yn,[pn],(c,[i])=>{const l=c.id(),f=i.value;return typeof l==typeof f&&l<=f}],"filter->=":[yn,[mn,pn],(c,[i,l])=>{const f=c.properties()[i.value],v=l.value;return typeof f==typeof v&&f>=v}],"filter-id->=":[yn,[pn],(c,[i])=>{const l=c.id(),f=i.value;return typeof l==typeof f&&l>=f}],"filter-has":[yn,[pn],(c,[i])=>i.value in c.properties()],"filter-has-id":[yn,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[yn,[pa(mn)],(c,[i])=>i.value.indexOf(c.geometryType())>=0],"filter-id-in":[yn,[pa(pn)],(c,[i])=>i.value.indexOf(c.id())>=0],"filter-in-small":[yn,[mn,pa(pn)],(c,[i,l])=>l.value.indexOf(c.properties()[i.value])>=0],"filter-in-large":[yn,[mn,pa(pn)],(c,[i,l])=>(function(f,v,S,T){for(;S<=T;){const P=S+T>>1;if(v[P]===f)return!0;v[P]>f?T=P-1:S=P+1}return!1})(c.properties()[i.value],l.value,0,l.value.length-1)],all:{type:yn,overloads:[[[yn,yn],(c,[i,l])=>i.evaluate(c)&&l.evaluate(c)],[es(yn),(c,i)=>{for(const l of i)if(!l.evaluate(c))return!1;return!0}]]},any:{type:yn,overloads:[[[yn,yn],(c,[i,l])=>i.evaluate(c)||l.evaluate(c)],[es(yn),(c,i)=>{for(const l of i)if(l.evaluate(c))return!0;return!1}]]},"!":[yn,[yn],(c,[i])=>!i.evaluate(c)],"is-supported-script":[yn,[mn],(c,[i])=>{const l=c.globals&&c.globals.isSupportedScript;return!l||l(i.evaluate(c))}],upcase:[mn,[mn],(c,[i])=>i.evaluate(c).toUpperCase()],downcase:[mn,[mn],(c,[i])=>i.evaluate(c).toLowerCase()],concat:[mn,es(pn),(c,i)=>i.map((l=>Mn(l.evaluate(c)))).join("")],"resolved-locale":[mn,[al],(c,[i])=>i.evaluate(c).resolvedLocale()]});class Md{constructor(i,l,f){this.expression=i,this._warningHistory={},this._evaluator=new vs,this._defaultValue=l?(function(v){if(v.type==="color"&&Td(v.default))return new xn(0,0,0,0);switch(v.type){case"color":return xn.parse(v.default)||null;case"padding":return Fr.parse(v.default)||null;case"numberArray":return di.parse(v.default)||null;case"colorArray":return fi.parse(v.default)||null;case"variableAnchorOffsetCollection":return Lr.parse(v.default)||null;case"projectionDefinition":return Ti.parse(v.default)||null;default:return v.default===void 0?null:v.default}})(l):null,this._enumValues=l&&l.type==="enum"?l.values:null,this._globalState=f}evaluateWithoutErrorHandling(i,l,f,v,S,T){return this._globalState&&(i=Ei(i,this._globalState)),this._evaluator.globals=i,this._evaluator.feature=l,this._evaluator.featureState=f,this._evaluator.canonical=v,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=T,this.expression.evaluate(this._evaluator)}evaluate(i,l,f,v,S,T){this._globalState&&(i=Ei(i,this._globalState)),this._evaluator.globals=i,this._evaluator.feature=l||null,this._evaluator.featureState=f||null,this._evaluator.canonical=v,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=T||null;try{const P=this.expression.evaluate(this._evaluator);if(P==null||typeof P=="number"&&P!=P)return this._defaultValue;if(this._enumValues&&!(P in this._enumValues))throw new hr(`Expected value to be one of ${Object.keys(this._enumValues).map((k=>JSON.stringify(k))).join(", ")}, but found ${JSON.stringify(P)} instead.`);return P}catch(P){return this._warningHistory[P.message]||(this._warningHistory[P.message]=!0,typeof console<"u"&&console.warn(P.message)),this._defaultValue}}}function ru(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in nu}function sh(c,i,l){const f=new Zu(nu,ra,[],i?(function(S){const T={color:Da,string:mn,number:xt,enum:mn,boolean:yn,formatted:Ho,padding:to,numberArray:fa,colorArray:ps,projectionDefinition:Go,resolvedImage:Ar,variableAnchorOffsetCollection:Br};return S.type==="array"?pa(T[S.value]||pn,S.length):T[S.type]})(i):void 0),v=f.parse(c,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return v?ah(new Md(v,i,l)):pl(f.errors)}class ia{constructor(i,l,f){this.kind=i,this._styleExpression=l,this.isStateDependent=i!=="constant"&&!dc(l.expression),this.globalStateRefs=$i(l.expression),this._globalState=f}evaluateWithoutErrorHandling(i,l,f,v,S,T){return this._globalState&&(i=Ei(i,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(i,l,f,v,S,T)}evaluate(i,l,f,v,S,T){return this._globalState&&(i=Ei(i,this._globalState)),this._styleExpression.evaluate(i,l,f,v,S,T)}}class Ss{constructor(i,l,f,v,S){this.kind=i,this.zoomStops=f,this._styleExpression=l,this.isStateDependent=i!=="camera"&&!dc(l.expression),this.globalStateRefs=$i(l.expression),this.interpolationType=v,this._globalState=S}evaluateWithoutErrorHandling(i,l,f,v,S,T){return this._globalState&&(i=Ei(i,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(i,l,f,v,S,T)}evaluate(i,l,f,v,S,T){return this._globalState&&(i=Ei(i,this._globalState)),this._styleExpression.evaluate(i,l,f,v,S,T)}interpolationFactor(i,l,f){return this.interpolationType?pi.interpolationFactor(this.interpolationType,i,l,f):0}}function gl(c,i,l){const f=sh(c,i,l);if(f.result==="error")return f;const v=f.value.expression,S=xs(v);if(!S&&!ao(i))return pl([new da("","data expressions not supported")]);const T=fc(v,["zoom"]);if(!T&&!jf(i))return pl([new da("","zoom expressions not supported")]);const P=yl(v);return P||T?P instanceof da?pl([P]):P instanceof pi&&!ml(i)?pl([new da("",'"interpolate" expressions cannot be used with this property')]):ah(P?new Ss(S?"camera":"composite",f.value,P.labels,P instanceof pi?P.interpolation:void 0,l):new ia(S?"constant":"source",f.value,l)):pl([new da("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class mc{constructor(i,l){this._parameters=i,this._specification=l,To(this,oh(this._parameters,this._specification))}static deserialize(i){return new mc(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function yl(c){let i=null;if(c instanceof ul)i=yl(c.result);else if(c instanceof fd){for(const l of c.args)if(i=yl(l),i)break}else(c instanceof hl||c instanceof pi)&&c.input instanceof Ia&&c.input.name==="zoom"&&(i=c);return i instanceof da||c.eachChild((l=>{const f=yl(l);f instanceof da?i=f:!i&&f?i=new da("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&f&&i!==f&&(i=new da("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),i}function $i(c,i=new Set){return c instanceof ih&&i.add(c.key),c.eachChild((l=>{$i(l,i)})),i}function Ei(c,i){const{zoom:l,heatmapDensity:f,elevation:v,lineProgress:S,isSupportedScript:T,accumulated:P}=c??{};return{zoom:l,heatmapDensity:f,elevation:v,lineProgress:S,isSupportedScript:T,accumulated:P,globalState:i}}function Ao(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const i of c.slice(1))if(!Ao(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}const ts={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ma(c,i){if(c==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Ao(c)||(c=gc(c));const l=sh(c,ts,i);if(l.result==="error")throw new Error(l.value.map((f=>`${f.key}: ${f.message}`)).join(", "));return{filter:(f,v,S)=>l.value.evaluate(f,v,{},S),needGeometry:Nf(c),getGlobalStateRefs:()=>$i(l.value.expression)}}function Ts(c,i){return c<i?-1:c>i?1:0}function Nf(c){if(!Array.isArray(c))return!1;if(c[0]==="within"||c[0]==="distance")return!0;for(let i=1;i<c.length;i++)if(Nf(c[i]))return!0;return!1}function gc(c){if(!c)return!0;const i=c[0];return c.length<=1?i!=="any":i==="=="?iu(c[1],c[2],"=="):i==="!="?Jn(iu(c[1],c[2],"==")):i==="<"||i===">"||i==="<="||i===">="?iu(c[1],c[2],i):i==="any"?(l=c.slice(1),["any"].concat(l.map(gc))):i==="all"?["all"].concat(c.slice(1).map(gc)):i==="none"?["all"].concat(c.slice(1).map(gc).map(Jn)):i==="in"?lh(c[1],c.slice(2)):i==="!in"?Jn(lh(c[1],c.slice(2))):i==="has"?ii(c[1]):i!=="!has"||Jn(ii(c[1]));var l}function iu(c,i,l){switch(c){case"$type":return[`filter-type-${l}`,i];case"$id":return[`filter-id-${l}`,i];default:return[`filter-${l}`,c,i]}}function lh(c,i){if(i.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some((l=>typeof l!=typeof i[0]))?["filter-in-large",c,["literal",i.sort(Ts)]]:["filter-in-small",c,["literal",i]]}}function ii(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function Jn(c){return["!",c]}function kn(c){const i=typeof c;if(i==="number"||i==="boolean"||i==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let v="[";for(const S of c)v+=`${kn(S)},`;return`${v}]`}const l=Object.keys(c).sort();let f="{";for(let v=0;v<l.length;v++)f+=`${JSON.stringify(l[v])}:${kn(c[l[v]])},`;return`${f}}`}function Po(c){let i="";for(const l of wn)i+=`/${kn(c[l])}`;return i}function La(c){const i=c.value;return i?[new yt(c.key,i,"constants have been deprecated as of v8")]:[]}function Pr(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function ga(c){if(Array.isArray(c))return c.map(ga);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const i={};for(const l in c)i[l]=ga(c[l]);return i}return Pr(c)}function Na(c){const i=c.key,l=c.value,f=c.valueSpec||{},v=c.objectElementValidators||{},S=c.style,T=c.styleSpec,P=c.validateSpec;let k=[];const N=_n(l);if(N!=="object")return[new yt(i,l,`object expected, ${N} found`)];for(const B in l){const q=B.split(".")[0],K=Zc(f,q)||f["*"];let J;if(Zc(v,q))J=v[q];else if(Zc(f,q))J=P;else if(v["*"])J=v["*"];else{if(!f["*"]){k.push(new yt(i,l[B],`unknown property "${B}"`));continue}J=P}k=k.concat(J({key:(i&&`${i}.`)+B,value:l[B],valueSpec:K,style:S,styleSpec:T,object:l,objectKey:B,validateSpec:P},l))}for(const B in f)v[B]||f[B].required&&f[B].default===void 0&&l[B]===void 0&&k.push(new yt(i,l,`missing required property "${B}"`));return k}function Cd(c){const i=c.value,l=c.valueSpec,f=c.style,v=c.styleSpec,S=c.key,T=c.arrayElementValidator||c.validateSpec;if(_n(i)!=="array")return[new yt(S,i,`array expected, ${_n(i)} found`)];if(l.length&&i.length!==l.length)return[new yt(S,i,`array length ${l.length} expected, length ${i.length} found`)];if(l["min-length"]&&i.length<l["min-length"])return[new yt(S,i,`array length at least ${l["min-length"]} expected, length ${i.length} found`)];let P={type:l.value,values:l.values};v.$version<7&&(P.function=l.function),_n(l.value)==="object"&&(P=l.value);let k=[];for(let N=0;N<i.length;N++)k=k.concat(T({array:i,arrayIndex:N,value:i[N],valueSpec:P,validateSpec:c.validateSpec,style:f,styleSpec:v,key:`${S}[${N}]`}));return k}function Ms(c){const i=c.key,l=c.value,f=c.valueSpec;let v=_n(l);return v==="number"&&l!=l&&(v="NaN"),v!=="number"?[new yt(i,l,`number expected, ${v} found`)]:"minimum"in f&&l<f.minimum?[new yt(i,l,`${l} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&l>f.maximum?[new yt(i,l,`${l} is greater than the maximum value ${f.maximum}`)]:[]}function Cs(c){const i=c.valueSpec,l=Pr(c.value.type);let f,v,S,T={};const P=l!=="categorical"&&c.value.property===void 0,k=!P,N=_n(c.value.stops)==="array"&&_n(c.value.stops[0])==="array"&&_n(c.value.stops[0][0])==="object",B=Na({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(J){if(l==="identity")return[new yt(J.key,J.value,'identity function may not have a "stops" property')];let re=[];const se=J.value;return re=re.concat(Cd({key:J.key,value:se,valueSpec:J.valueSpec,validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec,arrayElementValidator:q})),_n(se)==="array"&&se.length===0&&re.push(new yt(J.key,se,"array must have at least one stop")),re},default:function(J){return J.validateSpec({key:J.key,value:J.value,valueSpec:i,validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec})}}});return l==="identity"&&P&&B.push(new yt(c.key,c.value,'missing required property "property"')),l==="identity"||c.value.stops||B.push(new yt(c.key,c.value,'missing required property "stops"')),l==="exponential"&&c.valueSpec.expression&&!ml(c.valueSpec)&&B.push(new yt(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(k&&!ao(c.valueSpec)?B.push(new yt(c.key,c.value,"property functions not supported")):P&&!jf(c.valueSpec)&&B.push(new yt(c.key,c.value,"zoom functions not supported"))),l!=="categorical"&&!N||c.value.property!==void 0||B.push(new yt(c.key,c.value,'"property" property is required')),B;function q(J){let re=[];const se=J.value,ue=J.key;if(_n(se)!=="array")return[new yt(ue,se,`array expected, ${_n(se)} found`)];if(se.length!==2)return[new yt(ue,se,`array length 2 expected, length ${se.length} found`)];if(N){if(_n(se[0])!=="object")return[new yt(ue,se,`object expected, ${_n(se[0])} found`)];if(se[0].zoom===void 0)return[new yt(ue,se,"object stop key must have zoom")];if(se[0].value===void 0)return[new yt(ue,se,"object stop key must have value")];if(S&&S>Pr(se[0].zoom))return[new yt(ue,se[0].zoom,"stop zoom values must appear in ascending order")];Pr(se[0].zoom)!==S&&(S=Pr(se[0].zoom),v=void 0,T={}),re=re.concat(Na({key:`${ue}[0]`,value:se[0],valueSpec:{zoom:{}},validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec,objectElementValidators:{zoom:Ms,value:K}}))}else re=re.concat(K({key:`${ue}[0]`,value:se[0],validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec},se));return ru(ga(se[1]))?re.concat([new yt(`${ue}[1]`,se[1],"expressions are not allowed in function stops.")]):re.concat(J.validateSpec({key:`${ue}[1]`,value:se[1],valueSpec:i,validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec}))}function K(J,re){const se=_n(J.value),ue=Pr(J.value),ge=J.value!==null?J.value:re;if(f){if(se!==f)return[new yt(J.key,ge,`${se} stop domain type must match previous stop domain type ${f}`)]}else f=se;if(se!=="number"&&se!=="string"&&se!=="boolean")return[new yt(J.key,ge,"stop domain value must be a number, string, or boolean")];if(se!=="number"&&l!=="categorical"){let Ne=`number expected, ${se} found`;return ao(i)&&l===void 0&&(Ne+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new yt(J.key,ge,Ne)]}return l!=="categorical"||se!=="number"||isFinite(ue)&&Math.floor(ue)===ue?l!=="categorical"&&se==="number"&&v!==void 0&&ue<v?[new yt(J.key,ge,"stop domain values must appear in ascending order")]:(v=ue,l==="categorical"&&ue in T?[new yt(J.key,ge,"stop domain values must be unique")]:(T[ue]=!0,[])):[new yt(J.key,ge,`integer expected, found ${ue}`)]}}function Es(c){const i=(c.expressionContext==="property"?gl:sh)(ga(c.value),c.valueSpec);if(i.result==="error")return i.value.map((f=>new yt(`${c.key}${f.key}`,c.value,f.message)));const l=i.value.expression||i.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!l.outputDefined())return[new yt(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!dc(l))return[new yt(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!dc(l))return[new yt(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!fc(l,["zoom","feature-state"]))return[new yt(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!xs(l))return[new yt(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ns(c){const i=c.key,l=c.value,f=_n(l);return f!=="string"?[new yt(i,l,`color expected, ${f} found`)]:xn.parse(String(l))?[]:[new yt(i,l,`color expected, "${l}" found`)]}function yc(c){const i=c.key,l=c.value,f=c.valueSpec,v=[];return Array.isArray(f.values)?f.values.indexOf(Pr(l))===-1&&v.push(new yt(i,l,`expected one of [${f.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(f.values).indexOf(Pr(l))===-1&&v.push(new yt(i,l,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(l)} found`)),v}function rs(c){return Ao(ga(c.value))?Es(To({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Do(c)}function Do(c){const i=c.value,l=c.key;if(_n(i)!=="array")return[new yt(l,i,`array expected, ${_n(i)} found`)];const f=c.styleSpec;let v,S=[];if(i.length<1)return[new yt(l,i,"filter array must have at least 1 element")];switch(S=S.concat(yc({key:`${l}[0]`,value:i[0],valueSpec:f.filter_operator,style:c.style,styleSpec:c.styleSpec})),Pr(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&Pr(i[1])==="$type"&&S.push(new yt(l,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&S.push(new yt(l,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(v=_n(i[1]),v!=="string"&&S.push(new yt(`${l}[1]`,i[1],`string expected, ${v} found`)));for(let T=2;T<i.length;T++)v=_n(i[T]),Pr(i[1])==="$type"?S=S.concat(yc({key:`${l}[${T}]`,value:i[T],valueSpec:f.geometry_type,style:c.style,styleSpec:c.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&S.push(new yt(`${l}[${T}]`,i[T],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let T=1;T<i.length;T++)S=S.concat(Do({key:`${l}[${T}]`,value:i[T],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":v=_n(i[1]),i.length!==2?S.push(new yt(l,i,`filter array for "${i[0]}" operator must have 2 elements`)):v!=="string"&&S.push(new yt(`${l}[1]`,i[1],`string expected, ${v} found`))}return S}function As(c,i){const l=c.key,f=c.validateSpec,v=c.style,S=c.styleSpec,T=c.value,P=c.objectKey,k=S[`${i}_${c.layerType}`];if(!k)return[];const N=P.match(/^(.*)-transition$/);if(i==="paint"&&N&&k[N[1]]&&k[N[1]].transition)return f({key:l,value:T,valueSpec:S.transition,style:v,styleSpec:S});const B=c.valueSpec||k[P];if(!B)return[new yt(l,T,`unknown property "${P}"`)];let q;if(_n(T)==="string"&&ao(B)&&!B.tokens&&(q=/^{([^}]+)}$/.exec(T)))return[new yt(l,T,`"${P}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(q[1])} }\`.`)];const K=[];return c.layerType==="symbol"&&(P==="text-field"&&v&&!v.glyphs&&K.push(new yt(l,T,'use of "text-field" requires a style "glyphs" property')),P==="text-font"&&Td(ga(T))&&Pr(T.type)==="identity"&&K.push(new yt(l,T,'"text-font" does not support identity functions'))),K.concat(f({key:c.key,value:T,valueSpec:B,style:v,styleSpec:S,expressionContext:"property",propertyType:i,propertyKey:P}))}function ko(c){return As(c,"paint")}function ch(c){return As(c,"layout")}function vl(c){let i=[];const l=c.value,f=c.key,v=c.style,S=c.styleSpec;if(_n(l)!=="object")return[new yt(f,l,`object expected, ${_n(l)} found`)];l.type||l.ref||i.push(new yt(f,l,'either "type" or "ref" is required'));let T=Pr(l.type);const P=Pr(l.ref);if(l.id){const k=Pr(l.id);for(let N=0;N<c.arrayIndex;N++){const B=v.layers[N];Pr(B.id)===k&&i.push(new yt(f,l.id,`duplicate layer id "${l.id}", previously used at line ${B.id.__line__}`))}}if("ref"in l){let k;["type","source","source-layer","filter","layout"].forEach((N=>{N in l&&i.push(new yt(f,l[N],`"${N}" is prohibited for ref layers`))})),v.layers.forEach((N=>{Pr(N.id)===P&&(k=N)})),k?k.ref?i.push(new yt(f,l.ref,"ref cannot reference another ref layer")):T=Pr(k.type):i.push(new yt(f,l.ref,`ref layer "${P}" not found`))}else if(T!=="background")if(l.source){const k=v.sources&&v.sources[l.source],N=k&&Pr(k.type);k?N==="vector"&&T==="raster"?i.push(new yt(f,l.source,`layer "${l.id}" requires a raster source`)):N!=="raster-dem"&&T==="hillshade"||N!=="raster-dem"&&T==="color-relief"?i.push(new yt(f,l.source,`layer "${l.id}" requires a raster-dem source`)):N==="raster"&&T!=="raster"?i.push(new yt(f,l.source,`layer "${l.id}" requires a vector source`)):N!=="vector"||l["source-layer"]?N==="raster-dem"&&T!=="hillshade"&&T!=="color-relief"?i.push(new yt(f,l.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):T!=="line"||!l.paint||!l.paint["line-gradient"]||N==="geojson"&&k.lineMetrics||i.push(new yt(f,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new yt(f,l,`layer "${l.id}" must specify a "source-layer"`)):i.push(new yt(f,l.source,`source "${l.source}" not found`))}else i.push(new yt(f,l,'missing required property "source"'));return i=i.concat(Na({key:f,value:l,valueSpec:S.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${f}.type`,value:l.type,valueSpec:S.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:l,objectKey:"type"}),filter:rs,layout:k=>Na({layer:l,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":N=>ch(To({layerType:T},N))}}),paint:k=>Na({layer:l,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":N=>ko(To({layerType:T},N))}})}})),i}function oo(c){const i=c.value,l=c.key,f=_n(i);return f!=="string"?[new yt(l,i,`string expected, ${f} found`)]:[]}const uh={promoteId:function({key:c,value:i}){if(_n(i)==="string")return oo({key:c,value:i});{const l=[];for(const f in i)l.push(...oo({key:`${c}.${f}`,value:i[f]}));return l}}};function _l(c){const i=c.value,l=c.key,f=c.styleSpec,v=c.style,S=c.validateSpec;if(!i.type)return[new yt(l,i,'"type" is required')];const T=Pr(i.type);let P;switch(T){case"vector":case"raster":return P=Na({key:l,value:i,valueSpec:f[`source_${T.replace("-","_")}`],style:c.style,styleSpec:f,objectElementValidators:uh,validateSpec:S}),P;case"raster-dem":return P=(function(k){var N;const B=(N=k.sourceName)!==null&&N!==void 0?N:"",q=k.value,K=k.styleSpec,J=K.source_raster_dem,re=k.style;let se=[];const ue=_n(q);if(q===void 0)return se;if(ue!=="object")return se.push(new yt("source_raster_dem",q,`object expected, ${ue} found`)),se;const ge=Pr(q.encoding)==="custom",Ne=["redFactor","greenFactor","blueFactor","baseShift"],Te=k.value.encoding?`"${k.value.encoding}"`:"Default";for(const Ee in q)!ge&&Ne.includes(Ee)?se.push(new yt(Ee,q[Ee],`In "${B}": "${Ee}" is only valid when "encoding" is set to "custom". ${Te} encoding found`)):J[Ee]?se=se.concat(k.validateSpec({key:Ee,value:q[Ee],valueSpec:J[Ee],validateSpec:k.validateSpec,style:re,styleSpec:K})):se.push(new yt(Ee,q[Ee],`unknown property "${Ee}"`));return se})({sourceName:l,value:i,style:c.style,styleSpec:f,validateSpec:S}),P;case"geojson":if(P=Na({key:l,value:i,valueSpec:f.source_geojson,style:v,styleSpec:f,validateSpec:S,objectElementValidators:uh}),i.cluster)for(const k in i.clusterProperties){const[N,B]=i.clusterProperties[k],q=typeof N=="string"?[N,["accumulated"],["get",k]]:N;P.push(...Es({key:`${l}.${k}.map`,value:B,expressionContext:"cluster-map"})),P.push(...Es({key:`${l}.${k}.reduce`,value:q,expressionContext:"cluster-reduce"}))}return P;case"video":return Na({key:l,value:i,valueSpec:f.source_video,style:v,validateSpec:S,styleSpec:f});case"image":return Na({key:l,value:i,valueSpec:f.source_image,style:v,validateSpec:S,styleSpec:f});case"canvas":return[new yt(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return yc({key:`${l}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Ai(c){const i=c.value,l=c.styleSpec,f=l.light,v=c.style;let S=[];const T=_n(i);if(i===void 0)return S;if(T!=="object")return S=S.concat([new yt("light",i,`object expected, ${T} found`)]),S;for(const P in i){const k=P.match(/^(.*)-transition$/);S=S.concat(k&&f[k[1]]&&f[k[1]].transition?c.validateSpec({key:P,value:i[P],valueSpec:l.transition,validateSpec:c.validateSpec,style:v,styleSpec:l}):f[P]?c.validateSpec({key:P,value:i[P],valueSpec:f[P],validateSpec:c.validateSpec,style:v,styleSpec:l}):[new yt(P,i[P],`unknown property "${P}"`)])}return S}function hh(c){const i=c.value,l=c.styleSpec,f=l.sky,v=c.style,S=_n(i);if(i===void 0)return[];if(S!=="object")return[new yt("sky",i,`object expected, ${S} found`)];let T=[];for(const P in i)T=T.concat(f[P]?c.validateSpec({key:P,value:i[P],valueSpec:f[P],style:v,styleSpec:l}):[new yt(P,i[P],`unknown property "${P}"`)]);return T}function Bf(c){const i=c.value,l=c.styleSpec,f=l.terrain,v=c.style;let S=[];const T=_n(i);if(i===void 0)return S;if(T!=="object")return S=S.concat([new yt("terrain",i,`object expected, ${T} found`)]),S;for(const P in i)S=S.concat(f[P]?c.validateSpec({key:P,value:i[P],valueSpec:f[P],validateSpec:c.validateSpec,style:v,styleSpec:l}):[new yt(P,i[P],`unknown property "${P}"`)]);return S}function au(c){let i=[];const l=c.value,f=c.key;if(Array.isArray(l)){const v=[],S=[];for(const T in l)l[T].id&&v.includes(l[T].id)&&i.push(new yt(f,l,`all the sprites' ids must be unique, but ${l[T].id} is duplicated`)),v.push(l[T].id),l[T].url&&S.includes(l[T].url)&&i.push(new yt(f,l,`all the sprites' URLs must be unique, but ${l[T].url} is duplicated`)),S.push(l[T].url),i=i.concat(Na({key:`${f}[${T}]`,value:l[T],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return i}return oo({key:f,value:l})}function ou(c){return i=c.value,i&&i.constructor===Object?[]:[new yt(c.key,c.value,`object expected, ${_n(c.value)} found`)];var i}const ya={"*":()=>[],array:Cd,boolean:function(c){const i=c.value,l=c.key,f=_n(i);return f!=="boolean"?[new yt(l,i,`boolean expected, ${f} found`)]:[]},number:Ms,color:ns,constants:La,enum:yc,filter:rs,function:Cs,layer:vl,object:Na,source:_l,light:Ai,sky:hh,terrain:Bf,projection:function(c){const i=c.value,l=c.styleSpec,f=l.projection,v=c.style,S=_n(i);if(i===void 0)return[];if(S!=="object")return[new yt("projection",i,`object expected, ${S} found`)];let T=[];for(const P in i)T=T.concat(f[P]?c.validateSpec({key:P,value:i[P],valueSpec:f[P],style:v,styleSpec:l}):[new yt(P,i[P],`unknown property "${P}"`)]);return T},projectionDefinition:function(c){const i=c.key;let l=c.value;l=l instanceof String?l.valueOf():l;const f=_n(l);return f!=="array"||(function(v){return Array.isArray(v)&&v.length===3&&typeof v[0]=="string"&&typeof v[1]=="string"&&typeof v[2]=="number"})(l)||(function(v){return!!["interpolate","step","literal"].includes(v[0])})(l)?["array","string"].includes(f)?[]:[new yt(i,l,`projection expected, invalid type "${f}" found`)]:[new yt(i,l,`projection expected, invalid array ${JSON.stringify(l)} found`)]},string:oo,formatted:function(c){return oo(c).length===0?[]:Es(c)},resolvedImage:function(c){return oo(c).length===0?[]:Es(c)},padding:function(c){const i=c.key,l=c.value;if(_n(l)==="array"){if(l.length<1||l.length>4)return[new yt(i,l,`padding requires 1 to 4 values; ${l.length} values found`)];const f={type:"number"};let v=[];for(let S=0;S<l.length;S++)v=v.concat(c.validateSpec({key:`${i}[${S}]`,value:l[S],validateSpec:c.validateSpec,valueSpec:f}));return v}return Ms({key:i,value:l,valueSpec:{}})},numberArray:function(c){const i=c.key,l=c.value;if(_n(l)==="array"){const f={type:"number"};if(l.length<1)return[new yt(i,l,"array length at least 1 expected, length 0 found")];let v=[];for(let S=0;S<l.length;S++)v=v.concat(c.validateSpec({key:`${i}[${S}]`,value:l[S],validateSpec:c.validateSpec,valueSpec:f}));return v}return Ms({key:i,value:l,valueSpec:{}})},colorArray:function(c){const i=c.key,l=c.value;if(_n(l)==="array"){if(l.length<1)return[new yt(i,l,"array length at least 1 expected, length 0 found")];let f=[];for(let v=0;v<l.length;v++)f=f.concat(ns({key:`${i}[${v}]`,value:l[v]}));return f}return ns({key:i,value:l})},variableAnchorOffsetCollection:function(c){const i=c.key,l=c.value,f=_n(l),v=c.styleSpec;if(f!=="array"||l.length<1||l.length%2!=0)return[new yt(i,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let S=[];for(let T=0;T<l.length;T+=2)S=S.concat(yc({key:`${i}[${T}]`,value:l[T],valueSpec:v.layout_symbol["text-anchor"]})),S=S.concat(Cd({key:`${i}[${T+1}]`,value:l[T+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:v}));return S},sprite:au,state:ou};function dr(c){const i=c.value,l=c.valueSpec,f=c.styleSpec;return c.validateSpec=dr,l.expression&&Td(Pr(i))?Cs(c):l.expression&&ru(ga(i))?Es(c):l.type&&ya[l.type]?ya[l.type](c):Na(To({},c,{valueSpec:l.type?f[l.type]:l}))}function dh(c){const i=c.value,l=c.key,f=oo(c);return f.length||(i.indexOf("{fontstack}")===-1&&f.push(new yt(l,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&f.push(new yt(l,i,'"glyphs" url must include a "{range}" token'))),f}function Vi(c,i=ke){let l=[];return l=l.concat(dr({key:"",value:c,valueSpec:i.$root,styleSpec:i,style:c,validateSpec:dr,objectElementValidators:{glyphs:dh,"*":()=>[]}})),c.constants&&(l=l.concat(La({key:"constants",value:c.constants}))),bl(l)}function aa(c){return function(i){return c(Object.assign({},i,{validateSpec:dr}))}}function bl(c){return[].concat(c).sort(((i,l)=>i.line-l.line))}function ji(c){return function(...i){return bl(c.apply(this,i))}}Vi.source=ji(aa(_l)),Vi.sprite=ji(aa(au)),Vi.glyphs=ji(aa(dh)),Vi.light=ji(aa(Ai)),Vi.sky=ji(aa(hh)),Vi.terrain=ji(aa(Bf)),Vi.state=ji(aa(ou)),Vi.layer=ji(aa(vl)),Vi.filter=ji(aa(rs)),Vi.paintProperty=ji(aa(ko)),Vi.layoutProperty=ji(aa(ch));const Ba=Vi,jg=Ba.light,Ed=Ba.sky,Lg=Ba.paintProperty,su=Ba.layoutProperty;function xl(c,i){let l=!1;if(i&&i.length)for(const f of i)c.fire(new Mt(new Error(f.message))),l=!0;return l}class vc{constructor(i,l,f){const v=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;const T=new Int32Array(this.arrayBuffer);i=T[0],this.d=(l=T[1])+2*(f=T[2]);for(let k=0;k<this.d*this.d;k++){const N=T[3+k],B=T[3+k+1];v.push(N===B?null:T.subarray(N,B))}const P=T[3+v.length+1];this.keys=T.subarray(T[3+v.length],P),this.bboxes=T.subarray(P),this.insert=this._insertReadonly}else{this.d=l+2*f;for(let T=0;T<this.d*this.d;T++)v.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=i,this.padding=f,this.scale=l/i,this.uid=0;const S=f/l*i;this.min=-S,this.max=i+S}insert(i,l,f,v,S){this._forEachCell(l,f,v,S,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(l),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(S)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,l,f,v,S,T){this.cells[S].push(T)}query(i,l,f,v,S){const T=this.min,P=this.max;if(i<=T&&l<=T&&P<=f&&P<=v&&!S)return Array.prototype.slice.call(this.keys);{const k=[];return this._forEachCell(i,l,f,v,this._queryCell,k,{},S),k}}_queryCell(i,l,f,v,S,T,P,k){const N=this.cells[S];if(N!==null){const B=this.keys,q=this.bboxes;for(let K=0;K<N.length;K++){const J=N[K];if(P[J]===void 0){const re=4*J;(k?k(q[re+0],q[re+1],q[re+2],q[re+3]):i<=q[re+2]&&l<=q[re+3]&&f>=q[re+0]&&v>=q[re+1])?(P[J]=!0,T.push(B[J])):P[J]=!1}}}}_forEachCell(i,l,f,v,S,T,P,k){const N=this._convertToCellCoord(i),B=this._convertToCellCoord(l),q=this._convertToCellCoord(f),K=this._convertToCellCoord(v);for(let J=N;J<=q;J++)for(let re=B;re<=K;re++){const se=this.d*re+J;if((!k||k(this._convertFromCellCoord(J),this._convertFromCellCoord(re),this._convertFromCellCoord(J+1),this._convertFromCellCoord(re+1)))&&S.call(this,i,l,f,v,se,T,P,k))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const i=this.cells,l=3+this.cells.length+1+1;let f=0;for(let T=0;T<this.cells.length;T++)f+=this.cells[T].length;const v=new Int32Array(l+f+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;let S=l;for(let T=0;T<i.length;T++){const P=i[T];v[3+T]=S,v.set(P,S),S+=P.length}return v[3+i.length]=S,v.set(this.keys,S),S+=this.keys.length,v[3+i.length+1]=S,v.set(this.bboxes,S),S+=this.bboxes.length,v.buffer}static serialize(i,l){const f=i.toArrayBuffer();return l&&l.push(f),{buffer:f}}static deserialize(i){return new vc(i.buffer)}}const so={};function It(c,i,l={}){if(so[c])throw new Error(`${c} is already registered.`);Object.defineProperty(i,"_classRegistryKey",{value:c,writeable:!1}),so[c]={klass:i,omit:l.omit||[],shallow:l.shallow||[]}}It("Object",Object),It("Set",Set),It("TransferableGridIndex",vc),It("Color",xn),It("Error",Error),It("AJAXError",Me),It("ResolvedImage",ta),It("StylePropertyFunction",mc),It("StyleExpression",Md,{omit:["_evaluator"]}),It("ZoomDependentExpression",Ss),It("ZoomConstantExpression",ia),It("CompoundExpression",Ia,{omit:["_evaluate"]});for(const c in nu)nu[c]._classRegistryKey||It(`Expression_${c}`,nu[c]);function _c(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function fh(c){return c.$name||c.constructor._classRegistryKey}function wl(c){return!(function(i){if(i===null||typeof i!="object")return!1;const l=fh(i);return!(!l||l==="Object")})(c)&&(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error||_c(c)||Oi(c)||ArrayBuffer.isView(c)||c instanceof ImageData)}function Sl(c,i){if(wl(c))return(_c(c)||Oi(c))&&i&&i.push(c),ArrayBuffer.isView(c)&&i&&i.push(c.buffer),c instanceof ImageData&&i&&i.push(c.data.buffer),c;if(Array.isArray(c)){const S=[];for(const T of c)S.push(Sl(T,i));return S}if(typeof c!="object")throw new Error("can't serialize object of type "+typeof c);const l=fh(c);if(!l)throw new Error(`can't serialize object of unregistered class ${c.constructor.name}`);if(!so[l])throw new Error(`${l} is not registered.`);const{klass:f}=so[l],v=f.serialize?f.serialize(c,i):{};if(f.serialize){if(i&&v===i[i.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const S in c){if(!c.hasOwnProperty(S)||so[l].omit.indexOf(S)>=0)continue;const T=c[S];v[S]=so[l].shallow.indexOf(S)>=0?T:Sl(T,i)}c instanceof Error&&(v.message=c.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(v.$name=l),v}function Tl(c){if(wl(c))return c;if(Array.isArray(c))return c.map(Tl);if(typeof c!="object")throw new Error("can't deserialize object of type "+typeof c);const i=fh(c)||"Object";if(!so[i])throw new Error(`can't deserialize unregistered class ${i}`);const{klass:l}=so[i];if(!l)throw new Error(`can't deserialize unregistered class ${i}`);if(l.deserialize)return l.deserialize(c);const f=Object.create(l.prototype);for(const v of Object.keys(c)){if(v==="$name")continue;const S=c[v];f[v]=so[i].shallow.indexOf(v)>=0?S:Tl(S)}return f}class bc{constructor(){this.first=!0}update(i,l){const f=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=l),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=f,!0))}}const gn={"Latin-1 Supplement":c=>c>=128&&c<=255,"Hangul Jamo":c=>c>=4352&&c<=4607,Khmer:c=>c>=6016&&c<=6143,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Kanbun:c=>c>=12688&&c<=12703,"CJK Strokes":c=>c>=12736&&c<=12783,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Hangul Syllables":c=>c>=44032&&c<=55215,"Private Use Area":c=>c>=57344&&c<=63743,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function is(c){for(const i of c)if(Cl(i.charCodeAt(0)))return!0;return!1}function Ff(c){for(const i of c)if(!lu(i.charCodeAt(0)))return!1;return!0}function ph(c){const i=c.map((l=>{try{return new RegExp(`\\p{sc=${l}}`,"u").source}catch{return null}})).filter((l=>l));return new RegExp(i.join("|"),"u")}const Ml=ph(["Arab","Dupl","Mong","Ougr","Syrc"]);function lu(c){return!Ml.test(String.fromCodePoint(c))}const mh=ph(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Cl(c){return!(c!==746&&c!==747&&(c<4352||!(gn["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||gn["CJK Compatibility"](c)||gn["CJK Strokes"](c)||!(!gn["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||gn["Enclosed CJK Letters and Months"](c)||gn["Ideographic Description Characters"](c)||gn.Kanbun(c)||gn.Katakana(c)&&c!==12540||!(!gn["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!gn["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||gn["Vertical Forms"](c)||gn["Yijing Hexagram Symbols"](c)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(c))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(c))||mh.test(String.fromCodePoint(c)))))}function gh(c){return!(Cl(c)||(function(i){return!!(gn["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||gn["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||gn["Letterlike Symbols"](i)||gn["Number Forms"](i)||gn["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||gn["Control Pictures"](i)&&i!==9251||gn["Optical Character Recognition"](i)||gn["Enclosed Alphanumerics"](i)||gn["Geometric Shapes"](i)||gn["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||gn["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||gn["CJK Symbols and Punctuation"](i)||gn.Katakana(i)||gn["Private Use Area"](i)||gn["CJK Compatibility Forms"](i)||gn["Small Form Variants"](i)||gn["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)})(c))}const Uf=ph(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function El(c){return Uf.test(String.fromCodePoint(c))}function $f(c,i){return!(!i&&El(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||gn.Khmer(c))}function Ps(c){for(const i of c)if(El(i.charCodeAt(0)))return!0;return!1}const as=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(c){this.pluginStatus=c.pluginStatus,this.pluginURL=c.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(c){if(as.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=c.applyArabicShaping,this.processBidirectionalText=c.processBidirectionalText,this.processStyledBidirectionalText=c.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(c,i){return s(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(c.pluginStatus!=="loading")return this.setState(c),c;const l=c.pluginURL,f=new Promise((S=>{this.loadScriptResolve=S}));i(l);const v=new Promise((S=>setTimeout((()=>S()),this.TIMEOUT)));if(yield Promise.race([f,v]),this.isParsed()){const S={pluginStatus:"loaded",pluginURL:l};return this.setState(S),S}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${l}`)}))}};class er{constructor(i,l){this.isSupportedScript=Ds,this.zoom=i,l?(this.now=l.now||0,this.fadeDuration=l.fadeDuration||0,this.zoomHistory=l.zoomHistory||new bc,this.transition=l.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new bc,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const i=this.zoom,l=i-Math.floor(i),f=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*l}}}function Ds(c){return(function(i,l){for(const f of i)if(!$f(f.charCodeAt(0),l))return!1;return!0})(c,as.getRTLTextPluginStatus()==="loaded")}class lo{constructor(i,l,f){this.property=i,this.value=l,this.expression=(function(v,S,T){if(Td(v))return new mc(v,S);if(ru(v)){const P=gl(v,S,T);if(P.result==="error")throw new Error(P.value.map((k=>`${k.key}: ${k.message}`)).join(", "));return P.value}{let P=v;return S.type==="color"&&typeof v=="string"?P=xn.parse(v):S.type!=="padding"||typeof v!="number"&&!Array.isArray(v)?S.type!=="numberArray"||typeof v!="number"&&!Array.isArray(v)?S.type!=="colorArray"||typeof v!="string"&&!Array.isArray(v)?S.type==="variableAnchorOffsetCollection"&&Array.isArray(v)?P=Lr.parse(v):S.type==="projectionDefinition"&&typeof v=="string"&&(P=Ti.parse(v)):P=fi.parse(v):P=di.parse(v):P=Fr.parse(v),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>P}}})(l===void 0?i.specification.default:l,i.specification,f)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(i,l,f){return this.property.possiblyEvaluate(this,i,l,f)}}class Al{constructor(i,l){this.property=i,this.value=new lo(i,void 0,l)}transitioned(i,l){return new xc(this.property,this.value,l,nn({},i.transition,this.transition),i.now)}untransitioned(){return new xc(this.property,this.value,null,{},0)}}class yh{constructor(i,l){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues),this._globalState=l}getValue(i){return ot(this._values[i].value.value)}setValue(i,l){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new Al(this._values[i].property,this._globalState)),this._values[i].value=new lo(this._values[i].property,l===null?void 0:ot(l),this._globalState)}getTransition(i){return ot(this._values[i].transition)}setTransition(i,l){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new Al(this._values[i].property,this._globalState)),this._values[i].transition=ot(l)||void 0}serialize(){const i={};for(const l of Object.keys(this._values)){const f=this.getValue(l);f!==void 0&&(i[l]=f);const v=this.getTransition(l);v!==void 0&&(i[`${l}-transition`]=v)}return i}transitioned(i,l){const f=new cu(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].transitioned(i,l._values[v]);return f}untransitioned(){const i=new cu(this._properties);for(const l of Object.keys(this._values))i._values[l]=this._values[l].untransitioned();return i}}class xc{constructor(i,l,f,v,S){this.property=i,this.value=l,this.begin=S+v.delay||0,this.end=this.begin+v.duration||0,i.specification.transition&&(v.delay||v.duration)&&(this.prior=f)}possiblyEvaluate(i,l,f){const v=i.now||0,S=this.value.possiblyEvaluate(i,l,f),T=this.prior;if(T){if(v>this.end)return this.prior=null,S;if(this.value.isDataDriven())return this.prior=null,S;if(v<this.begin)return T.possiblyEvaluate(i,l,f);{const P=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(T.possiblyEvaluate(i,l,f),S,_t(P))}}return S}}class cu{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,l,f){const v=new vh(this._properties);for(const S of Object.keys(this._values))v._values[S]=this._values[S].possiblyEvaluate(i,l,f);return v}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class wc{constructor(i,l){this._properties=i,this._values=Object.create(i.defaultPropertyValues),this._globalState=l}hasValue(i){return this._values[i].value!==void 0}getValue(i){return ot(this._values[i].value)}setValue(i,l){this._values[i]=new lo(this._values[i].property,l===null?void 0:ot(l),this._globalState)}serialize(){const i={};for(const l of Object.keys(this._values)){const f=this.getValue(l);f!==void 0&&(i[l]=f)}return i}possiblyEvaluate(i,l,f){const v=new vh(this._properties);for(const S of Object.keys(this._values))v._values[S]=this._values[S].possiblyEvaluate(i,l,f);return v}}class Oo{constructor(i,l,f){this.property=i,this.value=l,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,l,f,v){return this.property.evaluate(this.value,this.parameters,i,l,f,v)}}class vh{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Bt{constructor(i){this.specification=i}possiblyEvaluate(i,l){if(i.isDataDriven())throw new Error("Value should not be data driven");return i.expression.evaluate(l)}interpolate(i,l,f){const v=ro[this.specification.type];return v?v(i,l,f):i}}class Kt{constructor(i,l){this.specification=i,this.overrides=l}possiblyEvaluate(i,l,f,v){return new Oo(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(l,null,{},f,v)}:i.expression,l)}interpolate(i,l,f){if(i.value.kind!=="constant"||l.value.kind!=="constant")return i;if(i.value.value===void 0||l.value.value===void 0)return new Oo(this,{kind:"constant",value:void 0},i.parameters);const v=ro[this.specification.type];if(v){const S=v(i.value.value,l.value.value,f);return new Oo(this,{kind:"constant",value:S},i.parameters)}return i}evaluate(i,l,f,v,S,T){return i.kind==="constant"?i.value:i.evaluate(l,f,v,S,T)}}class Sc extends Kt{possiblyEvaluate(i,l,f,v){if(i.value===void 0)return new Oo(this,{kind:"constant",value:void 0},l);if(i.expression.kind==="constant"){const S=i.expression.evaluate(l,null,{},f,v),T=i.property.specification.type==="resolvedImage"&&typeof S!="string"?S.name:S,P=this._calculate(T,T,T,l);return new Oo(this,{kind:"constant",value:P},l)}if(i.expression.kind==="camera"){const S=this._calculate(i.expression.evaluate({zoom:l.zoom-1}),i.expression.evaluate({zoom:l.zoom}),i.expression.evaluate({zoom:l.zoom+1}),l);return new Oo(this,{kind:"constant",value:S},l)}return new Oo(this,i.expression,l)}evaluate(i,l,f,v,S,T){if(i.kind==="source"){const P=i.evaluate(l,f,v,S,T);return this._calculate(P,P,P,l)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(l.zoom)-1},f,v),i.evaluate({zoom:Math.floor(l.zoom)},f,v),i.evaluate({zoom:Math.floor(l.zoom)+1},f,v),l):i.value}_calculate(i,l,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:f,to:l}}interpolate(i){return i}}class Ad{constructor(i){this.specification=i}possiblyEvaluate(i,l,f,v){if(i.value!==void 0){if(i.expression.kind==="constant"){const S=i.expression.evaluate(l,null,{},f,v);return this._calculate(S,S,S,l)}return this._calculate(i.expression.evaluate(new er(Math.floor(l.zoom-1),l)),i.expression.evaluate(new er(Math.floor(l.zoom),l)),i.expression.evaluate(new er(Math.floor(l.zoom+1),l)),l)}}_calculate(i,l,f,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:f,to:l}}interpolate(i){return i}}class uu{constructor(i){this.specification=i}possiblyEvaluate(i,l,f,v){return!!i.expression.evaluate(l,null,{},f,v)}interpolate(){return!1}}class fr{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in i){const f=i[l];f.specification.overridable&&this.overridableProperties.push(l);const v=this.defaultPropertyValues[l]=new lo(f,void 0,void 0),S=this.defaultTransitionablePropertyValues[l]=new Al(f,void 0);this.defaultTransitioningPropertyValues[l]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=v.possiblyEvaluate({})}}}It("DataDrivenProperty",Kt),It("DataConstantProperty",Bt),It("CrossFadedDataDrivenProperty",Sc),It("CrossFadedProperty",Ad),It("ColorRampProperty",uu);const Fa="-transition";class Pi extends Lt{constructor(i,l,f){if(super(),this.id=i.id,this.type=i.type,this._globalState=f,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter,this._featureFilter=ma(i.filter,f)),l.layout&&(this._unevaluatedLayout=new wc(l.layout,f)),l.paint)){this._transitionablePaint=new yh(l.paint,f);for(const v in i.paint)this.setPaintProperty(v,i.paint[v],{validate:!1});for(const v in i.layout)this.setLayoutProperty(v,i.layout[v],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new vh(l.paint)}}setFilter(i){this.filter=i,this._featureFilter=ma(i,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}getLayoutAffectingGlobalStateRefs(){const i=new Set;if(this._unevaluatedLayout)for(const l in this._unevaluatedLayout._values){const f=this._unevaluatedLayout._values[l];for(const v of f.getGlobalStateRefs())i.add(v)}for(const l of this._featureFilter.getGlobalStateRefs())i.add(l);return i}getPaintAffectingGlobalStateRefs(){var i;const l=new globalThis.Map;if(this._transitionablePaint)for(const f in this._transitionablePaint._values){const v=this._transitionablePaint._values[f].value;for(const S of v.getGlobalStateRefs()){const T=(i=l.get(S))!==null&&i!==void 0?i:[];T.push({name:f,value:v.value}),l.set(S,T)}}return l}setLayoutProperty(i,l,f={}){l!=null&&this._validate(su,`layers.${this.id}.layout.${i}`,i,l,f)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,l):this.visibility=l)}getPaintProperty(i){return i.endsWith(Fa)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,l,f={}){if(l!=null&&this._validate(Lg,`layers.${this.id}.paint.${i}`,i,l,f))return!1;if(i.endsWith(Fa))return this._transitionablePaint.setTransition(i.slice(0,-11),l||void 0),!1;{const v=this._transitionablePaint._values[i],S=v.property.specification["property-type"]==="cross-faded-data-driven",T=v.value.isDataDriven(),P=v.value;this._transitionablePaint.setValue(i,l),this._handleSpecialPaintPropertyUpdate(i);const k=this._transitionablePaint._values[i].value;return k.isDataDriven()||T||S||this._handleOverridablePaintPropertyUpdate(i,P,k)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,l,f){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,l){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,l)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),Ft(i,((l,f)=>!(l===void 0||f==="layout"&&!Object.keys(l).length||f==="paint"&&!Object.keys(l).length)))}_validate(i,l,f,v,S={}){return(!S||S.validate!==!1)&&xl(this,i.call(Ba,{key:l,layerType:this.type,objectKey:f,value:v,styleSpec:ke,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const l=this.paint.get(i);if(l instanceof Oo&&ao(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}let ks;var lm={get paint(){return ks=ks||new fr({"raster-opacity":new Bt(ke.paint_raster["raster-opacity"]),"raster-hue-rotate":new Bt(ke.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Bt(ke.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Bt(ke.paint_raster["raster-brightness-max"]),"raster-saturation":new Bt(ke.paint_raster["raster-saturation"]),"raster-contrast":new Bt(ke.paint_raster["raster-contrast"]),"raster-resampling":new Bt(ke.paint_raster["raster-resampling"]),"raster-fade-duration":new Bt(ke.paint_raster["raster-fade-duration"])})}};class Pl extends Pi{constructor(i,l){super(i,lm,l)}}const Ua={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class vr{constructor(i,l){this._structArray=i,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class pr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,l){return i._trim(),l&&(i.isTransferred=!0,l.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const l=Object.create(this.prototype);return l.arrayBuffer=i.arrayBuffer,l.length=i.length,l.capacity=i.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function tr(c,i=1){let l=0,f=0;return{members:c.map((v=>{const S=Ua[v.type].BYTES_PER_ELEMENT,T=l=dn(l,Math.max(i,S)),P=v.components||1;return f=Math.max(f,S),l+=S*P,{name:v.name,type:v.type,components:P,offset:T}})),size:dn(l,Math.max(f,i)),alignment:i}}function dn(c,i){return Math.ceil(c/i)*i}class Gn extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l){const f=this.length;return this.resize(f+1),this.emplace(f,i,l)}emplace(i,l,f){const v=2*i;return this.int16[v+0]=l,this.int16[v+1]=f,i}}Gn.prototype.bytesPerElement=4,It("StructArrayLayout2i4",Gn);class wr extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,f){const v=this.length;return this.resize(v+1),this.emplace(v,i,l,f)}emplace(i,l,f,v){const S=3*i;return this.int16[S+0]=l,this.int16[S+1]=f,this.int16[S+2]=v,i}}wr.prototype.bytesPerElement=6,It("StructArrayLayout3i6",wr);class Tc extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,f,v){const S=this.length;return this.resize(S+1),this.emplace(S,i,l,f,v)}emplace(i,l,f,v,S){const T=4*i;return this.int16[T+0]=l,this.int16[T+1]=f,this.int16[T+2]=v,this.int16[T+3]=S,i}}Tc.prototype.bytesPerElement=8,It("StructArrayLayout4i8",Tc);class os extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,f,v,S,T){const P=this.length;return this.resize(P+1),this.emplace(P,i,l,f,v,S,T)}emplace(i,l,f,v,S,T,P){const k=6*i;return this.int16[k+0]=l,this.int16[k+1]=f,this.int16[k+2]=v,this.int16[k+3]=S,this.int16[k+4]=T,this.int16[k+5]=P,i}}os.prototype.bytesPerElement=12,It("StructArrayLayout2i4i12",os);class Os extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,f,v,S,T){const P=this.length;return this.resize(P+1),this.emplace(P,i,l,f,v,S,T)}emplace(i,l,f,v,S,T,P){const k=4*i,N=8*i;return this.int16[k+0]=l,this.int16[k+1]=f,this.uint8[N+4]=v,this.uint8[N+5]=S,this.uint8[N+6]=T,this.uint8[N+7]=P,i}}Os.prototype.bytesPerElement=8,It("StructArrayLayout2i4ub8",Os);class Io extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l){const f=this.length;return this.resize(f+1),this.emplace(f,i,l)}emplace(i,l,f){const v=2*i;return this.float32[v+0]=l,this.float32[v+1]=f,i}}Io.prototype.bytesPerElement=8,It("StructArrayLayout2f8",Io);class zo extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,f,v,S,T,P,k,N,B){const q=this.length;return this.resize(q+1),this.emplace(q,i,l,f,v,S,T,P,k,N,B)}emplace(i,l,f,v,S,T,P,k,N,B,q){const K=10*i;return this.uint16[K+0]=l,this.uint16[K+1]=f,this.uint16[K+2]=v,this.uint16[K+3]=S,this.uint16[K+4]=T,this.uint16[K+5]=P,this.uint16[K+6]=k,this.uint16[K+7]=N,this.uint16[K+8]=B,this.uint16[K+9]=q,i}}zo.prototype.bytesPerElement=20,It("StructArrayLayout10ui20",zo);class Dl extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,f,v,S,T,P,k){const N=this.length;return this.resize(N+1),this.emplace(N,i,l,f,v,S,T,P,k)}emplace(i,l,f,v,S,T,P,k,N){const B=8*i;return this.uint16[B+0]=l,this.uint16[B+1]=f,this.uint16[B+2]=v,this.uint16[B+3]=S,this.uint16[B+4]=T,this.uint16[B+5]=P,this.uint16[B+6]=k,this.uint16[B+7]=N,i}}Dl.prototype.bytesPerElement=16,It("StructArrayLayout8ui16",Dl);class Pd extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,f,v,S,T,P,k,N,B,q,K){const J=this.length;return this.resize(J+1),this.emplace(J,i,l,f,v,S,T,P,k,N,B,q,K)}emplace(i,l,f,v,S,T,P,k,N,B,q,K,J){const re=12*i;return this.int16[re+0]=l,this.int16[re+1]=f,this.int16[re+2]=v,this.int16[re+3]=S,this.uint16[re+4]=T,this.uint16[re+5]=P,this.uint16[re+6]=k,this.uint16[re+7]=N,this.int16[re+8]=B,this.int16[re+9]=q,this.int16[re+10]=K,this.int16[re+11]=J,i}}Pd.prototype.bytesPerElement=24,It("StructArrayLayout4i4ui4i24",Pd);class sr extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,f){const v=this.length;return this.resize(v+1),this.emplace(v,i,l,f)}emplace(i,l,f,v){const S=3*i;return this.float32[S+0]=l,this.float32[S+1]=f,this.float32[S+2]=v,i}}sr.prototype.bytesPerElement=12,It("StructArrayLayout3f12",sr);class _h extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint32[1*i+0]=l,i}}_h.prototype.bytesPerElement=4,It("StructArrayLayout1ul4",_h);class bh extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,f,v,S,T,P,k,N){const B=this.length;return this.resize(B+1),this.emplace(B,i,l,f,v,S,T,P,k,N)}emplace(i,l,f,v,S,T,P,k,N,B){const q=10*i,K=5*i;return this.int16[q+0]=l,this.int16[q+1]=f,this.int16[q+2]=v,this.int16[q+3]=S,this.int16[q+4]=T,this.int16[q+5]=P,this.uint32[K+3]=k,this.uint16[q+8]=N,this.uint16[q+9]=B,i}}bh.prototype.bytesPerElement=20,It("StructArrayLayout6i1ul2ui20",bh);class xh extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,f,v,S,T){const P=this.length;return this.resize(P+1),this.emplace(P,i,l,f,v,S,T)}emplace(i,l,f,v,S,T,P){const k=6*i;return this.int16[k+0]=l,this.int16[k+1]=f,this.int16[k+2]=v,this.int16[k+3]=S,this.int16[k+4]=T,this.int16[k+5]=P,i}}xh.prototype.bytesPerElement=12,It("StructArrayLayout2i2i2i12",xh);class Dd extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,f,v,S){const T=this.length;return this.resize(T+1),this.emplace(T,i,l,f,v,S)}emplace(i,l,f,v,S,T){const P=4*i,k=8*i;return this.float32[P+0]=l,this.float32[P+1]=f,this.float32[P+2]=v,this.int16[k+6]=S,this.int16[k+7]=T,i}}Dd.prototype.bytesPerElement=16,It("StructArrayLayout2f1f2i16",Dd);class b extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,f,v,S,T){const P=this.length;return this.resize(P+1),this.emplace(P,i,l,f,v,S,T)}emplace(i,l,f,v,S,T,P){const k=16*i,N=4*i,B=8*i;return this.uint8[k+0]=l,this.uint8[k+1]=f,this.float32[N+1]=v,this.float32[N+2]=S,this.int16[B+6]=T,this.int16[B+7]=P,i}}b.prototype.bytesPerElement=16,It("StructArrayLayout2ub2f2i16",b);class n extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,f){const v=this.length;return this.resize(v+1),this.emplace(v,i,l,f)}emplace(i,l,f,v){const S=3*i;return this.uint16[S+0]=l,this.uint16[S+1]=f,this.uint16[S+2]=v,i}}n.prototype.bytesPerElement=6,It("StructArrayLayout3ui6",n);class u extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,f,v,S,T,P,k,N,B,q,K,J,re,se,ue,ge){const Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,i,l,f,v,S,T,P,k,N,B,q,K,J,re,se,ue,ge)}emplace(i,l,f,v,S,T,P,k,N,B,q,K,J,re,se,ue,ge,Ne){const Te=24*i,Ee=12*i,Ze=48*i;return this.int16[Te+0]=l,this.int16[Te+1]=f,this.uint16[Te+2]=v,this.uint16[Te+3]=S,this.uint32[Ee+2]=T,this.uint32[Ee+3]=P,this.uint32[Ee+4]=k,this.uint16[Te+10]=N,this.uint16[Te+11]=B,this.uint16[Te+12]=q,this.float32[Ee+7]=K,this.float32[Ee+8]=J,this.uint8[Ze+36]=re,this.uint8[Ze+37]=se,this.uint8[Ze+38]=ue,this.uint32[Ee+10]=ge,this.int16[Te+22]=Ne,i}}u.prototype.bytesPerElement=48,It("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",u);class g extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,f,v,S,T,P,k,N,B,q,K,J,re,se,ue,ge,Ne,Te,Ee,Ze,et,gt,Ot,Ct,Dt,Zt,Pt){const kt=this.length;return this.resize(kt+1),this.emplace(kt,i,l,f,v,S,T,P,k,N,B,q,K,J,re,se,ue,ge,Ne,Te,Ee,Ze,et,gt,Ot,Ct,Dt,Zt,Pt)}emplace(i,l,f,v,S,T,P,k,N,B,q,K,J,re,se,ue,ge,Ne,Te,Ee,Ze,et,gt,Ot,Ct,Dt,Zt,Pt,kt){const lt=32*i,tn=16*i;return this.int16[lt+0]=l,this.int16[lt+1]=f,this.int16[lt+2]=v,this.int16[lt+3]=S,this.int16[lt+4]=T,this.int16[lt+5]=P,this.int16[lt+6]=k,this.int16[lt+7]=N,this.uint16[lt+8]=B,this.uint16[lt+9]=q,this.uint16[lt+10]=K,this.uint16[lt+11]=J,this.uint16[lt+12]=re,this.uint16[lt+13]=se,this.uint16[lt+14]=ue,this.uint16[lt+15]=ge,this.uint16[lt+16]=Ne,this.uint16[lt+17]=Te,this.uint16[lt+18]=Ee,this.uint16[lt+19]=Ze,this.uint16[lt+20]=et,this.uint16[lt+21]=gt,this.uint16[lt+22]=Ot,this.uint32[tn+12]=Ct,this.float32[tn+13]=Dt,this.float32[tn+14]=Zt,this.uint16[lt+30]=Pt,this.uint16[lt+31]=kt,i}}g.prototype.bytesPerElement=64,It("StructArrayLayout8i15ui1ul2f2ui64",g);class _ extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.float32[1*i+0]=l,i}}_.prototype.bytesPerElement=4,It("StructArrayLayout1f4",_);class x extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,f){const v=this.length;return this.resize(v+1),this.emplace(v,i,l,f)}emplace(i,l,f,v){const S=3*i;return this.uint16[6*i+0]=l,this.float32[S+1]=f,this.float32[S+2]=v,i}}x.prototype.bytesPerElement=12,It("StructArrayLayout1ui2f12",x);class E extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,f){const v=this.length;return this.resize(v+1),this.emplace(v,i,l,f)}emplace(i,l,f,v){const S=4*i;return this.uint32[2*i+0]=l,this.uint16[S+2]=f,this.uint16[S+3]=v,i}}E.prototype.bytesPerElement=8,It("StructArrayLayout1ul2ui8",E);class I extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l){const f=this.length;return this.resize(f+1),this.emplace(f,i,l)}emplace(i,l,f){const v=2*i;return this.uint16[v+0]=l,this.uint16[v+1]=f,i}}I.prototype.bytesPerElement=4,It("StructArrayLayout2ui4",I);class z extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint16[1*i+0]=l,i}}z.prototype.bytesPerElement=2,It("StructArrayLayout1ui2",z);class U extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,f,v){const S=this.length;return this.resize(S+1),this.emplace(S,i,l,f,v)}emplace(i,l,f,v,S){const T=4*i;return this.float32[T+0]=l,this.float32[T+1]=f,this.float32[T+2]=v,this.float32[T+3]=S,i}}U.prototype.bytesPerElement=16,It("StructArrayLayout4f16",U);class $ extends vr{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new M(this.anchorPointX,this.anchorPointY)}}$.prototype.size=20;class W extends bh{get(i){return new $(this,i)}}It("CollisionBoxArray",W);class Z extends vr{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Z.prototype.size=48;class ee extends u{get(i){return new Z(this,i)}}It("PlacedSymbolArray",ee);class oe extends vr{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}oe.prototype.size=64;class he extends g{get(i){return new oe(this,i)}}It("SymbolInstanceArray",he);class de extends _{getoffsetX(i){return this.float32[1*i+0]}}It("GlyphOffsetArray",de);class pe extends wr{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}It("SymbolLineVertexArray",pe);class ve extends vr{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ve.prototype.size=12;class xe extends x{get(i){return new ve(this,i)}}It("TextAnchorOffsetArray",xe);class be extends vr{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}be.prototype.size=8;class Ce extends E{get(i){return new be(this,i)}}It("FeatureIndexArray",Ce);class De extends Gn{}class we extends Gn{}class Re extends Gn{}class Xe extends os{}class He extends Os{}class We extends Io{}class Ye extends zo{}class wt extends Dl{}class St extends Pd{}class dt extends sr{}class Vt extends _h{}class un extends xh{}class jn extends b{}class Wn extends n{}class Yn extends I{}const mr=tr([{name:"a_pos",components:2,type:"Int16"}],4),{members:lr}=mr;class Cn{constructor(i=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=i}prepareSegment(i,l,f,v){const S=this.segments[this.segments.length-1];return i>Cn.MAX_VERTEX_ARRAY_LENGTH&&Wt(`Max vertices per segment is ${Cn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Cn.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!S||S.vertexLength+i>Cn.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==v?this.createNewSegment(l,f,v):S}createNewSegment(i,l,f){const v={vertexOffset:i.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0,vaos:{}};return f!==void 0&&(v.sortKey=f),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(v),v}getOrCreateLatestSegment(i,l,f){return this.prepareSegment(0,i,l,f)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const i of this.segments)for(const l in i.vaos)i.vaos[l].destroy()}static simpleSegment(i,l,f,v){return new Cn([{vertexOffset:i,primitiveOffset:l,vertexLength:f,primitiveLength:v,vaos:{},sortKey:0}])}}function Sr(c,i){return 256*(c=Ht(Math.floor(c),0,255))+Ht(Math.floor(i),0,255)}Cn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,It("SegmentVector",Cn);const Di=tr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),$r=tr([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var Vr,qi,Is,$a={exports:{}},zs={exports:{}},kl={exports:{}},hu=(function(){if(Is)return $a.exports;Is=1;var c=(Vr||(Vr=1,zs.exports=function(l,f){var v,S,T,P,k,N,B,q;for(S=l.length-(v=3&l.length),T=f,k=3432918353,N=461845907,q=0;q<S;)B=255&l.charCodeAt(q)|(255&l.charCodeAt(++q))<<8|(255&l.charCodeAt(++q))<<16|(255&l.charCodeAt(++q))<<24,++q,T=27492+(65535&(P=5*(65535&(T=(T^=B=(65535&(B=(B=(65535&B)*k+(((B>>>16)*k&65535)<<16)&4294967295)<<15|B>>>17))*N+(((B>>>16)*N&65535)<<16)&4294967295)<<13|T>>>19))+((5*(T>>>16)&65535)<<16)&4294967295))+((58964+(P>>>16)&65535)<<16);switch(B=0,v){case 3:B^=(255&l.charCodeAt(q+2))<<16;case 2:B^=(255&l.charCodeAt(q+1))<<8;case 1:T^=B=(65535&(B=(B=(65535&(B^=255&l.charCodeAt(q)))*k+(((B>>>16)*k&65535)<<16)&4294967295)<<15|B>>>17))*N+(((B>>>16)*N&65535)<<16)&4294967295}return T^=l.length,T=2246822507*(65535&(T^=T>>>16))+((2246822507*(T>>>16)&65535)<<16)&4294967295,T=3266489909*(65535&(T^=T>>>13))+((3266489909*(T>>>16)&65535)<<16)&4294967295,(T^=T>>>16)>>>0}),zs.exports),i=(qi||(qi=1,kl.exports=function(l,f){for(var v,S=l.length,T=f^S,P=0;S>=4;)v=1540483477*(65535&(v=255&l.charCodeAt(P)|(255&l.charCodeAt(++P))<<8|(255&l.charCodeAt(++P))<<16|(255&l.charCodeAt(++P))<<24))+((1540483477*(v>>>16)&65535)<<16),T=1540483477*(65535&T)+((1540483477*(T>>>16)&65535)<<16)^(v=1540483477*(65535&(v^=v>>>24))+((1540483477*(v>>>16)&65535)<<16)),S-=4,++P;switch(S){case 3:T^=(255&l.charCodeAt(P+2))<<16;case 2:T^=(255&l.charCodeAt(P+1))<<8;case 1:T=1540483477*(65535&(T^=255&l.charCodeAt(P)))+((1540483477*(T>>>16)&65535)<<16)}return T=1540483477*(65535&(T^=T>>>13))+((1540483477*(T>>>16)&65535)<<16),(T^=T>>>15)>>>0}),kl.exports);return $a.exports=c,$a.exports.murmur3=c,$a.exports.murmur2=i,$a.exports})(),Mc=C(hu);class ss{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,l,f,v){this.ids.push(Va(i)),this.positions.push(l,f,v)}getPositions(i){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=Va(i);let f=0,v=this.ids.length-1;for(;f<v;){const T=f+v>>1;this.ids[T]>=l?v=T:f=T+1}const S=[];for(;this.ids[f]===l;)S.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return S}static serialize(i,l){const f=new Float64Array(i.ids),v=new Uint32Array(i.positions);return co(f,v,0,f.length-1),l&&l.push(f.buffer,v.buffer),{ids:f,positions:v}}static deserialize(i){const l=new ss;return l.ids=i.ids,l.positions=i.positions,l.indexed=!0,l}}function Va(c){const i=+c;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:Mc(String(c))}function co(c,i,l,f){for(;l<f;){const v=c[l+f>>1];let S=l-1,T=f+1;for(;;){do S++;while(c[S]<v);do T--;while(c[T]>v);if(S>=T)break;Ro(c,S,T),Ro(i,3*S,3*T),Ro(i,3*S+1,3*T+1),Ro(i,3*S+2,3*T+2)}T-l<f-T?(co(c,i,l,T),l=T+1):(co(c,i,T+1,f),f=T)}}function Ro(c,i,l){const f=c[i];c[i]=c[l],c[l]=f}It("FeaturePositionMap",ss);class va{constructor(i,l){this.gl=i.gl,this.location=l}}class Dr extends va{constructor(i,l){super(i,l),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class ai extends va{constructor(i,l){super(i,l),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class _a extends va{constructor(i,l){super(i,l),this.current=xn.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}const ki=new Float32Array(16);function Vf(c){return[Sr(255*c.r,255*c.g),Sr(255*c.b,255*c.a)]}class du{constructor(i,l,f){this.value=i,this.uniformNames=l.map((v=>`u_${v}`)),this.type=f}setUniform(i,l,f){i.set(f.constantOr(this.value))}getBinding(i,l,f){return this.type==="color"?new _a(i,l):new Dr(i,l)}}class jo{constructor(i,l){this.uniformNames=l.map((f=>`u_${f}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=i.tlbr}setConstantDashPositions(i,l){this.dashTo=[0,i.y,i.height,i.width],this.dashFrom=[0,l.y,l.height,l.width]}setUniform(i,l,f,v){let S=null;v==="u_pattern_to"?S=this.patternTo:v==="u_pattern_from"?S=this.patternFrom:v==="u_dasharray_to"?S=this.dashTo:v==="u_dasharray_from"?S=this.dashFrom:v==="u_pixel_ratio_to"?S=this.pixelRatioTo:v==="u_pixel_ratio_from"&&(S=this.pixelRatioFrom),S!==null&&i.set(S)}getBinding(i,l,f){return f.substr(0,9)==="u_pattern"||f.substr(0,12)==="u_dasharray_"?new ai(i,l):new Dr(i,l)}}class Lo{constructor(i,l,f,v){this.expression=i,this.type=f,this.maxValue=0,this.paintVertexAttributes=l.map((S=>({name:`a_${S}`,type:"Float32",components:f==="color"?2:1,offset:0}))),this.paintVertexArray=new v}populatePaintArray(i,l,f){const v=this.paintVertexArray.length,S=this.expression.evaluate(new er(0,f),l,{},f.canonical,[],f.formattedSection);this.paintVertexArray.resize(i),this._setPaintValue(v,i,S)}updatePaintArray(i,l,f,v,S){const T=this.expression.evaluate(new er(0,S),f,v);this._setPaintValue(i,l,T)}_setPaintValue(i,l,f){if(this.type==="color"){const v=Vf(f);for(let S=i;S<l;S++)this.paintVertexArray.emplace(S,v[0],v[1])}else{for(let v=i;v<l;v++)this.paintVertexArray.emplace(v,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ba{constructor(i,l,f,v,S,T){this.expression=i,this.uniformNames=l.map((P=>`u_${P}_t`)),this.type=f,this.useIntegerZoom=v,this.zoom=S,this.maxValue=0,this.paintVertexAttributes=l.map((P=>({name:`a_${P}`,type:"Float32",components:f==="color"?4:2,offset:0}))),this.paintVertexArray=new T}populatePaintArray(i,l,f){const v=this.expression.evaluate(new er(this.zoom,f),l,{},f.canonical,[],f.formattedSection),S=this.expression.evaluate(new er(this.zoom+1,f),l,{},f.canonical,[],f.formattedSection),T=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(T,i,v,S)}updatePaintArray(i,l,f,v,S){const T=this.expression.evaluate(new er(this.zoom,S),f,v),P=this.expression.evaluate(new er(this.zoom+1,S),f,v);this._setPaintValue(i,l,T,P)}_setPaintValue(i,l,f,v){if(this.type==="color"){const S=Vf(f),T=Vf(v);for(let P=i;P<l;P++)this.paintVertexArray.emplace(P,S[0],S[1],T[0],T[1])}else{for(let S=i;S<l;S++)this.paintVertexArray.emplace(S,f,v);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(v))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,l){const f=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,v=Ht(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);i.set(v)}getBinding(i,l,f){return new Dr(i,l)}}class Rs{constructor(i,l,f,v,S,T){this.expression=i,this.type=l,this.useIntegerZoom=f,this.zoom=v,this.layerId=T,this.zoomInPaintVertexArray=new S,this.zoomOutPaintVertexArray=new S}populatePaintArray(i,l,f){const v=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(v,i,this.getPositionIds(l),f)}updatePaintArray(i,l,f,v,S){this._setPaintValues(i,l,this.getPositionIds(f),S)}_setPaintValues(i,l,f,v){const S=this.getPositions(v);if(!S||!f)return;const T=S[f.min],P=S[f.mid],k=S[f.max];if(T&&P&&k)for(let N=i;N<l;N++)this.emplace(this.zoomInPaintVertexArray,N,P,T),this.emplace(this.zoomOutPaintVertexArray,N,P,k)}upload(i){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const l=this.getVertexAttributes();this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,l,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,l,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class js extends Rs{getPositions(i){return i.imagePositions}getPositionIds(i){return i.patterns&&i.patterns[this.layerId]}getVertexAttributes(){return Di.members}emplace(i,l,f,v){i.emplace(l,f.tlbr[0],f.tlbr[1],f.tlbr[2],f.tlbr[3],v.tlbr[0],v.tlbr[1],v.tlbr[2],v.tlbr[3],f.pixelRatio,v.pixelRatio)}}class Cc extends Rs{getPositions(i){return i.dashPositions}getPositionIds(i){return i.dashes&&i.dashes[this.layerId]}getVertexAttributes(){return $r.members}emplace(i,l,f,v){i.emplace(l,0,f.y,f.height,f.width,0,v.y,v.height,v.width)}}class kd{constructor(i,l,f){this.binders={},this._buffers=[];const v=[];for(const S in i.paint._values){if(!f(S))continue;const T=i.paint.get(S);if(!(T instanceof Oo&&ao(T.property.specification)))continue;const P=Od(S,i.type),k=T.value,N=T.property.specification.type,B=T.property.useIntegerZoom,q=T.property.specification["property-type"],K=q==="cross-faded"||q==="cross-faded-data-driven";if(k.kind==="constant")this.binders[S]=K?new jo(k.value,P):new du(k.value,P,N),v.push(`/u_${S}`);else if(k.kind==="source"||K){const J=wh(S,N,"source");this.binders[S]=K?S==="line-dasharray"?new Cc(k,N,B,l,J,i.id):new js(k,N,B,l,J,i.id):new Lo(k,P,N,J),v.push(`/a_${S}`)}else{const J=wh(S,N,"composite");this.binders[S]=new ba(k,P,N,B,l,J),v.push(`/z_${S}`)}}this.cacheKey=v.sort().join("")}getMaxValue(i){const l=this.binders[i];return l instanceof Lo||l instanceof ba?l.maxValue:0}populatePaintArrays(i,l,f){for(const v in this.binders){const S=this.binders[v];(S instanceof Lo||S instanceof ba||S instanceof Rs)&&S.populatePaintArray(i,l,f)}}setConstantPatternPositions(i,l){for(const f in this.binders){const v=this.binders[f];v instanceof jo&&v.setConstantPatternPositions(i,l)}}setConstantDashPositions(i,l){for(const f in this.binders){const v=this.binders[f];v instanceof jo&&v.setConstantDashPositions(i,l)}}updatePaintArrays(i,l,f,v,S){let T=!1;for(const P in i){const k=l.getPositions(P);for(const N of k){const B=f.feature(N.index);for(const q in this.binders){const K=this.binders[q];if((K instanceof Lo||K instanceof ba||K instanceof Rs)&&K.expression.isStateDependent===!0){const J=v.paint.get(q);K.expression=J.value,K.updatePaintArray(N.start,N.end,B,i[P],S),T=!0}}}}return T}defines(){const i=[];for(const l in this.binders){const f=this.binders[l];(f instanceof du||f instanceof jo)&&i.push(...f.uniformNames.map((v=>`#define HAS_UNIFORM_${v}`)))}return i}getBinderAttributes(){const i=[];for(const l in this.binders){const f=this.binders[l];if(f instanceof Lo||f instanceof ba)for(let v=0;v<f.paintVertexAttributes.length;v++)i.push(f.paintVertexAttributes[v].name);else if(f instanceof Rs){const v=f.getVertexAttributes();for(const S of v)i.push(S.name)}}return i}getBinderUniforms(){const i=[];for(const l in this.binders){const f=this.binders[l];if(f instanceof du||f instanceof jo||f instanceof ba)for(const v of f.uniformNames)i.push(v)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,l){const f=[];for(const v in this.binders){const S=this.binders[v];if(S instanceof du||S instanceof jo||S instanceof ba){for(const T of S.uniformNames)if(l[T]){const P=S.getBinding(i,l[T],T);f.push({name:T,property:v,binding:P})}}}return f}setUniforms(i,l,f,v){for(const{name:S,property:T,binding:P}of l)this.binders[T].setUniform(P,v,f.get(T),S)}updatePaintBuffers(i){this._buffers=[];for(const l in this.binders){const f=this.binders[l];if(i&&f instanceof Rs){const v=i.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;v&&this._buffers.push(v)}else(f instanceof Lo||f instanceof ba)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(i){for(const l in this.binders){const f=this.binders[l];(f instanceof Lo||f instanceof ba||f instanceof Rs)&&f.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const l=this.binders[i];(l instanceof Lo||l instanceof ba||l instanceof Rs)&&l.destroy()}}}class ls{constructor(i,l,f=()=>!0){this.programConfigurations={};for(const v of i)this.programConfigurations[v.id]=new kd(v,l,f);this.needsUpload=!1,this._featureMap=new ss,this._bufferOffset=0}populatePaintArrays(i,l,f,v){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(i,l,v);l.id!==void 0&&this._featureMap.add(l.id,f,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,l,f,v){for(const S of f)this.needsUpload=this.programConfigurations[S.id].updatePaintArrays(i,this._featureMap,l,S,v)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}function Od(c,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${i}-`,"").replace(/-/g,"_")]}function wh(c,i,l){const f={color:{source:Io,composite:U},number:{source:_,composite:Io}},v=(function(S){return{"line-pattern":{source:Ye,composite:Ye},"fill-pattern":{source:Ye,composite:Ye},"fill-extrusion-pattern":{source:Ye,composite:Ye},"line-dasharray":{source:wt,composite:wt}}[S]})(c);return v&&v[l]||f[i][l]}It("ConstantBinder",du),It("CrossFadedConstantBinder",jo),It("SourceExpressionBinder",Lo),It("CrossFadedPatternBinder",js),It("CrossFadedDasharrayBinder",Cc),It("CompositeExpressionBinder",ba),It("ProgramConfiguration",kd,{omit:["_buffers"]}),It("ProgramConfigurationSet",ls);const Ec=Math.pow(2,14)-1,Ng=-Ec-1;function fu(c){const i=ht/c.extent,l=c.loadGeometry();for(let f=0;f<l.length;f++){const v=l[f];for(let S=0;S<v.length;S++){const T=v[S],P=Math.round(T.x*i),k=Math.round(T.y*i);T.x=Ht(P,Ng,Ec),T.y=Ht(k,Ng,Ec),(P<T.x||P>T.x+1||k<T.y||k>T.y+1)&&Wt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function No(c,i){return{type:c.type,id:c.id,properties:c.properties,geometry:i?fu(c):[]}}const Bg=-32768;function Rv(c,i,l,f,v){c.emplaceBack(Bg+8*i+f,Bg+8*l+v)}class cm{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map((l=>l.id)),this.index=i.index,this.hasDependencies=!1,this.layoutVertexArray=new we,this.indexArray=new Wn,this.segments=new Cn,this.programConfigurations=new ls(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter((l=>l.isStateDependent())).map((l=>l.id))}populate(i,l,f){const v=this.layers[0],S=[];let T=null,P=!1,k=v.type==="heatmap";if(v.type==="circle"){const B=v;T=B.layout.get("circle-sort-key"),P=!T.isConstant(),k=k||B.paint.get("circle-pitch-alignment")==="map"}const N=k?l.subdivisionGranularity.circle:1;for(const{feature:B,id:q,index:K,sourceLayerIndex:J}of i){const re=this.layers[0]._featureFilter.needGeometry,se=No(B,re);if(!this.layers[0]._featureFilter.filter(new er(this.zoom),se,f))continue;const ue=P?T.evaluate(se,{},f):void 0,ge={id:q,properties:B.properties,type:B.type,sourceLayerIndex:J,index:K,geometry:re?se.geometry:fu(B),patterns:{},sortKey:ue};S.push(ge)}P&&S.sort(((B,q)=>B.sortKey-q.sortKey));for(const B of S){const{geometry:q,index:K,sourceLayerIndex:J}=B,re=i[K].feature;this.addFeature(B,q,K,f,N),l.featureIndex.insert(re,q,K,J,this.index)}}update(i,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,{imagePositions:f})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,lr),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,l,f,v,S=1){let T;switch(S){case 1:T=[0,7];break;case 3:T=[0,2,5,7];break;case 5:T=[0,1,3,4,6,7];break;case 7:T=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${S}; valid values are 1, 3, 5, 7.`)}const P=T.length;for(const k of l)for(const N of k){const B=N.x,q=N.y;if(B<0||B>=ht||q<0||q>=ht)continue;const K=this.segments.prepareSegment(P*P,this.layoutVertexArray,this.indexArray,i.sortKey),J=K.vertexLength;for(let re=0;re<P;re++)for(let se=0;se<P;se++)Rv(this.layoutVertexArray,B,q,T[se],T[re]);for(let re=0;re<P-1;re++)for(let se=0;se<P-1;se++){const ue=J+re*P+se,ge=J+(re+1)*P+se;this.indexArray.emplaceBack(ue,ge+1,ue+1),this.indexArray.emplaceBack(ue,ge,ge+1)}K.vertexLength+=P*P,K.primitiveLength+=(P-1)*(P-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,{imagePositions:{},canonical:v})}}function qf(c,i){for(let l=0;l<c.length;l++)if(Sh(i,c[l]))return!0;for(let l=0;l<i.length;l++)if(Sh(c,i[l]))return!0;return!!hm(c,i)}function Gf(c,i,l){return!!Sh(c,i)||!!Hf(i,c,l)}function um(c,i){if(c.length===1)return Gi(i,c[0]);for(let l=0;l<i.length;l++){const f=i[l];for(let v=0;v<f.length;v++)if(Sh(c,f[v]))return!0}for(let l=0;l<c.length;l++)if(Gi(i,c[l]))return!0;for(let l=0;l<i.length;l++)if(hm(c,i[l]))return!0;return!1}function jv(c,i,l){if(c.length>1){if(hm(c,i))return!0;for(let f=0;f<i.length;f++)if(Hf(i[f],c,l))return!0}for(let f=0;f<c.length;f++)if(Hf(c[f],i,l))return!0;return!1}function hm(c,i){if(c.length===0||i.length===0)return!1;for(let l=0;l<c.length-1;l++){const f=c[l],v=c[l+1];for(let S=0;S<i.length-1;S++)if(Fb(f,v,i[S],i[S+1]))return!0}return!1}function Fb(c,i,l,f){return Vn(c,l,f)!==Vn(i,l,f)&&Vn(c,i,l)!==Vn(c,i,f)}function Hf(c,i,l){const f=l*l;if(i.length===1)return c.distSqr(i[0])<f;for(let v=1;v<i.length;v++)if(mi(c,i[v-1],i[v])<f)return!0;return!1}function mi(c,i,l){const f=i.distSqr(l);if(f===0)return c.distSqr(i);const v=((c.x-i.x)*(l.x-i.x)+(c.y-i.y)*(l.y-i.y))/f;return c.distSqr(v<0?i:v>1?l:l.sub(i)._mult(v)._add(i))}function Gi(c,i){let l,f,v,S=!1;for(let T=0;T<c.length;T++){l=c[T];for(let P=0,k=l.length-1;P<l.length;k=P++)f=l[P],v=l[k],f.y>i.y!=v.y>i.y&&i.x<(v.x-f.x)*(i.y-f.y)/(v.y-f.y)+f.x&&(S=!S)}return S}function Sh(c,i){let l=!1;for(let f=0,v=c.length-1;f<c.length;v=f++){const S=c[f],T=c[v];S.y>i.y!=T.y>i.y&&i.x<(T.x-S.x)*(i.y-S.y)/(T.y-S.y)+S.x&&(l=!l)}return l}function Lv(c,i,l){const f=l[0],v=l[2];if(c.x<f.x&&i.x<f.x||c.x>v.x&&i.x>v.x||c.y<f.y&&i.y<f.y||c.y>v.y&&i.y>v.y)return!1;const S=Vn(c,i,l[0]);return S!==Vn(c,i,l[1])||S!==Vn(c,i,l[2])||S!==Vn(c,i,l[3])}function Th(c,i,l){const f=i.paint.get(c).value;return f.kind==="constant"?f.value:l.programConfigurations.get(i.id).getMaxValue(c)}function Zf(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function pu(c,i,l,f,v){if(!i[0]&&!i[1])return c;const S=M.convert(i)._mult(v);l==="viewport"&&S._rotate(-f);const T=[];for(let P=0;P<c.length;P++)T.push(c[P].sub(S));return T}function Nv({queryGeometry:c,size:i},l){return Gf(c,l,i)}function dm({queryGeometry:c,size:i,transform:l,unwrappedTileID:f,getElevation:v},S){return Gf(c,S,i*(l.projectTileCoordinates(S.x,S.y,f,v).signedDistanceFromCamera/l.cameraToCenterDistance))}function Bv({queryGeometry:c,size:i,transform:l,unwrappedTileID:f,getElevation:v},S){const T=l.projectTileCoordinates(S.x,S.y,f,v).signedDistanceFromCamera,P=i*(l.cameraToCenterDistance/T);return Gf(c,Yf(S,l,f,v),P)}function Ub({queryGeometry:c,size:i,transform:l,unwrappedTileID:f,getElevation:v},S){return Gf(c,Yf(S,l,f,v),i)}function Wf({queryGeometry:c,size:i,transform:l,unwrappedTileID:f,getElevation:v,pitchAlignment:S="map",pitchScale:T="map"},P){const k=S==="map"?T==="map"?Nv:dm:T==="map"?Bv:Ub,N={queryGeometry:c,size:i,transform:l,unwrappedTileID:f,getElevation:v};for(const B of P)for(const q of B)if(k(N,q))return!0;return!1}function Yf(c,i,l,f){const v=i.projectTileCoordinates(c.x,c.y,l,f).point;return new M((.5*v.x+.5)*i.width,(.5*-v.y+.5)*i.height)}let Fg,Ug;It("CircleBucket",cm,{omit:["layers"]});var Fv={get paint(){return Ug=Ug||new fr({"circle-radius":new Kt(ke.paint_circle["circle-radius"]),"circle-color":new Kt(ke.paint_circle["circle-color"]),"circle-blur":new Kt(ke.paint_circle["circle-blur"]),"circle-opacity":new Kt(ke.paint_circle["circle-opacity"]),"circle-translate":new Bt(ke.paint_circle["circle-translate"]),"circle-translate-anchor":new Bt(ke.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Bt(ke.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Bt(ke.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Kt(ke.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Kt(ke.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Kt(ke.paint_circle["circle-stroke-opacity"])})},get layout(){return Fg=Fg||new fr({"circle-sort-key":new Kt(ke.layout_circle["circle-sort-key"])})}};class $g extends Pi{constructor(i,l){super(i,Fv,l)}createBucket(i){return new cm(i)}queryRadius(i){const l=i;return Th("circle-radius",this,l)+Th("circle-stroke-width",this,l)+Zf(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:i,feature:l,featureState:f,geometry:v,transform:S,pixelsToTileUnits:T,unwrappedTileID:P,getElevation:k}){const N=pu(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-S.bearingInRadians,T),B=this.paint.get("circle-radius").evaluate(l,f)+this.paint.get("circle-stroke-width").evaluate(l,f),q=this.paint.get("circle-pitch-scale"),K=this.paint.get("circle-pitch-alignment");let J,re;return K==="map"?(J=N,re=B*T):(J=(function(se,ue,ge,Ne){return se.map((Te=>Yf(Te,ue,ge,Ne)))})(N,S,P,k),re=B),Wf({queryGeometry:J,size:re,transform:S,unwrappedTileID:P,getElevation:k,pitchAlignment:K,pitchScale:q},v)}}class fm extends cm{}let pm;It("HeatmapBucket",fm,{omit:["layers"]});var Uv={get paint(){return pm=pm||new fr({"heatmap-radius":new Kt(ke.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Kt(ke.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Bt(ke.paint_heatmap["heatmap-intensity"]),"heatmap-color":new uu(ke.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Bt(ke.paint_heatmap["heatmap-opacity"])})}};function Xf(c,{width:i,height:l},f,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==i*l*f)throw new RangeError(`mismatched image size. expected: ${v.length} but got: ${i*l*f}`)}else v=new Uint8Array(i*l*f);return c.width=i,c.height=l,c.data=v,c}function Kf(c,{width:i,height:l},f){if(i===c.width&&l===c.height)return;const v=Xf({},{width:i,height:l},f);Qf(c,v,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,i),height:Math.min(c.height,l)},f),c.width=i,c.height=l,c.data=v.data}function Qf(c,i,l,f,v,S){if(v.width===0||v.height===0)return i;if(v.width>c.width||v.height>c.height||l.x>c.width-v.width||l.y>c.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>i.width||v.height>i.height||f.x>i.width-v.width||f.y>i.height-v.height)throw new RangeError("out of range destination coordinates for image copy");const T=c.data,P=i.data;if(T===P)throw new Error("srcData equals dstData, so image is already copied");for(let k=0;k<v.height;k++){const N=((l.y+k)*c.width+l.x)*S,B=((f.y+k)*i.width+f.x)*S;for(let q=0;q<v.width*S;q++)P[B+q]=T[N+q]}return i}class Id{constructor(i,l){Xf(this,i,1,l)}resize(i){Kf(this,i,1)}clone(){return new Id({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,f,v,S){Qf(i,l,f,v,S,1)}}class oa{constructor(i,l){Xf(this,i,4,l)}resize(i){Kf(this,i,4)}replace(i,l){l?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new oa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,f,v,S){Qf(i,l,f,v,S,4)}setPixel(i,l,f){const v=4*(i*this.width+l);this.data[v+0]=Math.round(255*f.r/f.a),this.data[v+1]=Math.round(255*f.g/f.a),this.data[v+2]=Math.round(255*f.b/f.a),this.data[v+3]=Math.round(255*f.a)}}function Vg(c){const i={},l=c.resolution||256,f=c.clips?c.clips.length:1,v=c.image||new oa({width:l,height:f});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const S=(T,P,k)=>{i[c.evaluationKey]=k;const N=c.expression.evaluate(i);v.setPixel(T/4/l,P/4,N)};if(c.clips)for(let T=0,P=0;T<f;++T,P+=4*l)for(let k=0,N=0;k<l;k++,N+=4){const B=k/(l-1),{start:q,end:K}=c.clips[T];S(P,N,q*(1-B)+K*B)}else for(let T=0,P=0;T<l;T++,P+=4)S(0,P,T/(l-1));return v}It("AlphaImage",Id),It("RGBAImage",oa);const Ls="big-fb";class qg extends Pi{createBucket(i){return new fm(i)}constructor(i,l){super(i,Uv,l),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Vg({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Ls)&&this.heatmapFbos.delete(Ls)}queryRadius(i){return Th("heatmap-radius",this,i)}queryIntersectsFeature({queryGeometry:i,feature:l,featureState:f,geometry:v,transform:S,pixelsToTileUnits:T,unwrappedTileID:P,getElevation:k}){return Wf({queryGeometry:i,size:this.paint.get("heatmap-radius").evaluate(l,f)*T,transform:S,unwrappedTileID:P,getElevation:k},v)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let $v;var Vv={get paint(){return $v=$v||new fr({"hillshade-illumination-direction":new Bt(ke.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Bt(ke.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Bt(ke.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Bt(ke.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Bt(ke.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Bt(ke.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Bt(ke.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Bt(ke.paint_hillshade["hillshade-method"])})}};class Ac extends Pi{constructor(i,l){super(i,Vv,l),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let i=this.paint.get("hillshade-illumination-direction").values,l=this.paint.get("hillshade-illumination-altitude").values,f=this.paint.get("hillshade-highlight-color").values,v=this.paint.get("hillshade-shadow-color").values;const S=Math.max(i.length,l.length,f.length,v.length);i=i.concat(Array(S-i.length).fill(i.at(-1))),l=l.concat(Array(S-l.length).fill(l.at(-1))),f=f.concat(Array(S-f.length).fill(f.at(-1))),v=v.concat(Array(S-v.length).fill(v.at(-1)));const T=l.map(ec);return{directionRadians:i.map(ec),altitudeRadians:T,shadowColor:v,highlightColor:f}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let mm;var qv={get paint(){return mm=mm||new fr({"color-relief-opacity":new Bt(ke["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new uu(ke["paint_color-relief"]["color-relief-color"])})}};class zd{constructor(i,l,f,v){this.context=i,this.format=f,this.texture=i.gl.createTexture(),this.update(l,v)}update(i,l,f){const{width:v,height:S}=i,T=!(this.size&&this.size[0]===v&&this.size[1]===S||f),{context:P}=this,{gl:k}=P;if(this.useMipmap=!!(l&&l.useMipmap),k.bindTexture(k.TEXTURE_2D,this.texture),P.pixelStoreUnpackFlipY.set(!1),P.pixelStoreUnpack.set(1),P.pixelStoreUnpackPremultiplyAlpha.set(this.format===k.RGBA&&(!l||l.premultiply!==!1)),T)this.size=[v,S],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||Oi(i)?k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,k.UNSIGNED_BYTE,i):k.texImage2D(k.TEXTURE_2D,0,this.format,v,S,0,this.format,k.UNSIGNED_BYTE,i.data);else{const{x:N,y:B}=f||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||Oi(i)?k.texSubImage2D(k.TEXTURE_2D,0,N,B,k.RGBA,k.UNSIGNED_BYTE,i):k.texSubImage2D(k.TEXTURE_2D,0,N,B,v,S,k.RGBA,k.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&k.generateMipmap(k.TEXTURE_2D),P.pixelStoreUnpackFlipY.setDefault(),P.pixelStoreUnpack.setDefault(),P.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(i,l,f){const{context:v}=this,{gl:S}=v;S.bindTexture(S.TEXTURE_2D,this.texture),f!==S.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=S.LINEAR),i!==this.filter&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,i),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,f||i),this.filter=i),l!==this.wrap&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,l),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class Rd{constructor(i,l,f,v=1,S=1,T=1,P=0){if(this.uid=i,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void Wt(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const k=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=v,this.greenFactor=S,this.blueFactor=T,this.baseShift=P;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let N=0;N<k;N++)this.data[this._idx(-1,N)]=this.data[this._idx(0,N)],this.data[this._idx(k,N)]=this.data[this._idx(k-1,N)],this.data[this._idx(N,-1)]=this.data[this._idx(N,0)],this.data[this._idx(N,k)]=this.data[this._idx(N,k-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(k,-1)]=this.data[this._idx(k-1,0)],this.data[this._idx(-1,k)]=this.data[this._idx(0,k-1)],this.data[this._idx(k,k)]=this.data[this._idx(k-1,k-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let N=0;N<k;N++)for(let B=0;B<k;B++){const q=this.get(N,B);q>this.max&&(this.max=q),q<this.min&&(this.min=q)}}get(i,l){const f=new Uint8Array(this.data.buffer),v=4*this._idx(i,l);return this.unpack(f[v],f[v+1],f[v+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(i,l){if(i<-1||i>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(i+1)}unpack(i,l,f){return i*this.redFactor+l*this.greenFactor+f*this.blueFactor-this.baseShift}pack(i){return kr(i,this.getUnpackVector())}getPixels(){return new oa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,l,f){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let v=l*this.dim,S=l*this.dim+this.dim,T=f*this.dim,P=f*this.dim+this.dim;switch(l){case-1:v=S-1;break;case 1:S=v+1}switch(f){case-1:T=P-1;break;case 1:P=T+1}const k=-l*this.dim,N=-f*this.dim;for(let B=T;B<P;B++)for(let q=v;q<S;q++)this.data[this._idx(q,B)]=i.data[this._idx(q+k,B+N)]}}function kr(c,i){const l=i[0],f=i[1],v=i[2],S=i[3],T=Math.min(l,f,v),P=Math.round((c+S)/T);return{r:Math.floor(P*T/l)%256,g:Math.floor(P*T/f)%256,b:Math.floor(P*T/v)%256}}It("DEMData",Rd);class $b extends Pi{constructor(i,l){super(i,qv,l)}_createColorRamp(i){const l={elevationStops:[],colorStops:[]},f=this._transitionablePaint._values["color-relief-color"].value.expression;if(f instanceof ia&&f._styleExpression.expression instanceof pi){this.colorRampExpression=f;const T=f._styleExpression.expression;l.elevationStops=T.labels,l.colorStops=[];for(const P of l.elevationStops)l.colorStops.push(T.evaluate({globals:{elevation:P}}))}if(l.elevationStops.length<1&&(l.elevationStops=[0],l.colorStops=[xn.transparent]),l.elevationStops.length<2&&(l.elevationStops.push(l.elevationStops[0]+1),l.colorStops.push(l.colorStops[0])),l.elevationStops.length<=i)return l;const v={elevationStops:[],colorStops:[]},S=(l.elevationStops.length-1)/(i-1);for(let T=0;T<l.elevationStops.length-.5;T+=S)v.elevationStops.push(l.elevationStops[Math.round(T)]),v.colorStops.push(l.colorStops[Math.round(T)]);return Wt(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),v}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(i,l,f){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const v=this._createColorRamp(l),S=new oa({width:v.colorStops.length,height:1}),T=new oa({width:v.colorStops.length,height:1});for(let P=0;P<v.elevationStops.length;P++){const k=kr(v.elevationStops[P],f);T.setPixel(0,P,new xn(k.r/255,k.g/255,k.b/255,1)),S.setPixel(0,P,v.colorStops[P])}return this.colorRampTextures={elevationTexture:new zd(i,T,i.gl.RGBA),colorTexture:new zd(i,S,i.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const Vb=tr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Gv}=Vb;function mu(c,i,l){const f=l.patternDependencies;let v=!1;for(const S of i){const T=S.paint.get(`${c}-pattern`);T.isConstant()||(v=!0);const P=T.constantOr(null);P&&(v=!0,f[P.to]=!0,f[P.from]=!0)}return v}function Ol(c,i,l,f,v){const{zoom:S}=f,T=v.patternDependencies;for(const P of i){const k=P.paint.get(`${c}-pattern`).value;if(k.kind!=="constant"){let N=k.evaluate({zoom:S-1},l,{},v.availableImages),B=k.evaluate({zoom:S},l,{},v.availableImages),q=k.evaluate({zoom:S+1},l,{},v.availableImages);N=N&&N.name?N.name:N,B=B&&B.name?B.name:B,q=q&&q.name?q.name:q,T[N]=!0,T[B]=!0,T[q]=!0,l.patterns[P.id]={min:N,mid:B,max:q}}}return l}function Gg(c,i,l,f,v){let S;if(v===(function(T,P,k,N){let B=0;for(let q=P,K=k-N;q<k;q+=N)B+=(T[K]-T[q])*(T[q+1]+T[K+1]),K=q;return B})(c,i,l,f)>0)for(let T=i;T<l;T+=f)S=Xg(T/f|0,c[T],c[T+1],S);else for(let T=l-f;T>=i;T-=f)S=Xg(T/f|0,c[T],c[T+1],S);return S&&jd(S,S.next)&&(Ld(S),S=S.next),S}function gu(c,i){if(!c)return c;i||(i=c);let l,f=c;do if(l=!1,f.steiner||!jd(f,f.next)&&In(f.prev,f,f.next)!==0)f=f.next;else{if(Ld(f),f=i=f.prev,f===f.next)break;l=!0}while(l||f!==i);return i}function Pc(c,i,l,f,v,S,T){if(!c)return;!T&&S&&(function(k,N,B,q){let K=k;do K.z===0&&(K.z=ym(K.x,K.y,N,B,q)),K.prevZ=K.prev,K.nextZ=K.next,K=K.next;while(K!==k);K.prevZ.nextZ=null,K.prevZ=null,(function(J){let re,se=1;do{let ue,ge=J;J=null;let Ne=null;for(re=0;ge;){re++;let Te=ge,Ee=0;for(let et=0;et<se&&(Ee++,Te=Te.nextZ,Te);et++);let Ze=se;for(;Ee>0||Ze>0&&Te;)Ee!==0&&(Ze===0||!Te||ge.z<=Te.z)?(ue=ge,ge=ge.nextZ,Ee--):(ue=Te,Te=Te.nextZ,Ze--),Ne?Ne.nextZ=ue:J=ue,ue.prevZ=Ne,Ne=ue;ge=Te}Ne.nextZ=null,se*=2}while(re>1)})(K)})(c,f,v,S);let P=c;for(;c.prev!==c.next;){const k=c.prev,N=c.next;if(S?Hv(c,f,v,S):Il(c))i.push(k.i,c.i,N.i),Ld(c),c=N.next,P=N.next;else if((c=N)===P){T?T===1?Pc(c=Hg(gu(c),i),i,l,f,v,S,2):T===2&&Zv(c,i,l,f,v,S):Pc(gu(c),i,l,f,v,S,1);break}}}function Il(c){const i=c.prev,l=c,f=c.next;if(In(i,l,f)>=0)return!1;const v=i.x,S=l.x,T=f.x,P=i.y,k=l.y,N=f.y,B=Math.min(v,S,T),q=Math.min(P,k,N),K=Math.max(v,S,T),J=Math.max(P,k,N);let re=f.next;for(;re!==i;){if(re.x>=B&&re.x<=K&&re.y>=q&&re.y<=J&&Mh(v,P,S,k,T,N,re.x,re.y)&&In(re.prev,re,re.next)>=0)return!1;re=re.next}return!0}function Hv(c,i,l,f){const v=c.prev,S=c,T=c.next;if(In(v,S,T)>=0)return!1;const P=v.x,k=S.x,N=T.x,B=v.y,q=S.y,K=T.y,J=Math.min(P,k,N),re=Math.min(B,q,K),se=Math.max(P,k,N),ue=Math.max(B,q,K),ge=ym(J,re,i,l,f),Ne=ym(se,ue,i,l,f);let Te=c.prevZ,Ee=c.nextZ;for(;Te&&Te.z>=ge&&Ee&&Ee.z<=Ne;){if(Te.x>=J&&Te.x<=se&&Te.y>=re&&Te.y<=ue&&Te!==v&&Te!==T&&Mh(P,B,k,q,N,K,Te.x,Te.y)&&In(Te.prev,Te,Te.next)>=0||(Te=Te.prevZ,Ee.x>=J&&Ee.x<=se&&Ee.y>=re&&Ee.y<=ue&&Ee!==v&&Ee!==T&&Mh(P,B,k,q,N,K,Ee.x,Ee.y)&&In(Ee.prev,Ee,Ee.next)>=0))return!1;Ee=Ee.nextZ}for(;Te&&Te.z>=ge;){if(Te.x>=J&&Te.x<=se&&Te.y>=re&&Te.y<=ue&&Te!==v&&Te!==T&&Mh(P,B,k,q,N,K,Te.x,Te.y)&&In(Te.prev,Te,Te.next)>=0)return!1;Te=Te.prevZ}for(;Ee&&Ee.z<=Ne;){if(Ee.x>=J&&Ee.x<=se&&Ee.y>=re&&Ee.y<=ue&&Ee!==v&&Ee!==T&&Mh(P,B,k,q,N,K,Ee.x,Ee.y)&&In(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.nextZ}return!0}function Hg(c,i){let l=c;do{const f=l.prev,v=l.next.next;!jd(f,v)&&Yg(f,l,l.next,v)&&Hi(f,v)&&Hi(v,f)&&(i.push(f.i,l.i,v.i),Ld(l),Ld(l.next),l=c=v),l=l.next}while(l!==c);return gu(l)}function Zv(c,i,l,f,v,S){let T=c;do{let P=T.next.next;for(;P!==T.prev;){if(T.i!==P.i&&Wv(T,P)){let k=zl(T,P);return T=gu(T,T.next),k=gu(k,k.next),Pc(T,i,l,f,v,S,0),void Pc(k,i,l,f,v,S,0)}P=P.next}T=T.next}while(T!==c)}function Zg(c,i){let l=c.x-i.x;return l===0&&(l=c.y-i.y,l===0)&&(l=(c.next.y-c.y)/(c.next.x-c.x)-(i.next.y-i.y)/(i.next.x-i.x)),l}function Wg(c,i){const l=(function(v,S){let T=S;const P=v.x,k=v.y;let N,B=-1/0;if(jd(v,T))return T;do{if(jd(v,T.next))return T.next;if(k<=T.y&&k>=T.next.y&&T.next.y!==T.y){const se=T.x+(k-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(se<=P&&se>B&&(B=se,N=T.x<T.next.x?T:T.next,se===P))return N}T=T.next}while(T!==S);if(!N)return null;const q=N,K=N.x,J=N.y;let re=1/0;T=N;do{if(P>=T.x&&T.x>=K&&P!==T.x&&gi(k<J?P:B,k,K,J,k<J?B:P,k,T.x,T.y)){const se=Math.abs(k-T.y)/(P-T.x);Hi(T,v)&&(se<re||se===re&&(T.x>N.x||T.x===N.x&&gm(N,T)))&&(N=T,re=se)}T=T.next}while(T!==q);return N})(c,i);if(!l)return i;const f=zl(l,c);return gu(f,f.next),gu(l,l.next)}function gm(c,i){return In(c.prev,c,i.prev)<0&&In(i.next,c,c.next)<0}function ym(c,i,l,f,v){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-l)*v|0)|c<<8))|c<<4))|c<<2))|c<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-f)*v|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function Dc(c){let i=c,l=c;do(i.x<l.x||i.x===l.x&&i.y<l.y)&&(l=i),i=i.next;while(i!==c);return l}function gi(c,i,l,f,v,S,T,P){return(v-T)*(i-P)>=(c-T)*(S-P)&&(c-T)*(f-P)>=(l-T)*(i-P)&&(l-T)*(S-P)>=(v-T)*(f-P)}function Mh(c,i,l,f,v,S,T,P){return!(c===T&&i===P)&&gi(c,i,l,f,v,S,T,P)}function Wv(c,i){return c.next.i!==i.i&&c.prev.i!==i.i&&!(function(l,f){let v=l;do{if(v.i!==l.i&&v.next.i!==l.i&&v.i!==f.i&&v.next.i!==f.i&&Yg(v,v.next,l,f))return!0;v=v.next}while(v!==l);return!1})(c,i)&&(Hi(c,i)&&Hi(i,c)&&(function(l,f){let v=l,S=!1;const T=(l.x+f.x)/2,P=(l.y+f.y)/2;do v.y>P!=v.next.y>P&&v.next.y!==v.y&&T<(v.next.x-v.x)*(P-v.y)/(v.next.y-v.y)+v.x&&(S=!S),v=v.next;while(v!==l);return S})(c,i)&&(In(c.prev,c,i.prev)||In(c,i.prev,i))||jd(c,i)&&In(c.prev,c,c.next)>0&&In(i.prev,i,i.next)>0)}function In(c,i,l){return(i.y-c.y)*(l.x-i.x)-(i.x-c.x)*(l.y-i.y)}function jd(c,i){return c.x===i.x&&c.y===i.y}function Yg(c,i,l,f){const v=Tr(In(c,i,l)),S=Tr(In(c,i,f)),T=Tr(In(l,f,c)),P=Tr(In(l,f,i));return v!==S&&T!==P||!(v!==0||!Jf(c,l,i))||!(S!==0||!Jf(c,f,i))||!(T!==0||!Jf(l,c,f))||!(P!==0||!Jf(l,i,f))}function Jf(c,i,l){return i.x<=Math.max(c.x,l.x)&&i.x>=Math.min(c.x,l.x)&&i.y<=Math.max(c.y,l.y)&&i.y>=Math.min(c.y,l.y)}function Tr(c){return c>0?1:c<0?-1:0}function Hi(c,i){return In(c.prev,c,c.next)<0?In(c,i,c.next)>=0&&In(c,c.prev,i)>=0:In(c,i,c.prev)<0||In(c,c.next,i)<0}function zl(c,i){const l=vm(c.i,c.x,c.y),f=vm(i.i,i.x,i.y),v=c.next,S=i.prev;return c.next=i,i.prev=c,l.next=v,v.prev=l,f.next=l,l.prev=f,S.next=f,f.prev=S,f}function Xg(c,i,l,f){const v=vm(c,i,l);return f?(v.next=f.next,v.prev=f,f.next.prev=v,f.next=v):(v.prev=v,v.next=v),v}function Ld(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function vm(c,i,l){return{i:c,x:i,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Nd{constructor(i,l){if(l>i)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=i,this._minGranularity=l}getGranularityForZoomLevel(i){return Math.max(Math.floor(this._baseZoomGranularity/(1<<i)),this._minGranularity,1)}}class Ch{constructor(i){this.fill=i.fill,this.line=i.line,this.tile=i.tile,this.stencil=i.stencil,this.circle=i.circle}}Ch.noSubdivision=new Ch({fill:new Nd(0,0),line:new Nd(0,0),tile:new Nd(0,0),stencil:new Nd(0,0),circle:1}),It("SubdivisionGranularityExpression",Nd),It("SubdivisionGranularitySetting",Ch);const Li=-32768,qa=32767;class Yv{constructor(i,l){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=i,this._granularityCellSize=ht/i,this._canonical=l}_getKey(i,l){return(i+=32768)<<16|l+32768}_vertexToIndex(i,l){if(i<-32768||l<-32768||i>32767||l>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const f=0|Math.round(i),v=0|Math.round(l),S=this._getKey(f,v);if(this._vertexDictionary.has(S))return this._vertexDictionary.get(S);const T=this._vertexBuffer.length/2;return this._vertexDictionary.set(S,T),this._vertexBuffer.push(f,v),T}_subdivideTrianglesScanline(i){if(this._granularity<2)return(function(v,S){const T=[];for(let P=0;P<S.length;P+=3){const k=S[P],N=S[P+1],B=S[P+2],q=v[2*k],K=v[2*k+1];(v[2*N]-q)*(v[2*B+1]-K)-(v[2*N+1]-K)*(v[2*B]-q)>0?(T.push(k),T.push(B),T.push(N)):(T.push(k),T.push(N),T.push(B))}return T})(this._vertexBuffer,i);const l=[],f=i.length;for(let v=0;v<f;v+=3){const S=[i[v+0],i[v+1],i[v+2]],T=[this._vertexBuffer[2*i[v+0]+0],this._vertexBuffer[2*i[v+0]+1],this._vertexBuffer[2*i[v+1]+0],this._vertexBuffer[2*i[v+1]+1],this._vertexBuffer[2*i[v+2]+0],this._vertexBuffer[2*i[v+2]+1]];let P=1/0,k=1/0,N=-1/0,B=-1/0;for(let se=0;se<3;se++){const ue=T[2*se],ge=T[2*se+1];P=Math.min(P,ue),N=Math.max(N,ue),k=Math.min(k,ge),B=Math.max(B,ge)}if(P===N||k===B)continue;const q=Math.floor(P/this._granularityCellSize),K=Math.ceil(N/this._granularityCellSize),J=Math.floor(k/this._granularityCellSize),re=Math.ceil(B/this._granularityCellSize);if(q!==K||J!==re)for(let se=J;se<re;se++){const ue=this._scanlineGenerateVertexRingForCellRow(se,T,S);kc(this._vertexBuffer,ue,l)}else l.push(...S)}return l}_scanlineGenerateVertexRingForCellRow(i,l,f){const v=i*this._granularityCellSize,S=v+this._granularityCellSize,T=[];for(let P=0;P<3;P++){const k=l[2*P],N=l[2*P+1],B=l[2*(P+1)%6],q=l[(2*(P+1)+1)%6],K=l[2*(P+2)%6],J=l[(2*(P+2)+1)%6],re=B-k,se=q-N,ue=re===0,ge=se===0,Ne=(v-N)/se,Te=(S-N)/se,Ee=Math.min(Ne,Te),Ze=Math.max(Ne,Te);if(!ge&&(Ee>=1||Ze<=0)||ge&&(N<v||N>S)){q>=v&&q<=S&&T.push(f[(P+1)%3]);continue}!ge&&Ee>0&&T.push(this._vertexToIndex(k+re*Ee,N+se*Ee));const et=k+re*Math.max(Ee,0),gt=k+re*Math.min(Ze,1);ue||this._generateIntraEdgeVertices(T,k,N,B,q,et,gt),!ge&&Ze<1&&T.push(this._vertexToIndex(k+re*Ze,N+se*Ze)),(ge||q>=v&&q<=S)&&T.push(f[(P+1)%3]),!ge&&(q<=v||q>=S)&&this._generateInterEdgeVertices(T,k,N,B,q,K,J,gt,v,S)}return T}_generateIntraEdgeVertices(i,l,f,v,S,T,P){const k=v-l,N=S-f,B=N===0,q=B?Math.min(l,v):Math.min(T,P),K=B?Math.max(l,v):Math.max(T,P),J=Math.floor(q/this._granularityCellSize)+1,re=Math.ceil(K/this._granularityCellSize)-1;if(B?l<v:T<P)for(let se=J;se<=re;se++){const ue=se*this._granularityCellSize;i.push(this._vertexToIndex(ue,f+N*(ue-l)/k))}else for(let se=re;se>=J;se--){const ue=se*this._granularityCellSize;i.push(this._vertexToIndex(ue,f+N*(ue-l)/k))}}_generateInterEdgeVertices(i,l,f,v,S,T,P,k,N,B){const q=S-f,K=T-v,J=P-S,re=(N-S)/J,se=(B-S)/J,ue=Math.min(re,se),ge=Math.max(re,se),Ne=v+K*ue;let Te=Math.floor(Math.min(Ne,k)/this._granularityCellSize)+1,Ee=Math.ceil(Math.max(Ne,k)/this._granularityCellSize)-1,Ze=k<Ne;const et=J===0;if(et&&(P===N||P===B))return;if(et||ue>=1||ge<=0){const Ot=f-P,Ct=T+(l-T)*Math.min((N-P)/Ot,(B-P)/Ot);Te=Math.floor(Math.min(Ct,k)/this._granularityCellSize)+1,Ee=Math.ceil(Math.max(Ct,k)/this._granularityCellSize)-1,Ze=k<Ct}const gt=q>0?B:N;if(Ze)for(let Ot=Te;Ot<=Ee;Ot++)i.push(this._vertexToIndex(Ot*this._granularityCellSize,gt));else for(let Ot=Ee;Ot>=Te;Ot--)i.push(this._vertexToIndex(Ot*this._granularityCellSize,gt))}_generateOutline(i){const l=[];for(const f of i){const v=yu(f,this._granularity,!0),S=this._pointArrayToIndices(v),T=[];for(let P=1;P<S.length;P++)T.push(S[P-1]),T.push(S[P]);l.push(T)}return l}_handlePoles(i){let l=!1,f=!1;this._canonical&&(this._canonical.y===0&&(l=!0),this._canonical.y===(1<<this._canonical.z)-1&&(f=!0)),(l||f)&&this._fillPoles(i,l,f)}_ensureNoPoleVertices(){const i=this._vertexBuffer;for(let l=0;l<i.length;l+=2){const f=i[l+1];f===Li&&(i[l+1]=-32767),f===qa&&(i[l+1]=32766)}}_generatePoleQuad(i,l,f,v,S,T){v>S!=(T===Li)?(i.push(l),i.push(f),i.push(this._vertexToIndex(v,T)),i.push(f),i.push(this._vertexToIndex(S,T)),i.push(this._vertexToIndex(v,T))):(i.push(f),i.push(l),i.push(this._vertexToIndex(v,T)),i.push(this._vertexToIndex(S,T)),i.push(f),i.push(this._vertexToIndex(v,T)))}_fillPoles(i,l,f){const v=this._vertexBuffer,S=ht,T=i.length;for(let P=2;P<T;P+=3){const k=i[P-2],N=i[P-1],B=i[P],q=v[2*k],K=v[2*k+1],J=v[2*N],re=v[2*N+1],se=v[2*B],ue=v[2*B+1];l&&(K===0&&re===0&&this._generatePoleQuad(i,k,N,q,J,Li),re===0&&ue===0&&this._generatePoleQuad(i,N,B,J,se,Li),ue===0&&K===0&&this._generatePoleQuad(i,B,k,se,q,Li)),f&&(K===S&&re===S&&this._generatePoleQuad(i,k,N,q,J,qa),re===S&&ue===S&&this._generatePoleQuad(i,N,B,J,se,qa),ue===S&&K===S&&this._generatePoleQuad(i,B,k,se,q,qa))}}_initializeVertices(i){for(let l=0;l<i.length;l+=2)this._vertexToIndex(i[l],i[l+1])}subdividePolygonInternal(i,l){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:f,holeIndices:v}=(function(P){const k=[],N=[];for(const B of P)if(B.length!==0){B!==P[0]&&k.push(N.length/2);for(let q=0;q<B.length;q++)N.push(B[q].x),N.push(B[q].y)}return{flattened:N,holeIndices:k}})(i);let S;this._initializeVertices(f);try{const P=(function(N,B,q=2){const K=B&&B.length,J=K?B[0]*q:N.length;let re=Gg(N,0,J,q,!0);const se=[];if(!re||re.next===re.prev)return se;let ue,ge,Ne;if(K&&(re=(function(Te,Ee,Ze,et){const gt=[];for(let Ot=0,Ct=Ee.length;Ot<Ct;Ot++){const Dt=Gg(Te,Ee[Ot]*et,Ot<Ct-1?Ee[Ot+1]*et:Te.length,et,!1);Dt===Dt.next&&(Dt.steiner=!0),gt.push(Dc(Dt))}gt.sort(Zg);for(let Ot=0;Ot<gt.length;Ot++)Ze=Wg(gt[Ot],Ze);return Ze})(N,B,re,q)),N.length>80*q){ue=N[0],ge=N[1];let Te=ue,Ee=ge;for(let Ze=q;Ze<J;Ze+=q){const et=N[Ze],gt=N[Ze+1];et<ue&&(ue=et),gt<ge&&(ge=gt),et>Te&&(Te=et),gt>Ee&&(Ee=gt)}Ne=Math.max(Te-ue,Ee-ge),Ne=Ne!==0?32767/Ne:0}return Pc(re,se,q,ue,ge,Ne,0),se})(f,v),k=this._convertIndices(f,P);S=this._subdivideTrianglesScanline(k)}catch(P){console.error(P)}let T=[];return l&&(T=this._generateOutline(i)),this._ensureNoPoleVertices(),this._handlePoles(S),{verticesFlattened:this._vertexBuffer,indicesTriangles:S,indicesLineList:T}}_convertIndices(i,l){const f=[];for(let v=0;v<l.length;v++)f.push(this._vertexToIndex(i[2*l[v]],i[2*l[v]+1]));return f}_pointArrayToIndices(i){const l=[];for(let f=0;f<i.length;f++){const v=i[f];l.push(this._vertexToIndex(v.x,v.y))}return l}}function Ga(c,i,l,f=!0){return new Yv(l,i).subdividePolygonInternal(c,f)}function yu(c,i,l=!1){if(!c||c.length<1)return[];if(c.length<2)return[];const f=c[0],v=c[c.length-1],S=l&&(f.x!==v.x||f.y!==v.y);if(i<2)return S?[...c,c[0]]:[...c];const T=Math.floor(ht/i),P=[];P.push(new M(c[0].x,c[0].y));const k=c.length,N=S?k:k-1;for(let B=0;B<N;B++){const q=c[B],K=B<k-1?c[B+1]:c[0],J=q.x,re=q.y,se=K.x,ue=K.y,ge=J!==se,Ne=re!==ue;if(!ge&&!Ne)continue;const Te=se-J,Ee=ue-re,Ze=Math.abs(Te),et=Math.abs(Ee);let gt=J,Ot=re;for(;;){const Dt=Te>0?(Math.floor(gt/T)+1)*T:(Math.ceil(gt/T)-1)*T,Zt=Ee>0?(Math.floor(Ot/T)+1)*T:(Math.ceil(Ot/T)-1)*T,Pt=Math.abs(gt-Dt),kt=Math.abs(Ot-Zt),lt=Math.abs(gt-se),tn=Math.abs(Ot-ue),ln=ge?Pt/Ze:Number.POSITIVE_INFINITY,Qt=Ne?kt/et:Number.POSITIVE_INFINITY;if((lt<=Pt||!ge)&&(tn<=kt||!Ne))break;if(ln<Qt&&ge||!Ne){gt=Dt,Ot+=Ee*ln;const Gt=new M(gt,Math.round(Ot));P[P.length-1].x===Gt.x&&P[P.length-1].y===Gt.y||P.push(Gt)}else{gt+=Te*Qt,Ot=Zt;const Gt=new M(Math.round(gt),Ot);P[P.length-1].x===Gt.x&&P[P.length-1].y===Gt.y||P.push(Gt)}}const Ct=new M(se,ue);P[P.length-1].x===Ct.x&&P[P.length-1].y===Ct.y||P.push(Ct)}return P}function kc(c,i,l){if(i.length===0)throw new Error("Subdivision vertex ring is empty.");let f=0,v=c[2*i[0]];for(let k=1;k<i.length;k++){const N=c[2*i[k]];N<v&&(v=N,f=k)}const S=i.length;let T=f,P=(T+1)%S;for(;;){const k=T-1>=0?T-1:S-1,N=(P+1)%S,B=c[2*i[k]],q=c[2*i[N]],K=c[2*i[T]],J=c[2*i[T]+1],re=c[2*i[P]+1];let se=!1;if(B<q)se=!0;else if(B>q)se=!1;else{const ue=re-J,ge=-(c[2*i[P]]-K),Ne=J<re?1:-1;((B-K)*ue+(c[2*i[k]+1]-J)*ge)*Ne>((q-K)*ue+(c[2*i[N]+1]-J)*ge)*Ne&&(se=!0)}if(se){const ue=i[k],ge=i[T],Ne=i[P];ue!==ge&&ue!==Ne&&ge!==Ne&&l.push(Ne,ge,ue),T--,T<0&&(T=S-1)}else{const ue=i[N],ge=i[T],Ne=i[P];ue!==ge&&ue!==Ne&&ge!==Ne&&l.push(Ne,ge,ue),P++,P>=S&&(P=0)}if(k===N)break}}function vu(c,i,l,f,v,S,T,P,k){const N=v.length/2,B=T&&P&&k;if(N<Cn.MAX_VERTEX_ARRAY_LENGTH){const q=i.prepareSegment(N,l,f),K=q.vertexLength;for(let se=0;se<S.length;se+=3)f.emplaceBack(K+S[se],K+S[se+1],K+S[se+2]);let J,re;q.vertexLength+=N,q.primitiveLength+=S.length/3,B&&(re=T.prepareSegment(N,l,P),J=re.vertexLength,re.vertexLength+=N);for(let se=0;se<v.length;se+=2)c(v[se],v[se+1]);if(B)for(let se=0;se<k.length;se++){const ue=k[se];for(let ge=1;ge<ue.length;ge+=2)P.emplaceBack(J+ue[ge-1],J+ue[ge]);re.primitiveLength+=ue.length/2}}else(function(q,K,J,re,se,ue){const ge=[];for(let et=0;et<re.length/2;et++)ge.push(-1);const Ne={count:0};let Te=0,Ee=q.getOrCreateLatestSegment(K,J),Ze=Ee.vertexLength;for(let et=2;et<se.length;et+=3){const gt=se[et-2],Ot=se[et-1],Ct=se[et];let Dt=ge[gt]<Te,Zt=ge[Ot]<Te,Pt=ge[Ct]<Te;Ee.vertexLength+((Dt?1:0)+(Zt?1:0)+(Pt?1:0))>Cn.MAX_VERTEX_ARRAY_LENGTH&&(Ee=q.createNewSegment(K,J),Te=Ne.count,Dt=!0,Zt=!0,Pt=!0,Ze=0);const kt=Bo(ge,re,ue,Ne,gt,Dt,Ee),lt=Bo(ge,re,ue,Ne,Ot,Zt,Ee),tn=Bo(ge,re,ue,Ne,Ct,Pt,Ee);J.emplaceBack(Ze+kt-Te,Ze+lt-Te,Ze+tn-Te),Ee.primitiveLength++}})(i,l,f,v,S,c),B&&(function(q,K,J,re,se,ue){const ge=[];for(let et=0;et<re.length/2;et++)ge.push(-1);const Ne={count:0};let Te=0,Ee=q.getOrCreateLatestSegment(K,J),Ze=Ee.vertexLength;for(let et=0;et<se.length;et++){const gt=se[et];for(let Ot=1;Ot<se[et].length;Ot+=2){const Ct=gt[Ot-1],Dt=gt[Ot];let Zt=ge[Ct]<Te,Pt=ge[Dt]<Te;Ee.vertexLength+((Zt?1:0)+(Pt?1:0))>Cn.MAX_VERTEX_ARRAY_LENGTH&&(Ee=q.createNewSegment(K,J),Te=Ne.count,Zt=!0,Pt=!0,Ze=0);const kt=Bo(ge,re,ue,Ne,Ct,Zt,Ee),lt=Bo(ge,re,ue,Ne,Dt,Pt,Ee);J.emplaceBack(Ze+kt-Te,Ze+lt-Te),Ee.primitiveLength++}}})(T,l,P,v,k,c),i.forceNewSegmentOnNextPrepare(),T?.forceNewSegmentOnNextPrepare()}function Bo(c,i,l,f,v,S,T){if(S){const P=f.count;return l(i[2*v],i[2*v+1]),c[v]=f.count,f.count++,T.vertexLength++,P}return c[v]}class ep{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map((l=>l.id)),this.index=i.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new Re,this.indexArray=new Wn,this.indexArray2=new Yn,this.programConfigurations=new ls(i.layers,i.zoom),this.segments=new Cn,this.segments2=new Cn,this.stateDependentLayerIds=this.layers.filter((l=>l.isStateDependent())).map((l=>l.id))}populate(i,l,f){this.hasDependencies=mu("fill",this.layers,l);const v=this.layers[0].layout.get("fill-sort-key"),S=!v.isConstant(),T=[];for(const{feature:P,id:k,index:N,sourceLayerIndex:B}of i){const q=this.layers[0]._featureFilter.needGeometry,K=No(P,q);if(!this.layers[0]._featureFilter.filter(new er(this.zoom),K,f))continue;const J=S?v.evaluate(K,{},f,l.availableImages):void 0,re={id:k,properties:P.properties,type:P.type,sourceLayerIndex:B,index:N,geometry:q?K.geometry:fu(P),patterns:{},sortKey:J};T.push(re)}S&&T.sort(((P,k)=>P.sortKey-k.sortKey));for(const P of T){const{geometry:k,index:N,sourceLayerIndex:B}=P;if(this.hasDependencies){const q=Ol("fill",this.layers,P,{zoom:this.zoom},l);this.patternFeatures.push(q)}else this.addFeature(P,k,N,f,{},l.subdivisionGranularity);l.featureIndex.insert(i[N].feature,k,N,B,this.index)}}update(i,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,{imagePositions:f})}addFeatures(i,l,f){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,l,f,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Gv),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,l,f,v,S,T){for(const P of Ju(l,500)){const k=Ga(P,v,T.fill.getGranularityForZoomLevel(v.z)),N=this.layoutVertexArray;vu(((B,q)=>{N.emplaceBack(B,q)}),this.segments,this.layoutVertexArray,this.indexArray,k.verticesFlattened,k.indicesTriangles,this.segments2,this.indexArray2,k.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,{imagePositions:S,canonical:v})}}let _m,cs;It("FillBucket",ep,{omit:["layers","patternFeatures"]});var Xv={get paint(){return cs=cs||new fr({"fill-antialias":new Bt(ke.paint_fill["fill-antialias"]),"fill-opacity":new Kt(ke.paint_fill["fill-opacity"]),"fill-color":new Kt(ke.paint_fill["fill-color"]),"fill-outline-color":new Kt(ke.paint_fill["fill-outline-color"]),"fill-translate":new Bt(ke.paint_fill["fill-translate"]),"fill-translate-anchor":new Bt(ke.paint_fill["fill-translate-anchor"]),"fill-pattern":new Sc(ke.paint_fill["fill-pattern"])})},get layout(){return _m=_m||new fr({"fill-sort-key":new Kt(ke.layout_fill["fill-sort-key"])})}};class Bd extends Pi{constructor(i,l){super(i,Xv,l)}recalculate(i,l){super.recalculate(i,l);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new ep(i)}queryRadius(){return Zf(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:i,geometry:l,transform:f,pixelsToTileUnits:v}){return um(pu(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-f.bearingInRadians,v),l)}isTileClipped(){return!0}}const tp=tr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),np=tr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Fd}=tp;class Eh{constructor(i,l,f,v,S){this.properties={},this.extent=f,this.type=0,this.id=void 0,this._pbf=i,this._geometry=-1,this._keys=v,this._values=S,i.readFields(Kv,this,l)}loadGeometry(){const i=this._pbf;i.pos=this._geometry;const l=i.readVarint()+i.pos,f=[];let v,S=1,T=0,P=0,k=0;for(;i.pos<l;){if(T<=0){const N=i.readVarint();S=7&N,T=N>>3}if(T--,S===1||S===2)P+=i.readSVarint(),k+=i.readSVarint(),S===1&&(v&&f.push(v),v=[]),v&&v.push(new M(P,k));else{if(S!==7)throw new Error(`unknown command ${S}`);v&&v.push(v[0].clone())}}return v&&f.push(v),f}bbox(){const i=this._pbf;i.pos=this._geometry;const l=i.readVarint()+i.pos;let f=1,v=0,S=0,T=0,P=1/0,k=-1/0,N=1/0,B=-1/0;for(;i.pos<l;){if(v<=0){const q=i.readVarint();f=7&q,v=q>>3}if(v--,f===1||f===2)S+=i.readSVarint(),T+=i.readSVarint(),S<P&&(P=S),S>k&&(k=S),T<N&&(N=T),T>B&&(B=T);else if(f!==7)throw new Error(`unknown command ${f}`)}return[P,N,k,B]}toGeoJSON(i,l,f){const v=this.extent*Math.pow(2,f),S=this.extent*i,T=this.extent*l,P=this.loadGeometry();function k(K){return[360*(K.x+S)/v-180,360/Math.PI*Math.atan(Math.exp((1-2*(K.y+T)/v)*Math.PI))-90]}function N(K){return K.map(k)}let B;if(this.type===1){const K=[];for(const re of P)K.push(re[0]);const J=N(K);B=K.length===1?{type:"Point",coordinates:J[0]}:{type:"MultiPoint",coordinates:J}}else if(this.type===2){const K=P.map(N);B=K.length===1?{type:"LineString",coordinates:K[0]}:{type:"MultiLineString",coordinates:K}}else{if(this.type!==3)throw new Error("unknown feature type");{const K=(function(re){const se=re.length;if(se<=1)return[re];const ue=[];let ge,Ne;for(let Te=0;Te<se;Te++){const Ee=rp(re[Te]);Ee!==0&&(Ne===void 0&&(Ne=Ee<0),Ne===Ee<0?(ge&&ue.push(ge),ge=[re[Te]]):ge&&ge.push(re[Te]))}return ge&&ue.push(ge),ue})(P),J=[];for(const re of K)J.push(re.map(N));B=J.length===1?{type:"Polygon",coordinates:J[0]}:{type:"MultiPolygon",coordinates:J}}}const q={type:"Feature",geometry:B,properties:this.properties};return this.id!=null&&(q.id=this.id),q}}function Kv(c,i,l){c===1?i.id=l.readVarint():c===2?(function(f,v){const S=f.readVarint()+f.pos;for(;f.pos<S;){const T=v._keys[f.readVarint()],P=v._values[f.readVarint()];v.properties[T]=P}})(l,i):c===3?i.type=l.readVarint():c===4&&(i._geometry=l.pos)}function rp(c){let i=0;for(let l,f,v=0,S=c.length,T=S-1;v<S;T=v++)l=c[v],f=c[T],i+=(f.x-l.x)*(l.y+f.y);return i}Eh.types=["Unknown","Point","LineString","Polygon"];class Kg{constructor(i,l){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(bm,this,l),this.length=this._features.length}feature(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];const l=this._pbf.readVarint()+this._pbf.pos;return new Eh(this._pbf,l,this.extent,this._keys,this._values)}}function bm(c,i,l){c===15?i.version=l.readVarint():c===1?i.name=l.readString():c===5?i.extent=l.readVarint():c===2?i._features.push(l.pos):c===3?i._keys.push(l.readString()):c===4&&i._values.push((function(f){let v=null;const S=f.readVarint()+f.pos;for(;f.pos<S;){const T=f.readVarint()>>3;v=T===1?f.readString():T===2?f.readFloat():T===3?f.readDouble():T===4?f.readVarint64():T===5?f.readVarint():T===6?f.readSVarint():T===7?f.readBoolean():null}if(v==null)throw new Error("unknown feature value");return v})(l))}class Qg{constructor(i,l){this.layers=i.readFields(qb,{},l)}}function qb(c,i,l){if(c===3){const f=new Kg(l,l.readVarint()+l.pos);f.length&&(i[f.name]=f)}}const Jg=Math.pow(2,13);function Hn(c,i,l,f,v,S,T,P){c.emplaceBack(i,l,2*Math.floor(f*Jg)+T,v*Jg*2,S*Jg*2,Math.round(P))}class gr{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map((l=>l.id)),this.index=i.index,this.hasDependencies=!1,this.layoutVertexArray=new Xe,this.centroidVertexArray=new De,this.indexArray=new Wn,this.programConfigurations=new ls(i.layers,i.zoom),this.segments=new Cn,this.stateDependentLayerIds=this.layers.filter((l=>l.isStateDependent())).map((l=>l.id))}populate(i,l,f){this.features=[],this.hasDependencies=mu("fill-extrusion",this.layers,l);for(const{feature:v,id:S,index:T,sourceLayerIndex:P}of i){const k=this.layers[0]._featureFilter.needGeometry,N=No(v,k);if(!this.layers[0]._featureFilter.filter(new er(this.zoom),N,f))continue;const B={id:S,sourceLayerIndex:P,index:T,geometry:k?N.geometry:fu(v),properties:v.properties,type:v.type,patterns:{}};this.hasDependencies?this.features.push(Ol("fill-extrusion",this.layers,B,{zoom:this.zoom},l)):this.addFeature(B,B.geometry,T,f,{},l.subdivisionGranularity),l.featureIndex.insert(v,B.geometry,T,P,this.index,!0)}}addFeatures(i,l,f){for(const v of this.features){const{geometry:S}=v;this.addFeature(v,S,v.index,l,f,i.subdivisionGranularity)}}update(i,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,{imagePositions:f})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Fd),this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,np.members,!0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(i,l,f,v,S,T){for(const P of Ju(l,500)){const k={x:0,y:0,sampleCount:0},N=this.layoutVertexArray.length;this.processPolygon(k,v,i,P,T);const B=this.layoutVertexArray.length-N,q=Math.floor(k.x/k.sampleCount),K=Math.floor(k.y/k.sampleCount);for(let J=0;J<B;J++)this.centroidVertexArray.emplaceBack(q,K)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,{imagePositions:S,canonical:v})}processPolygon(i,l,f,v,S){if(v.length<1||cr(v[0]))return;for(const q of v)q.length!==0&&Bn(i,q);const T={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},P=S.fill.getGranularityForZoomLevel(l.z),k=Eh.types[f.type]==="Polygon";for(const q of v){if(q.length===0||cr(q))continue;const K=yu(q,P,k);this._generateSideFaces(K,T)}if(!k)return;const N=Ga(v,l,P,!1),B=this.layoutVertexArray;vu(((q,K)=>{Hn(B,q,K,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,N.verticesFlattened,N.indicesTriangles)}_generateSideFaces(i,l){let f=0;for(let v=1;v<i.length;v++){const S=i[v],T=i[v-1];if($n(S,T))continue;l.segment.vertexLength+4>Cn.MAX_VERTEX_ARRAY_LENGTH&&(l.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const P=S.sub(T)._perp()._unit(),k=T.dist(S);f+k>32768&&(f=0),Hn(this.layoutVertexArray,S.x,S.y,P.x,P.y,0,0,f),Hn(this.layoutVertexArray,S.x,S.y,P.x,P.y,0,1,f),f+=k,Hn(this.layoutVertexArray,T.x,T.y,P.x,P.y,0,0,f),Hn(this.layoutVertexArray,T.x,T.y,P.x,P.y,0,1,f);const N=l.segment.vertexLength;this.indexArray.emplaceBack(N,N+2,N+1),this.indexArray.emplaceBack(N+1,N+2,N+3),l.segment.vertexLength+=4,l.segment.primitiveLength+=2}}}function Bn(c,i){for(let l=0;l<i.length;l++){const f=i[l];l===i.length-1&&i[0].x===f.x&&i[0].y===f.y||(c.x+=f.x,c.y+=f.y,c.sampleCount++)}}function $n(c,i){return c.x===i.x&&(c.x<0||c.x>ht)||c.y===i.y&&(c.y<0||c.y>ht)}function cr(c){return c.every((i=>i.x<0))||c.every((i=>i.x>ht))||c.every((i=>i.y<0))||c.every((i=>i.y>ht))}let uo;It("FillExtrusionBucket",gr,{omit:["layers","features"]});var _u={get paint(){return uo=uo||new fr({"fill-extrusion-opacity":new Bt(ke["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Kt(ke["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Bt(ke["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Bt(ke["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Sc(ke["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Kt(ke["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Kt(ke["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Bt(ke["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Ud extends Pi{constructor(i,l){super(i,_u,l)}createBucket(i){return new gr(i)}queryRadius(){return Zf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:i,feature:l,featureState:f,geometry:v,transform:S,pixelsToTileUnits:T,pixelPosMatrix:P}){const k=pu(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-S.bearingInRadians,T),N=this.paint.get("fill-extrusion-height").evaluate(l,f),B=this.paint.get("fill-extrusion-base").evaluate(l,f),q=(function(J,re){const se=[];for(const ue of J){const ge=[ue.x,ue.y,0,1];At(ge,ge,re),se.push(new M(ge[0]/ge[3],ge[1]/ge[3]))}return se})(k,P),K=(function(J,re,se,ue){const ge=[],Ne=[],Te=ue[8]*re,Ee=ue[9]*re,Ze=ue[10]*re,et=ue[11]*re,gt=ue[8]*se,Ot=ue[9]*se,Ct=ue[10]*se,Dt=ue[11]*se;for(const Zt of J){const Pt=[],kt=[];for(const lt of Zt){const tn=lt.x,ln=lt.y,Qt=ue[0]*tn+ue[4]*ln+ue[12],Gt=ue[1]*tn+ue[5]*ln+ue[13],Tn=ue[2]*tn+ue[6]*ln+ue[14],_r=ue[3]*tn+ue[7]*ln+ue[15],Yr=Tn+Ze,Bi=_r+et,Wa=Qt+gt,si=Gt+Ot,Or=Tn+Ct,Qn=_r+Dt,Gr=new M((Qt+Te)/Bi,(Gt+Ee)/Bi);Gr.z=Yr/Bi,Pt.push(Gr);const Xr=new M(Wa/Qn,si/Qn);Xr.z=Or/Qn,kt.push(Xr)}ge.push(Pt),Ne.push(kt)}return[ge,Ne]})(v,B,N,P);return(function(J,re,se){let ue=1/0;um(se,re)&&(ue=Rl(se,re[0]));for(let ge=0;ge<re.length;ge++){const Ne=re[ge],Te=J[ge];for(let Ee=0;Ee<Ne.length-1;Ee++){const Ze=Ne[Ee],et=[Ze,Ne[Ee+1],Te[Ee+1],Te[Ee],Ze];qf(se,et)&&(ue=Math.min(ue,Rl(se,et)))}}return ue!==1/0&&ue})(K[0],K[1],q)}}function Ah(c,i){return c.x*i.x+c.y*i.y}function Rl(c,i){if(c.length===1){let l=0;const f=i[l++];let v;for(;!v||f.equals(v);)if(v=i[l++],!v)return 1/0;for(;l<i.length;l++){const S=i[l],T=c[0],P=v.sub(f),k=S.sub(f),N=T.sub(f),B=Ah(P,P),q=Ah(P,k),K=Ah(k,k),J=Ah(N,P),re=Ah(N,k),se=B*K-q*q,ue=(K*J-q*re)/se,ge=(B*re-q*J)/se,Ne=f.z*(1-ue-ge)+v.z*ue+S.z*ge;if(isFinite(Ne))return Ne}return 1/0}{let l=1/0;for(const f of i)l=Math.min(l,f.z);return l}}const oi=tr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:bu}=oi,Ph=tr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:ey}=Ph,Fo=Math.cos(Math.PI/180*37.5),Dh=Math.pow(2,14)/.5;class kh{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map((l=>l.id)),this.index=i.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((l=>{this.gradients[l.id]={}})),this.layoutVertexArray=new He,this.layoutVertexArray2=new We,this.indexArray=new Wn,this.programConfigurations=new ls(i.layers,i.zoom),this.segments=new Cn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((l=>l.isStateDependent())).map((l=>l.id))}populate(i,l,f){this.hasDependencies=mu("line",this.layers,l)||this.hasLineDasharray(this.layers);const v=this.layers[0].layout.get("line-sort-key"),S=!v.isConstant(),T=[];for(const{feature:P,id:k,index:N,sourceLayerIndex:B}of i){const q=this.layers[0]._featureFilter.needGeometry,K=No(P,q);if(!this.layers[0]._featureFilter.filter(new er(this.zoom),K,f))continue;const J=S?v.evaluate(K,{},f):void 0,re={id:k,properties:P.properties,type:P.type,sourceLayerIndex:B,index:N,geometry:q?K.geometry:fu(P),patterns:{},dashes:{},sortKey:J};T.push(re)}S&&T.sort(((P,k)=>P.sortKey-k.sortKey));for(const P of T){const{geometry:k,index:N,sourceLayerIndex:B}=P;this.hasDependencies?(mu("line",this.layers,l)?Ol("line",this.layers,P,{zoom:this.zoom},l):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,P,this.zoom,l),this.patternFeatures.push(P)):this.addFeature(P,k,N,f,{},{},l.subdivisionGranularity),l.featureIndex.insert(i[N].feature,k,N,B,this.index)}}update(i,l,f,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,{imagePositions:f,dashPositions:v})}addFeatures(i,l,f,v){for(const S of this.patternFeatures)this.addFeature(S,S.geometry,S.index,l,f,v,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,ey)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,bu),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,l,f,v,S,T,P){const k=this.layers[0].layout,N=k.get("line-join").evaluate(i,{}),B=k.get("line-cap"),q=k.get("line-miter-limit"),K=k.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const J of l)this.addLine(J,i,N,B,q,K,v,P);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,{imagePositions:S,dashPositions:T,canonical:v})}addLine(i,l,f,v,S,T,P,k){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,i=yu(i,P?k.line.getGranularityForZoomLevel(P.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Te=0;Te<i.length-1;Te++)this.totalDistance+=i[Te].dist(i[Te+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const N=Eh.types[l.type]==="Polygon";let B=i.length;for(;B>=2&&i[B-1].equals(i[B-2]);)B--;let q=0;for(;q<B-1&&i[q].equals(i[q+1]);)q++;if(B<(N?3:2))return;f==="bevel"&&(S=1.05);const K=this.overscaling<=16?122880/(512*this.overscaling):0,J=this.segments.prepareSegment(10*B,this.layoutVertexArray,this.indexArray);let re,se,ue,ge,Ne;this.e1=this.e2=-1,N&&(re=i[B-2],Ne=i[q].sub(re)._unit()._perp());for(let Te=q;Te<B;Te++){if(ue=Te===B-1?N?i[q+1]:void 0:i[Te+1],ue&&i[Te].equals(ue))continue;Ne&&(ge=Ne),re&&(se=re),re=i[Te],Ne=ue?ue.sub(re)._unit()._perp():ge,ge=ge||Ne;let Ee=ge.add(Ne);Ee.x===0&&Ee.y===0||Ee._unit();const Ze=ge.x*Ne.x+ge.y*Ne.y,et=Ee.x*Ne.x+Ee.y*Ne.y,gt=et!==0?1/et:1/0,Ot=2*Math.sqrt(2-2*et),Ct=et<Fo&&se&&ue,Dt=ge.x*Ne.y-ge.y*Ne.x>0;if(Ct&&Te>q){const kt=re.dist(se);if(kt>2*K){const lt=re.sub(re.sub(se)._mult(K/kt)._round());this.updateDistance(se,lt),this.addCurrentVertex(lt,ge,0,0,J),se=lt}}const Zt=se&&ue;let Pt=Zt?f:N?"butt":v;if(Zt&&Pt==="round"&&(gt<T?Pt="miter":gt<=2&&(Pt="fakeround")),Pt==="miter"&&gt>S&&(Pt="bevel"),Pt==="bevel"&&(gt>2&&(Pt="flipbevel"),gt<S&&(Pt="miter")),se&&this.updateDistance(se,re),Pt==="miter")Ee._mult(gt),this.addCurrentVertex(re,Ee,0,0,J);else if(Pt==="flipbevel"){if(gt>100)Ee=Ne.mult(-1);else{const kt=gt*ge.add(Ne).mag()/ge.sub(Ne).mag();Ee._perp()._mult(kt*(Dt?-1:1))}this.addCurrentVertex(re,Ee,0,0,J),this.addCurrentVertex(re,Ee.mult(-1),0,0,J)}else if(Pt==="bevel"||Pt==="fakeround"){const kt=-Math.sqrt(gt*gt-1),lt=Dt?kt:0,tn=Dt?0:kt;if(se&&this.addCurrentVertex(re,ge,lt,tn,J),Pt==="fakeround"){const ln=Math.round(180*Ot/Math.PI/20);for(let Qt=1;Qt<ln;Qt++){let Gt=Qt/ln;if(Gt!==.5){const _r=Gt-.5;Gt+=Gt*_r*(Gt-1)*((1.0904+Ze*(Ze*(3.55645-1.43519*Ze)-3.2452))*_r*_r+(.848013+Ze*(.215638*Ze-1.06021)))}const Tn=Ne.sub(ge)._mult(Gt)._add(ge)._unit()._mult(Dt?-1:1);this.addHalfVertex(re,Tn.x,Tn.y,!1,Dt,0,J)}}ue&&this.addCurrentVertex(re,Ne,-lt,-tn,J)}else if(Pt==="butt")this.addCurrentVertex(re,Ee,0,0,J);else if(Pt==="square"){const kt=se?1:-1;this.addCurrentVertex(re,Ee,kt,kt,J)}else Pt==="round"&&(se&&(this.addCurrentVertex(re,ge,0,0,J),this.addCurrentVertex(re,ge,1,1,J,!0)),ue&&(this.addCurrentVertex(re,Ne,-1,-1,J,!0),this.addCurrentVertex(re,Ne,0,0,J)));if(Ct&&Te<B-1){const kt=re.dist(ue);if(kt>2*K){const lt=re.add(ue.sub(re)._mult(K/kt)._round());this.updateDistance(re,lt),this.addCurrentVertex(lt,Ne,0,0,J),re=lt}}}}addCurrentVertex(i,l,f,v,S,T=!1){const P=l.y*v-l.x,k=-l.y-l.x*v;this.addHalfVertex(i,l.x+l.y*f,l.y-l.x*f,T,!1,f,S),this.addHalfVertex(i,P,k,T,!0,-v,S),this.distance>Dh/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(i,l,f,v,S,T))}addHalfVertex({x:i,y:l},f,v,S,T,P,k){const N=.5*(this.lineClips?this.scaledDistance*(Dh-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(S?1:0),(l<<1)+(T?1:0),Math.round(63*f)+128,Math.round(63*v)+128,1+(P===0?0:P<0?-1:1)|(63&N)<<2,N>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const B=k.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,B,this.e2),k.primitiveLength++),T?this.e2=B:this.e1=B}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,l){this.distance+=i.dist(l),this.updateScaledDistance()}hasLineDasharray(i){for(const l of i){const f=l.paint.get("line-dasharray");if(f&&!f.isConstant())return!0}return!1}addLineDashDependencies(i,l,f,v){for(const S of i){const T=S.paint.get("line-dasharray");if(!T||T.value.kind==="constant")continue;const P=S.layout.get("line-cap")==="round",k={dasharray:T.value.evaluate({zoom:f-1},l,{}),round:P},N={dasharray:T.value.evaluate({zoom:f},l,{}),round:P},B={dasharray:T.value.evaluate({zoom:f+1},l,{}),round:P},q=`${k.dasharray.join(",")},${k.round}`,K=`${N.dasharray.join(",")},${N.round}`,J=`${B.dasharray.join(",")},${B.round}`;v.dashDependencies[q]=k,v.dashDependencies[K]=N,v.dashDependencies[J]=B,l.dashes[S.id]={min:q,mid:K,max:J}}}}let Ha,xm;It("LineBucket",kh,{omit:["layers","patternFeatures"]});var ip={get paint(){return xm=xm||new fr({"line-opacity":new Kt(ke.paint_line["line-opacity"]),"line-color":new Kt(ke.paint_line["line-color"]),"line-translate":new Bt(ke.paint_line["line-translate"]),"line-translate-anchor":new Bt(ke.paint_line["line-translate-anchor"]),"line-width":new Kt(ke.paint_line["line-width"]),"line-gap-width":new Kt(ke.paint_line["line-gap-width"]),"line-offset":new Kt(ke.paint_line["line-offset"]),"line-blur":new Kt(ke.paint_line["line-blur"]),"line-dasharray":new Sc(ke.paint_line["line-dasharray"]),"line-pattern":new Sc(ke.paint_line["line-pattern"]),"line-gradient":new uu(ke.paint_line["line-gradient"])})},get layout(){return Ha=Ha||new fr({"line-cap":new Bt(ke.layout_line["line-cap"]),"line-join":new Kt(ke.layout_line["line-join"]),"line-miter-limit":new Bt(ke.layout_line["line-miter-limit"]),"line-round-limit":new Bt(ke.layout_line["line-round-limit"]),"line-sort-key":new Kt(ke.layout_line["line-sort-key"])})}};class Qv extends Kt{possiblyEvaluate(i,l){return l=new er(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(i,l)}evaluate(i,l,f,v){return l=nn({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(i,l,f,v)}}let Oh;class wm extends Pi{constructor(i,l){super(i,ip,l),this.gradientVersion=0,Oh||(Oh=new Qv(ip.paint.properties["line-width"].specification),Oh.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!(function(f){return f._styleExpression!==void 0})(l)&&l._styleExpression.expression instanceof hl,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,l){super.recalculate(i,l),this.paint._values["line-floorwidth"]=Oh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new kh(i)}queryRadius(i){const l=i,f=Oc(Th("line-width",this,l),Th("line-gap-width",this,l)),v=Th("line-offset",this,l);return f/2+Math.abs(v)+Zf(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:i,feature:l,featureState:f,geometry:v,transform:S,pixelsToTileUnits:T}){const P=pu(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-S.bearingInRadians,T),k=T/2*Oc(this.paint.get("line-width").evaluate(l,f),this.paint.get("line-gap-width").evaluate(l,f)),N=this.paint.get("line-offset").evaluate(l,f);return N&&(v=(function(B,q){const K=[];for(let J=0;J<B.length;J++){const re=B[J],se=[];for(let ue=0;ue<re.length;ue++){const ge=re[ue-1],Ne=re[ue],Te=re[ue+1],Ee=ue===0?new M(0,0):Ne.sub(ge)._unit()._perp(),Ze=ue===re.length-1?new M(0,0):Te.sub(Ne)._unit()._perp(),et=Ee._add(Ze)._unit(),gt=et.x*Ze.x+et.y*Ze.y;gt!==0&&et._mult(1/gt),se.push(et._mult(q)._add(Ne))}K.push(se)}return K})(v,N*T)),(function(B,q,K){for(let J=0;J<q.length;J++){const re=q[J];if(B.length>=3){for(let se=0;se<re.length;se++)if(Sh(B,re[se]))return!0}if(jv(B,re,K))return!0}return!1})(P,v,k)}isTileClipped(){return!0}}function Oc(c,i){return i>0?i+2*c:c}const Ni=tr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),xu=tr([{name:"a_projected_pos",components:3,type:"Float32"}],4);tr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const $d=tr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);tr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const jl=tr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ty=tr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ny(c,i,l){return c.sections.forEach((f=>{f.text=(function(v,S,T){const P=S.layout.get("text-transform").evaluate(T,{});return P==="uppercase"?v=v.toLocaleUpperCase():P==="lowercase"&&(v=v.toLocaleLowerCase()),as.applyArabicShaping&&(v=as.applyArabicShaping(v)),v})(f.text,i,l)})),c}tr([{name:"triangle",components:3,type:"Uint16"}]),tr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),tr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),tr([{type:"Float32",name:"offsetX"}]),tr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),tr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Vd={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var qr=24;const ap=4294967296,ho=1/ap,ry=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class xa{constructor(i=new Uint8Array(16)){this.buf=ArrayBuffer.isView(i)?i:new Uint8Array(i),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(i,l,f=this.length){for(;this.pos<f;){const v=this.readVarint(),S=v>>3,T=this.pos;this.type=7&v,i(S,l,this),this.pos===T&&this.skip(v)}return l}readMessage(i,l){return this.readFields(i,l,this.readVarint()+this.pos)}readFixed32(){const i=this.dataView.getUint32(this.pos,!0);return this.pos+=4,i}readSFixed32(){const i=this.dataView.getInt32(this.pos,!0);return this.pos+=4,i}readFixed64(){const i=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*ap;return this.pos+=8,i}readSFixed64(){const i=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*ap;return this.pos+=8,i}readFloat(){const i=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,i}readDouble(){const i=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,i}readVarint(i){const l=this.buf;let f,v;return v=l[this.pos++],f=127&v,v<128?f:(v=l[this.pos++],f|=(127&v)<<7,v<128?f:(v=l[this.pos++],f|=(127&v)<<14,v<128?f:(v=l[this.pos++],f|=(127&v)<<21,v<128?f:(v=l[this.pos],f|=(15&v)<<28,(function(S,T,P){const k=P.buf;let N,B;if(B=k[P.pos++],N=(112&B)>>4,B<128||(B=k[P.pos++],N|=(127&B)<<3,B<128)||(B=k[P.pos++],N|=(127&B)<<10,B<128)||(B=k[P.pos++],N|=(127&B)<<17,B<128)||(B=k[P.pos++],N|=(127&B)<<24,B<128)||(B=k[P.pos++],N|=(1&B)<<31,B<128))return Ih(S,N,T);throw new Error("Expected varint not more than 10 bytes")})(f,i,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const i=this.readVarint();return i%2==1?(i+1)/-2:i/2}readBoolean(){return!!this.readVarint()}readString(){const i=this.readVarint()+this.pos,l=this.pos;return this.pos=i,i-l>=12&&ry?ry.decode(this.buf.subarray(l,i)):(function(f,v,S){let T="",P=v;for(;P<S;){const k=f[P];let N,B,q,K=null,J=k>239?4:k>223?3:k>191?2:1;if(P+J>S)break;J===1?k<128&&(K=k):J===2?(N=f[P+1],(192&N)==128&&(K=(31&k)<<6|63&N,K<=127&&(K=null))):J===3?(N=f[P+1],B=f[P+2],(192&N)==128&&(192&B)==128&&(K=(15&k)<<12|(63&N)<<6|63&B,(K<=2047||K>=55296&&K<=57343)&&(K=null))):J===4&&(N=f[P+1],B=f[P+2],q=f[P+3],(192&N)==128&&(192&B)==128&&(192&q)==128&&(K=(15&k)<<18|(63&N)<<12|(63&B)<<6|63&q,(K<=65535||K>=1114112)&&(K=null))),K===null?(K=65533,J=1):K>65535&&(K-=65536,T+=String.fromCharCode(K>>>10&1023|55296),K=56320|1023&K),T+=String.fromCharCode(K),P+=J}return T})(this.buf,l,i)}readBytes(){const i=this.readVarint()+this.pos,l=this.buf.subarray(this.pos,i);return this.pos=i,l}readPackedVarint(i=[],l){const f=this.readPackedEnd();for(;this.pos<f;)i.push(this.readVarint(l));return i}readPackedSVarint(i=[]){const l=this.readPackedEnd();for(;this.pos<l;)i.push(this.readSVarint());return i}readPackedBoolean(i=[]){const l=this.readPackedEnd();for(;this.pos<l;)i.push(this.readBoolean());return i}readPackedFloat(i=[]){const l=this.readPackedEnd();for(;this.pos<l;)i.push(this.readFloat());return i}readPackedDouble(i=[]){const l=this.readPackedEnd();for(;this.pos<l;)i.push(this.readDouble());return i}readPackedFixed32(i=[]){const l=this.readPackedEnd();for(;this.pos<l;)i.push(this.readFixed32());return i}readPackedSFixed32(i=[]){const l=this.readPackedEnd();for(;this.pos<l;)i.push(this.readSFixed32());return i}readPackedFixed64(i=[]){const l=this.readPackedEnd();for(;this.pos<l;)i.push(this.readFixed64());return i}readPackedSFixed64(i=[]){const l=this.readPackedEnd();for(;this.pos<l;)i.push(this.readSFixed64());return i}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(i){const l=7&i;if(l===0)for(;this.buf[this.pos++]>127;);else if(l===2)this.pos=this.readVarint()+this.pos;else if(l===5)this.pos+=4;else{if(l!==1)throw new Error(`Unimplemented type: ${l}`);this.pos+=8}}writeTag(i,l){this.writeVarint(i<<3|l)}realloc(i){let l=this.length||16;for(;l<this.pos+i;)l*=2;if(l!==this.length){const f=new Uint8Array(l);f.set(this.buf),this.buf=f,this.dataView=new DataView(f.buffer),this.length=l}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(i){this.realloc(4),this.dataView.setInt32(this.pos,i,!0),this.pos+=4}writeSFixed32(i){this.realloc(4),this.dataView.setInt32(this.pos,i,!0),this.pos+=4}writeFixed64(i){this.realloc(8),this.dataView.setInt32(this.pos,-1&i,!0),this.dataView.setInt32(this.pos+4,Math.floor(i*ho),!0),this.pos+=8}writeSFixed64(i){this.realloc(8),this.dataView.setInt32(this.pos,-1&i,!0),this.dataView.setInt32(this.pos+4,Math.floor(i*ho),!0),this.pos+=8}writeVarint(i){(i=+i||0)>268435455||i<0?(function(l,f){let v,S;if(l>=0?(v=l%4294967296|0,S=l/4294967296|0):(v=~(-l%4294967296),S=~(-l/4294967296),4294967295^v?v=v+1|0:(v=0,S=S+1|0)),l>=18446744073709552e3||l<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),(function(T,P,k){k.buf[k.pos++]=127&T|128,T>>>=7,k.buf[k.pos++]=127&T|128,T>>>=7,k.buf[k.pos++]=127&T|128,T>>>=7,k.buf[k.pos++]=127&T|128,k.buf[k.pos]=127&(T>>>=7)})(v,0,f),(function(T,P){const k=(7&T)<<4;P.buf[P.pos++]|=k|((T>>>=3)?128:0),T&&(P.buf[P.pos++]=127&T|((T>>>=7)?128:0),T&&(P.buf[P.pos++]=127&T|((T>>>=7)?128:0),T&&(P.buf[P.pos++]=127&T|((T>>>=7)?128:0),T&&(P.buf[P.pos++]=127&T|((T>>>=7)?128:0),T&&(P.buf[P.pos++]=127&T)))))})(S,f)})(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))}writeSVarint(i){this.writeVarint(i<0?2*-i-1:2*i)}writeBoolean(i){this.writeVarint(+i)}writeString(i){i=String(i),this.realloc(4*i.length),this.pos++;const l=this.pos;this.pos=(function(v,S,T){for(let P,k,N=0;N<S.length;N++){if(P=S.charCodeAt(N),P>55295&&P<57344){if(!k){P>56319||N+1===S.length?(v[T++]=239,v[T++]=191,v[T++]=189):k=P;continue}if(P<56320){v[T++]=239,v[T++]=191,v[T++]=189,k=P;continue}P=k-55296<<10|P-56320|65536,k=null}else k&&(v[T++]=239,v[T++]=191,v[T++]=189,k=null);P<128?v[T++]=P:(P<2048?v[T++]=P>>6|192:(P<65536?v[T++]=P>>12|224:(v[T++]=P>>18|240,v[T++]=P>>12&63|128),v[T++]=P>>6&63|128),v[T++]=63&P|128)}return T})(this.buf,i,this.pos);const f=this.pos-l;f>=128&&iy(l,f,this),this.pos=l-1,this.writeVarint(f),this.pos+=f}writeFloat(i){this.realloc(4),this.dataView.setFloat32(this.pos,i,!0),this.pos+=4}writeDouble(i){this.realloc(8),this.dataView.setFloat64(this.pos,i,!0),this.pos+=8}writeBytes(i){const l=i.length;this.writeVarint(l),this.realloc(l);for(let f=0;f<l;f++)this.buf[this.pos++]=i[f]}writeRawMessage(i,l){this.pos++;const f=this.pos;i(l,this);const v=this.pos-f;v>=128&&iy(f,v,this),this.pos=f-1,this.writeVarint(v),this.pos+=v}writeMessage(i,l,f){this.writeTag(i,2),this.writeRawMessage(l,f)}writePackedVarint(i,l){l.length&&this.writeMessage(i,Gb,l)}writePackedSVarint(i,l){l.length&&this.writeMessage(i,wu,l)}writePackedBoolean(i,l){l.length&&this.writeMessage(i,qd,l)}writePackedFloat(i,l){l.length&&this.writeMessage(i,Sm,l)}writePackedDouble(i,l){l.length&&this.writeMessage(i,ay,l)}writePackedFixed32(i,l){l.length&&this.writeMessage(i,Jv,l)}writePackedSFixed32(i,l){l.length&&this.writeMessage(i,e_,l)}writePackedFixed64(i,l){l.length&&this.writeMessage(i,t_,l)}writePackedSFixed64(i,l){l.length&&this.writeMessage(i,n_,l)}writeBytesField(i,l){this.writeTag(i,2),this.writeBytes(l)}writeFixed32Field(i,l){this.writeTag(i,5),this.writeFixed32(l)}writeSFixed32Field(i,l){this.writeTag(i,5),this.writeSFixed32(l)}writeFixed64Field(i,l){this.writeTag(i,1),this.writeFixed64(l)}writeSFixed64Field(i,l){this.writeTag(i,1),this.writeSFixed64(l)}writeVarintField(i,l){this.writeTag(i,0),this.writeVarint(l)}writeSVarintField(i,l){this.writeTag(i,0),this.writeSVarint(l)}writeStringField(i,l){this.writeTag(i,2),this.writeString(l)}writeFloatField(i,l){this.writeTag(i,5),this.writeFloat(l)}writeDoubleField(i,l){this.writeTag(i,1),this.writeDouble(l)}writeBooleanField(i,l){this.writeVarintField(i,+l)}}function Ih(c,i,l){return l?4294967296*i+(c>>>0):4294967296*(i>>>0)+(c>>>0)}function iy(c,i,l){const f=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));l.realloc(f);for(let v=l.pos-1;v>=c;v--)l.buf[v+f]=l.buf[v]}function Gb(c,i){for(let l=0;l<c.length;l++)i.writeVarint(c[l])}function wu(c,i){for(let l=0;l<c.length;l++)i.writeSVarint(c[l])}function Sm(c,i){for(let l=0;l<c.length;l++)i.writeFloat(c[l])}function ay(c,i){for(let l=0;l<c.length;l++)i.writeDouble(c[l])}function qd(c,i){for(let l=0;l<c.length;l++)i.writeBoolean(c[l])}function Jv(c,i){for(let l=0;l<c.length;l++)i.writeFixed32(c[l])}function e_(c,i){for(let l=0;l<c.length;l++)i.writeSFixed32(c[l])}function t_(c,i){for(let l=0;l<c.length;l++)i.writeFixed64(c[l])}function n_(c,i){for(let l=0;l<c.length;l++)i.writeSFixed64(c[l])}function Tm(c,i,l){c===1&&l.readMessage(oy,i)}function oy(c,i,l){if(c===3){const{id:f,bitmap:v,width:S,height:T,left:P,top:k,advance:N}=l.readMessage(Hb,{});i.push({id:f,bitmap:new Id({width:S+6,height:T+6},v),metrics:{width:S,height:T,left:P,top:k,advance:N}})}}function Hb(c,i,l){c===1?i.id=l.readVarint():c===2?i.bitmap=l.readBytes():c===3?i.width=l.readVarint():c===4?i.height=l.readVarint():c===5?i.left=l.readSVarint():c===6?i.top=l.readSVarint():c===7&&(i.advance=l.readVarint())}function r_(c){let i=0,l=0;for(const T of c)i+=T.w*T.h,l=Math.max(l,T.w);c.sort(((T,P)=>P.h-T.h));const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),l),h:1/0}];let v=0,S=0;for(const T of c)for(let P=f.length-1;P>=0;P--){const k=f[P];if(!(T.w>k.w||T.h>k.h)){if(T.x=k.x,T.y=k.y,S=Math.max(S,T.y+T.h),v=Math.max(v,T.x+T.w),T.w===k.w&&T.h===k.h){const N=f.pop();N&&P<f.length&&(f[P]=N)}else T.h===k.h?(k.x+=T.w,k.w-=T.w):T.w===k.w?(k.y+=T.h,k.h-=T.h):(f.push({x:k.x+T.w,y:k.y,w:k.w-T.w,h:T.h}),k.y+=T.h,k.h-=T.h);break}}return{w:v,h:S,fill:i/(v*S)||0}}class sy{constructor(i,{pixelRatio:l,version:f,stretchX:v,stretchY:S,content:T,textFitWidth:P,textFitHeight:k}){this.paddedRect=i,this.pixelRatio=l,this.stretchX=v,this.stretchY=S,this.content=T,this.version=f,this.textFitWidth=P,this.textFitHeight=k}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class ly{constructor(i,l){const f={},v={};this.haveRenderCallbacks=[];const S=[];this.addImages(i,f,S),this.addImages(l,v,S);const{w:T,h:P}=r_(S),k=new oa({width:T||1,height:P||1});for(const N in i){const B=i[N],q=f[N].paddedRect;oa.copy(B.data,k,{x:0,y:0},{x:q.x+1,y:q.y+1},B.data)}for(const N in l){const B=l[N],q=v[N].paddedRect,K=q.x+1,J=q.y+1,re=B.data.width,se=B.data.height;oa.copy(B.data,k,{x:0,y:0},{x:K,y:J},B.data),oa.copy(B.data,k,{x:0,y:se-1},{x:K,y:J-1},{width:re,height:1}),oa.copy(B.data,k,{x:0,y:0},{x:K,y:J+se},{width:re,height:1}),oa.copy(B.data,k,{x:re-1,y:0},{x:K-1,y:J},{width:1,height:se}),oa.copy(B.data,k,{x:0,y:0},{x:K+re,y:J},{width:1,height:se})}this.image=k,this.iconPositions=f,this.patternPositions=v}addImages(i,l,f){for(const v in i){const S=i[v],T={x:0,y:0,w:S.data.width+2,h:S.data.height+2};f.push(T),l[v]=new sy(T,S),S.hasRenderCallback&&this.haveRenderCallbacks.push(v)}}patchUpdatedImages(i,l){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in i.updatedImages)this.patchUpdatedImage(this.iconPositions[f],i.getImage(f),l),this.patchUpdatedImage(this.patternPositions[f],i.getImage(f),l)}patchUpdatedImage(i,l,f){if(!i||!l||i.version===l.version)return;i.version=l.version;const[v,S]=i.tl;f.update(l.data,void 0,{x:v,y:S})}}var Ic;It("ImagePosition",sy),It("ImageAtlas",ly),m.ao=void 0,(Ic=m.ao||(m.ao={}))[Ic.none=0]="none",Ic[Ic.horizontal=1]="horizontal",Ic[Ic.vertical=2]="vertical",Ic[Ic.horizontalOnly=3]="horizontalOnly";class Ll{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(i,l,f){const v=new Ll;return v.scale=i||1,v.fontStack=l,v.verticalAlign=f||"bottom",v}static forImage(i,l){const f=new Ll;return f.imageName=i,f.verticalAlign=l||"bottom",f}}class zc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,l){const f=new zc;for(let v=0;v<i.sections.length;v++){const S=i.sections[v];S.image?f.addImageSection(S):f.addTextSection(S,l)}return f}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(){this.text=(function(i){let l="";for(let f=0;f<i.length;f++){const v=i.charCodeAt(f+1)||null,S=i.charCodeAt(f-1)||null;l+=v&&gh(v)&&!Vd[i[f+1]]||S&&gh(S)&&!Vd[i[f-1]]||!Vd[i[f]]?i[f]:Vd[i[f]]}return l})(this.text)}trim(){let i=0;for(let f=0;f<this.text.length&&sp[this.text.charCodeAt(f)];f++)i++;let l=this.text.length;for(let f=this.text.length-1;f>=0&&f>=i&&sp[this.text.charCodeAt(f)];f--)l--;this.text=this.text.substring(i,l),this.sectionIndex=this.sectionIndex.slice(i,l)}substring(i,l){const f=new zc;return f.text=this.text.substring(i,l),f.sectionIndex=this.sectionIndex.slice(i,l),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((i,l)=>Math.max(i,this.sections[l].scale)),0)}getMaxImageSize(i){let l=0,f=0;for(let v=0;v<this.length();v++){const S=this.getSection(v);if(S.imageName){const T=i[S.imageName];if(!T)continue;const P=T.displaySize;l=Math.max(l,P[0]),f=Math.max(f,P[1])}}return{maxImageWidth:l,maxImageHeight:f}}addTextSection(i,l){this.text+=i.text,this.sections.push(Ll.forText(i.scale,i.fontStack||l,i.verticalAlign));const f=this.sections.length-1;for(let v=0;v<i.text.length;++v)this.sectionIndex.push(f)}addImageSection(i){const l=i.image?i.image.name:"";if(l.length===0)return void Wt("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(Ll.forImage(l,i.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Wt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function op(c,i,l,f,v,S,T,P,k,N,B,q,K,J,re){const se=zc.fromFeature(c,v);let ue;q===m.ao.vertical&&se.verticalizePunctuation();const{processBidirectionalText:ge,processStyledBidirectionalText:Ne}=as;if(ge&&se.sections.length===1){ue=[];const Ze=ge(se.toString(),ar(se,N,S,i,f,J));for(const et of Ze){const gt=new zc;gt.text=et,gt.sections=se.sections;for(let Ot=0;Ot<et.length;Ot++)gt.sectionIndex.push(0);ue.push(gt)}}else if(Ne){ue=[];const Ze=Ne(se.text,se.sectionIndex,ar(se,N,S,i,f,J));for(const et of Ze){const gt=new zc;gt.text=et[0],gt.sectionIndex=et[1],gt.sections=se.sections,ue.push(gt)}}else ue=(function(Ze,et){const gt=[],Ot=Ze.text;let Ct=0;for(const Dt of et)gt.push(Ze.substring(Ct,Dt)),Ct=Dt;return Ct<Ot.length&&gt.push(Ze.substring(Ct,Ot.length)),gt})(se,ar(se,N,S,i,f,J));const Te=[],Ee={positionedLines:Te,text:se.toString(),top:B[1],bottom:B[1],left:B[0],right:B[0],writingMode:q,iconsInText:!1,verticalizable:!1};return(function(Ze,et,gt,Ot,Ct,Dt,Zt,Pt,kt,lt,tn,ln){let Qt=0,Gt=0,Tn=0,_r=0;const Yr=Pt==="right"?1:Pt==="left"?0:.5,Bi=qr/ln;let Wa=0;for(const Qn of Ct){Qn.trim();const Gr=Qn.getMaxScale(),Xr={positionedGlyphs:[],lineOffset:0};Ze.positionedLines[Wa]=Xr;const Ir=Xr.positionedGlyphs;let wa=0;if(!Qn.length()){Gt+=Dt,++Wa;continue}const po=Zb(Ot,Qn,Bi);for(let Ya=0;Ya<Qn.length();Ya++){const li=Qn.getSection(Ya),Kr=Qn.getSectionIndex(Ya),vi=Qn.getCharCode(Ya),ci=Wb(kt,tn,vi);let or;if(li.imageName){if(Ze.iconsInText=!0,li.scale=li.scale*Bi,or=Xb(li,ci,Gr,po,Ot),!or)continue;wa=Math.max(wa,or.imageOffset)}else if(or=Yb(li,vi,ci,po,et,gt),!or)continue;const{rect:mo,metrics:jh,baselineOffset:Sa}=or;Ir.push({glyph:vi,imageName:li.imageName,x:Qt,y:Gt+Sa+-17,vertical:ci,scale:li.scale,fontStack:li.fontStack,sectionIndex:Kr,metrics:jh,rect:mo}),ci?(Ze.verticalizable=!0,Qt+=(li.imageName?jh.advance:qr)*li.scale+lt):Qt+=jh.advance*li.scale+lt}Ir.length!==0&&(Tn=Math.max(Qt-lt,Tn),Cm(Ir,0,Ir.length-1,Yr)),Qt=0,Xr.lineOffset=Math.max(wa,(Gr-1)*qr);const Hr=Dt*Gr+wa;Gt+=Hr,_r=Math.max(Hr,_r),++Wa}const{horizontalAlign:si,verticalAlign:Or}=lp(Zt);(function(Qn,Gr,Xr,Ir,wa,po,Hr,Ya,li){const Kr=(Gr-Xr)*wa;let vi=0;vi=po!==Hr?-Ya*Ir- -17:-Ir*li*Hr+.5*Hr;for(const ci of Qn)for(const or of ci.positionedGlyphs)or.x+=Kr,or.y+=vi})(Ze.positionedLines,Yr,si,Or,Tn,_r,Dt,Gt,Ct.length),Ze.top+=-Or*Gt,Ze.bottom=Ze.top+Gt,Ze.left+=-si*Tn,Ze.right=Ze.left+Tn})(Ee,i,l,f,ue,T,P,k,q,N,K,re),!(function(Ze){for(const et of Ze)if(et.positionedGlyphs.length!==0)return!1;return!0})(Te)&&Ee}const sp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},i_={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},a_={40:!0};function cy(c,i,l,f,v,S){if(i.imageName){const T=f[i.imageName];return T?T.displaySize[0]*i.scale*qr/S+v:0}{const T=l[i.fontStack],P=T&&T[c];return P?P.metrics.advance*i.scale+v:0}}function uy(c,i,l,f){const v=Math.pow(c-i,2);return f?c<i?v/2:2*v:v+Math.abs(l)*l}function Mm(c,i,l){let f=0;return c===10&&(f-=1e4),l&&(f+=150),c!==40&&c!==65288||(f+=50),i!==41&&i!==65289||(f+=50),f}function hy(c,i,l,f,v,S){let T=null,P=uy(i,l,v,S);for(const k of f){const N=uy(i-k.x,l,v,S)+k.badness;N<=P&&(T=k,P=N)}return{index:c,x:i,priorBreak:T,badness:P}}function dy(c){return c?dy(c.priorBreak).concat(c.index):[]}function ar(c,i,l,f,v,S){if(!c)return[];const T=[],P=(function(q,K,J,re,se,ue){let ge=0;for(let Ne=0;Ne<q.length();Ne++){const Te=q.getSection(Ne);ge+=cy(q.getCharCode(Ne),Te,re,se,K,ue)}return ge/Math.max(1,Math.ceil(ge/J))})(c,i,l,f,v,S),k=c.text.indexOf("​")>=0;let N=0;for(let q=0;q<c.length();q++){const K=c.getSection(q),J=c.getCharCode(q);if(sp[J]||(N+=cy(J,K,f,v,i,S)),q<c.length()-1){const re=!((B=J)<11904)&&(!!gn["CJK Compatibility Forms"](B)||!!gn["CJK Compatibility"](B)||!!gn["CJK Strokes"](B)||!!gn["CJK Symbols and Punctuation"](B)||!!gn["Enclosed CJK Letters and Months"](B)||!!gn["Halfwidth and Fullwidth Forms"](B)||!!gn["Ideographic Description Characters"](B)||!!gn["Vertical Forms"](B)||mh.test(String.fromCodePoint(B)));(i_[J]||re||K.imageName||q!==c.length()-2&&a_[c.getCharCode(q+1)])&&T.push(hy(q+1,N,P,T,Mm(J,c.getCharCode(q+1),re&&k),!1))}}var B;return dy(hy(c.length(),N,P,T,0,!0))}function lp(c){let i=.5,l=.5;switch(c){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:i,verticalAlign:l}}function Zb(c,i,l){const f=i.getMaxScale()*qr,{maxImageWidth:v,maxImageHeight:S}=i.getMaxImageSize(c),T=Math.max(f,S*l);return{verticalLineContentWidth:Math.max(f,v*l),horizontalLineContentHeight:T}}function fy(c){switch(c){case"top":return 0;case"center":return .5;default:return 1}}function Wb(c,i,l){return!(c===m.ao.horizontal||!i&&!Cl(l)||i&&(sp[l]||(f=l,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(f)))));var f}function Yb(c,i,l,f,v,S){const T=S[c.fontStack],P=(function(N,B,q,K){if(N&&N.rect)return N;const J=B[q.fontStack],re=J&&J[K];return re?{rect:null,metrics:re.metrics}:null})(T&&T[i],v,c,i);if(P===null)return null;let k;if(l)k=f.verticalLineContentWidth-c.scale*qr;else{const N=fy(c.verticalAlign);k=(f.horizontalLineContentHeight-c.scale*qr)*N}return{rect:P.rect,metrics:P.metrics,baselineOffset:k}}function Xb(c,i,l,f,v){const S=v[c.imageName];if(!S)return null;const T=S.paddedRect,P=S.displaySize,k={width:P[0],height:P[1],left:1,top:-3,advance:i?P[1]:P[0]};let N;if(i)N=f.verticalLineContentWidth-P[1]*c.scale;else{const B=fy(c.verticalAlign);N=(f.horizontalLineContentHeight-P[1]*c.scale)*B}return{rect:T,metrics:k,baselineOffset:N,imageOffset:(i?P[0]:P[1])*c.scale-qr*l}}function Cm(c,i,l,f){if(f===0)return;const v=c[l],S=(c[l].x+v.metrics.advance*v.scale)*f;for(let T=i;T<=l;T++)c[T].x-=S}function Gd(c,i,l){const{horizontalAlign:f,verticalAlign:v}=lp(l),S=i[0]-c.displaySize[0]*f,T=i[1]-c.displaySize[1]*v;return{image:c,top:T,bottom:T+c.displaySize[1],left:S,right:S+c.displaySize[0]}}function Em(c){var i,l;let f=c.left,v=c.top,S=c.right-f,T=c.bottom-v;const P=(i=c.image.textFitWidth)!==null&&i!==void 0?i:"stretchOrShrink",k=(l=c.image.textFitHeight)!==null&&l!==void 0?l:"stretchOrShrink",N=(c.image.content[2]-c.image.content[0])/(c.image.content[3]-c.image.content[1]);if(k==="proportional"){if(P==="stretchOnly"&&S/T<N||P==="proportional"){const B=Math.ceil(T*N);f*=B/S,S=B}}else if(P==="proportional"&&k==="stretchOnly"&&N!==0&&S/T>N){const B=Math.ceil(S/N);v*=B/T,T=B}return{x1:f,y1:v,x2:f+S,y2:v+T}}function cp(c,i,l,f,v,S){const T=c.image;let P;if(T.content){const ue=T.content,ge=T.pixelRatio||1;P=[ue[0]/ge,ue[1]/ge,T.displaySize[0]-ue[2]/ge,T.displaySize[1]-ue[3]/ge]}const k=i.left*S,N=i.right*S;let B,q,K,J;l==="width"||l==="both"?(J=v[0]+k-f[3],q=v[0]+N+f[1]):(J=v[0]+(k+N-T.displaySize[0])/2,q=J+T.displaySize[0]);const re=i.top*S,se=i.bottom*S;return l==="height"||l==="both"?(B=v[1]+re-f[0],K=v[1]+se+f[2]):(B=v[1]+(re+se-T.displaySize[1])/2,K=B+T.displaySize[1]),{image:T,top:B,right:q,bottom:K,left:J,collisionPadding:P}}const Ns=128,Za=32640;function Bs(c,i){const{expression:l}=i;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new er(c+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:v}=l;let S=0;for(;S<f.length&&f[S]<=c;)S++;S=Math.max(0,S-1);let T=S;for(;T<f.length&&f[T]<c+1;)T++;T=Math.min(f.length-1,T);const P=f[S],k=f[T];return l.kind==="composite"?{kind:"composite",minZoom:P,maxZoom:k,interpolationType:v}:{kind:"camera",minZoom:P,maxZoom:k,minSize:l.evaluate(new er(P)),maxSize:l.evaluate(new er(k)),interpolationType:v}}}function zh(c,i,l){let f="never";const v=c.get(i);return v?f=v:c.get(l)&&(f="always"),f}const Kb=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function up(c,i,l,f,v,S,T,P,k,N,B,q,K){const J=P?Math.min(Za,Math.round(P[0])):0,re=P?Math.min(Za,Math.round(P[1])):0;c.emplaceBack(i,l,Math.round(32*f),Math.round(32*v),S,T,(J<<1)+(k?1:0),re,16*N,16*B,256*q,256*K)}function Am(c,i,l){c.emplaceBack(i.x,i.y,l),c.emplaceBack(i.x,i.y,l),c.emplaceBack(i.x,i.y,l),c.emplaceBack(i.x,i.y,l)}function o_(c){for(const i of c.sections)if(Ps(i.text))return!0;return!1}class Pm{constructor(i){this.layoutVertexArray=new St,this.indexArray=new Wn,this.programConfigurations=i,this.segments=new Cn,this.dynamicLayoutVertexArray=new dt,this.opacityVertexArray=new Vt,this.hasVisibleVertices=!1,this.placedSymbolArray=new ee}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,l,f,v){this.isEmpty()||(f&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Ni.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,xu.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,Kb,!0),this.opacityVertexBuffer.itemSize=1),(f||v)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}It("SymbolBuffers",Pm);class py{constructor(i,l,f){this.layoutVertexArray=new i,this.layoutAttributes=l,this.indexArray=new f,this.segments=new Cn,this.collisionVertexArray=new jn}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,$d.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}It("CollisionBuffers",py);class Su{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=Pa(globalThis)?Math.min(i.overscaling,128):i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map((T=>T.id)),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Bs(this.zoom,l["text-size"]),this.iconSizeData=Bs(this.zoom,l["icon-size"]);const f=this.layers[0].layout,v=f.get("symbol-sort-key"),S=f.get("symbol-z-order");this.canOverlap=zh(f,"text-overlap","text-allow-overlap")!=="never"||zh(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=S!=="viewport-y"&&!v.isConstant(),this.sortFeaturesByY=(S==="viewport-y"||S==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map((T=>m.ao[T]))),this.stateDependentLayerIds=this.layers.filter((T=>T.isStateDependent())).map((T=>T.id)),this.sourceID=i.sourceID}createArrays(){this.text=new Pm(new ls(this.layers,this.zoom,(i=>/^text/.test(i)))),this.icon=new Pm(new ls(this.layers,this.zoom,(i=>/^icon/.test(i)))),this.glyphOffsetArray=new de,this.lineVertexArray=new pe,this.symbolInstances=new he,this.textAnchorOffsets=new xe}calculateGlyphDependencies(i,l,f,v,S){for(let T=0;T<i.length;T++)if(l[i.charCodeAt(T)]=!0,(f||v)&&S){const P=Vd[i.charAt(T)];P&&(l[P.charCodeAt(0)]=!0)}}populate(i,l,f){const v=this.layers[0],S=v.layout,T=S.get("text-font"),P=S.get("text-field"),k=S.get("icon-image"),N=(P.value.kind!=="constant"||P.value.value instanceof hi&&!P.value.value.isEmpty()||P.value.value.toString().length>0)&&(T.value.kind!=="constant"||T.value.value.length>0),B=k.value.kind!=="constant"||!!k.value.value||Object.keys(k.parameters).length>0,q=S.get("symbol-sort-key");if(this.features=[],!N&&!B)return;const K=l.iconDependencies,J=l.glyphDependencies,re=l.availableImages,se=new er(this.zoom);for(const{feature:ue,id:ge,index:Ne,sourceLayerIndex:Te}of i){const Ee=v._featureFilter.needGeometry,Ze=No(ue,Ee);if(!v._featureFilter.filter(se,Ze,f))continue;let et,gt;if(Ee||(Ze.geometry=fu(ue)),N){const Ct=v.getValueAndResolveTokens("text-field",Ze,f,re),Dt=hi.factory(Ct),Zt=this.hasRTLText=this.hasRTLText||o_(Dt);(!Zt||as.getRTLTextPluginStatus()==="unavailable"||Zt&&as.isParsed())&&(et=ny(Dt,v,Ze))}if(B){const Ct=v.getValueAndResolveTokens("icon-image",Ze,f,re);gt=Ct instanceof ta?Ct:ta.fromString(Ct)}if(!et&&!gt)continue;const Ot=this.sortFeaturesByKey?q.evaluate(Ze,{},f):void 0;if(this.features.push({id:ge,text:et,icon:gt,index:Ne,sourceLayerIndex:Te,geometry:Ze.geometry,properties:ue.properties,type:Eh.types[ue.type],sortKey:Ot}),gt&&(K[gt.name]=!0),et){const Ct=T.evaluate(Ze,{},f).join(","),Dt=S.get("text-rotation-alignment")!=="viewport"&&S.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(m.ao.vertical)>=0;for(const Zt of et.sections)if(Zt.image)K[Zt.image.name]=!0;else{const Pt=is(et.toString()),kt=Zt.fontStack||Ct,lt=J[kt]=J[kt]||{};this.calculateGlyphDependencies(Zt.text,lt,Dt,this.allowVerticalPlacement,Pt)}}}S.get("symbol-placement")==="line"&&(this.features=(function(ue){const ge={},Ne={},Te=[];let Ee=0;function Ze(Ct){Te.push(ue[Ct]),Ee++}function et(Ct,Dt,Zt){const Pt=Ne[Ct];return delete Ne[Ct],Ne[Dt]=Pt,Te[Pt].geometry[0].pop(),Te[Pt].geometry[0]=Te[Pt].geometry[0].concat(Zt[0]),Pt}function gt(Ct,Dt,Zt){const Pt=ge[Dt];return delete ge[Dt],ge[Ct]=Pt,Te[Pt].geometry[0].shift(),Te[Pt].geometry[0]=Zt[0].concat(Te[Pt].geometry[0]),Pt}function Ot(Ct,Dt,Zt){const Pt=Zt?Dt[0][Dt[0].length-1]:Dt[0][0];return`${Ct}:${Pt.x}:${Pt.y}`}for(let Ct=0;Ct<ue.length;Ct++){const Dt=ue[Ct],Zt=Dt.geometry,Pt=Dt.text?Dt.text.toString():null;if(!Pt){Ze(Ct);continue}const kt=Ot(Pt,Zt),lt=Ot(Pt,Zt,!0);if(kt in Ne&&lt in ge&&Ne[kt]!==ge[lt]){const tn=gt(kt,lt,Zt),ln=et(kt,lt,Te[tn].geometry);delete ge[kt],delete Ne[lt],Ne[Ot(Pt,Te[ln].geometry,!0)]=ln,Te[tn].geometry=null}else kt in Ne?et(kt,lt,Zt):lt in ge?gt(kt,lt,Zt):(Ze(Ct),ge[kt]=Ee-1,Ne[lt]=Ee-1)}return Te.filter((Ct=>Ct.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((ue,ge)=>ue.sortKey-ge.sortKey))}update(i,l,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,l,this.layers,{imagePositions:f}),this.icon.programConfigurations.updatePaintArrays(i,l,this.layers,{imagePositions:f}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,l){const f=this.lineVertexArray.length;if(i.segment!==void 0){let v=i.dist(l[i.segment+1]),S=i.dist(l[i.segment]);const T={};for(let P=i.segment+1;P<l.length;P++)T[P]={x:l[P].x,y:l[P].y,tileUnitDistanceFromAnchor:v},P<l.length-1&&(v+=l[P+1].dist(l[P]));for(let P=i.segment||0;P>=0;P--)T[P]={x:l[P].x,y:l[P].y,tileUnitDistanceFromAnchor:S},P>0&&(S+=l[P-1].dist(l[P]));for(let P=0;P<l.length;P++){const k=T[P];this.lineVertexArray.emplaceBack(k.x,k.y,k.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(i,l,f,v,S,T,P,k,N,B,q,K){const J=i.indexArray,re=i.layoutVertexArray,se=i.segments.prepareSegment(4*l.length,re,J,this.canOverlap?T.sortKey:void 0),ue=this.glyphOffsetArray.length,ge=se.vertexLength,Ne=this.allowVerticalPlacement&&P===m.ao.vertical?Math.PI/2:0,Te=T.text&&T.text.sections;for(let Ee=0;Ee<l.length;Ee++){const{tl:Ze,tr:et,bl:gt,br:Ot,tex:Ct,pixelOffsetTL:Dt,pixelOffsetBR:Zt,minFontScaleX:Pt,minFontScaleY:kt,glyphOffset:lt,isSDF:tn,sectionIndex:ln}=l[Ee],Qt=se.vertexLength,Gt=lt[1];up(re,k.x,k.y,Ze.x,Gt+Ze.y,Ct.x,Ct.y,f,tn,Dt.x,Dt.y,Pt,kt),up(re,k.x,k.y,et.x,Gt+et.y,Ct.x+Ct.w,Ct.y,f,tn,Zt.x,Dt.y,Pt,kt),up(re,k.x,k.y,gt.x,Gt+gt.y,Ct.x,Ct.y+Ct.h,f,tn,Dt.x,Zt.y,Pt,kt),up(re,k.x,k.y,Ot.x,Gt+Ot.y,Ct.x+Ct.w,Ct.y+Ct.h,f,tn,Zt.x,Zt.y,Pt,kt),Am(i.dynamicLayoutVertexArray,k,Ne),J.emplaceBack(Qt,Qt+2,Qt+1),J.emplaceBack(Qt+1,Qt+2,Qt+3),se.vertexLength+=4,se.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(lt[0]),Ee!==l.length-1&&ln===l[Ee+1].sectionIndex||i.programConfigurations.populatePaintArrays(re.length,T,T.index,{imagePositions:{},canonical:K,formattedSection:Te&&Te[ln]})}i.placedSymbolArray.emplaceBack(k.x,k.y,ue,this.glyphOffsetArray.length-ue,ge,N,B,k.segment,f?f[0]:0,f?f[1]:0,v[0],v[1],P,0,!1,0,q)}_addCollisionDebugVertex(i,l,f,v,S,T){return l.emplaceBack(0,0),i.emplaceBack(f.x,f.y,v,S,Math.round(T.x),Math.round(T.y))}addCollisionDebugVertices(i,l,f,v,S,T,P){const k=S.segments.prepareSegment(4,S.layoutVertexArray,S.indexArray),N=k.vertexLength,B=S.layoutVertexArray,q=S.collisionVertexArray,K=P.anchorX,J=P.anchorY;this._addCollisionDebugVertex(B,q,T,K,J,new M(i,l)),this._addCollisionDebugVertex(B,q,T,K,J,new M(f,l)),this._addCollisionDebugVertex(B,q,T,K,J,new M(f,v)),this._addCollisionDebugVertex(B,q,T,K,J,new M(i,v)),k.vertexLength+=4;const re=S.indexArray;re.emplaceBack(N,N+1),re.emplaceBack(N+1,N+2),re.emplaceBack(N+2,N+3),re.emplaceBack(N+3,N),k.primitiveLength+=4}addDebugCollisionBoxes(i,l,f,v){for(let S=i;S<l;S++){const T=this.collisionBoxArray.get(S);this.addCollisionDebugVertices(T.x1,T.y1,T.x2,T.y2,v?this.textCollisionBox:this.iconCollisionBox,T.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new py(un,jl.members,Yn),this.iconCollisionBox=new py(un,jl.members,Yn);for(let i=0;i<this.symbolInstances.length;i++){const l=this.symbolInstances.get(i);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(i,l,f,v,S,T,P,k,N){const B={};for(let q=l;q<f;q++){const K=i.get(q);B.textBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},B.textFeatureIndex=K.featureIndex;break}for(let q=v;q<S;q++){const K=i.get(q);B.verticalTextBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},B.verticalTextFeatureIndex=K.featureIndex;break}for(let q=T;q<P;q++){const K=i.get(q);B.iconBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},B.iconFeatureIndex=K.featureIndex;break}for(let q=k;q<N;q++){const K=i.get(q);B.verticalIconBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},B.verticalIconFeatureIndex=K.featureIndex;break}return B}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const f=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,l){const f=i.placedSymbolArray.get(l),v=f.vertexStartIndex+4*f.numGlyphs;for(let S=f.vertexStartIndex;S<v;S+=4)i.indexArray.emplaceBack(S,S+2,S+1),i.indexArray.emplaceBack(S+1,S+2,S+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(i),f=Math.cos(i),v=[],S=[],T=[];for(let P=0;P<this.symbolInstances.length;++P){T.push(P);const k=this.symbolInstances.get(P);v.push(0|Math.round(l*k.anchorX+f*k.anchorY)),S.push(k.featureIndex)}return T.sort(((P,k)=>v[P]-v[k]||S[k]-S[P])),T}addToSortKeyRanges(i,l){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===l?f.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const f=this.symbolInstances.get(l);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach(((v,S,T)=>{v>=0&&T.indexOf(v)===S&&this.addIndicesForPlacedSymbol(this.text,v)})),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let my,gy;It("SymbolBucket",Su,{omit:["layers","collisionBoxArray","features","compareText"]}),Su.MAX_GLYPHS=65535,Su.addDynamicAttributes=Am;var yy={get paint(){return gy=gy||new fr({"icon-opacity":new Kt(ke.paint_symbol["icon-opacity"]),"icon-color":new Kt(ke.paint_symbol["icon-color"]),"icon-halo-color":new Kt(ke.paint_symbol["icon-halo-color"]),"icon-halo-width":new Kt(ke.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Kt(ke.paint_symbol["icon-halo-blur"]),"icon-translate":new Bt(ke.paint_symbol["icon-translate"]),"icon-translate-anchor":new Bt(ke.paint_symbol["icon-translate-anchor"]),"text-opacity":new Kt(ke.paint_symbol["text-opacity"]),"text-color":new Kt(ke.paint_symbol["text-color"],{runtimeType:Da,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new Kt(ke.paint_symbol["text-halo-color"]),"text-halo-width":new Kt(ke.paint_symbol["text-halo-width"]),"text-halo-blur":new Kt(ke.paint_symbol["text-halo-blur"]),"text-translate":new Bt(ke.paint_symbol["text-translate"]),"text-translate-anchor":new Bt(ke.paint_symbol["text-translate-anchor"])})},get layout(){return my=my||new fr({"symbol-placement":new Bt(ke.layout_symbol["symbol-placement"]),"symbol-spacing":new Bt(ke.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Bt(ke.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Kt(ke.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Bt(ke.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Bt(ke.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Bt(ke.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Bt(ke.layout_symbol["icon-ignore-placement"]),"icon-optional":new Bt(ke.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Bt(ke.layout_symbol["icon-rotation-alignment"]),"icon-size":new Kt(ke.layout_symbol["icon-size"]),"icon-text-fit":new Bt(ke.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Bt(ke.layout_symbol["icon-text-fit-padding"]),"icon-image":new Kt(ke.layout_symbol["icon-image"]),"icon-rotate":new Kt(ke.layout_symbol["icon-rotate"]),"icon-padding":new Kt(ke.layout_symbol["icon-padding"]),"icon-keep-upright":new Bt(ke.layout_symbol["icon-keep-upright"]),"icon-offset":new Kt(ke.layout_symbol["icon-offset"]),"icon-anchor":new Kt(ke.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Bt(ke.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Bt(ke.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Bt(ke.layout_symbol["text-rotation-alignment"]),"text-field":new Kt(ke.layout_symbol["text-field"]),"text-font":new Kt(ke.layout_symbol["text-font"]),"text-size":new Kt(ke.layout_symbol["text-size"]),"text-max-width":new Kt(ke.layout_symbol["text-max-width"]),"text-line-height":new Bt(ke.layout_symbol["text-line-height"]),"text-letter-spacing":new Kt(ke.layout_symbol["text-letter-spacing"]),"text-justify":new Kt(ke.layout_symbol["text-justify"]),"text-radial-offset":new Kt(ke.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Bt(ke.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Kt(ke.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Kt(ke.layout_symbol["text-anchor"]),"text-max-angle":new Bt(ke.layout_symbol["text-max-angle"]),"text-writing-mode":new Bt(ke.layout_symbol["text-writing-mode"]),"text-rotate":new Kt(ke.layout_symbol["text-rotate"]),"text-padding":new Bt(ke.layout_symbol["text-padding"]),"text-keep-upright":new Bt(ke.layout_symbol["text-keep-upright"]),"text-transform":new Kt(ke.layout_symbol["text-transform"]),"text-offset":new Kt(ke.layout_symbol["text-offset"]),"text-allow-overlap":new Bt(ke.layout_symbol["text-allow-overlap"]),"text-overlap":new Bt(ke.layout_symbol["text-overlap"]),"text-ignore-placement":new Bt(ke.layout_symbol["text-ignore-placement"]),"text-optional":new Bt(ke.layout_symbol["text-optional"])})}};class Dm{constructor(i){if(i.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=i.property.overrides?i.property.overrides.runtimeType:Ln,this.defaultValue=i}evaluate(i){if(i.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(i.formattedSection))return l.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}It("FormatSectionOverride",Dm,{omit:["defaultValue"]});class Hd extends Pi{constructor(i,l){super(i,yy,l)}recalculate(i,l){if(super.recalculate(i,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const v=[];for(const S of f)v.indexOf(S)<0&&v.push(S);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,l,f,v){const S=this.layout.get(i).evaluate(l,{},f,v),T=this._unevaluatedLayout._values[i];return T.isDataDriven()||ru(T.value)||!S?S:(function(P,k){return k.replace(/{([^{}]+)}/g,((N,B)=>P&&B in P?String(P[B]):""))})(l.properties,S)}createBucket(i){return new Su(i)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const i of yy.paint.overridableProperties){if(!Hd.hasPaintOverride(this.layout,i))continue;const l=this.paint.get(i),f=new Dm(l),v=new Md(f,l.property.specification);let S=null;S=l.value.kind==="constant"||l.value.kind==="source"?new ia("source",v):new Ss("composite",v,l.value.zoomStops),this.paint._values[i]=new Oo(l.property,S,l.parameters)}}_handleOverridablePaintPropertyUpdate(i,l,f){return!(!this.layout||l.isDataDriven()||f.isDataDriven())&&Hd.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,l){const f=i.get("text-field"),v=yy.paint.properties[l];let S=!1;const T=P=>{for(const k of P)if(v.overrides&&v.overrides.hasOverride(k))return void(S=!0)};if(f.value.kind==="constant"&&f.value.value instanceof hi)T(f.value.value.sections);else if(f.value.kind==="source"||f.value.kind==="composite"){const P=N=>{S||(N instanceof on&&yr(N.value)===Ho?T(N.value.sections):N instanceof gd?T(N.sections):N.eachChild(P))},k=f.value;k._styleExpression&&P(k._styleExpression.expression)}return S}}let s_;var Qb={get paint(){return s_=s_||new fr({"background-color":new Bt(ke.paint_background["background-color"]),"background-pattern":new Ad(ke.paint_background["background-pattern"]),"background-opacity":new Bt(ke.paint_background["background-opacity"])})}};class hp extends Pi{constructor(i,l){super(i,Qb,l)}}class Jb extends Pi{constructor(i,l){super(i,{},l),this.onAdd=f=>{this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},this.onRemove=f=>{this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class l_{constructor(i){this._methodToThrottle=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Fn={once:!0},dp=63710088e-1;class Fs{constructor(i,l){if(isNaN(i)||isNaN(l))throw new Error(`Invalid LngLat object: (${i}, ${l})`);if(this.lng=+i,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Fs(bt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const l=Math.PI/180,f=this.lat*l,v=i.lat*l,S=Math.sin(f)*Math.sin(v)+Math.cos(f)*Math.cos(v)*Math.cos((i.lng-this.lng)*l);return dp*Math.acos(Math.min(S,1))}static convert(i){if(i instanceof Fs)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new Fs(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new Fs(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const km=2*Math.PI*dp;function vy(c){return km*Math.cos(c*Math.PI/180)}function Om(c){return(180+c)/360}function Zd(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function fp(c,i){return c/vy(i)}function _y(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function by(c,i){return c*vy(_y(i))}class pp{constructor(i,l,f=0){this.x=+i,this.y=+l,this.z=+f}static fromLngLat(i,l=0){const f=Fs.convert(i);return new pp(Om(f.lng),Zd(f.lat),fp(l,f.lat))}toLngLat(){return new Fs(360*this.x-180,_y(this.y))}toAltitude(){return by(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/km*(i=_y(this.y),1/Math.cos(i*Math.PI/180));var i}}function c_(c,i,l){var f=2*Math.PI*6378137/256/Math.pow(2,l);return[c*f-2*Math.PI*6378137/2,i*f-2*Math.PI*6378137/2]}class Im{constructor(i,l,f){if(!(function(v,S,T){return!(v<0||v>25||T<0||T>=Math.pow(2,v)||S<0||S>=Math.pow(2,v))})(i,l,f))throw new Error(`x=${l}, y=${f}, z=${i} outside of bounds. 0<=x<${Math.pow(2,i)}, 0<=y<${Math.pow(2,i)} 0<=z<=25 `);this.z=i,this.x=l,this.y=f,this.key=Tu(0,i,i,l,f)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,l,f){const v=(T=this.y,P=this.z,k=c_(256*(S=this.x),256*(T=Math.pow(2,P)-T-1),P),N=c_(256*(S+1),256*(T+1),P),k[0]+","+k[1]+","+N[0]+","+N[1]);var S,T,P,k,N;const B=(function(q,K,J){let re,se="";for(let ue=q;ue>0;ue--)re=1<<ue-1,se+=(K&re?1:0)+(J&re?2:0);return se})(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,B).replace(/{bbox-epsg-3857}/g,v)}isChildOf(i){const l=this.z-i.z;return l>0&&i.x===this.x>>l&&i.y===this.y>>l}getTilePoint(i){const l=Math.pow(2,this.z);return new M((i.x*l-this.x)*ht,(i.y*l-this.y)*ht)}toString(){return`${this.z}/${this.x}/${this.y}`}}class xy{constructor(i,l){this.wrap=i,this.canonical=l,this.key=Tu(i,l.z,l.z,l.x,l.y)}}class zn{constructor(i,l,f,v,S){if(this.terrainRttPosMatrix32f=null,i<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${i}; z = ${f}`);this.overscaledZ=i,this.wrap=l,this.canonical=new Im(f,+v,+S),this.key=Tu(l,i,f,v,S)}clone(){return new zn(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-i;return i>this.canonical.z?new zn(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new zn(i,this.wrap,i,this.canonical.x>>l,this.canonical.y>>l)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(i,l){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-i;return i>this.canonical.z?Tu(this.wrap*+l,i,this.canonical.z,this.canonical.x,this.canonical.y):Tu(this.wrap*+l,i,i,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(i){if(i.wrap!==this.wrap||this.overscaledZ-i.overscaledZ<=0)return!1;if(i.overscaledZ===0)return this.overscaledZ>0;const l=this.canonical.z-i.canonical.z;return!(l<0)&&i.canonical.x===this.canonical.x>>l&&i.canonical.y===this.canonical.y>>l}children(i){if(this.overscaledZ>=i)return[new zn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,f=2*this.canonical.x,v=2*this.canonical.y;return[new zn(l,this.wrap,l,f,v),new zn(l,this.wrap,l,f+1,v),new zn(l,this.wrap,l,f,v+1),new zn(l,this.wrap,l,f+1,v+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new zn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new zn(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new xy(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new pp(i.x-this.wrap,i.y))}}function Tu(c,i,l,f,v){(c*=2)<0&&(c=-1*c-1);const S=1<<l;return(S*S*c+S*v+f).toString(36)+l.toString(36)+i.toString(36)}function yi(c,i){return i?c.properties[i]:c.id}It("CanonicalTileID",Im),It("OverscaledTileID",zn,{omit:["terrainRttPosMatrix32f"]});class Rh{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(i){return this.minX=Math.min(this.minX,i.x),this.minY=Math.min(this.minY,i.y),this.maxX=Math.max(this.maxX,i.x),this.maxY=Math.max(this.maxY,i.y),this}expandBy(i){return this.minX-=i,this.minY-=i,this.maxX+=i,this.maxY+=i,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(i){return this.expandBy(-i)}map(i){const l=new Rh;return l.extend(i(new M(this.minX,this.minY))),l.extend(i(new M(this.maxX,this.minY))),l.extend(i(new M(this.minX,this.maxY))),l.extend(i(new M(this.maxX,this.maxY))),l}static fromPoints(i){const l=new Rh;for(const f of i)l.extend(f);return l}contains(i){return i.x>=this.minX&&i.x<=this.maxX&&i.y>=this.minY&&i.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(i){return!this.empty()&&!i.empty()&&i.minX>=this.minX&&i.maxX<=this.maxX&&i.minY>=this.minY&&i.maxY<=this.maxY}intersects(i){return!this.empty()&&!i.empty()&&i.minX<=this.maxX&&i.maxX>=this.minX&&i.minY<=this.maxY&&i.maxY>=this.minY}}class wy{constructor(i){this._stringToNumber={},this._numberToString=[];for(let l=0;l<i.length;l++){const f=i[l];this._stringToNumber[f]=l,this._numberToString[l]=f}}encode(i){return this._stringToNumber[i]}decode(i){if(i>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${i} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[i]}}class u_{constructor(i,l,f,v,S){this.type="Feature",this._vectorTileFeature=i,i._z=l,i._x=f,i._y=v,this.properties=i.properties,this.id=S}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(i[l]=this[l]);return i}}class zm{constructor(i,l){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new vc(ht,16,0),this.grid3D=new vc(ht,16,0),this.featureIndexArray=new Ce,this.promoteId=l}insert(i,l,f,v,S,T){const P=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,v,S);const k=T?this.grid3D:this.grid;for(let N=0;N<l.length;N++){const B=l[N],q=[1/0,1/0,-1/0,-1/0];for(let K=0;K<B.length;K++){const J=B[K];q[0]=Math.min(q[0],J.x),q[1]=Math.min(q[1],J.y),q[2]=Math.max(q[2],J.x),q[3]=Math.max(q[3],J.y)}q[0]<ht&&q[1]<ht&&q[2]>=0&&q[3]>=0&&k.insert(P,q[0],q[1],q[2],q[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Qg(new xa(this.rawTileData)).layers,this.sourceLayerCoder=new wy(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(i,l,f,v){this.loadVTLayers();const S=i.params,T=ht/i.tileSize/i.scale,P=ma(S.filter,S.globalState),k=i.queryGeometry,N=i.queryPadding*T,B=Rh.fromPoints(k),q=this.grid.query(B.minX-N,B.minY-N,B.maxX+N,B.maxY+N),K=Rh.fromPoints(i.cameraQueryGeometry).expandBy(N),J=this.grid3D.query(K.minX,K.minY,K.maxX,K.maxY,((ue,ge,Ne,Te)=>(function(Ee,Ze,et,gt,Ot){for(const Dt of Ee)if(Ze<=Dt.x&&et<=Dt.y&&gt>=Dt.x&&Ot>=Dt.y)return!0;const Ct=[new M(Ze,et),new M(Ze,Ot),new M(gt,Ot),new M(gt,et)];if(Ee.length>2){for(const Dt of Ct)if(Sh(Ee,Dt))return!0}for(let Dt=0;Dt<Ee.length-1;Dt++)if(Lv(Ee[Dt],Ee[Dt+1],Ct))return!0;return!1})(i.cameraQueryGeometry,ue-N,ge-N,Ne+N,Te+N)));for(const ue of J)q.push(ue);q.sort(jm);const re={};let se;for(let ue=0;ue<q.length;ue++){const ge=q[ue];if(ge===se)continue;se=ge;const Ne=this.featureIndexArray.get(ge);let Te=null;this.loadMatchingFeature(re,Ne.bucketIndex,Ne.sourceLayerIndex,Ne.featureIndex,P,S.layers,S.availableImages,l,f,v,((Ee,Ze,et)=>(Te||(Te=fu(Ee)),Ze.queryIntersectsFeature({queryGeometry:k,feature:Ee,featureState:et,geometry:Te,zoom:this.z,transform:i.transform,pixelsToTileUnits:T,pixelPosMatrix:i.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:i.getElevation}))))}return re}loadMatchingFeature(i,l,f,v,S,T,P,k,N,B,q){const K=this.bucketLayerIDs[l];if(T&&!K.some((ue=>T.has(ue))))return;const J=this.sourceLayerCoder.decode(f),re=this.vtLayers[J].feature(v);if(S.needGeometry){const ue=No(re,!0);if(!S.filter(new er(this.tileID.overscaledZ),ue,this.tileID.canonical))return}else if(!S.filter(new er(this.tileID.overscaledZ),re))return;const se=this.getId(re,J);for(let ue=0;ue<K.length;ue++){const ge=K[ue];if(T&&!T.has(ge))continue;const Ne=k[ge];if(!Ne)continue;let Te={};se&&B&&(Te=B.getState(Ne.sourceLayer||"_geojsonTileLayer",se));const Ee=nn({},N[ge]);Ee.paint=Rm(Ee.paint,Ne.paint,re,Te,P),Ee.layout=Rm(Ee.layout,Ne.layout,re,Te,P);const Ze=!q||q(re,Ne,Te);if(!Ze)continue;const et=new u_(re,this.z,this.x,this.y,se);et.layer=Ee;let gt=i[ge];gt===void 0&&(gt=i[ge]=[]),gt.push({featureIndex:v,feature:et,intersectionZ:Ze})}}lookupSymbolFeatures(i,l,f,v,S,T,P,k){const N={};this.loadVTLayers();const B=ma(S.filterSpec,S.globalState);for(const q of i)this.loadMatchingFeature(N,f,v,q,B,T,P,k,l);return N}hasLayer(i){for(const l of this.bucketLayerIDs)for(const f of l)if(i===f)return!0;return!1}getId(i,l){var f;let v=i.id;return this.promoteId&&(v=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof v=="boolean"&&(v=Number(v)),v===void 0&&(!((f=i.properties)===null||f===void 0)&&f.cluster)&&this.promoteId&&(v=Number(i.properties.cluster_id))),v}}function Rm(c,i,l,f,v){return Rt(c,((S,T)=>{const P=i instanceof vh?i.get(T):null;return P&&P.evaluate?P.evaluate(l,f,v):P}))}function jm(c,i){return i-c}function Sy(c,i,l,f,v){const S=[];for(let T=0;T<c.length;T++){const P=c[T];let k;for(let N=0;N<P.length-1;N++){let B=P[N],q=P[N+1];B.x<i&&q.x<i||(B.x<i?B=new M(i,B.y+(i-B.x)/(q.x-B.x)*(q.y-B.y))._round():q.x<i&&(q=new M(i,B.y+(i-B.x)/(q.x-B.x)*(q.y-B.y))._round()),B.y<l&&q.y<l||(B.y<l?B=new M(B.x+(l-B.y)/(q.y-B.y)*(q.x-B.x),l)._round():q.y<l&&(q=new M(B.x+(l-B.y)/(q.y-B.y)*(q.x-B.x),l)._round()),B.x>=f&&q.x>=f||(B.x>=f?B=new M(f,B.y+(f-B.x)/(q.x-B.x)*(q.y-B.y))._round():q.x>=f&&(q=new M(f,B.y+(f-B.x)/(q.x-B.x)*(q.y-B.y))._round()),B.y>=v&&q.y>=v||(B.y>=v?B=new M(B.x+(v-B.y)/(q.y-B.y)*(q.x-B.x),v)._round():q.y>=v&&(q=new M(B.x+(v-B.y)/(q.y-B.y)*(q.x-B.x),v)._round()),k&&B.equals(k[k.length-1])||(k=[B],S.push(k)),k.push(q)))))}}return S}It("FeatureIndex",zm,{omit:["rawTileData","sourceLayerCoder"]});class Rc extends M{constructor(i,l,f,v){super(i,l),this.angle=f,v!==void 0&&(this.segment=v)}clone(){return new Rc(this.x,this.y,this.angle,this.segment)}}function Lm(c,i,l,f,v){if(i.segment===void 0||l===0)return!0;let S=i,T=i.segment+1,P=0;for(;P>-l/2;){if(T--,T<0)return!1;P-=c[T].dist(S),S=c[T]}P+=c[T].dist(c[T+1]),T++;const k=[];let N=0;for(;P<l/2;){const B=c[T],q=c[T+1];if(!q)return!1;let K=c[T-1].angleTo(B)-B.angleTo(q);for(K=Math.abs((K+3*Math.PI)%(2*Math.PI)-Math.PI),k.push({distance:P,angleDelta:K}),N+=K;P-k[0].distance>f;)N-=k.shift().angleDelta;if(N>v)return!1;T++,P+=B.dist(q)}return!0}function Nm(c){let i=0;for(let l=0;l<c.length-1;l++)i+=c[l].dist(c[l+1]);return i}function h_(c,i,l){return c?.6*i*l:0}function Ty(c,i){return Math.max(c?c.right-c.left:0,i?i.right-i.left:0)}function ex(c,i,l,f,v,S){const T=h_(l,v,S),P=Ty(l,f)*S;let k=0;const N=Nm(c)/2;for(let B=0;B<c.length-1;B++){const q=c[B],K=c[B+1],J=q.dist(K);if(k+J>N){const re=(N-k)/J,se=ro.number(q.x,K.x,re),ue=ro.number(q.y,K.y,re),ge=new Rc(se,ue,K.angleTo(q),B);return ge._round(),!T||Lm(c,ge,P,T,i)?ge:void 0}k+=J}}function d_(c,i,l,f,v,S,T,P,k){const N=h_(f,S,T),B=Ty(f,v),q=B*T,K=c[0].x===0||c[0].x===k||c[0].y===0||c[0].y===k;return i-q<i/4&&(i=q+i/4),f_(c,K?i/2*P%i:(B/2+2*S)*T*P%i,i,N,l,q,K,!1,k)}function f_(c,i,l,f,v,S,T,P,k){const N=S/2,B=Nm(c);let q=0,K=i-l,J=[];for(let re=0;re<c.length-1;re++){const se=c[re],ue=c[re+1],ge=se.dist(ue),Ne=ue.angleTo(se);for(;K+l<q+ge;){K+=l;const Te=(K-q)/ge,Ee=ro.number(se.x,ue.x,Te),Ze=ro.number(se.y,ue.y,Te);if(Ee>=0&&Ee<k&&Ze>=0&&Ze<k&&K-N>=0&&K+N<=B){const et=new Rc(Ee,Ze,Ne,re);et._round(),f&&!Lm(c,et,S,f,v)||J.push(et)}}q+=ge}return P||J.length||T||(J=f_(c,q/2,l,f,v,S,T,!0,k)),J}function p_(c,i,l,f){const v=[],S=c.image,T=S.pixelRatio,P=S.paddedRect.w-2,k=S.paddedRect.h-2;let N={x1:c.left,y1:c.top,x2:c.right,y2:c.bottom};const B=S.stretchX||[[0,P]],q=S.stretchY||[[0,k]],K=(lt,tn)=>lt+tn[1]-tn[0],J=B.reduce(K,0),re=q.reduce(K,0),se=P-J,ue=k-re;let ge=0,Ne=J,Te=0,Ee=re,Ze=0,et=se,gt=0,Ot=ue;if(S.content&&f){const lt=S.content,tn=lt[2]-lt[0],ln=lt[3]-lt[1];(S.textFitWidth||S.textFitHeight)&&(N=Em(c)),ge=Us(B,0,lt[0]),Te=Us(q,0,lt[1]),Ne=Us(B,lt[0],lt[2]),Ee=Us(q,lt[1],lt[3]),Ze=lt[0]-ge,gt=lt[1]-Te,et=tn-Ne,Ot=ln-Ee}const Ct=N.x1,Dt=N.y1,Zt=N.x2-Ct,Pt=N.y2-Dt,kt=(lt,tn,ln,Qt)=>{const Gt=mp(lt.stretch-ge,Ne,Zt,Ct),Tn=Wd(lt.fixed-Ze,et,lt.stretch,J),_r=mp(tn.stretch-Te,Ee,Pt,Dt),Yr=Wd(tn.fixed-gt,Ot,tn.stretch,re),Bi=mp(ln.stretch-ge,Ne,Zt,Ct),Wa=Wd(ln.fixed-Ze,et,ln.stretch,J),si=mp(Qt.stretch-Te,Ee,Pt,Dt),Or=Wd(Qt.fixed-gt,Ot,Qt.stretch,re),Qn=new M(Gt,_r),Gr=new M(Bi,_r),Xr=new M(Bi,si),Ir=new M(Gt,si),wa=new M(Tn/T,Yr/T),po=new M(Wa/T,Or/T),Hr=i*Math.PI/180;if(Hr){const Kr=Math.sin(Hr),vi=Math.cos(Hr),ci=[vi,-Kr,Kr,vi];Qn._matMult(ci),Gr._matMult(ci),Ir._matMult(ci),Xr._matMult(ci)}const Ya=lt.stretch+lt.fixed,li=tn.stretch+tn.fixed;return{tl:Qn,tr:Gr,bl:Ir,br:Xr,tex:{x:S.paddedRect.x+1+Ya,y:S.paddedRect.y+1+li,w:ln.stretch+ln.fixed-Ya,h:Qt.stretch+Qt.fixed-li},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:wa,pixelOffsetBR:po,minFontScaleX:et/T/Zt,minFontScaleY:Ot/T/Pt,isSDF:l}};if(f&&(S.stretchX||S.stretchY)){const lt=My(B,se,J),tn=My(q,ue,re);for(let ln=0;ln<lt.length-1;ln++){const Qt=lt[ln],Gt=lt[ln+1];for(let Tn=0;Tn<tn.length-1;Tn++)v.push(kt(Qt,tn[Tn],Gt,tn[Tn+1]))}}else v.push(kt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:P+1},{fixed:0,stretch:k+1}));return v}function Us(c,i,l){let f=0;for(const v of c)f+=Math.max(i,Math.min(l,v[1]))-Math.max(i,Math.min(l,v[0]));return f}function My(c,i,l){const f=[{fixed:-1,stretch:0}];for(const[v,S]of c){const T=f[f.length-1];f.push({fixed:v-T.stretch,stretch:T.stretch}),f.push({fixed:v-T.stretch,stretch:T.stretch+(S-v)})}return f.push({fixed:i+1,stretch:l}),f}function mp(c,i,l,f){return c/i*l+f}function Wd(c,i,l,f){return c-i*l/f}It("Anchor",Rc);class Bm{constructor(i,l,f,v,S,T,P,k,N,B){var q;if(this.boxStartIndex=i.length,N){let K=T.top,J=T.bottom;const re=T.collisionPadding;re&&(K-=re[1],J+=re[3]);let se=J-K;se>0&&(se=Math.max(10,se),this.circleDiameter=se)}else{const K=!((q=T.image)===null||q===void 0)&&q.content&&(T.image.textFitWidth||T.image.textFitHeight)?Em(T):{x1:T.left,y1:T.top,x2:T.right,y2:T.bottom};K.y1=K.y1*P-k[0],K.y2=K.y2*P+k[2],K.x1=K.x1*P-k[3],K.x2=K.x2*P+k[1];const J=T.collisionPadding;if(J&&(K.x1-=J[0]*P,K.y1-=J[1]*P,K.x2+=J[2]*P,K.y2+=J[3]*P),B){const re=new M(K.x1,K.y1),se=new M(K.x2,K.y1),ue=new M(K.x1,K.y2),ge=new M(K.x2,K.y2),Ne=B*Math.PI/180;re._rotate(Ne),se._rotate(Ne),ue._rotate(Ne),ge._rotate(Ne),K.x1=Math.min(re.x,se.x,ue.x,ge.x),K.x2=Math.max(re.x,se.x,ue.x,ge.x),K.y1=Math.min(re.y,se.y,ue.y,ge.y),K.y2=Math.max(re.y,se.y,ue.y,ge.y)}i.emplaceBack(l.x,l.y,K.x1,K.y1,K.x2,K.y2,f,v,S)}this.boxEndIndex=i.length}}class tx{constructor(i=[],l=(f,v)=>f<v?-1:f>v?1:0){if(this.data=i,this.length=this.data.length,this.compare=l,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:l,compare:f}=this,v=l[i];for(;i>0;){const S=i-1>>1,T=l[S];if(f(v,T)>=0)break;l[i]=T,i=S}l[i]=v}_down(i){const{data:l,compare:f}=this,v=this.length>>1,S=l[i];for(;i<v;){let T=1+(i<<1);const P=T+1;if(P<this.length&&f(l[P],l[T])<0&&(T=P),f(l[T],S)>=0)break;l[i]=l[T],i=T}l[i]=S}}function m_(c,i=1,l=!1){const f=Rh.fromPoints(c[0]),v=Math.min(f.width(),f.height());let S=v/2;const T=new tx([],Cy),{minX:P,minY:k,maxX:N,maxY:B}=f;if(v===0)return new M(P,k);for(let J=P;J<N;J+=v)for(let re=k;re<B;re+=v)T.push(new Mu(J+S,re+S,S,c));let q=(function(J){let re=0,se=0,ue=0;const ge=J[0];for(let Ne=0,Te=ge.length,Ee=Te-1;Ne<Te;Ee=Ne++){const Ze=ge[Ne],et=ge[Ee],gt=Ze.x*et.y-et.x*Ze.y;se+=(Ze.x+et.x)*gt,ue+=(Ze.y+et.y)*gt,re+=3*gt}return new Mu(se/re,ue/re,0,J)})(c),K=T.length;for(;T.length;){const J=T.pop();(J.d>q.d||!q.d)&&(q=J,l&&console.log("found best %d after %d probes",Math.round(1e4*J.d)/1e4,K)),J.max-q.d<=i||(S=J.h/2,T.push(new Mu(J.p.x-S,J.p.y-S,S,c)),T.push(new Mu(J.p.x+S,J.p.y-S,S,c)),T.push(new Mu(J.p.x-S,J.p.y+S,S,c)),T.push(new Mu(J.p.x+S,J.p.y+S,S,c)),K+=4)}return l&&(console.log(`num probes: ${K}`),console.log(`best distance: ${q.d}`)),q.p}function Cy(c,i){return i.max-c.max}function Mu(c,i,l,f){this.p=new M(c,i),this.h=l,this.d=(function(v,S){let T=!1,P=1/0;for(let k=0;k<S.length;k++){const N=S[k];for(let B=0,q=N.length,K=q-1;B<q;K=B++){const J=N[B],re=N[K];J.y>v.y!=re.y>v.y&&v.x<(re.x-J.x)*(v.y-J.y)/(re.y-J.y)+J.x&&(T=!T),P=Math.min(P,mi(v,J,re))}}return(T?1:-1)*Math.sqrt(P)})(this.p,f),this.max=this.d+this.h*Math.SQRT2}var Zi;m.aE=void 0,(Zi=m.aE||(m.aE={}))[Zi.center=1]="center",Zi[Zi.left=2]="left",Zi[Zi.right=3]="right",Zi[Zi.top=4]="top",Zi[Zi.bottom=5]="bottom",Zi[Zi["top-left"]=6]="top-left",Zi[Zi["top-right"]=7]="top-right",Zi[Zi["bottom-left"]=8]="bottom-left",Zi[Zi["bottom-right"]=9]="bottom-right";const fo=Number.POSITIVE_INFINITY;function Fm(c,i){return i[1]!==fo?(function(l,f,v){let S=0,T=0;switch(f=Math.abs(f),v=Math.abs(v),l){case"top-right":case"top-left":case"top":T=v-7;break;case"bottom-right":case"bottom-left":case"bottom":T=7-v}switch(l){case"top-right":case"bottom-right":case"right":S=-f;break;case"top-left":case"bottom-left":case"left":S=f}return[S,T]})(c,i[0],i[1]):(function(l,f){let v=0,S=0;f<0&&(f=0);const T=f/Math.SQRT2;switch(l){case"top-right":case"top-left":S=T-7;break;case"bottom-right":case"bottom-left":S=7-T;break;case"bottom":S=7-f;break;case"top":S=f-7}switch(l){case"top-right":case"bottom-right":v=-T;break;case"top-left":case"bottom-left":v=T;break;case"left":v=f;break;case"right":v=-f}return[v,S]})(c,i[0])}function Ey(c,i,l){var f;const v=c.layout,S=(f=v.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(i,{},l);if(S){const P=S.values,k=[];for(let N=0;N<P.length;N+=2){const B=k[N]=P[N],q=P[N+1].map((K=>K*qr));B.startsWith("top")?q[1]-=7:B.startsWith("bottom")&&(q[1]+=7),k[N+1]=q}return new Lr(k)}const T=v.get("text-variable-anchor");if(T){let P;P=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[v.get("text-radial-offset").evaluate(i,{},l)*qr,fo]:v.get("text-offset").evaluate(i,{},l).map((N=>N*qr));const k=[];for(const N of T)k.push(N,Fm(N,P));return new Lr(k)}return null}function Um(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function g_(c,i,l,f,v,S,T,P,k,N,B,q){let K=S.textMaxSize.evaluate(i,{});K===void 0&&(K=T);const J=c.layers[0].layout,re=J.get("icon-offset").evaluate(i,{},B),se=Uo(l.horizontal),ue=T/24,ge=c.tilePixelRatio*ue,Ne=c.tilePixelRatio*K/24,Te=c.tilePixelRatio*P,Ee=c.tilePixelRatio*J.get("symbol-spacing"),Ze=J.get("text-padding")*c.tilePixelRatio,et=(function(ln,Qt,Gt,Tn=1){const _r=ln.get("icon-padding").evaluate(Qt,{},Gt),Yr=_r&&_r.values;return[Yr[0]*Tn,Yr[1]*Tn,Yr[2]*Tn,Yr[3]*Tn]})(J,i,B,c.tilePixelRatio),gt=J.get("text-max-angle")/180*Math.PI,Ot=J.get("text-rotation-alignment")!=="viewport"&&J.get("symbol-placement")!=="point",Ct=J.get("icon-rotation-alignment")==="map"&&J.get("symbol-placement")!=="point",Dt=J.get("symbol-placement"),Zt=Ee/2,Pt=J.get("icon-text-fit");let kt;f&&Pt!=="none"&&(c.allowVerticalPlacement&&l.vertical&&(kt=cp(f,l.vertical,Pt,J.get("icon-text-fit-padding"),re,ue)),se&&(f=cp(f,se,Pt,J.get("icon-text-fit-padding"),re,ue)));const lt=B?q.line.getGranularityForZoomLevel(B.z):1,tn=(ln,Qt)=>{Qt.x<0||Qt.x>=ht||Qt.y<0||Qt.y>=ht||(function(Gt,Tn,_r,Yr,Bi,Wa,si,Or,Qn,Gr,Xr,Ir,wa,po,Hr,Ya,li,Kr,vi,ci,or,mo,jh,Sa,x_){const Cu=Gt.addToLineVertexArray(Tn,_r);let Bl,Lh,Xd,jc,o=0,h=0,y=0,w=0,O=-1,L=-1;const Y={};let le=Mc("");if(Gt.allowVerticalPlacement&&Yr.vertical){const Nt=Or.layout.get("text-rotate").evaluate(or,{},Sa)+90;Xd=new Bm(Qn,Tn,Gr,Xr,Ir,Yr.vertical,wa,po,Hr,Nt),si&&(jc=new Bm(Qn,Tn,Gr,Xr,Ir,si,li,Kr,Hr,Nt))}if(Bi){const Nt=Or.layout.get("icon-rotate").evaluate(or,{}),cn=Or.layout.get("icon-text-fit")!=="none",En=p_(Bi,Nt,jh,cn),An=si?p_(si,Nt,jh,cn):void 0;Lh=new Bm(Qn,Tn,Gr,Xr,Ir,Bi,li,Kr,!1,Nt),o=4*En.length;const go=Gt.iconSizeData;let Fl=null;go.kind==="source"?(Fl=[Ns*Or.layout.get("icon-size").evaluate(or,{})],Fl[0]>Za&&Wt(`${Gt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):go.kind==="composite"&&(Fl=[Ns*mo.compositeIconSizes[0].evaluate(or,{},Sa),Ns*mo.compositeIconSizes[1].evaluate(or,{},Sa)],(Fl[0]>Za||Fl[1]>Za)&&Wt(`${Gt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Gt.addSymbols(Gt.icon,En,Fl,ci,vi,or,m.ao.none,Tn,Cu.lineStartIndex,Cu.lineLength,-1,Sa),O=Gt.icon.placedSymbolArray.length-1,An&&(h=4*An.length,Gt.addSymbols(Gt.icon,An,Fl,ci,vi,or,m.ao.vertical,Tn,Cu.lineStartIndex,Cu.lineLength,-1,Sa),L=Gt.icon.placedSymbolArray.length-1)}const Pe=Object.keys(Yr.horizontal);for(const Nt of Pe){const cn=Yr.horizontal[Nt];if(!Bl){le=Mc(cn.text);const An=Or.layout.get("text-rotate").evaluate(or,{},Sa);Bl=new Bm(Qn,Tn,Gr,Xr,Ir,cn,wa,po,Hr,An)}const En=cn.positionedLines.length===1;if(y+=Yd(Gt,Tn,cn,Wa,Or,Hr,or,Ya,Cu,Yr.vertical?m.ao.horizontal:m.ao.horizontalOnly,En?Pe:[Nt],Y,O,mo,Sa),En)break}Yr.vertical&&(w+=Yd(Gt,Tn,Yr.vertical,Wa,Or,Hr,or,Ya,Cu,m.ao.vertical,["vertical"],Y,L,mo,Sa));const Je=Bl?Bl.boxStartIndex:Gt.collisionBoxArray.length,ct=Bl?Bl.boxEndIndex:Gt.collisionBoxArray.length,vt=Xd?Xd.boxStartIndex:Gt.collisionBoxArray.length,tt=Xd?Xd.boxEndIndex:Gt.collisionBoxArray.length,it=Lh?Lh.boxStartIndex:Gt.collisionBoxArray.length,Yt=Lh?Lh.boxEndIndex:Gt.collisionBoxArray.length,fn=jc?jc.boxStartIndex:Gt.collisionBoxArray.length,br=jc?jc.boxEndIndex:Gt.collisionBoxArray.length;let Fe=-1;const je=(Nt,cn)=>Nt&&Nt.circleDiameter?Math.max(Nt.circleDiameter,cn):cn;Fe=je(Bl,Fe),Fe=je(Xd,Fe),Fe=je(Lh,Fe),Fe=je(jc,Fe);const Ke=Fe>-1?1:0;Ke&&(Fe*=x_/qr),Gt.glyphOffsetArray.length>=Su.MAX_GLYPHS&&Wt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),or.sortKey!==void 0&&Gt.addToSortKeyRanges(Gt.symbolInstances.length,or.sortKey);const mt=Ey(Or,or,Sa),[an,nr]=(function(Nt,cn){const En=Nt.length,An=cn?.values;if(An?.length>0)for(let go=0;go<An.length;go+=2){const Fl=An[go+1];Nt.emplaceBack(m.aE[An[go]],Fl[0],Fl[1])}return[En,Nt.length]})(Gt.textAnchorOffsets,mt);Gt.symbolInstances.emplaceBack(Tn.x,Tn.y,Y.right>=0?Y.right:-1,Y.center>=0?Y.center:-1,Y.left>=0?Y.left:-1,Y.vertical||-1,O,L,le,Je,ct,vt,tt,it,Yt,fn,br,Gr,y,w,o,h,Ke,0,wa,Fe,an,nr)})(c,Qt,ln,l,f,v,kt,c.layers[0],c.collisionBoxArray,i.index,i.sourceLayerIndex,c.index,ge,[Ze,Ze,Ze,Ze],Ot,k,Te,et,Ct,re,i,S,N,B,T)};if(Dt==="line")for(const ln of Sy(i.geometry,0,0,ht,ht)){const Qt=yu(ln,lt),Gt=d_(Qt,Ee,gt,l.vertical||se,f,24,Ne,c.overscaling,ht);for(const Tn of Gt)se&&y_(c,se.text,Zt,Tn)||tn(Qt,Tn)}else if(Dt==="line-center"){for(const ln of i.geometry)if(ln.length>1){const Qt=yu(ln,lt),Gt=ex(Qt,gt,l.vertical||se,f,24,Ne);Gt&&tn(Qt,Gt)}}else if(i.type==="Polygon")for(const ln of Ju(i.geometry,0)){const Qt=m_(ln,16);tn(yu(ln[0],lt,!0),new Rc(Qt.x,Qt.y,0))}else if(i.type==="LineString")for(const ln of i.geometry){const Qt=yu(ln,lt);tn(Qt,new Rc(Qt[0].x,Qt[0].y,0))}else if(i.type==="Point")for(const ln of i.geometry)for(const Qt of ln)tn([Qt],new Rc(Qt.x,Qt.y,0))}function Yd(c,i,l,f,v,S,T,P,k,N,B,q,K,J,re){const se=(function(Ne,Te,Ee,Ze,et,gt,Ot,Ct){const Dt=Ze.layout.get("text-rotate").evaluate(gt,{})*Math.PI/180,Zt=[];for(const Pt of Te.positionedLines)for(const kt of Pt.positionedGlyphs){if(!kt.rect)continue;const lt=kt.rect||{};let tn=4,ln=!0,Qt=1,Gt=0;const Tn=(et||Ct)&&kt.vertical,_r=kt.metrics.advance*kt.scale/2;if(Ct&&Te.verticalizable&&(Gt=Pt.lineOffset/2-(kt.imageName?-(qr-kt.metrics.width*kt.scale)/2:(kt.scale-1)*qr)),kt.imageName){const Kr=Ot[kt.imageName];ln=Kr.sdf,Qt=Kr.pixelRatio,tn=1/Qt}const Yr=et?[kt.x+_r,kt.y]:[0,0];let Bi=et?[0,0]:[kt.x+_r+Ee[0],kt.y+Ee[1]-Gt],Wa=[0,0];Tn&&(Wa=Bi,Bi=[0,0]);const si=kt.metrics.isDoubleResolution?2:1,Or=(kt.metrics.left-tn)*kt.scale-_r+Bi[0],Qn=(-kt.metrics.top-tn)*kt.scale+Bi[1],Gr=Or+lt.w/si*kt.scale/Qt,Xr=Qn+lt.h/si*kt.scale/Qt,Ir=new M(Or,Qn),wa=new M(Gr,Qn),po=new M(Or,Xr),Hr=new M(Gr,Xr);if(Tn){const Kr=new M(-_r,_r- -17),vi=-Math.PI/2,ci=12-_r,or=new M(22-ci,-(kt.imageName?ci:0)),mo=new M(...Wa);Ir._rotateAround(vi,Kr)._add(or)._add(mo),wa._rotateAround(vi,Kr)._add(or)._add(mo),po._rotateAround(vi,Kr)._add(or)._add(mo),Hr._rotateAround(vi,Kr)._add(or)._add(mo)}if(Dt){const Kr=Math.sin(Dt),vi=Math.cos(Dt),ci=[vi,-Kr,Kr,vi];Ir._matMult(ci),wa._matMult(ci),po._matMult(ci),Hr._matMult(ci)}const Ya=new M(0,0),li=new M(0,0);Zt.push({tl:Ir,tr:wa,bl:po,br:Hr,tex:lt,writingMode:Te.writingMode,glyphOffset:Yr,sectionIndex:kt.sectionIndex,isSDF:ln,pixelOffsetTL:Ya,pixelOffsetBR:li,minFontScaleX:0,minFontScaleY:0})}return Zt})(0,l,P,v,S,T,f,c.allowVerticalPlacement),ue=c.textSizeData;let ge=null;ue.kind==="source"?(ge=[Ns*v.layout.get("text-size").evaluate(T,{})],ge[0]>Za&&Wt(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ue.kind==="composite"&&(ge=[Ns*J.compositeTextSizes[0].evaluate(T,{},re),Ns*J.compositeTextSizes[1].evaluate(T,{},re)],(ge[0]>Za||ge[1]>Za)&&Wt(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),c.addSymbols(c.text,se,ge,P,S,T,N,i,k.lineStartIndex,k.lineLength,K,re);for(const Ne of B)q[Ne]=c.text.placedSymbolArray.length-1;return 4*se.length}function Uo(c){for(const i in c)return c[i];return null}function y_(c,i,l,f){const v=c.compareText;if(i in v){const S=v[i];for(let T=S.length-1;T>=0;T--)if(f.dist(S[T])<l)return!0}else v[i]=[];return v[i].push(f),!1}const gp=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class $s{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,f]=new Uint8Array(i,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const v=f>>4;if(v!==1)throw new Error(`Got v${v} data when expected v1.`);const S=gp[15&f];if(!S)throw new Error("Unrecognized array type.");const[T]=new Uint16Array(i,2,1),[P]=new Uint32Array(i,4,1);return new $s(P,T,S,i)}constructor(i,l=64,f=Float64Array,v){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=f,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const S=gp.indexOf(this.ArrayType),T=2*i*this.ArrayType.BYTES_PER_ELEMENT,P=i*this.IndexArrayType.BYTES_PER_ELEMENT,k=(8-P%8)%8;if(S<0)throw new Error(`Unexpected typed array class: ${f}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+P+k,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+T+P+k),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+P+k,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+S]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=i)}add(i,l){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=i,this.coords[this._pos++]=l,f}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return Ay(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,l,f,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:S,coords:T,nodeSize:P}=this,k=[0,S.length-1,0],N=[];for(;k.length;){const B=k.pop()||0,q=k.pop()||0,K=k.pop()||0;if(q-K<=P){for(let ue=K;ue<=q;ue++){const ge=T[2*ue],Ne=T[2*ue+1];ge>=i&&ge<=f&&Ne>=l&&Ne<=v&&N.push(S[ue])}continue}const J=K+q>>1,re=T[2*J],se=T[2*J+1];re>=i&&re<=f&&se>=l&&se<=v&&N.push(S[J]),(B===0?i<=re:l<=se)&&(k.push(K),k.push(J-1),k.push(1-B)),(B===0?f>=re:v>=se)&&(k.push(J+1),k.push(q),k.push(1-B))}return N}within(i,l,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:S,nodeSize:T}=this,P=[0,v.length-1,0],k=[],N=f*f;for(;P.length;){const B=P.pop()||0,q=P.pop()||0,K=P.pop()||0;if(q-K<=T){for(let ue=K;ue<=q;ue++)__(S[2*ue],S[2*ue+1],i,l)<=N&&k.push(v[ue]);continue}const J=K+q>>1,re=S[2*J],se=S[2*J+1];__(re,se,i,l)<=N&&k.push(v[J]),(B===0?i-f<=re:l-f<=se)&&(P.push(K),P.push(J-1),P.push(1-B)),(B===0?i+f>=re:l+f>=se)&&(P.push(J+1),P.push(q),P.push(1-B))}return k}}function Ay(c,i,l,f,v,S){if(v-f<=l)return;const T=f+v>>1;v_(c,i,T,f,v,S),Ay(c,i,l,f,T-1,1-S),Ay(c,i,l,T+1,v,1-S)}function v_(c,i,l,f,v,S){for(;v>f;){if(v-f>600){const N=v-f+1,B=l-f+1,q=Math.log(N),K=.5*Math.exp(2*q/3),J=.5*Math.sqrt(q*K*(N-K)/N)*(B-N/2<0?-1:1);v_(c,i,l,Math.max(f,Math.floor(l-B*K/N+J)),Math.min(v,Math.floor(l+(N-B)*K/N+J)),S)}const T=i[2*l+S];let P=f,k=v;for(Nl(c,i,f,l),i[2*v+S]>T&&Nl(c,i,f,v);P<k;){for(Nl(c,i,P,k),P++,k--;i[2*P+S]<T;)P++;for(;i[2*k+S]>T;)k--}i[2*f+S]===T?Nl(c,i,f,k):(k++,Nl(c,i,k,v)),k<=l&&(f=k+1),l<=k&&(v=k-1)}}function Nl(c,i,l,f){$m(c,l,f),$m(i,2*l,2*f),$m(i,2*l+1,2*f+1)}function $m(c,i,l){const f=c[i];c[i]=c[l],c[l]=f}function __(c,i,l,f){const v=c-l,S=i-f;return v*v+S*S}var Py;m.cx=void 0,(Py=m.cx||(m.cx={})).create="create",Py.load="load",Py.fullLoad="fullLoad";let Vm=null,yp=[];const Dy=1e3/60,ky="loadTime",Oy="fullLoadTime",b_={mark(c){performance.mark(c)},frame(c){const i=c;Vm!=null&&yp.push(i-Vm),Vm=i},clearMetrics(){Vm=null,yp=[],performance.clearMeasures(ky),performance.clearMeasures(Oy);for(const c in m.cx)performance.clearMarks(m.cx[c])},getPerformanceMetrics(){performance.measure(ky,m.cx.create,m.cx.load),performance.measure(Oy,m.cx.create,m.cx.fullLoad);const c=performance.getEntriesByName(ky)[0].duration,i=performance.getEntriesByName(Oy)[0].duration,l=yp.length,f=1/(yp.reduce(((S,T)=>S+T),0)/l/1e3),v=yp.filter((S=>S>Dy)).reduce(((S,T)=>S+(T-Dy)/Dy),0);return{loadTime:c,fullLoadTime:i,fps:f,percentDroppedFrames:v/(l+v)*100,totalFrames:l}}};m.$=ht,m.A=ne,m.B=function([c,i,l]){return i+=90,i*=Math.PI/180,l*=Math.PI/180,{x:c*Math.cos(i)*Math.sin(l),y:c*Math.sin(i)*Math.sin(l),z:c*Math.cos(l)}},m.C=ro,m.D=Bt,m.E=Lt,m.F=er,m.G=Ed,m.H=Pa,m.I=sy,m.J=class{constructor(c,i){this.target=c,this.mapId=i,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new l_((()=>this.process())),this.subscription=Rr(this.target,"message",(l=>this.receive(l)),!1),this.globalScope=Zn(self)?c:window}registerMessageHandler(c,i){this.messageHandlers[c]=i}sendAsync(c,i){return new Promise(((l,f)=>{const v=Math.round(1e18*Math.random()).toString(36).substring(0,10),S=i?Rr(i.signal,"abort",(()=>{S?.unsubscribe(),delete this.resolveRejects[v];const k={id:v,type:"<cancel>",origin:location.origin,targetMapId:c.targetMapId,sourceMapId:this.mapId};this.target.postMessage(k)}),Fn):null;this.resolveRejects[v]={resolve:k=>{S?.unsubscribe(),l(k)},reject:k=>{S?.unsubscribe(),f(k)}};const T=[],P=Object.assign(Object.assign({},c),{id:v,sourceMapId:this.mapId,origin:location.origin,data:Sl(c.data,T)});this.target.postMessage(P,{transfer:T})}))}receive(c){const i=c.data,l=i.id;if(!(i.origin!=="file://"&&location.origin!=="file://"&&i.origin!=="resource://android"&&location.origin!=="resource://android"&&i.origin!==location.origin||i.targetMapId&&this.mapId!==i.targetMapId)){if(i.type==="<cancel>"){delete this.tasks[l];const f=this.abortControllers[l];return delete this.abortControllers[l],void(f&&f.abort())}if(Zn(self)||i.mustQueue)return this.tasks[l]=i,this.taskQueue.push(l),void this.invoker.trigger();this.processTask(l,i)}}process(){if(this.taskQueue.length===0)return;const c=this.taskQueue.shift(),i=this.tasks[c];delete this.tasks[c],this.taskQueue.length>0&&this.invoker.trigger(),i&&this.processTask(c,i)}processTask(c,i){return s(this,void 0,void 0,(function*(){if(i.type==="<response>"){const v=this.resolveRejects[c];return delete this.resolveRejects[c],v?void(i.error?v.reject(Tl(i.error)):v.resolve(Tl(i.data))):void 0}if(!this.messageHandlers[i.type])return void this.completeTask(c,new Error(`Could not find a registered handler for ${i.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const l=Tl(i.data),f=new AbortController;this.abortControllers[c]=f;try{const v=yield this.messageHandlers[i.type](i.sourceMapId,l,f);this.completeTask(c,null,v)}catch(v){this.completeTask(c,v)}}))}completeTask(c,i,l){const f=[];delete this.abortControllers[c];const v={id:c,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:i?Sl(i):null,data:Sl(l,f)};this.target.postMessage(v,{transfer:f})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},m.K=Se,m.L=function(){var c=new ne(16);return ne!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},m.M=function(c,i,l){var f,v,S,T,P,k,N,B,q,K,J,re,se=l[0],ue=l[1],ge=l[2];return i===c?(c[12]=i[0]*se+i[4]*ue+i[8]*ge+i[12],c[13]=i[1]*se+i[5]*ue+i[9]*ge+i[13],c[14]=i[2]*se+i[6]*ue+i[10]*ge+i[14],c[15]=i[3]*se+i[7]*ue+i[11]*ge+i[15]):(v=i[1],S=i[2],T=i[3],P=i[4],k=i[5],N=i[6],B=i[7],q=i[8],K=i[9],J=i[10],re=i[11],c[0]=f=i[0],c[1]=v,c[2]=S,c[3]=T,c[4]=P,c[5]=k,c[6]=N,c[7]=B,c[8]=q,c[9]=K,c[10]=J,c[11]=re,c[12]=f*se+P*ue+q*ge+i[12],c[13]=v*se+k*ue+K*ge+i[13],c[14]=S*se+N*ue+J*ge+i[14],c[15]=T*se+B*ue+re*ge+i[15]),c},m.N=function(c,i,l){var f=l[0],v=l[1],S=l[2];return c[0]=i[0]*f,c[1]=i[1]*f,c[2]=i[2]*f,c[3]=i[3]*f,c[4]=i[4]*v,c[5]=i[5]*v,c[6]=i[6]*v,c[7]=i[7]*v,c[8]=i[8]*S,c[9]=i[9]*S,c[10]=i[10]*S,c[11]=i[11]*S,c[12]=i[12],c[13]=i[13],c[14]=i[14],c[15]=i[15],c},m.O=function(c,i,l){var f=i[0],v=i[1],S=i[2],T=i[3],P=i[4],k=i[5],N=i[6],B=i[7],q=i[8],K=i[9],J=i[10],re=i[11],se=i[12],ue=i[13],ge=i[14],Ne=i[15],Te=l[0],Ee=l[1],Ze=l[2],et=l[3];return c[0]=Te*f+Ee*P+Ze*q+et*se,c[1]=Te*v+Ee*k+Ze*K+et*ue,c[2]=Te*S+Ee*N+Ze*J+et*ge,c[3]=Te*T+Ee*B+Ze*re+et*Ne,c[4]=(Te=l[4])*f+(Ee=l[5])*P+(Ze=l[6])*q+(et=l[7])*se,c[5]=Te*v+Ee*k+Ze*K+et*ue,c[6]=Te*S+Ee*N+Ze*J+et*ge,c[7]=Te*T+Ee*B+Ze*re+et*Ne,c[8]=(Te=l[8])*f+(Ee=l[9])*P+(Ze=l[10])*q+(et=l[11])*se,c[9]=Te*v+Ee*k+Ze*K+et*ue,c[10]=Te*S+Ee*N+Ze*J+et*ge,c[11]=Te*T+Ee*B+Ze*re+et*Ne,c[12]=(Te=l[12])*f+(Ee=l[13])*P+(Ze=l[14])*q+(et=l[15])*se,c[13]=Te*v+Ee*k+Ze*K+et*ue,c[14]=Te*S+Ee*N+Ze*J+et*ge,c[15]=Te*T+Ee*B+Ze*re+et*Ne,c},m.P=M,m.Q=function(c,i){const l={};for(let f=0;f<i.length;f++){const v=i[f];v in c&&(l[v]=c[v])}return l},m.R=oa,m.S=Fs,m.T=zd,m.U=Zd,m.V=Om,m.W=H,m.X=Q,m.Y=fs,m.Z=zn,m._=s,m.a=ae,m.a$=Et,m.a0=function(c,i){var l,f,v,S,T;if(!c)return i??{};if(!i)return c;let P=Object.assign({},c);if(i.removeAll&&(P={removeAll:!0}),i.remove){const k=new Set(i.remove);P.add&&(P.add=P.add.filter((B=>!k.has(B.id)))),P.update&&(P.update=P.update.filter((B=>!k.has(B.id))));const N=new Set(((l=c.add)!==null&&l!==void 0?l:[]).map((B=>B.id)));i.remove=i.remove.filter((B=>!N.has(B)))}if(i.remove){const k=new Set(P.remove?P.remove.concat(i.remove):i.remove);P.remove=Array.from(k.values())}if(i.add){const k=P.add?P.add.concat(i.add):i.add,N=new Map(k.map((B=>[B.id,B])));P.add=Array.from(N.values())}if(i.update){const k=new Map((f=P.update)===null||f===void 0?void 0:f.map((N=>[N.id,N])));for(const N of i.update){const B=(v=k.get(N.id))!==null&&v!==void 0?v:{id:N.id};N.newGeometry&&(B.newGeometry=N.newGeometry),N.addOrUpdateProperties&&(B.addOrUpdateProperties=((S=B.addOrUpdateProperties)!==null&&S!==void 0?S:[]).concat(N.addOrUpdateProperties)),N.removeProperties&&(B.removeProperties=((T=B.removeProperties)!==null&&T!==void 0?T:[]).concat(N.removeProperties)),N.removeAllProperties&&(B.removeAllProperties=!0),k.set(N.id,B)}P.update=Array.from(k.values())}return P.remove&&P.add&&(P.remove=P.remove.filter((k=>P.add.findIndex((N=>N.id===k))===-1))),P},m.a1=pp,m.a2=Rh,m.a3=25,m.a4=Im,m.a5=c=>{const i=window.document.createElement("video");return i.muted=!0,new Promise((l=>{i.onloadstart=()=>{l(i)};for(const f of c){const v=window.document.createElement("source");Be(f)||(i.crossOrigin="Anonymous"),v.src=f,i.appendChild(v)}}))},m.a6=yt,m.a7=function(){return pt++},m.a8=W,m.a9=Su,m.aA=function(c){let i=1/0,l=1/0,f=-1/0,v=-1/0;for(const S of c)i=Math.min(i,S.x),l=Math.min(l,S.y),f=Math.max(f,S.x),v=Math.max(v,S.y);return[i,l,f,v]},m.aB=qr,m.aC=qt,m.aD=function(c,i,l,f,v=!1){if(!l[0]&&!l[1])return[0,0];const S=v?f==="map"?-c.bearingInRadians:0:f==="viewport"?c.bearingInRadians:0;if(S){const T=Math.sin(S),P=Math.cos(S);l=[l[0]*P-l[1]*T,l[0]*T+l[1]*P]}return[v?l[0]:qt(i,l[0],c.zoom),v?l[1]:qt(i,l[1],c.zoom)]},m.aF=zh,m.aG=Um,m.aH=lp,m.aI=$s,m.aJ=tr,m.aK=Ch,m.aL=De,m.aM=Cn,m.aN=Wn,m.aO=bt,m.aP=Ji,m.aQ=by,m.aR=ft,m.aS=nt,m.aT=function(c){var i=new ne(3);return i[0]=c[0],i[1]=c[1],i[2]=c[2],i},m.aU=function(c,i,l){return c[0]=i[0]-l[0],c[1]=i[1]-l[1],c[2]=i[2]-l[2],c},m.aV=function(c,i){var l=i[0],f=i[1],v=i[2],S=l*l+f*f+v*v;return S>0&&(S=1/Math.sqrt(S)),c[0]=i[0]*S,c[1]=i[1]*S,c[2]=i[2]*S,c},m.aW=rt,m.aX=function(c,i){return c[0]*i[0]+c[1]*i[1]+c[2]*i[2]},m.aY=function(c,i,l){return c[0]=i[0]*l[0],c[1]=i[1]*l[1],c[2]=i[2]*l[2],c[3]=i[3]*l[3],c},m.aZ=ye,m.a_=function(c,i,l){const f=i[0]*l[0]+i[1]*l[1]+i[2]*l[2];return f===0?null:(-(c[0]*l[0]+c[1]*l[1]+c[2]*l[2])-l[3])/f},m.aa=ma,m.ab=No,m.ac=u_,m.ad=function(c){const i={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((l,f,v,S)=>{const T=v||S;return i[f]=!T||T.toLowerCase(),""})),i["max-age"]){const l=parseInt(i["max-age"],10);isNaN(l)?delete i["max-age"]:i["max-age"]=l}return i},m.ae=ec,m.af=function(c){return Math.pow(2,c)},m.ag=fe,m.ah=Ht,m.ai=85.051129,m.aj=fp,m.ak=function(c){return Math.log(c)/Math.LN2},m.al=function(c){var i=c[0],l=c[1];return i*i+l*l},m.am=function(c){if(!c.length)return new Set;const i=Math.max(...c.map((k=>k.canonical.z)));let l=1/0,f=-1/0,v=1/0,S=-1/0;const T=[];for(const k of c){const{x:N,y:B,z:q}=k.canonical,K=Math.pow(2,i-q),J=N*K,re=B*K;T.push({id:k,x:J,y:re}),J<l&&(l=J),J>f&&(f=J),re<v&&(v=re),re>S&&(S=re)}const P=new Set;for(const k of T)k.x!==l&&k.x!==f&&k.y!==v&&k.y!==S||P.add(k.id);return P},m.an=function(c,i){let l=0,f=0;if(c.kind==="constant")f=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:v,minZoom:S,maxZoom:T}=c,P=v?Ht(pi.interpolationFactor(v,i,S,T),0,1):0;c.kind==="camera"?f=ro.number(c.minSize,c.maxSize,P):l=P}return{uSizeT:l,uSize:f}},m.ap=function(c,{uSize:i,uSizeT:l},{lowerSize:f,upperSize:v}){return c.kind==="source"?f/Ns:c.kind==="composite"?ro.number(f/Ns,v/Ns,l):i},m.aq=function(c,i){var l=i[0],f=i[1],v=i[2],S=i[3],T=i[4],P=i[5],k=i[6],N=i[7],B=i[8],q=i[9],K=i[10],J=i[11],re=i[12],se=i[13],ue=i[14],ge=i[15],Ne=l*P-f*T,Te=l*k-v*T,Ee=l*N-S*T,Ze=f*k-v*P,et=f*N-S*P,gt=v*N-S*k,Ot=B*se-q*re,Ct=B*ue-K*re,Dt=B*ge-J*re,Zt=q*ue-K*se,Pt=q*ge-J*se,kt=K*ge-J*ue,lt=Ne*kt-Te*Pt+Ee*Zt+Ze*Dt-et*Ct+gt*Ot;return lt?(c[0]=(P*kt-k*Pt+N*Zt)*(lt=1/lt),c[1]=(v*Pt-f*kt-S*Zt)*lt,c[2]=(se*gt-ue*et+ge*Ze)*lt,c[3]=(K*et-q*gt-J*Ze)*lt,c[4]=(k*Dt-T*kt-N*Ct)*lt,c[5]=(l*kt-v*Dt+S*Ct)*lt,c[6]=(ue*Ee-re*gt-ge*Te)*lt,c[7]=(B*gt-K*Ee+J*Te)*lt,c[8]=(T*Pt-P*Dt+N*Ot)*lt,c[9]=(f*Dt-l*Pt-S*Ot)*lt,c[10]=(re*et-se*Ee+ge*Ne)*lt,c[11]=(q*Ee-B*et-J*Ne)*lt,c[12]=(P*Ct-T*Zt-k*Ot)*lt,c[13]=(l*Zt-f*Ct+v*Ot)*lt,c[14]=(se*Te-re*Ze-ue*Ne)*lt,c[15]=(B*Ze-q*Te+K*Ne)*lt,c):null},m.ar=Qe,m.as=function(c){var i=c[0],l=c[1];return Math.sqrt(i*i+l*l)},m.at=function(c){return c[0]=0,c[1]=0,c},m.au=function(c,i,l){return c[0]=i[0]*l,c[1]=i[1]*l,c},m.av=Am,m.aw=At,m.ax=function(c,i,l,f){const v=i.y-c.y,S=i.x-c.x,T=f.y-l.y,P=f.x-l.x,k=T*S-P*v;if(k===0)return null;const N=(P*(c.y-l.y)-T*(c.x-l.x))/k;return new M(c.x+N*S,c.y+N*v)},m.ay=Sy,m.az=qf,m.b=Oi,m.b$=class extends va{constructor(c,i){super(c,i),this.current=new Array}set(c){if(c!=this.current){this.current=c;const i=new Float32Array(c);this.gl.uniform1fv(this.location,i)}}},m.b0=function(c,i,l){return c[0]=i[0]*l,c[1]=i[1]*l,c[2]=i[2]*l,c[3]=i[3]*l,c},m.b1=function(c,i){return c[0]*i[0]+c[1]*i[1]+c[2]*i[2]+c[3]},m.b2=xy,m.b3=Tu,m.b4=function(c,i,l,f,v){var S=1/Math.tan(i/2);if(c[0]=S/l,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=S,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,v!=null&&v!==1/0){var T=1/(f-v);c[10]=(v+f)*T,c[14]=2*v*f*T}else c[10]=-1,c[14]=-2*f;return c},m.b5=function(c){var i=new ne(16);return i[0]=c[0],i[1]=c[1],i[2]=c[2],i[3]=c[3],i[4]=c[4],i[5]=c[5],i[6]=c[6],i[7]=c[7],i[8]=c[8],i[9]=c[9],i[10]=c[10],i[11]=c[11],i[12]=c[12],i[13]=c[13],i[14]=c[14],i[15]=c[15],i},m.b6=function(c,i,l){var f=Math.sin(l),v=Math.cos(l),S=i[0],T=i[1],P=i[2],k=i[3],N=i[4],B=i[5],q=i[6],K=i[7];return i!==c&&(c[8]=i[8],c[9]=i[9],c[10]=i[10],c[11]=i[11],c[12]=i[12],c[13]=i[13],c[14]=i[14],c[15]=i[15]),c[0]=S*v+N*f,c[1]=T*v+B*f,c[2]=P*v+q*f,c[3]=k*v+K*f,c[4]=N*v-S*f,c[5]=B*v-T*f,c[6]=q*v-P*f,c[7]=K*v-k*f,c},m.b7=function(c,i,l){var f=Math.sin(l),v=Math.cos(l),S=i[4],T=i[5],P=i[6],k=i[7],N=i[8],B=i[9],q=i[10],K=i[11];return i!==c&&(c[0]=i[0],c[1]=i[1],c[2]=i[2],c[3]=i[3],c[12]=i[12],c[13]=i[13],c[14]=i[14],c[15]=i[15]),c[4]=S*v+N*f,c[5]=T*v+B*f,c[6]=P*v+q*f,c[7]=k*v+K*f,c[8]=N*v-S*f,c[9]=B*v-T*f,c[10]=q*v-P*f,c[11]=K*v-k*f,c},m.b8=function(){const c=new Float32Array(16);return fe(c),c},m.b9=function(){const c=new Float64Array(16);return fe(c),c},m.bA=function(c,i){const l=Ae(c,360),f=Ae(i,360),v=f-l,S=f>l?v-360:v+360;return Math.abs(v)<Math.abs(S)?v:S},m.bB=function(c){return c[0]=0,c[1]=0,c[2]=0,c},m.bC=function(c,i,l,f){const v=Math.sqrt(c*c+i*i),S=Math.sqrt(l*l+f*f);c/=v,i/=v,l/=S,f/=S;const T=Math.acos(c*l+i*f);return-i*l+c*f>0?T:-T},m.bD=function(c,i){const l=Ae(c,2*Math.PI),f=Ae(i,2*Math.PI);return Math.min(Math.abs(l-f),Math.abs(l-f+2*Math.PI),Math.abs(l-f-2*Math.PI))},m.bE=function(){const c={},i=ke.$version;for(const l in ke.$root){const f=ke.$root[l];if(f.required){let v=null;v=l==="version"?i:f.type==="array"?[]:{},v!=null&&(c[l]=v)}}return c},m.bF=bc,m.bG=Ie,m.bH=function c(i,l){if(Array.isArray(i)){if(!Array.isArray(l)||i.length!==l.length)return!1;for(let f=0;f<i.length;f++)if(!c(i[f],l[f]))return!1;return!0}if(typeof i=="object"&&i!==null&&l!==null){if(typeof l!="object"||Object.keys(i).length!==Object.keys(l).length)return!1;for(const f in i)if(!c(i[f],l[f]))return!1;return!0}return i===l},m.bI=function(c){c=c.slice();const i=Object.create(null);for(let l=0;l<c.length;l++)i[c[l].id]=c[l];for(let l=0;l<c.length;l++)"ref"in c[l]&&(c[l]=On(c[l],i[c[l].ref]));return c},m.bJ=function(c,i){if(c.type==="custom")return new Jb(c,i);switch(c.type){case"background":return new hp(c,i);case"circle":return new $g(c,i);case"color-relief":return new $b(c,i);case"fill":return new Bd(c,i);case"fill-extrusion":return new Ud(c,i);case"heatmap":return new qg(c,i);case"hillshade":return new Ac(c,i);case"line":return new wm(c,i);case"raster":return new Pl(c,i);case"symbol":return new Hd(c,i)}},m.bK=c=>c.type==="raster",m.bL=ot,m.bM=function(c,i){if(!c)return[{command:"setStyle",args:[i]}];let l=[];try{if(!$t(c.version,i.version))return[{command:"setStyle",args:[i]}];$t(c.center,i.center)||l.push({command:"setCenter",args:[i.center]}),$t(c.state,i.state)||l.push({command:"setGlobalState",args:[i.state]}),$t(c.centerAltitude,i.centerAltitude)||l.push({command:"setCenterAltitude",args:[i.centerAltitude]}),$t(c.zoom,i.zoom)||l.push({command:"setZoom",args:[i.zoom]}),$t(c.bearing,i.bearing)||l.push({command:"setBearing",args:[i.bearing]}),$t(c.pitch,i.pitch)||l.push({command:"setPitch",args:[i.pitch]}),$t(c.roll,i.roll)||l.push({command:"setRoll",args:[i.roll]}),$t(c.sprite,i.sprite)||l.push({command:"setSprite",args:[i.sprite]}),$t(c.glyphs,i.glyphs)||l.push({command:"setGlyphs",args:[i.glyphs]}),$t(c.transition,i.transition)||l.push({command:"setTransition",args:[i.transition]}),$t(c.light,i.light)||l.push({command:"setLight",args:[i.light]}),$t(c.terrain,i.terrain)||l.push({command:"setTerrain",args:[i.terrain]}),$t(c.sky,i.sky)||l.push({command:"setSky",args:[i.sky]}),$t(c.projection,i.projection)||l.push({command:"setProjection",args:[i.projection]});const f={},v=[];(function(T,P,k,N){let B;for(B in P=P||{},T=T||{})Object.prototype.hasOwnProperty.call(T,B)&&(Object.prototype.hasOwnProperty.call(P,B)||jr(B,k,N));for(B in P)Object.prototype.hasOwnProperty.call(P,B)&&(Object.prototype.hasOwnProperty.call(T,B)?$t(T[B],P[B])||(T[B].type==="geojson"&&P[B].type==="geojson"&&wi(T,P,B)?Sn(k,{command:"setGeoJSONSourceData",args:[B,P[B].data]}):ti(B,P,k,N)):xr(B,P,k))})(c.sources,i.sources,v,f);const S=[];c.layers&&c.layers.forEach((T=>{"source"in T&&f[T.source]?l.push({command:"removeLayer",args:[T.id]}):S.push(T)})),l=l.concat(v),(function(T,P,k){P=P||[];const N=(T=T||[]).map(ni),B=P.map(ni),q=T.reduce(qn,{}),K=P.reduce(qn,{}),J=N.slice(),re=Object.create(null);let se,ue,ge,Ne,Te;for(let Ee=0,Ze=0;Ee<N.length;Ee++)se=N[Ee],Object.prototype.hasOwnProperty.call(K,se)?Ze++:(Sn(k,{command:"removeLayer",args:[se]}),J.splice(J.indexOf(se,Ze),1));for(let Ee=0,Ze=0;Ee<B.length;Ee++)se=B[B.length-1-Ee],J[J.length-1-Ee]!==se&&(Object.prototype.hasOwnProperty.call(q,se)?(Sn(k,{command:"removeLayer",args:[se]}),J.splice(J.lastIndexOf(se,J.length-Ze),1)):Ze++,Ne=J[J.length-Ee],Sn(k,{command:"addLayer",args:[K[se],Ne]}),J.splice(J.length-Ee,0,se),re[se]=!0);for(let Ee=0;Ee<B.length;Ee++)if(se=B[Ee],ue=q[se],ge=K[se],!re[se]&&!$t(ue,ge))if($t(ue.source,ge.source)&&$t(ue["source-layer"],ge["source-layer"])&&$t(ue.type,ge.type)){for(Te in ir(ue.layout,ge.layout,k,se,null,"setLayoutProperty"),ir(ue.paint,ge.paint,k,se,null,"setPaintProperty"),$t(ue.filter,ge.filter)||Sn(k,{command:"setFilter",args:[se,ge.filter]}),$t(ue.minzoom,ge.minzoom)&&$t(ue.maxzoom,ge.maxzoom)||Sn(k,{command:"setLayerZoomRange",args:[se,ge.minzoom,ge.maxzoom]}),ue)Object.prototype.hasOwnProperty.call(ue,Te)&&Te!=="layout"&&Te!=="paint"&&Te!=="filter"&&Te!=="metadata"&&Te!=="minzoom"&&Te!=="maxzoom"&&(Te.indexOf("paint.")===0?ir(ue[Te],ge[Te],k,se,Te.slice(6),"setPaintProperty"):$t(ue[Te],ge[Te])||Sn(k,{command:"setLayerProperty",args:[se,Te,ge[Te]]}));for(Te in ge)Object.prototype.hasOwnProperty.call(ge,Te)&&!Object.prototype.hasOwnProperty.call(ue,Te)&&Te!=="layout"&&Te!=="paint"&&Te!=="filter"&&Te!=="metadata"&&Te!=="minzoom"&&Te!=="maxzoom"&&(Te.indexOf("paint.")===0?ir(ue[Te],ge[Te],k,se,Te.slice(6),"setPaintProperty"):$t(ue[Te],ge[Te])||Sn(k,{command:"setLayerProperty",args:[se,Te,ge[Te]]}))}else Sn(k,{command:"removeLayer",args:[se]}),Ne=J[J.lastIndexOf(se)+1],Sn(k,{command:"addLayer",args:[ge,Ne]})})(S,i.layers,l)}catch(f){console.warn("Unable to compute style diff:",f),l=[{command:"setStyle",args:[i]}]}return l},m.bN=function(c){const i=[],l=c.id;return l===void 0&&i.push({message:`layers.${l}: missing required property "id"`}),c.render===void 0&&i.push({message:`layers.${l}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&i.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),i},m.bO=Rt,m.bP=Ft,m.bQ=class extends va{constructor(c,i){super(c,i),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},m.bR=_a,m.bS=class extends va{constructor(c,i){super(c,i),this.current=ki}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let i=1;i<16;i++)if(c[i]!==this.current[i]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},m.bT=ai,m.bU=class extends va{constructor(c,i){super(c,i),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},m.bV=class extends va{constructor(c,i){super(c,i),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},m.bW=me,m.bX=function(c,i){var l=Math.sin(i),f=Math.cos(i);return c[0]=f,c[1]=l,c[2]=0,c[3]=-l,c[4]=f,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},m.bY=function(c,i,l){var f=i[0],v=i[1],S=i[2];return c[0]=f*l[0]+v*l[3]+S*l[6],c[1]=f*l[1]+v*l[4]+S*l[7],c[2]=f*l[2]+v*l[5]+S*l[8],c},m.bZ=function(c,i,l,f,v,S,T){var P=1/(i-l),k=1/(f-v),N=1/(S-T);return c[0]=-2*P,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*k,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*N,c[11]=0,c[12]=(i+l)*P,c[13]=(v+f)*k,c[14]=(T+S)*N,c[15]=1,c},m.b_=class extends va{constructor(c,i){super(c,i),this.current=new Array}set(c){if(c!=this.current){this.current=c;const i=new Float32Array(4*c.length);for(let l=0;l<c.length;l++)i[4*l]=c[l].r,i[4*l+1]=c[l].g,i[4*l+2]=c[l].b,i[4*l+3]=c[l].a;this.gl.uniform4fv(this.location,i)}}},m.ba=function(){return new Float64Array(16)},m.bb=function(c,i,l){const f=new Float64Array(4);return Le(f,c,i-90,l),f},m.bc=function(c,i,l,f){var v,S,T,P,k,N=i[0],B=i[1],q=i[2],K=i[3],J=l[0],re=l[1],se=l[2],ue=l[3];return(S=N*J+B*re+q*se+K*ue)<0&&(S=-S,J=-J,re=-re,se=-se,ue=-ue),1-S>te?(v=Math.acos(S),T=Math.sin(v),P=Math.sin((1-f)*v)/T,k=Math.sin(f*v)/T):(P=1-f,k=f),c[0]=P*N+k*J,c[1]=P*B+k*re,c[2]=P*q+k*se,c[3]=P*K+k*ue,c},m.bd=function(c){const i=new Float64Array(9);var l,f,v,S,T,P,k,N,B,q,K,J,re,se,ue,ge,Ne,Te;q=(v=(f=c)[0])*(k=v+v),K=(S=f[1])*k,re=(T=f[2])*k,se=T*(N=S+S),ge=(P=f[3])*k,Ne=P*N,Te=P*(B=T+T),(l=i)[0]=1-(J=S*N)-(ue=T*B),l[3]=K-Te,l[6]=re+Ne,l[1]=K+Te,l[4]=1-q-ue,l[7]=se-ge,l[2]=re-Ne,l[5]=se+ge,l[8]=1-q-J;const Ee=Ji(-Math.asin(Ht(i[2],-1,1)));let Ze,et;return Math.hypot(i[5],i[8])<.001?(Ze=0,et=-Ji(Math.atan2(i[3],i[4]))):(Ze=Ji(i[5]===0&&i[8]===0?0:Math.atan2(i[5],i[8])),et=Ji(i[1]===0&&i[0]===0?0:Math.atan2(i[1],i[0]))),{roll:Ze,pitch:Ee+90,bearing:et}},m.be=function(c,i){return c.roll==i.roll&&c.pitch==i.pitch&&c.bearing==i.bearing},m.bf=xn,m.bg=Dr,m.bh=Li,m.bi=qa,m.bj=Nd,m.bk=qe,m.bl=_t,m.bm=Ti,m.bn=function(c,i,l,f,v){return qe(f,v,Ht((c-i)/(l-i),0,1))},m.bo=Ae,m.bp=function(){return new Float64Array(3)},m.bq=function(c,i,l,f){return c[0]=i[0]+l[0]*f,c[1]=i[1]+l[1]*f,c[2]=i[2]+l[2]*f,c},m.br=Le,m.bs=function(c,i,l){var f=l[0],v=l[1],S=l[2],T=l[3],P=i[0],k=i[1],N=i[2],B=v*N-S*k,q=S*P-f*N,K=f*k-v*P;return c[0]=P+T*(B+=B)+v*(K+=K)-S*(q+=q),c[1]=k+T*q+S*B-f*K,c[2]=N+T*K+f*q-v*B,c},m.bt=function(c,i,l){const f=(v=[c[0],c[1],c[2],i[0],i[1],i[2],l[0],l[1],l[2]])[0]*((B=v[8])*(T=v[4])-(P=v[5])*(N=v[7]))+v[1]*(-B*(S=v[3])+P*(k=v[6]))+v[2]*(N*S-T*k);var v,S,T,P,k,N,B;if(f===0)return null;const q=rt([],[i[0],i[1],i[2]],[l[0],l[1],l[2]]),K=rt([],[l[0],l[1],l[2]],[c[0],c[1],c[2]]),J=rt([],[c[0],c[1],c[2]],[i[0],i[1],i[2]]),re=ft([],q,-c[3]);return nt(re,re,ft([],K,-i[3])),nt(re,re,ft([],J,-l[3])),ft(re,re,1/f),re},m.bu=dp,m.bv=function(){return new Float64Array(4)},m.bw=function(c,i,l,f){var v=[],S=[];return v[0]=i[0]-l[0],v[1]=i[1]-l[1],v[2]=i[2]-l[2],S[0]=v[0]*Math.cos(f)-v[1]*Math.sin(f),S[1]=v[0]*Math.sin(f)+v[1]*Math.cos(f),S[2]=v[2],c[0]=S[0]+l[0],c[1]=S[1]+l[1],c[2]=S[2]+l[2],c},m.bx=function(c,i,l,f){var v=[],S=[];return v[0]=i[0]-l[0],v[1]=i[1]-l[1],v[2]=i[2]-l[2],S[0]=v[0],S[1]=v[1]*Math.cos(f)-v[2]*Math.sin(f),S[2]=v[1]*Math.sin(f)+v[2]*Math.cos(f),c[0]=S[0]+l[0],c[1]=S[1]+l[1],c[2]=S[2]+l[2],c},m.by=function(c,i,l,f){var v=[],S=[];return v[0]=i[0]-l[0],v[1]=i[1]-l[1],v[2]=i[2]-l[2],S[0]=v[2]*Math.sin(f)+v[0]*Math.cos(f),S[1]=v[1],S[2]=v[2]*Math.cos(f)-v[0]*Math.sin(f),c[0]=S[0]+l[0],c[1]=S[1]+l[1],c[2]=S[2]+l[2],c},m.bz=function(c,i,l){var f=Math.sin(l),v=Math.cos(l),S=i[0],T=i[1],P=i[2],k=i[3],N=i[8],B=i[9],q=i[10],K=i[11];return i!==c&&(c[4]=i[4],c[5]=i[5],c[6]=i[6],c[7]=i[7],c[12]=i[12],c[13]=i[13],c[14]=i[14],c[15]=i[15]),c[0]=S*v-N*f,c[1]=T*v-B*f,c[2]=P*v-q*f,c[3]=k*v-K*f,c[8]=S*f+N*v,c[9]=T*f+B*v,c[10]=P*f+q*v,c[11]=k*f+K*v,c},m.c=ie,m.c0=class extends Dd{},m.c1=ty,m.c2=class extends n{},m.c3=Ls,m.c4=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},m.c5=Vg,m.c6=function(c,i,l){var f=i[0],v=i[1],S=i[2],T=l[3]*f+l[7]*v+l[11]*S+l[15];return c[0]=(l[0]*f+l[4]*v+l[8]*S+l[12])/(T=T||1),c[1]=(l[1]*f+l[5]*v+l[9]*S+l[13])/T,c[2]=(l[2]*f+l[6]*v+l[10]*S+l[14])/T,c},m.c7=class extends Tc{},m.c8=class extends z{},m.c9=function(c,i){return c[0]===i[0]&&c[1]===i[1]&&c[2]===i[2]&&c[3]===i[3]&&c[4]===i[4]&&c[5]===i[5]&&c[6]===i[6]&&c[7]===i[7]&&c[8]===i[8]&&c[9]===i[9]&&c[10]===i[10]&&c[11]===i[11]&&c[12]===i[12]&&c[13]===i[13]&&c[14]===i[14]&&c[15]===i[15]},m.cA=function(c,i){ae.REGISTERED_PROTOCOLS[c]=i},m.cB=function(c){delete ae.REGISTERED_PROTOCOLS[c]},m.cC=function(c,i){const l={};for(let v=0;v<c.length;v++){const S=i&&i[c[v].id]||Po(c[v]);i&&(i[c[v].id]=S);let T=l[S];T||(T=l[S]=[]),T.push(c[v])}const f=[];for(const v in l)f.push(l[v]);return f},m.cD=It,m.cE=wy,m.cF=zm,m.cG=ly,m.cH=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=ht/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const i=c.bucket.layers[0],l=i.layout,f=i._unevaluatedLayout._values,v={layoutIconSize:f["icon-size"].possiblyEvaluate(new er(c.bucket.zoom+1),c.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new er(c.bucket.zoom+1),c.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new er(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:N,maxZoom:B}=c.bucket.textSizeData;v.compositeTextSizes=[f["text-size"].possiblyEvaluate(new er(N),c.canonical),f["text-size"].possiblyEvaluate(new er(B),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:N,maxZoom:B}=c.bucket.iconSizeData;v.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new er(N),c.canonical),f["icon-size"].possiblyEvaluate(new er(B),c.canonical)]}const S=l.get("text-line-height")*qr,T=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",P=l.get("text-keep-upright"),k=l.get("text-size");for(const N of c.bucket.features){const B=l.get("text-font").evaluate(N,{},c.canonical).join(","),q=k.evaluate(N,{},c.canonical),K=v.layoutTextSize.evaluate(N,{},c.canonical),J=v.layoutIconSize.evaluate(N,{},c.canonical),re={horizontal:{},vertical:void 0},se=N.text;let ue,ge=[0,0];if(se){const Ee=se.toString(),Ze=l.get("text-letter-spacing").evaluate(N,{},c.canonical)*qr,et=Ff(Ee)?Ze:0,gt=l.get("text-anchor").evaluate(N,{},c.canonical),Ot=Ey(i,N,c.canonical);if(!Ot){const Pt=l.get("text-radial-offset").evaluate(N,{},c.canonical);ge=Pt?Fm(gt,[Pt*qr,fo]):l.get("text-offset").evaluate(N,{},c.canonical).map((kt=>kt*qr))}let Ct=T?"center":l.get("text-justify").evaluate(N,{},c.canonical);const Dt=l.get("symbol-placement")==="point"?l.get("text-max-width").evaluate(N,{},c.canonical)*qr:1/0,Zt=()=>{c.bucket.allowVerticalPlacement&&is(Ee)&&(re.vertical=op(se,c.glyphMap,c.glyphPositions,c.imagePositions,B,Dt,S,gt,"left",et,ge,m.ao.vertical,!0,K,q))};if(!T&&Ot){const Pt=new Set;if(Ct==="auto")for(let lt=0;lt<Ot.values.length;lt+=2)Pt.add(Um(Ot.values[lt]));else Pt.add(Ct);let kt=!1;for(const lt of Pt)if(!re.horizontal[lt])if(kt)re.horizontal[lt]=re.horizontal[0];else{const tn=op(se,c.glyphMap,c.glyphPositions,c.imagePositions,B,Dt,S,"center",lt,et,ge,m.ao.horizontal,!1,K,q);tn&&(re.horizontal[lt]=tn,kt=tn.positionedLines.length===1)}Zt()}else{Ct==="auto"&&(Ct=Um(gt));const Pt=op(se,c.glyphMap,c.glyphPositions,c.imagePositions,B,Dt,S,gt,Ct,et,ge,m.ao.horizontal,!1,K,q);Pt&&(re.horizontal[Ct]=Pt),Zt(),is(Ee)&&T&&P&&(re.vertical=op(se,c.glyphMap,c.glyphPositions,c.imagePositions,B,Dt,S,gt,Ct,et,ge,m.ao.vertical,!1,K,q))}}let Ne=!1;if(N.icon&&N.icon.name){const Ee=c.imageMap[N.icon.name];Ee&&(ue=Gd(c.imagePositions[N.icon.name],l.get("icon-offset").evaluate(N,{},c.canonical),l.get("icon-anchor").evaluate(N,{},c.canonical)),Ne=!!Ee.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=Ne:c.bucket.sdfIcons!==Ne&&Wt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ee.pixelRatio!==c.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const Te=Uo(re.horizontal)||re.vertical;c.bucket.iconsInText=!!Te&&Te.iconsInText,(Te||ue)&&g_(c.bucket,N,re,ue,c.imageMap,v,K,J,ge,Ne,c.canonical,c.subdivisionGranularity)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},m.cI=ep,m.cJ=gr,m.cK=kh,m.cL=Qg,m.cM=xa,m.cN=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},m.cO=function(c,i,l,f,v){return s(this,void 0,void 0,(function*(){if(Q())try{return yield fs(c,i,l,f,v)}catch{}return(function(S,T,P,k,N){const B=S.width,q=S.height;wo&&ha||(wo=new OffscreenCanvas(B,q),ha=wo.getContext("2d",{willReadFrequently:!0})),wo.width=B,wo.height=q,ha.drawImage(S,0,0,B,q);const K=ha.getImageData(T,P,k,N);return ha.clearRect(0,0,B,q),K.data})(c,i,l,f,v)}))},m.cP=Rd,m.cQ=C,m.cR=Kg,m.cS=Eh,m.cT=sh,m.cU=function(c,i){const l=new Map;if(c!=null)if(c.type==="Feature")l.set(yi(c,i),c);else for(const f of c.features)l.set(yi(f,i),f);return l},m.cV=function(c,i){if(c==null)return!0;if(c.type==="Feature")return yi(c,i)!=null;if(c.type==="FeatureCollection"){const l=new Set;for(const f of c.features){const v=yi(f,i);if(v==null||l.has(v))return!1;l.add(v)}return!0}return!1},m.cW=function(c,i,l){var f,v,S,T;if(i.removeAll&&c.clear(),i.remove)for(const P of i.remove)c.delete(P);if(i.add)for(const P of i.add){const k=yi(P,l);k!=null&&c.set(k,P)}if(i.update)for(const P of i.update){let k=c.get(P.id);if(k==null)continue;const N=!P.removeAllProperties&&(((f=P.removeProperties)===null||f===void 0?void 0:f.length)>0||((v=P.addOrUpdateProperties)===null||v===void 0?void 0:v.length)>0);if((P.newGeometry||P.removeAllProperties||N)&&(k=Object.assign({},k),c.set(P.id,k),N&&(k.properties=Object.assign({},k.properties))),P.newGeometry&&(k.geometry=P.newGeometry),P.removeAllProperties)k.properties={};else if(((S=P.removeProperties)===null||S===void 0?void 0:S.length)>0)for(const B of P.removeProperties)Object.prototype.hasOwnProperty.call(k.properties,B)&&delete k.properties[B];if(((T=P.addOrUpdateProperties)===null||T===void 0?void 0:T.length)>0)for(const{key:B,value:q}of P.addOrUpdateProperties)k.properties[B]=q}},m.cX=as,m.ca=function(c,i){var l=c[0],f=c[1],v=c[2],S=c[3],T=c[4],P=c[5],k=c[6],N=c[7],B=c[8],q=c[9],K=c[10],J=c[11],re=c[12],se=c[13],ue=c[14],ge=c[15],Ne=i[0],Te=i[1],Ee=i[2],Ze=i[3],et=i[4],gt=i[5],Ot=i[6],Ct=i[7],Dt=i[8],Zt=i[9],Pt=i[10],kt=i[11],lt=i[12],tn=i[13],ln=i[14],Qt=i[15];return Math.abs(l-Ne)<=te*Math.max(1,Math.abs(l),Math.abs(Ne))&&Math.abs(f-Te)<=te*Math.max(1,Math.abs(f),Math.abs(Te))&&Math.abs(v-Ee)<=te*Math.max(1,Math.abs(v),Math.abs(Ee))&&Math.abs(S-Ze)<=te*Math.max(1,Math.abs(S),Math.abs(Ze))&&Math.abs(T-et)<=te*Math.max(1,Math.abs(T),Math.abs(et))&&Math.abs(P-gt)<=te*Math.max(1,Math.abs(P),Math.abs(gt))&&Math.abs(k-Ot)<=te*Math.max(1,Math.abs(k),Math.abs(Ot))&&Math.abs(N-Ct)<=te*Math.max(1,Math.abs(N),Math.abs(Ct))&&Math.abs(B-Dt)<=te*Math.max(1,Math.abs(B),Math.abs(Dt))&&Math.abs(q-Zt)<=te*Math.max(1,Math.abs(q),Math.abs(Zt))&&Math.abs(K-Pt)<=te*Math.max(1,Math.abs(K),Math.abs(Pt))&&Math.abs(J-kt)<=te*Math.max(1,Math.abs(J),Math.abs(kt))&&Math.abs(re-lt)<=te*Math.max(1,Math.abs(re),Math.abs(lt))&&Math.abs(se-tn)<=te*Math.max(1,Math.abs(se),Math.abs(tn))&&Math.abs(ue-ln)<=te*Math.max(1,Math.abs(ue),Math.abs(ln))&&Math.abs(ge-Qt)<=te*Math.max(1,Math.abs(ge),Math.abs(Qt))},m.cb=function(c,i){return c[0]=i[0],c[1]=i[1],c[2]=i[2],c[3]=i[3],c[4]=i[4],c[5]=i[5],c[6]=i[6],c[7]=i[7],c[8]=i[8],c[9]=i[9],c[10]=i[10],c[11]=i[11],c[12]=i[12],c[13]=i[13],c[14]=i[14],c[15]=i[15],c},m.cc=c=>c.type==="symbol",m.cd=c=>c.type==="circle",m.ce=c=>c.type==="heatmap",m.cf=c=>c.type==="line",m.cg=c=>c.type==="fill",m.ch=c=>c.type==="fill-extrusion",m.ci=c=>c.type==="hillshade",m.cj=c=>c.type==="color-relief",m.ck=c=>c.type==="background",m.cl=c=>c.type==="custom",m.cm=Tt,m.cn=function(c,i,l){const f=Ve(i.x-l.x,i.y-l.y),v=Ve(c.x-l.x,c.y-l.y);var S,T;return Ji(Math.atan2(f[0]*v[1]-f[1]*v[0],(S=f)[0]*(T=v)[0]+S[1]*T[1]))},m.co=jt,m.cp=function(c,i){return Ii[i]&&(c instanceof MouseEvent||c instanceof WheelEvent)},m.cq=function(c,i){return So[i]&&"touches"in c},m.cr=function(c){return So[c]||Ii[c]},m.cs=function(c,i,l){var f=i[0],v=i[1];return c[0]=l[0]*f+l[4]*v+l[12],c[1]=l[1]*f+l[5]*v+l[13],c},m.ct=function(c,i){const{x:l,y:f}=pp.fromLngLat(i);return!(c<0||c>25||f<0||f>=1||l<0||l>=1)},m.cu=function(c,i){return c[0]=i[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=i[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=i[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},m.cv=class extends wr{},m.cw=b_,m.cy=function(c){return c.message===ze},m.cz=Me,m.d=Be,m.e=nn,m.f=c=>s(void 0,void 0,void 0,(function*(){if(c.byteLength===0)return createImageBitmap(new ImageData(1,1));const i=new Blob([new Uint8Array(c)],{type:"image/png"});try{return createImageBitmap(i)}catch(l){throw new Error(`Could not load image because of ${l.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),m.g=ce,m.h=c=>new Promise(((i,l)=>{const f=new Image;f.onload=()=>{i(f),URL.revokeObjectURL(f.src),f.onload=null,window.requestAnimationFrame((()=>{f.src=qo}))},f.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const v=new Blob([new Uint8Array(c)],{type:"image/png"});f.src=c.byteLength?URL.createObjectURL(v):qo})),m.i=Zn,m.j=(c,i)=>$e(nn(c,{type:"json"}),i),m.k=Mt,m.l=Ge,m.m=$e,m.n=(c,i)=>$e(nn(c,{type:"arrayBuffer"}),i),m.o=function(c){return new xa(c).readFields(Tm,[])},m.p=r_,m.q=Id,m.r=fr,m.s=Rr,m.t=yh,m.u=gn,m.v=ke,m.w=Wt,m.x=jg,m.y=xl,m.z=Ba})),d("worker",["./shared"],(function(m){class s{constructor(ie,ae){this.keyCache={},ie&&this.replace(ie,ae)}replace(ie,ae){this._layerConfigs={},this._layers={},this.update(ie,[],ae)}update(ie,ae,ce){for(const Me of ie){this._layerConfigs[Me.id]=Me;const Ie=this._layers[Me.id]=m.bJ(Me,ce);Ie._featureFilter=m.aa(Ie.filter,ce),this.keyCache[Me.id]&&delete this.keyCache[Me.id]}for(const Me of ae)delete this.keyCache[Me],delete this._layerConfigs[Me],delete this._layers[Me];this.familiesBySource={};const Se=m.cC(Object.values(this._layerConfigs),this.keyCache);for(const Me of Se){const Ie=Me.map((Mt=>this._layers[Mt.id])),$e=Ie[0];if($e.visibility==="none")continue;const Be=$e.source||"";let Ue=this.familiesBySource[Be];Ue||(Ue=this.familiesBySource[Be]={});const st=$e.sourceLayer||"_geojsonTileLayer";let Ge=Ue[st];Ge||(Ge=Ue[st]=[]),Ge.push(Ie)}}}class M{constructor(ie){const ae={},ce=[];for(const $e in ie){const Be=ie[$e],Ue=ae[$e]={};for(const st in Be){const Ge=Be[+st];if(!Ge||Ge.bitmap.width===0||Ge.bitmap.height===0)continue;const Mt={x:0,y:0,w:Ge.bitmap.width+2,h:Ge.bitmap.height+2};ce.push(Mt),Ue[st]={rect:Mt,metrics:Ge.metrics}}}const{w:Se,h:Me}=m.p(ce),Ie=new m.q({width:Se||1,height:Me||1});for(const $e in ie){const Be=ie[$e];for(const Ue in Be){const st=Be[+Ue];if(!st||st.bitmap.width===0||st.bitmap.height===0)continue;const Ge=ae[$e][Ue].rect;m.q.copy(st.bitmap,Ie,{x:0,y:0},{x:Ge.x+1,y:Ge.y+1},st.bitmap)}}this.image=Ie,this.positions=ae}}m.cD("GlyphAtlas",M);class C{constructor(ie){this.tileID=new m.Z(ie.tileID.overscaledZ,ie.tileID.wrap,ie.tileID.canonical.z,ie.tileID.canonical.x,ie.tileID.canonical.y),this.uid=ie.uid,this.zoom=ie.zoom,this.pixelRatio=ie.pixelRatio,this.tileSize=ie.tileSize,this.source=ie.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ie.showCollisionBoxes,this.collectResourceTiming=!!ie.collectResourceTiming,this.returnDependencies=!!ie.returnDependencies,this.promoteId=ie.promoteId,this.inFlightDependencies=[]}parse(ie,ae,ce,Se,Me){return m._(this,void 0,void 0,(function*(){this.status="parsing",this.data=ie,this.collisionBoxArray=new m.a8;const Ie=new m.cE(Object.keys(ie.layers).sort()),$e=new m.cF(this.tileID,this.promoteId);$e.bucketLayerIDs=[];const Be={},Ue={featureIndex:$e,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:ce,subdivisionGranularity:Me},st=ae.familiesBySource[this.source];for(const qn in st){const yt=ie.layers[qn];if(!yt)continue;yt.version===1&&m.w(`Vector tile source "${this.source}" layer "${qn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const To=Ie.encode(qn),da=[];for(let ri=0;ri<yt.length;ri++){const Ln=yt.feature(ri),xt=$e.getId(Ln,qn);da.push({feature:Ln,id:xt,index:ri,sourceLayerIndex:To})}for(const ri of st[qn]){const Ln=ri[0];Ln.source!==this.source&&m.w(`layer.source = ${Ln.source} does not equal this.source = ${this.source}`),Ln.minzoom&&this.zoom<Math.floor(Ln.minzoom)||Ln.maxzoom&&this.zoom>=Ln.maxzoom||Ln.visibility!=="none"&&(A(ri,this.zoom,ce),(Be[Ln.id]=Ln.createBucket({index:$e.bucketLayerIDs.length,layers:ri,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:To,sourceID:this.source})).populate(da,Ue,this.tileID.canonical),$e.bucketLayerIDs.push(ri.map((xt=>xt.id))))}}const Ge=m.bO(Ue.glyphDependencies,(qn=>Object.keys(qn).map(Number)));this.inFlightDependencies.forEach((qn=>qn?.abort())),this.inFlightDependencies=[];let Mt=Promise.resolve({});if(Object.keys(Ge).length){const qn=new AbortController;this.inFlightDependencies.push(qn),Mt=Se.sendAsync({type:"GG",data:{stacks:Ge,source:this.source,tileID:this.tileID,type:"glyphs"}},qn)}const Lt=Object.keys(Ue.iconDependencies);let ke=Promise.resolve({});if(Lt.length){const qn=new AbortController;this.inFlightDependencies.push(qn),ke=Se.sendAsync({type:"GI",data:{icons:Lt,source:this.source,tileID:this.tileID,type:"icons"}},qn)}const wn=Object.keys(Ue.patternDependencies);let On=Promise.resolve({});if(wn.length){const qn=new AbortController;this.inFlightDependencies.push(qn),On=Se.sendAsync({type:"GI",data:{icons:wn,source:this.source,tileID:this.tileID,type:"patterns"}},qn)}const $t=Ue.dashDependencies;let Sn=Promise.resolve({});if(Object.keys($t).length){const qn=new AbortController;this.inFlightDependencies.push(qn),Sn=Se.sendAsync({type:"GDA",data:{dashes:$t}},qn)}const[xr,jr,ti,wi]=yield Promise.all([Mt,ke,On,Sn]),ir=new M(xr),ni=new m.cG(jr,ti);for(const qn in Be){const yt=Be[qn];yt instanceof m.a9?(A(yt.layers,this.zoom,ce),m.cH({bucket:yt,glyphMap:xr,glyphPositions:ir.positions,imageMap:jr,imagePositions:ni.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Ue.subdivisionGranularity})):yt.hasDependencies&&(yt instanceof m.cI||yt instanceof m.cJ||yt instanceof m.cK)&&(A(yt.layers,this.zoom,ce),yt.addFeatures(Ue,this.tileID.canonical,ni.patternPositions,wi))}return this.status="done",{buckets:Object.values(Be).filter((qn=>!qn.isEmpty())),featureIndex:$e,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ir.image,imageAtlas:ni,dashPositions:wi,glyphMap:this.returnDependencies?xr:null,iconMap:this.returnDependencies?jr:null,glyphPositions:this.returnDependencies?ir.positions:null}}))}}function A(ze,ie,ae){const ce=new m.F(ie);for(const Se of ze)Se.recalculate(ce,ae)}class D{constructor(ie,ae,ce){this.actor=ie,this.layerIndex=ae,this.availableImages=ce,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ie,ae){return m._(this,void 0,void 0,(function*(){const ce=yield m.n(ie.request,ae);try{return{vectorTile:new m.cL(new m.cM(ce.data)),rawData:ce.data,cacheControl:ce.cacheControl,expires:ce.expires}}catch(Se){const Me=new Uint8Array(ce.data);let Ie=`Unable to parse the tile at ${ie.request.url}, `;throw Ie+=Me[0]===31&&Me[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Se.message}`,new Error(Ie)}}))}loadTile(ie){return m._(this,void 0,void 0,(function*(){const ae=ie.uid,ce=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new m.cN(ie.request),Se=new C(ie);this.loading[ae]=Se;const Me=new AbortController;Se.abort=Me;try{const Ie=yield this.loadVectorTile(ie,Me);if(delete this.loading[ae],!Ie)return null;const $e=Ie.rawData,Be={};Ie.expires&&(Be.expires=Ie.expires),Ie.cacheControl&&(Be.cacheControl=Ie.cacheControl);const Ue={};if(ce){const Ge=ce.finish();Ge&&(Ue.resourceTiming=JSON.parse(JSON.stringify(Ge)))}Se.vectorTile=Ie.vectorTile;const st=Se.parse(Ie.vectorTile,this.layerIndex,this.availableImages,this.actor,ie.subdivisionGranularity);this.loaded[ae]=Se,this.fetching[ae]={rawTileData:$e,cacheControl:Be,resourceTiming:Ue};try{const Ge=yield st;return m.e({rawTileData:$e.slice(0)},Ge,Be,Ue)}finally{delete this.fetching[ae]}}catch(Ie){throw delete this.loading[ae],Se.status="done",this.loaded[ae]=Se,Ie}}))}reloadTile(ie){return m._(this,void 0,void 0,(function*(){const ae=ie.uid;if(!this.loaded||!this.loaded[ae])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ce=this.loaded[ae];if(ce.showCollisionBoxes=ie.showCollisionBoxes,ce.status==="parsing"){const Se=yield ce.parse(ce.vectorTile,this.layerIndex,this.availableImages,this.actor,ie.subdivisionGranularity);let Me;if(this.fetching[ae]){const{rawTileData:Ie,cacheControl:$e,resourceTiming:Be}=this.fetching[ae];delete this.fetching[ae],Me=m.e({rawTileData:Ie.slice(0)},Se,$e,Be)}else Me=Se;return Me}if(ce.status==="done"&&ce.vectorTile)return ce.parse(ce.vectorTile,this.layerIndex,this.availableImages,this.actor,ie.subdivisionGranularity)}))}abortTile(ie){return m._(this,void 0,void 0,(function*(){const ae=this.loading,ce=ie.uid;ae&&ae[ce]&&ae[ce].abort&&(ae[ce].abort.abort(),delete ae[ce])}))}removeTile(ie){return m._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[ie.uid]&&delete this.loaded[ie.uid]}))}}class R{constructor(){this.loaded={}}loadTile(ie){return m._(this,void 0,void 0,(function*(){const{uid:ae,encoding:ce,rawImageData:Se,redFactor:Me,greenFactor:Ie,blueFactor:$e,baseShift:Be}=ie,Ue=Se.width+2,st=Se.height+2,Ge=m.b(Se)?new m.R({width:Ue,height:st},yield m.cO(Se,-1,-1,Ue,st)):Se,Mt=new m.cP(ae,Ge,ce,Me,Ie,$e,Be);return this.loaded=this.loaded||{},this.loaded[ae]=Mt,Mt}))}removeTile(ie){const ae=this.loaded,ce=ie.uid;ae&&ae[ce]&&delete ae[ce]}}var j,G,V=(function(){if(G)return j;function ze(ae,ce){if(ae.length!==0){ie(ae[0],ce);for(var Se=1;Se<ae.length;Se++)ie(ae[Se],!ce)}}function ie(ae,ce){for(var Se=0,Me=0,Ie=0,$e=ae.length,Be=$e-1;Ie<$e;Be=Ie++){var Ue=(ae[Ie][0]-ae[Be][0])*(ae[Be][1]+ae[Ie][1]),st=Se+Ue;Me+=Math.abs(Se)>=Math.abs(Ue)?Se-st+Ue:Ue-st+Se,Se=st}Se+Me>=0!=!!ce&&ae.reverse()}return G=1,j=function ae(ce,Se){var Me,Ie=ce&&ce.type;if(Ie==="FeatureCollection")for(Me=0;Me<ce.features.length;Me++)ae(ce.features[Me],Se);else if(Ie==="GeometryCollection")for(Me=0;Me<ce.geometries.length;Me++)ae(ce.geometries[Me],Se);else if(Ie==="Feature")ae(ce.geometry,Se);else if(Ie==="Polygon")ze(ce.coordinates,Se);else if(Ie==="MultiPolygon")for(Me=0;Me<ce.coordinates.length;Me++)ze(ce.coordinates[Me],Se);return ce}})(),H=m.cQ(V);class Q extends m.cS{constructor(ie,ae){super(new m.cM,0,ae,[],[]),this.feature=ie,this.type=ie.type,this.properties=ie.tags?ie.tags:{},"id"in ie&&(typeof ie.id=="string"?this.id=parseInt(ie.id,10):typeof ie.id!="number"||isNaN(ie.id)||(this.id=ie.id))}loadGeometry(){const ie=[],ae=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const ce of ae){const Se=[];for(const Me of ce)Se.push(new m.P(Me[0],Me[1]));ie.push(Se)}return ie}}class te extends m.cR{constructor(ie,ae){super(new m.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=ae?ae.version:1,this.extent=ae?ae.extent:4096,this.length=ie.length,this.features=ie}feature(ie){return new Q(this.features[ie],this.extent)}}function ne(ze,ie){ie.writeVarintField(15,ze.version||1),ie.writeStringField(1,ze.name||""),ie.writeVarintField(5,ze.extent||4096);const ae={keys:[],values:[],keycache:{},valuecache:{}};for(let Me=0;Me<ze.length;Me++)ae.feature=ze.feature(Me),ie.writeMessage(2,me,ae);const ce=ae.keys;for(const Me of ce)ie.writeStringField(3,Me);const Se=ae.values;for(const Me of Se)ie.writeMessage(4,nt,Me)}function me(ze,ie){if(!ze.feature)return;const ae=ze.feature;ae.id!==void 0&&ie.writeVarintField(1,ae.id),ie.writeMessage(2,fe,ze),ie.writeVarintField(3,ae.type),ie.writeMessage(4,Oe,ae)}function fe(ze,ie){for(const ae in ze.feature?.properties){let ce=ze.feature.properties[ae],Se=ze.keycache[ae];if(ce===null)continue;Se===void 0&&(ze.keys.push(ae),Se=ze.keys.length-1,ze.keycache[ae]=Se),ie.writeVarint(Se),typeof ce!="string"&&typeof ce!="boolean"&&typeof ce!="number"&&(ce=JSON.stringify(ce));const Me=typeof ce+":"+ce;let Ie=ze.valuecache[Me];Ie===void 0&&(ze.values.push(ce),Ie=ze.values.length-1,ze.valuecache[Me]=Ie),ie.writeVarint(Ie)}}function _e(ze,ie){return(ie<<3)+(7&ze)}function ye(ze){return ze<<1^ze>>31}function Oe(ze,ie){const ae=ze.loadGeometry(),ce=ze.type;let Se=0,Me=0;for(const Ie of ae){let $e=1;ce===1&&($e=Ie.length),ie.writeVarint(_e(1,$e));const Be=ce===3?Ie.length-1:Ie.length;for(let Ue=0;Ue<Be;Ue++){Ue===1&&ce!==1&&ie.writeVarint(_e(2,Be-1));const st=Ie[Ue].x-Se,Ge=Ie[Ue].y-Me;ie.writeVarint(ye(st)),ie.writeVarint(ye(Ge)),Se+=st,Me+=Ge}ze.type===3&&ie.writeVarint(_e(7,1))}}function nt(ze,ie){const ae=typeof ze;ae==="string"?ie.writeStringField(1,ze):ae==="boolean"?ie.writeBooleanField(7,ze):ae==="number"&&(ze%1!=0?ie.writeDoubleField(3,ze):ze<0?ie.writeSVarintField(6,ze):ie.writeVarintField(5,ze))}const ft={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ze=>ze},rt=Math.fround||(at=new Float32Array(1),ze=>(at[0]=+ze,at[0]));var at;class Et{constructor(ie){this.options=Object.assign(Object.create(ft),ie),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ie){const{log:ae,minZoom:ce,maxZoom:Se}=this.options;ae&&console.time("total time");const Me=`prepare ${ie.length} points`;ae&&console.time(Me),this.points=ie;const Ie=[];for(let Be=0;Be<ie.length;Be++){const Ue=ie[Be];if(!Ue.geometry)continue;const[st,Ge]=Ue.geometry.coordinates,Mt=rt(Le(st)),Lt=rt(Qe(Ge));Ie.push(Mt,Lt,1/0,Be,-1,1),this.options.reduce&&Ie.push(0)}let $e=this.trees[Se+1]=this._createTree(Ie);ae&&console.timeEnd(Me);for(let Be=Se;Be>=ce;Be--){const Ue=+Date.now();$e=this.trees[Be]=this._createTree(this._cluster($e,Be)),ae&&console.log("z%d: %d clusters in %dms",Be,$e.numItems,+Date.now()-Ue)}return ae&&console.timeEnd("total time"),this}getClusters(ie,ae){let ce=((ie[0]+180)%360+360)%360-180;const Se=Math.max(-90,Math.min(90,ie[1]));let Me=ie[2]===180?180:((ie[2]+180)%360+360)%360-180;const Ie=Math.max(-90,Math.min(90,ie[3]));if(ie[2]-ie[0]>=360)ce=-180,Me=180;else if(ce>Me){const Ge=this.getClusters([ce,Se,180,Ie],ae),Mt=this.getClusters([-180,Se,Me,Ie],ae);return Ge.concat(Mt)}const $e=this.trees[this._limitZoom(ae)],Be=$e.range(Le(ce),Qe(Ie),Le(Me),Qe(Se)),Ue=$e.data,st=[];for(const Ge of Be){const Mt=this.stride*Ge;st.push(Ue[Mt+5]>1?At(Ue,Mt,this.clusterProps):this.points[Ue[Mt+3]])}return st}getChildren(ie){const ae=this._getOriginId(ie),ce=this._getOriginZoom(ie),Se="No cluster with the specified id.",Me=this.trees[ce];if(!Me)throw new Error(Se);const Ie=Me.data;if(ae*this.stride>=Ie.length)throw new Error(Se);const $e=this.options.radius/(this.options.extent*Math.pow(2,ce-1)),Be=Me.within(Ie[ae*this.stride],Ie[ae*this.stride+1],$e),Ue=[];for(const st of Be){const Ge=st*this.stride;Ie[Ge+4]===ie&&Ue.push(Ie[Ge+5]>1?At(Ie,Ge,this.clusterProps):this.points[Ie[Ge+3]])}if(Ue.length===0)throw new Error(Se);return Ue}getLeaves(ie,ae,ce){const Se=[];return this._appendLeaves(Se,ie,ae=ae||10,ce=ce||0,0),Se}getTile(ie,ae,ce){const Se=this.trees[this._limitZoom(ie)],Me=Math.pow(2,ie),{extent:Ie,radius:$e}=this.options,Be=$e/Ie,Ue=(ce-Be)/Me,st=(ce+1+Be)/Me,Ge={features:[]};return this._addTileFeatures(Se.range((ae-Be)/Me,Ue,(ae+1+Be)/Me,st),Se.data,ae,ce,Me,Ge),ae===0&&this._addTileFeatures(Se.range(1-Be/Me,Ue,1,st),Se.data,Me,ce,Me,Ge),ae===Me-1&&this._addTileFeatures(Se.range(0,Ue,Be/Me,st),Se.data,-1,ce,Me,Ge),Ge.features.length?Ge:null}getClusterExpansionZoom(ie){let ae=this._getOriginZoom(ie)-1;for(;ae<=this.options.maxZoom;){const ce=this.getChildren(ie);if(ae++,ce.length!==1)break;ie=ce[0].properties.cluster_id}return ae}_appendLeaves(ie,ae,ce,Se,Me){const Ie=this.getChildren(ae);for(const $e of Ie){const Be=$e.properties;if(Be&&Be.cluster?Me+Be.point_count<=Se?Me+=Be.point_count:Me=this._appendLeaves(ie,Be.cluster_id,ce,Se,Me):Me<Se?Me++:ie.push($e),ie.length===ce)break}return Me}_createTree(ie){const ae=new m.aI(ie.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ce=0;ce<ie.length;ce+=this.stride)ae.add(ie[ce],ie[ce+1]);return ae.finish(),ae.data=ie,ae}_addTileFeatures(ie,ae,ce,Se,Me,Ie){for(const $e of ie){const Be=$e*this.stride,Ue=ae[Be+5]>1;let st,Ge,Mt;if(Ue)st=zt(ae,Be,this.clusterProps),Ge=ae[Be],Mt=ae[Be+1];else{const wn=this.points[ae[Be+3]];st=wn.properties;const[On,$t]=wn.geometry.coordinates;Ge=Le(On),Mt=Qe($t)}const Lt={type:1,geometry:[[Math.round(this.options.extent*(Ge*Me-ce)),Math.round(this.options.extent*(Mt*Me-Se))]],tags:st};let ke;ke=Ue||this.options.generateId?ae[Be+3]:this.points[ae[Be+3]].id,ke!==void 0&&(Lt.id=ke),Ie.features.push(Lt)}}_limitZoom(ie){return Math.max(this.options.minZoom,Math.min(Math.floor(+ie),this.options.maxZoom+1))}_cluster(ie,ae){const{radius:ce,extent:Se,reduce:Me,minPoints:Ie}=this.options,$e=ce/(Se*Math.pow(2,ae)),Be=ie.data,Ue=[],st=this.stride;for(let Ge=0;Ge<Be.length;Ge+=st){if(Be[Ge+2]<=ae)continue;Be[Ge+2]=ae;const Mt=Be[Ge],Lt=Be[Ge+1],ke=ie.within(Be[Ge],Be[Ge+1],$e),wn=Be[Ge+5];let On=wn;for(const $t of ke){const Sn=$t*st;Be[Sn+2]>ae&&(On+=Be[Sn+5])}if(On>wn&&On>=Ie){let $t,Sn=Mt*wn,xr=Lt*wn,jr=-1;const ti=(Ge/st<<5)+(ae+1)+this.points.length;for(const wi of ke){const ir=wi*st;if(Be[ir+2]<=ae)continue;Be[ir+2]=ae;const ni=Be[ir+5];Sn+=Be[ir]*ni,xr+=Be[ir+1]*ni,Be[ir+4]=ti,Me&&($t||($t=this._map(Be,Ge,!0),jr=this.clusterProps.length,this.clusterProps.push($t)),Me($t,this._map(Be,ir)))}Be[Ge+4]=ti,Ue.push(Sn/On,xr/On,1/0,ti,-1,On),Me&&Ue.push(jr)}else{for(let $t=0;$t<st;$t++)Ue.push(Be[Ge+$t]);if(On>1)for(const $t of ke){const Sn=$t*st;if(!(Be[Sn+2]<=ae)){Be[Sn+2]=ae;for(let xr=0;xr<st;xr++)Ue.push(Be[Sn+xr])}}}}return Ue}_getOriginId(ie){return ie-this.points.length>>5}_getOriginZoom(ie){return(ie-this.points.length)%32}_map(ie,ae,ce){if(ie[ae+5]>1){const Ie=this.clusterProps[ie[ae+6]];return ce?Object.assign({},Ie):Ie}const Se=this.points[ie[ae+3]].properties,Me=this.options.map(Se);return ce&&Me===Se?Object.assign({},Me):Me}}function At(ze,ie,ae){return{type:"Feature",id:ze[ie+3],properties:zt(ze,ie,ae),geometry:{type:"Point",coordinates:[(ce=ze[ie],360*(ce-.5)),Ve(ze[ie+1])]}};var ce}function zt(ze,ie,ae){const ce=ze[ie+5],Se=ce>=1e4?`${Math.round(ce/1e3)}k`:ce>=1e3?Math.round(ce/100)/10+"k":ce,Me=ze[ie+6],Ie=Me===-1?{}:Object.assign({},ae[Me]);return Object.assign(Ie,{cluster:!0,cluster_id:ze[ie+3],point_count:ce,point_count_abbreviated:Se})}function Le(ze){return ze/360+.5}function Qe(ze){const ie=Math.sin(ze*Math.PI/180),ae=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return ae<0?0:ae>1?1:ae}function Ve(ze){const ie=(180-360*ze)*Math.PI/180;return 360*Math.atan(Math.exp(ie))/Math.PI-90}function ht(ze,ie,ae,ce){let Se=ce;const Me=ie+(ae-ie>>1);let Ie,$e=ae-ie;const Be=ze[ie],Ue=ze[ie+1],st=ze[ae],Ge=ze[ae+1];for(let Mt=ie+3;Mt<ae;Mt+=3){const Lt=qt(ze[Mt],ze[Mt+1],Be,Ue,st,Ge);if(Lt>Se)Ie=Mt,Se=Lt;else if(Lt===Se){const ke=Math.abs(Mt-Me);ke<$e&&(Ie=Mt,$e=ke)}}Se>ce&&(Ie-ie>3&&ht(ze,ie,Ie,ce),ze[Ie+2]=Se,ae-Ie>3&&ht(ze,Ie,ae,ce))}function qt(ze,ie,ae,ce,Se,Me){let Ie=Se-ae,$e=Me-ce;if(Ie!==0||$e!==0){const Be=((ze-ae)*Ie+(ie-ce)*$e)/(Ie*Ie+$e*$e);Be>1?(ae=Se,ce=Me):Be>0&&(ae+=Ie*Be,ce+=$e*Be)}return Ie=ze-ae,$e=ie-ce,Ie*Ie+$e*$e}function Ae(ze,ie,ae,ce){const Se={id:ze??null,type:ie,geometry:ae,tags:ce,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ie==="Point"||ie==="MultiPoint"||ie==="LineString")qe(Se,ae);else if(ie==="Polygon")qe(Se,ae[0]);else if(ie==="MultiLineString")for(const Me of ae)qe(Se,Me);else if(ie==="MultiPolygon")for(const Me of ae)qe(Se,Me[0]);return Se}function qe(ze,ie){for(let ae=0;ae<ie.length;ae+=3)ze.minX=Math.min(ze.minX,ie[ae]),ze.minY=Math.min(ze.minY,ie[ae+1]),ze.maxX=Math.max(ze.maxX,ie[ae]),ze.maxY=Math.max(ze.maxY,ie[ae+1])}function _t(ze,ie,ae,ce){if(!ie.geometry)return;const Se=ie.geometry.coordinates;if(Se&&Se.length===0)return;const Me=ie.geometry.type,Ie=Math.pow(ae.tolerance/((1<<ae.maxZoom)*ae.extent),2);let $e=[],Be=ie.id;if(ae.promoteId?Be=ie.properties[ae.promoteId]:ae.generateId&&(Be=ce||0),Me==="Point")Tt(Se,$e);else if(Me==="MultiPoint")for(const Ue of Se)Tt(Ue,$e);else if(Me==="LineString")jt(Se,$e,Ie,!1);else if(Me==="MultiLineString"){if(ae.lineMetrics){for(const Ue of Se)$e=[],jt(Ue,$e,Ie,!1),ze.push(Ae(Be,"LineString",$e,ie.properties));return}Ht(Se,$e,Ie,!1)}else if(Me==="Polygon")Ht(Se,$e,Ie,!0);else{if(Me!=="MultiPolygon"){if(Me==="GeometryCollection"){for(const Ue of ie.geometry.geometries)_t(ze,{id:Be,geometry:Ue,properties:ie.properties},ae,ce);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Ue of Se){const st=[];Ht(Ue,st,Ie,!0),$e.push(st)}}ze.push(Ae(Be,Me,$e,ie.properties))}function Tt(ze,ie){ie.push(bt(ze[0]),nn(ze[1]),0)}function jt(ze,ie,ae,ce){let Se,Me,Ie=0;for(let Be=0;Be<ze.length;Be++){const Ue=bt(ze[Be][0]),st=nn(ze[Be][1]);ie.push(Ue,st,0),Be>0&&(Ie+=ce?(Se*st-Ue*Me)/2:Math.sqrt(Math.pow(Ue-Se,2)+Math.pow(st-Me,2))),Se=Ue,Me=st}const $e=ie.length-3;ie[2]=1,ht(ie,0,$e,ae),ie[$e+2]=1,ie.size=Math.abs(Ie),ie.start=0,ie.end=ie.size}function Ht(ze,ie,ae,ce){for(let Se=0;Se<ze.length;Se++){const Me=[];jt(ze[Se],Me,ae,ce),ie.push(Me)}}function bt(ze){return ze/360+.5}function nn(ze){const ie=Math.sin(ze*Math.PI/180),ae=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return ae<0?0:ae>1?1:ae}function pt(ze,ie,ae,ce,Se,Me,Ie,$e){if(ce/=ie,Me>=(ae/=ie)&&Ie<ce)return ze;if(Ie<ae||Me>=ce)return null;const Be=[];for(const Ue of ze){const st=Ue.geometry;let Ge=Ue.type;const Mt=Se===0?Ue.minX:Ue.minY,Lt=Se===0?Ue.maxX:Ue.maxY;if(Mt>=ae&&Lt<ce){Be.push(Ue);continue}if(Lt<ae||Mt>=ce)continue;let ke=[];if(Ge==="Point"||Ge==="MultiPoint")Rt(st,ke,ae,ce,Se);else if(Ge==="LineString")Ft(st,ke,ae,ce,Se,!1,$e.lineMetrics);else if(Ge==="MultiLineString")rn(st,ke,ae,ce,Se,!1);else if(Ge==="Polygon")rn(st,ke,ae,ce,Se,!0);else if(Ge==="MultiPolygon")for(const wn of st){const On=[];rn(wn,On,ae,ce,Se,!0),On.length&&ke.push(On)}if(ke.length){if($e.lineMetrics&&Ge==="LineString"){for(const wn of ke)Be.push(Ae(Ue.id,Ge,wn,Ue.tags));continue}Ge!=="LineString"&&Ge!=="MultiLineString"||(ke.length===1?(Ge="LineString",ke=ke[0]):Ge="MultiLineString"),Ge!=="Point"&&Ge!=="MultiPoint"||(Ge=ke.length===3?"Point":"MultiPoint"),Be.push(Ae(Ue.id,Ge,ke,Ue.tags))}}return Be.length?Be:null}function Rt(ze,ie,ae,ce,Se){for(let Me=0;Me<ze.length;Me+=3){const Ie=ze[Me+Se];Ie>=ae&&Ie<=ce&&Wt(ie,ze[Me],ze[Me+1],ze[Me+2])}}function Ft(ze,ie,ae,ce,Se,Me,Ie){let $e=ot(ze);const Be=Se===0?Vn:Zn;let Ue,st,Ge=ze.start;for(let On=0;On<ze.length-3;On+=3){const $t=ze[On],Sn=ze[On+1],xr=ze[On+2],jr=ze[On+3],ti=ze[On+4],wi=Se===0?$t:Sn,ir=Se===0?jr:ti;let ni=!1;Ie&&(Ue=Math.sqrt(Math.pow($t-jr,2)+Math.pow(Sn-ti,2))),wi<ae?ir>ae&&(st=Be($e,$t,Sn,jr,ti,ae),Ie&&($e.start=Ge+Ue*st)):wi>ce?ir<ce&&(st=Be($e,$t,Sn,jr,ti,ce),Ie&&($e.start=Ge+Ue*st)):Wt($e,$t,Sn,xr),ir<ae&&wi>=ae&&(st=Be($e,$t,Sn,jr,ti,ae),ni=!0),ir>ce&&wi<=ce&&(st=Be($e,$t,Sn,jr,ti,ce),ni=!0),!Me&&ni&&(Ie&&($e.end=Ge+Ue*st),ie.push($e),$e=ot(ze)),Ie&&(Ge+=Ue)}let Mt=ze.length-3;const Lt=ze[Mt],ke=ze[Mt+1],wn=Se===0?Lt:ke;wn>=ae&&wn<=ce&&Wt($e,Lt,ke,ze[Mt+2]),Mt=$e.length-3,Me&&Mt>=3&&($e[Mt]!==$e[0]||$e[Mt+1]!==$e[1])&&Wt($e,$e[0],$e[1],$e[2]),$e.length&&ie.push($e)}function ot(ze){const ie=[];return ie.size=ze.size,ie.start=ze.start,ie.end=ze.end,ie}function rn(ze,ie,ae,ce,Se,Me){for(const Ie of ze)Ft(Ie,ie,ae,ce,Se,Me,!1)}function Wt(ze,ie,ae,ce){ze.push(ie,ae,ce)}function Vn(ze,ie,ae,ce,Se,Me){const Ie=(Me-ie)/(ce-ie);return Wt(ze,Me,ae+(Se-ae)*Ie,1),Ie}function Zn(ze,ie,ae,ce,Se,Me){const Ie=(Me-ae)/(Se-ae);return Wt(ze,ie+(ce-ie)*Ie,Me,1),Ie}function Wr(ze,ie){const ae=[];for(let ce=0;ce<ze.length;ce++){const Se=ze[ce],Me=Se.type;let Ie;if(Me==="Point"||Me==="MultiPoint"||Me==="LineString")Ie=Pa(Se.geometry,ie);else if(Me==="MultiLineString"||Me==="Polygon"){Ie=[];for(const $e of Se.geometry)Ie.push(Pa($e,ie))}else if(Me==="MultiPolygon"){Ie=[];for(const $e of Se.geometry){const Be=[];for(const Ue of $e)Be.push(Pa(Ue,ie));Ie.push(Be)}}ae.push(Ae(Se.id,Me,Ie,Se.tags))}return ae}function Pa(ze,ie){const ae=[];ae.size=ze.size,ze.start!==void 0&&(ae.start=ze.start,ae.end=ze.end);for(let ce=0;ce<ze.length;ce+=3)ae.push(ze[ce]+ie,ze[ce+1],ze[ce+2]);return ae}function Oi(ze,ie){if(ze.transformed)return ze;const ae=1<<ze.z,ce=ze.x,Se=ze.y;for(const Me of ze.features){const Ie=Me.geometry,$e=Me.type;if(Me.geometry=[],$e===1)for(let Be=0;Be<Ie.length;Be+=2)Me.geometry.push(qo(Ie[Be],Ie[Be+1],ie,ae,ce,Se));else for(let Be=0;Be<Ie.length;Be++){const Ue=[];for(let st=0;st<Ie[Be].length;st+=2)Ue.push(qo(Ie[Be][st],Ie[Be][st+1],ie,ae,ce,Se));Me.geometry.push(Ue)}}return ze.transformed=!0,ze}function qo(ze,ie,ae,ce,Se,Me){return[Math.round(ae*(ze*ce-Se)),Math.round(ae*(ie*ce-Me))]}function fs(ze,ie,ae,ce,Se){const Me=ie===Se.maxZoom?0:Se.tolerance/((1<<ie)*Se.extent),Ie={features:[],numPoints:0,numSimplified:0,numFeatures:ze.length,source:null,x:ae,y:ce,z:ie,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const $e of ze)wo(Ie,$e,Me,Se);return Ie}function wo(ze,ie,ae,ce){const Se=ie.geometry,Me=ie.type,Ie=[];if(ze.minX=Math.min(ze.minX,ie.minX),ze.minY=Math.min(ze.minY,ie.minY),ze.maxX=Math.max(ze.maxX,ie.maxX),ze.maxY=Math.max(ze.maxY,ie.maxY),Me==="Point"||Me==="MultiPoint")for(let $e=0;$e<Se.length;$e+=3)Ie.push(Se[$e],Se[$e+1]),ze.numPoints++,ze.numSimplified++;else if(Me==="LineString")ha(Ie,Se,ze,ae,!1,!1);else if(Me==="MultiLineString"||Me==="Polygon")for(let $e=0;$e<Se.length;$e++)ha(Ie,Se[$e],ze,ae,Me==="Polygon",$e===0);else if(Me==="MultiPolygon")for(let $e=0;$e<Se.length;$e++){const Be=Se[$e];for(let Ue=0;Ue<Be.length;Ue++)ha(Ie,Be[Ue],ze,ae,!0,Ue===0)}if(Ie.length){let $e=ie.tags||null;if(Me==="LineString"&&ce.lineMetrics){$e={};for(const Ue in ie.tags)$e[Ue]=ie.tags[Ue];$e.mapbox_clip_start=Se.start/Se.size,$e.mapbox_clip_end=Se.end/Se.size}const Be={geometry:Ie,type:Me==="Polygon"||Me==="MultiPolygon"?3:Me==="LineString"||Me==="MultiLineString"?2:1,tags:$e};ie.id!==null&&(Be.id=ie.id),ze.features.push(Be)}}function ha(ze,ie,ae,ce,Se,Me){const Ie=ce*ce;if(ce>0&&ie.size<(Se?Ie:ce))return void(ae.numPoints+=ie.length/3);const $e=[];for(let Be=0;Be<ie.length;Be+=3)(ce===0||ie[Be+2]>Ie)&&(ae.numSimplified++,$e.push(ie[Be],ie[Be+1])),ae.numPoints++;Se&&(function(Be,Ue){let st=0;for(let Ge=0,Mt=Be.length,Lt=Mt-2;Ge<Mt;Lt=Ge,Ge+=2)st+=(Be[Ge]-Be[Lt])*(Be[Ge+1]+Be[Lt+1]);if(st>0===Ue)for(let Ge=0,Mt=Be.length;Ge<Mt/2;Ge+=2){const Lt=Be[Ge],ke=Be[Ge+1];Be[Ge]=Be[Mt-2-Ge],Be[Ge+1]=Be[Mt-1-Ge],Be[Mt-2-Ge]=Lt,Be[Mt-1-Ge]=ke}})($e,Me),ze.push($e)}const Rr={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class ec{constructor(ie,ae){const ce=(ae=this.options=(function(Me,Ie){for(const $e in Ie)Me[$e]=Ie[$e];return Me})(Object.create(Rr),ae)).debug;if(ce&&console.time("preprocess data"),ae.maxZoom<0||ae.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ae.promoteId&&ae.generateId)throw new Error("promoteId and generateId cannot be used together.");let Se=(function(Me,Ie){const $e=[];if(Me.type==="FeatureCollection")for(let Be=0;Be<Me.features.length;Be++)_t($e,Me.features[Be],Ie,Be);else _t($e,Me.type==="Feature"?Me:{geometry:Me},Ie);return $e})(ie,ae);this.tiles={},this.tileCoords=[],ce&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ae.indexMaxZoom,ae.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Se=(function(Me,Ie){const $e=Ie.buffer/Ie.extent;let Be=Me;const Ue=pt(Me,1,-1-$e,$e,0,-1,2,Ie),st=pt(Me,1,1-$e,2+$e,0,-1,2,Ie);return(Ue||st)&&(Be=pt(Me,1,-$e,1+$e,0,-1,2,Ie)||[],Ue&&(Be=Wr(Ue,1).concat(Be)),st&&(Be=Be.concat(Wr(st,-1)))),Be})(Se,ae),Se.length&&this.splitTile(Se,0,0,0),ce&&(Se.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ie,ae,ce,Se,Me,Ie,$e){const Be=[ie,ae,ce,Se],Ue=this.options,st=Ue.debug;for(;Be.length;){Se=Be.pop(),ce=Be.pop(),ae=Be.pop(),ie=Be.pop();const Ge=1<<ae,Mt=Ji(ae,ce,Se);let Lt=this.tiles[Mt];if(!Lt&&(st>1&&console.time("creation"),Lt=this.tiles[Mt]=fs(ie,ae,ce,Se,Ue),this.tileCoords.push({z:ae,x:ce,y:Se}),st)){st>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ae,ce,Se,Lt.numFeatures,Lt.numPoints,Lt.numSimplified),console.timeEnd("creation"));const ni=`z${ae}`;this.stats[ni]=(this.stats[ni]||0)+1,this.total++}if(Lt.source=ie,Me==null){if(ae===Ue.indexMaxZoom||Lt.numPoints<=Ue.indexMaxPoints)continue}else{if(ae===Ue.maxZoom||ae===Me)continue;if(Me!=null){const ni=Me-ae;if(ce!==Ie>>ni||Se!==$e>>ni)continue}}if(Lt.source=null,ie.length===0)continue;st>1&&console.time("clipping");const ke=.5*Ue.buffer/Ue.extent,wn=.5-ke,On=.5+ke,$t=1+ke;let Sn=null,xr=null,jr=null,ti=null,wi=pt(ie,Ge,ce-ke,ce+On,0,Lt.minX,Lt.maxX,Ue),ir=pt(ie,Ge,ce+wn,ce+$t,0,Lt.minX,Lt.maxX,Ue);ie=null,wi&&(Sn=pt(wi,Ge,Se-ke,Se+On,1,Lt.minY,Lt.maxY,Ue),xr=pt(wi,Ge,Se+wn,Se+$t,1,Lt.minY,Lt.maxY,Ue),wi=null),ir&&(jr=pt(ir,Ge,Se-ke,Se+On,1,Lt.minY,Lt.maxY,Ue),ti=pt(ir,Ge,Se+wn,Se+$t,1,Lt.minY,Lt.maxY,Ue),ir=null),st>1&&console.timeEnd("clipping"),Be.push(Sn||[],ae+1,2*ce,2*Se),Be.push(xr||[],ae+1,2*ce,2*Se+1),Be.push(jr||[],ae+1,2*ce+1,2*Se),Be.push(ti||[],ae+1,2*ce+1,2*Se+1)}}getTile(ie,ae,ce){ie=+ie,ae=+ae,ce=+ce;const Se=this.options,{extent:Me,debug:Ie}=Se;if(ie<0||ie>24)return null;const $e=1<<ie,Be=Ji(ie,ae=ae+$e&$e-1,ce);if(this.tiles[Be])return Oi(this.tiles[Be],Me);Ie>1&&console.log("drilling down to z%d-%d-%d",ie,ae,ce);let Ue,st=ie,Ge=ae,Mt=ce;for(;!Ue&&st>0;)st--,Ge>>=1,Mt>>=1,Ue=this.tiles[Ji(st,Ge,Mt)];return Ue&&Ue.source?(Ie>1&&(console.log("found parent tile z%d-%d-%d",st,Ge,Mt),console.time("drilling down")),this.splitTile(Ue.source,st,Ge,Mt,ie,ae,ce),Ie>1&&console.timeEnd("drilling down"),this.tiles[Be]?Oi(this.tiles[Be],Me):null):null}}function Ji(ze,ie,ae){return 32*((1<<ze)*ae+ie)+ze}class So extends D{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ie,ae){return m._(this,void 0,void 0,(function*(){const ce=ie.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Se=this._geoJSONIndex.getTile(ce.z,ce.x,ce.y);if(!Se)return null;const Me=new te(Se.features,{version:2,extent:m.$});let Ie=(function($e){const Be=new m.cM;return(function(Ue,st){for(const Ge in Ue.layers)st.writeMessage(3,ne,Ue.layers[Ge])})($e,Be),Be.finish()})(Me);return Ie.byteOffset===0&&Ie.byteLength===Ie.buffer.byteLength||(Ie=new Uint8Array(Ie)),{vectorTile:Me,rawData:Ie.buffer}}))}loadData(ie){return m._(this,void 0,void 0,(function*(){var ae;(ae=this._pendingRequest)===null||ae===void 0||ae.abort();const ce=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new m.cN(ie.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ie,this._pendingRequest);const Se=yield this._pendingData;this._geoJSONIndex=ie.cluster?new Et((function({superclusterOptions:Ie,clusterProperties:$e}){if(!$e||!Ie)return Ie;const Be={},Ue={},st={accumulated:null,zoom:0},Ge={properties:null},Mt=Object.keys($e);for(const Lt of Mt){const[ke,wn]=$e[Lt],On=m.cT(wn),$t=m.cT(typeof ke=="string"?[ke,["accumulated"],["get",Lt]]:ke);Be[Lt]=On.value,Ue[Lt]=$t.value}return Ie.map=Lt=>{Ge.properties=Lt;const ke={};for(const wn of Mt)ke[wn]=Be[wn].evaluate(st,Ge);return ke},Ie.reduce=(Lt,ke)=>{Ge.properties=ke;for(const wn of Mt)st.accumulated=Lt[wn],Lt[wn]=Ue[wn].evaluate(st,Ge)},Ie})(ie)).load(Se.features):(function(Ie,$e){return new ec(Ie,$e)})(Se,ie.geojsonVtOptions),this.loaded={};const Me={data:Se};if(ce){const Ie=ce.finish();Ie&&(Me.resourceTiming={},Me.resourceTiming[ie.source]=JSON.parse(JSON.stringify(Ie)))}return Me}catch(Se){if(delete this._pendingRequest,m.cy(Se))return{abandoned:!0};throw Se}}))}getData(){return m._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(ie){const ae=this.loaded;return ae&&ae[ie.uid]?super.reloadTile(ie):this.loadTile(ie)}loadAndProcessGeoJSON(ie,ae){return m._(this,void 0,void 0,(function*(){let ce=yield this.loadGeoJSON(ie,ae);if(delete this._pendingRequest,typeof ce!="object")throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`);if(H(ce,!0),ie.filter){const Se=m.cT(ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Se.result==="error")throw new Error(Se.value.map((Ie=>`${Ie.key}: ${Ie.message}`)).join(", "));ce={type:"FeatureCollection",features:ce.features.filter((Ie=>Se.value.evaluate({zoom:0},Ie)))}}return ce}))}loadGeoJSON(ie,ae){return m._(this,void 0,void 0,(function*(){const{promoteId:ce}=ie;if(ie.request){const Se=yield m.j(ie.request,ae);return this._dataUpdateable=m.cV(Se.data,ce)?m.cU(Se.data,ce):void 0,Se.data}if(typeof ie.data=="string")try{const Se=JSON.parse(ie.data);return this._dataUpdateable=m.cV(Se,ce)?m.cU(Se,ce):void 0,Se}catch{throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`)}if(!ie.dataDiff)throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ie.source}`);return m.cW(this._dataUpdateable,ie.dataDiff,ce),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(ie){return m._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(ie){return this._geoJSONIndex.getClusterExpansionZoom(ie.clusterId)}getClusterChildren(ie){return this._geoJSONIndex.getChildren(ie.clusterId)}getClusterLeaves(ie){return this._geoJSONIndex.getLeaves(ie.clusterId,ie.limit,ie.offset)}}class Ii{constructor(ie){this.self=ie,this.actor=new m.J(ie),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(ae,ce)=>{if(this.externalWorkerSourceTypes[ae])throw new Error(`Worker source with name "${ae}" already registered.`);this.externalWorkerSourceTypes[ae]=ce},this.self.addProtocol=m.cA,this.self.removeProtocol=m.cB,this.self.registerRTLTextPlugin=ae=>{m.cX.setMethods(ae)},this.actor.registerMessageHandler("LDT",((ae,ce)=>this._getDEMWorkerSource(ae,ce.source).loadTile(ce))),this.actor.registerMessageHandler("RDT",((ae,ce)=>m._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(ae,ce.source).removeTile(ce)})))),this.actor.registerMessageHandler("GCEZ",((ae,ce)=>m._(this,void 0,void 0,(function*(){return this._getWorkerSource(ae,ce.type,ce.source).getClusterExpansionZoom(ce)})))),this.actor.registerMessageHandler("GCC",((ae,ce)=>m._(this,void 0,void 0,(function*(){return this._getWorkerSource(ae,ce.type,ce.source).getClusterChildren(ce)})))),this.actor.registerMessageHandler("GCL",((ae,ce)=>m._(this,void 0,void 0,(function*(){return this._getWorkerSource(ae,ce.type,ce.source).getClusterLeaves(ce)})))),this.actor.registerMessageHandler("LD",((ae,ce)=>this._getWorkerSource(ae,ce.type,ce.source).loadData(ce))),this.actor.registerMessageHandler("GD",((ae,ce)=>this._getWorkerSource(ae,ce.type,ce.source).getData())),this.actor.registerMessageHandler("LT",((ae,ce)=>this._getWorkerSource(ae,ce.type,ce.source).loadTile(ce))),this.actor.registerMessageHandler("RT",((ae,ce)=>this._getWorkerSource(ae,ce.type,ce.source).reloadTile(ce))),this.actor.registerMessageHandler("AT",((ae,ce)=>this._getWorkerSource(ae,ce.type,ce.source).abortTile(ce))),this.actor.registerMessageHandler("RMT",((ae,ce)=>this._getWorkerSource(ae,ce.type,ce.source).removeTile(ce))),this.actor.registerMessageHandler("RS",((ae,ce)=>m._(this,void 0,void 0,(function*(){if(!this.workerSources[ae]||!this.workerSources[ae][ce.type]||!this.workerSources[ae][ce.type][ce.source])return;const Se=this.workerSources[ae][ce.type][ce.source];delete this.workerSources[ae][ce.type][ce.source],Se.removeSource!==void 0&&Se.removeSource(ce)})))),this.actor.registerMessageHandler("RM",(ae=>m._(this,void 0,void 0,(function*(){delete this.layerIndexes[ae],delete this.availableImages[ae],delete this.workerSources[ae],delete this.demWorkerSources[ae],this.globalStates.delete(ae)})))),this.actor.registerMessageHandler("SR",((ae,ce)=>m._(this,void 0,void 0,(function*(){this.referrer=ce})))),this.actor.registerMessageHandler("SRPS",((ae,ce)=>this._syncRTLPluginState(ae,ce))),this.actor.registerMessageHandler("IS",((ae,ce)=>m._(this,void 0,void 0,(function*(){this.self.importScripts(ce)})))),this.actor.registerMessageHandler("SI",((ae,ce)=>this._setImages(ae,ce))),this.actor.registerMessageHandler("UL",((ae,ce)=>m._(this,void 0,void 0,(function*(){this._getLayerIndex(ae).update(ce.layers,ce.removedIds,this._getGlobalState(ae))})))),this.actor.registerMessageHandler("UGS",((ae,ce)=>m._(this,void 0,void 0,(function*(){const Se=this._getGlobalState(ae);for(const Me in ce)Se[Me]=ce[Me]})))),this.actor.registerMessageHandler("SL",((ae,ce)=>m._(this,void 0,void 0,(function*(){this._getLayerIndex(ae).replace(ce,this._getGlobalState(ae))}))))}_getGlobalState(ie){let ae=this.globalStates.get(ie);return ae||(ae={},this.globalStates.set(ie,ae)),ae}_setImages(ie,ae){return m._(this,void 0,void 0,(function*(){this.availableImages[ie]=ae;for(const ce in this.workerSources[ie]){const Se=this.workerSources[ie][ce];for(const Me in Se)Se[Me].availableImages=ae}}))}_syncRTLPluginState(ie,ae){return m._(this,void 0,void 0,(function*(){return yield m.cX.syncState(ae,this.self.importScripts)}))}_getAvailableImages(ie){let ae=this.availableImages[ie];return ae||(ae=[]),ae}_getLayerIndex(ie){let ae=this.layerIndexes[ie];return ae||(ae=this.layerIndexes[ie]=new s),ae}_getWorkerSource(ie,ae,ce){if(this.workerSources[ie]||(this.workerSources[ie]={}),this.workerSources[ie][ae]||(this.workerSources[ie][ae]={}),!this.workerSources[ie][ae][ce]){const Se={sendAsync:(Me,Ie)=>(Me.targetMapId=ie,this.actor.sendAsync(Me,Ie))};switch(ae){case"vector":this.workerSources[ie][ae][ce]=new D(Se,this._getLayerIndex(ie),this._getAvailableImages(ie));break;case"geojson":this.workerSources[ie][ae][ce]=new So(Se,this._getLayerIndex(ie),this._getAvailableImages(ie));break;default:this.workerSources[ie][ae][ce]=new this.externalWorkerSourceTypes[ae](Se,this._getLayerIndex(ie),this._getAvailableImages(ie))}}return this.workerSources[ie][ae][ce]}_getDEMWorkerSource(ie,ae){return this.demWorkerSources[ie]||(this.demWorkerSources[ie]={}),this.demWorkerSources[ie][ae]||(this.demWorkerSources[ie][ae]=new R),this.demWorkerSources[ie][ae]}}return m.i(self)&&(self.worker=new Ii(self)),Ii})),d("index",["exports","./shared"],(function(m,s){var M="5.9.0";function C(){var b=new s.A(4);return s.A!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b}let A,D;const R={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(b,n,u){const g=requestAnimationFrame((x=>{_(),n(x)})),{unsubscribe:_}=s.s(b.signal,"abort",(()=>{_(),cancelAnimationFrame(g),u(s.c())}),!1)},frameAsync(b){return new Promise(((n,u)=>{this.frame(b,n,u)}))},getImageData(b,n=0){return this.getImageCanvasContext(b).getImageData(-n,-n,b.width+2*n,b.height+2*n)},getImageCanvasContext(b){const n=window.document.createElement("canvas"),u=n.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return n.width=b.width,n.height=b.height,u.drawImage(b,0,0,b.width,b.height),u},resolveURL:b=>(A||(A=document.createElement("a")),A.href=b,A.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(D==null&&(D=matchMedia("(prefers-reduced-motion: reduce)")),D.matches)}};class j{static testProp(n){if(!j.docStyle)return n[0];for(let u=0;u<n.length;u++)if(n[u]in j.docStyle)return n[u];return n[0]}static create(n,u,g){const _=window.document.createElement(n);return u!==void 0&&(_.className=u),g&&g.appendChild(_),_}static createNS(n,u){return window.document.createElementNS(n,u)}static disableDrag(){j.docStyle&&j.selectProp&&(j.userSelect=j.docStyle[j.selectProp],j.docStyle[j.selectProp]="none")}static enableDrag(){j.docStyle&&j.selectProp&&(j.docStyle[j.selectProp]=j.userSelect)}static setTransform(n,u){n.style[j.transformProp]=u}static addEventListener(n,u,g,_={}){n.addEventListener(u,g,"passive"in _?_:_.capture)}static removeEventListener(n,u,g,_={}){n.removeEventListener(u,g,"passive"in _?_:_.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",j.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",j.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",j.suppressClickInternal,!0)}),0)}static getScale(n){const u=n.getBoundingClientRect();return{x:u.width/n.offsetWidth||1,y:u.height/n.offsetHeight||1,boundingClientRect:u}}static getPoint(n,u,g){const _=u.boundingClientRect;return new s.P((g.clientX-_.left)/u.x-n.clientLeft,(g.clientY-_.top)/u.y-n.clientTop)}static mousePos(n,u){const g=j.getScale(n);return j.getPoint(n,g,u)}static touchPos(n,u){const g=[],_=j.getScale(n);for(let x=0;x<u.length;x++)g.push(j.getPoint(n,_,u[x]));return g}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}static sanitize(n){const u=new DOMParser().parseFromString(n,"text/html").body||document.createElement("body"),g=u.querySelectorAll("script");for(const _ of g)_.remove();return j.clean(u),u.innerHTML}static isPossiblyDangerous(n,u){const g=u.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(n)||!g.includes("javascript:")&&!g.includes("data:"))||!!n.startsWith("on")||void 0}static clean(n){const u=n.children;for(const g of u)j.removeAttributes(g),j.clean(g)}static removeAttributes(n){for(const{name:u,value:g}of n.attributes)j.isPossiblyDangerous(u,g)&&n.removeAttribute(u)}}j.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,j.selectProp=j.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),j.transformProp=j.testProp(["transform","WebkitTransform"]);const G={supported:!1,testSupport:function(b){!Q&&H&&(te?ne(b):V=b)}};let V,H,Q=!1,te=!1;function ne(b){const n=b.createTexture();b.bindTexture(b.TEXTURE_2D,n);try{if(b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,H),b.isContextLost())return;G.supported=!0}catch{}b.deleteTexture(n),Q=!0}var me;typeof document<"u"&&(H=document.createElement("img"),H.onload=()=>{V&&ne(V),V=null,te=!0},H.onerror=()=>{Q=!0,V=null},H.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(b){let n,u,g,_;b.resetRequestQueue=()=>{n=[],u=0,g=0,_={}},b.addThrottleControl=z=>{const U=g++;return _[U]=z,U},b.removeThrottleControl=z=>{delete _[z],E()},b.getImage=(z,U,$=!0)=>new Promise(((W,Z)=>{G.supported&&(z.headers||(z.headers={}),z.headers.accept="image/webp,*/*"),s.e(z,{type:"image"}),n.push({abortController:U,requestParameters:z,supportImageRefresh:$,state:"queued",onError:ee=>{Z(ee)},onSuccess:ee=>{W(ee)}}),E()}));const x=z=>s._(this,void 0,void 0,(function*(){z.state="running";const{requestParameters:U,supportImageRefresh:$,onError:W,onSuccess:Z,abortController:ee}=z,oe=$===!1&&!s.i(self)&&!s.g(U.url)&&(!U.headers||Object.keys(U.headers).reduce(((pe,ve)=>pe&&ve==="accept"),!0));u++;const he=oe?I(U,ee):s.m(U,ee);try{const pe=yield he;delete z.abortController,z.state="completed",pe.data instanceof HTMLImageElement||s.b(pe.data)?Z(pe):pe.data&&Z({data:yield(de=pe.data,typeof createImageBitmap=="function"?s.f(de):s.h(de)),cacheControl:pe.cacheControl,expires:pe.expires})}catch(pe){delete z.abortController,W(pe)}finally{u--,E()}var de})),E=()=>{const z=(()=>{for(const U of Object.keys(_))if(_[U]())return!0;return!1})()?s.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let U=u;U<z&&n.length>0;U++){const $=n.shift();$.abortController.signal.aborted?U--:x($)}},I=(z,U)=>new Promise((($,W)=>{const Z=new Image,ee=z.url,oe=z.credentials;oe&&oe==="include"?Z.crossOrigin="use-credentials":(oe&&oe==="same-origin"||!s.d(ee))&&(Z.crossOrigin="anonymous"),U.signal.addEventListener("abort",(()=>{Z.src="",W(s.c())})),Z.fetchPriority="high",Z.onload=()=>{Z.onerror=Z.onload=null,$({data:Z})},Z.onerror=()=>{Z.onerror=Z.onload=null,U.signal.aborted||W(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Z.src=ee}))})(me||(me={})),me.resetRequestQueue();class fe{constructor(n){this._transformRequestFn=n??null}transformRequest(n,u){return this._transformRequestFn&&this._transformRequestFn(n,u)||{url:n}}setTransformRequest(n){this._transformRequestFn=n}}function _e(b){const n=[];if(typeof b=="string")n.push({id:"default",url:b});else if(b&&b.length>0){const u=[];for(const{id:g,url:_}of b){const x=`${g}${_}`;u.indexOf(x)===-1&&(u.push(x),n.push({id:g,url:_}))}}return n}function ye(b,n,u){try{const g=new URL(b);return g.pathname+=`${n}${u}`,g.toString()}catch{throw new Error(`Invalid sprite URL "${b}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function Oe(b){const{userImage:n}=b;return!!(n&&n.render&&n.render())&&(b.data.replace(new Uint8Array(n.data.buffer)),!0)}class nt extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:u,promiseResolve:g}of this.requestors)g(this._getImagesForIds(u));this.requestors=[]}}getImage(n){const u=this.images[n];if(u&&!u.data&&u.spriteData){const g=u.spriteData;u.data=new s.R({width:g.width,height:g.height},g.context.getImageData(g.x,g.y,g.width,g.height).data),u.spriteData=null}return u}addImage(n,u){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,u)&&(this.images[n]=u)}_validate(n,u){let g=!0;const _=u.data||u.spriteData;return this._validateStretch(u.stretchX,_&&_.width)||(this.fire(new s.k(new Error(`Image "${n}" has invalid "stretchX" value`))),g=!1),this._validateStretch(u.stretchY,_&&_.height)||(this.fire(new s.k(new Error(`Image "${n}" has invalid "stretchY" value`))),g=!1),this._validateContent(u.content,u)||(this.fire(new s.k(new Error(`Image "${n}" has invalid "content" value`))),g=!1),g}_validateStretch(n,u){if(!n)return!0;let g=0;for(const _ of n){if(_[0]<g||_[1]<_[0]||u<_[1])return!1;g=_[1]}return!0}_validateContent(n,u){if(!n)return!0;if(n.length!==4)return!1;const g=u.spriteData,_=g&&g.width||u.data.width,x=g&&g.height||u.data.height;return!(n[0]<0||_<n[0]||n[1]<0||x<n[1]||n[2]<0||_<n[2]||n[3]<0||x<n[3]||n[2]<n[0]||n[3]<n[1])}updateImage(n,u,g=!0){const _=this.getImage(n);if(g&&(_.data.width!==u.data.width||_.data.height!==u.data.height))throw new Error(`size mismatch between old image (${_.data.width}x${_.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=_.version+1,this.images[n]=u,this.updatedImages[n]=!0}removeImage(n){const u=this.images[n];delete this.images[n],delete this.patterns[n],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n){return new Promise(((u,g)=>{let _=!0;if(!this.isLoaded())for(const x of n)this.images[x]||(_=!1);this.isLoaded()||_?u(this._getImagesForIds(n)):this.requestors.push({ids:n,promiseResolve:u})}))}_getImagesForIds(n){const u={};for(const g of n){let _=this.getImage(g);_||(this.fire(new s.l("styleimagemissing",{id:g})),_=this.getImage(g)),_?u[g]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,textFitWidth:_.textFitWidth,textFitHeight:_.textFitHeight,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:s.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return u}getPixelSize(){const{width:n,height:u}=this.atlasImage;return{width:n,height:u}}getPattern(n){const u=this.patterns[n],g=this.getImage(n);if(!g)return null;if(u&&u.position.version===g.version)return u.position;if(u)u.position.version=g.version;else{const _={w:g.data.width+2,h:g.data.height+2,x:0,y:0},x=new s.I(_,g);this.patterns[n]={bin:_,position:x}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const u=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.T(n,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const x in this.patterns)n.push(this.patterns[x].bin);const{w:u,h:g}=s.p(n),_=this.atlasImage;_.resize({width:u||1,height:g||1});for(const x in this.patterns){const{bin:E}=this.patterns[x],I=E.x+1,z=E.y+1,U=this.getImage(x).data,$=U.width,W=U.height;s.R.copy(U,_,{x:0,y:0},{x:I,y:z},{width:$,height:W}),s.R.copy(U,_,{x:0,y:W-1},{x:I,y:z-1},{width:$,height:1}),s.R.copy(U,_,{x:0,y:0},{x:I,y:z+W},{width:$,height:1}),s.R.copy(U,_,{x:$-1,y:0},{x:I-1,y:z},{width:1,height:W}),s.R.copy(U,_,{x:0,y:0},{x:I+$,y:z},{width:1,height:W})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const u of n){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const g=this.getImage(u);g||s.w(`Image with ID: "${u}" was not found`),Oe(g)&&this.updateImage(u,g)}}}const ft=1e20;function rt(b,n,u,g,_,x,E,I,z){for(let U=n;U<n+g;U++)at(b,u*x+U,x,_,E,I,z);for(let U=u;U<u+_;U++)at(b,U*x+n,1,g,E,I,z)}function at(b,n,u,g,_,x,E){x[0]=0,E[0]=-ft,E[1]=ft,_[0]=b[n];for(let I=1,z=0,U=0;I<g;I++){_[I]=b[n+I*u];const $=I*I;do{const W=x[z];U=(_[I]-_[W]+$-W*W)/(I-W)/2}while(U<=E[z]&&--z>-1);z++,x[z]=I,E[z]=U,E[z+1]=ft}for(let I=0,z=0;I<g;I++){for(;E[z+1]<I;)z++;const U=x[z],$=I-U;b[n+I*u]=_[U]+$*$}}class Et{constructor(n,u,g){this.requestManager=n,this.localIdeographFontFamily=u,this.entries={},this.lang=g}setURL(n){this.url=n}getGlyphs(n){return s._(this,void 0,void 0,(function*(){const u=[];for(const x in n)for(const E of n[x])u.push(this._getAndCacheGlyphsPromise(x,E));const g=yield Promise.all(u),_={};for(const{stack:x,id:E,glyph:I}of g)_[x]||(_[x]={}),_[x][E]=I&&{id:I.id,bitmap:I.bitmap.clone(),metrics:I.metrics};return _}))}_getAndCacheGlyphsPromise(n,u){return s._(this,void 0,void 0,(function*(){let g=this.entries[n];g||(g=this.entries[n]={glyphs:{},requests:{},ranges:{}});let _=g.glyphs[u];if(_!==void 0)return{stack:n,id:u,glyph:_};if(_=this._tinySDF(g,n,u),_)return g.glyphs[u]=_,{stack:n,id:u,glyph:_};const x=Math.floor(u/256);if(256*x>65535)throw new Error("glyphs > 65535 not supported");if(g.ranges[x])return{stack:n,id:u,glyph:_};if(!this.url)throw new Error("glyphsUrl is not set");if(!g.requests[x]){const I=Et.loadGlyphRange(n,x,this.url,this.requestManager);g.requests[x]=I}const E=yield g.requests[x];for(const I in E)this._doesCharSupportLocalGlyph(+I)||(g.glyphs[+I]=E[+I]);return g.ranges[x]=!0,{stack:n,id:u,glyph:E[u]||null}}))}_doesCharSupportLocalGlyph(n){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(n))||s.u["CJK Unified Ideographs"](n)||s.u["Hangul Syllables"](n)||s.u.Hiragana(n)||s.u.Katakana(n)||s.u["CJK Symbols and Punctuation"](n)||s.u["Halfwidth and Fullwidth Forms"](n))}_tinySDF(n,u,g){const _=this.localIdeographFontFamily;if(!_||!this._doesCharSupportLocalGlyph(g))return;let x=n.tinySDF;if(!x){let I="400";/bold/i.test(u)?I="900":/medium/i.test(u)?I="500":/light/i.test(u)&&(I="200"),x=n.tinySDF=new Et.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:_,fontWeight:I})}const E=x.draw(String.fromCharCode(g));return{id:g,bitmap:new s.q({width:E.width||60,height:E.height||60},E.data),metrics:{width:E.glyphWidth/2||24,height:E.glyphHeight/2||24,left:E.glyphLeft/2+.5||0,top:E.glyphTop/2-27.5||-8,advance:E.glyphAdvance/2||24,isDoubleResolution:!0}}}}Et.loadGlyphRange=function(b,n,u,g){return s._(this,void 0,void 0,(function*(){const _=256*n,x=_+255,E=g.transformRequest(u.replace("{fontstack}",b).replace("{range}",`${_}-${x}`),"Glyphs"),I=yield s.n(E,new AbortController);if(!I||!I.data)throw new Error(`Could not load glyph range. range: ${n}, ${_}-${x}`);const z={};for(const U of s.o(I.data))z[U.id]=U;return z}))},Et.TinySDF=class{constructor({fontSize:b=24,buffer:n=3,radius:u=8,cutoff:g=.25,fontFamily:_="sans-serif",fontWeight:x="normal",fontStyle:E="normal",lang:I=null}={}){this.buffer=n,this.cutoff=g,this.radius=u,this.lang=I;const z=this.size=b+4*n,U=this._createCanvas(z),$=this.ctx=U.getContext("2d",{willReadFrequently:!0});$.font=`${E} ${x} ${b}px ${_}`,$.textBaseline="alphabetic",$.textAlign="left",$.fillStyle="black",this.gridOuter=new Float64Array(z*z),this.gridInner=new Float64Array(z*z),this.f=new Float64Array(z),this.z=new Float64Array(z+1),this.v=new Uint16Array(z)}_createCanvas(b){const n=document.createElement("canvas");return n.width=n.height=b,n}draw(b){const{width:n,actualBoundingBoxAscent:u,actualBoundingBoxDescent:g,actualBoundingBoxLeft:_,actualBoundingBoxRight:x}=this.ctx.measureText(b),E=Math.ceil(u),I=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-_))),z=Math.min(this.size-this.buffer,E+Math.ceil(g)),U=I+2*this.buffer,$=z+2*this.buffer,W=Math.max(U*$,0),Z=new Uint8ClampedArray(W),ee={data:Z,width:U,height:$,glyphWidth:I,glyphHeight:z,glyphTop:E,glyphLeft:0,glyphAdvance:n};if(I===0||z===0)return ee;const{ctx:oe,buffer:he,gridInner:de,gridOuter:pe}=this;this.lang&&(oe.lang=this.lang),oe.clearRect(he,he,I,z),oe.fillText(b,he,he+E);const ve=oe.getImageData(he,he,I,z);pe.fill(ft,0,W),de.fill(0,0,W);for(let xe=0;xe<z;xe++)for(let be=0;be<I;be++){const Ce=ve.data[4*(xe*I+be)+3]/255;if(Ce===0)continue;const De=(xe+he)*U+be+he;if(Ce===1)pe[De]=0,de[De]=ft;else{const we=.5-Ce;pe[De]=we>0?we*we:0,de[De]=we<0?we*we:0}}rt(pe,0,0,U,$,U,this.f,this.v,this.z),rt(de,he,he,I,z,U,this.f,this.v,this.z);for(let xe=0;xe<W;xe++){const be=Math.sqrt(pe[xe])-Math.sqrt(de[xe]);Z[xe]=Math.round(255-255*(be/this.radius+this.cutoff))}return ee}};class At{constructor(){this.specification=s.v.light.position}possiblyEvaluate(n,u){return s.B(n.expression.evaluate(u))}interpolate(n,u,g){return{x:s.C.number(n.x,u.x,g),y:s.C.number(n.y,u.y,g),z:s.C.number(n.z,u.z,g)}}}let zt;class Le extends s.E{constructor(n){super(),zt=zt||new s.r({anchor:new s.D(s.v.light.anchor),position:new At,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.t(zt,void 0),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,u={}){if(!this._validate(s.x,n,u))for(const g in n){const _=n[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),_):this._transitionable.setValue(g,_)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,u,g){return(!g||g.validate!==!1)&&s.y(this,n.call(s.z,{value:u,style:{glyphs:!0,sprite:!0},styleSpec:s.v}))}}const Qe=new s.r({"sky-color":new s.D(s.v.sky["sky-color"]),"horizon-color":new s.D(s.v.sky["horizon-color"]),"fog-color":new s.D(s.v.sky["fog-color"]),"fog-ground-blend":new s.D(s.v.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.v.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.v.sky["atmosphere-blend"])});class Ve extends s.E{constructor(n){super(),this._transitionable=new s.t(Qe,void 0),this.setSky(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.F(0))}setSky(n,u={}){if(!this._validate(s.G,n,u)){n||(n={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const g in n){const _=n[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),_):this._transitionable.setValue(g,_)}}}getSky(){return this._transitionable.serialize()}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,u,g={}){return g?.validate!==!1&&s.y(this,n.call(s.z,s.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:s.v})))}calculateFogBlendOpacity(n){return n<60?0:n<70?(n-60)/10:1}}class ht{constructor(n,u){this.width=n,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,u){const g=n.join(",")+String(u);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(n,u)),this.dashEntry[g]}getDashRanges(n,u,g){const _=[];let x=n.length%2==1?-n[n.length-1]*g:0,E=n[0]*g,I=!0;_.push({left:x,right:E,isDash:I,zeroLength:n[0]===0});let z=n[0];for(let U=1;U<n.length;U++){I=!I;const $=n[U];x=z*g,z+=$,E=z*g,_.push({left:x,right:E,isDash:I,zeroLength:$===0})}return _}addRoundDash(n,u,g){const _=u/2;for(let x=-g;x<=g;x++){const E=this.width*(this.nextRow+g+x);let I=0,z=n[I];for(let U=0;U<this.width;U++){U/z.right>1&&(z=n[++I]);const $=Math.abs(U-z.left),W=Math.abs(U-z.right),Z=Math.min($,W);let ee;const oe=x/g*(_+1);if(z.isDash){const he=_-Math.abs(oe);ee=Math.sqrt(Z*Z+he*he)}else ee=_-Math.sqrt(Z*Z+oe*oe);this.data[E+U]=Math.max(0,Math.min(255,ee+128))}}}addRegularDash(n){for(let I=n.length-1;I>=0;--I){const z=n[I],U=n[I+1];z.zeroLength?n.splice(I,1):U&&U.isDash===z.isDash&&(U.left=z.left,n.splice(I,1))}const u=n[0],g=n[n.length-1];u.isDash===g.isDash&&(u.left=g.left-this.width,g.right=u.right+this.width);const _=this.width*this.nextRow;let x=0,E=n[x];for(let I=0;I<this.width;I++){I/E.right>1&&(E=n[++x]);const z=Math.abs(I-E.left),U=Math.abs(I-E.right),$=Math.min(z,U);this.data[_+I]=Math.max(0,Math.min(255,(E.isDash?$:-$)+128))}}addDash(n,u){const g=u?7:0,_=2*g+1;if(this.nextRow+_>this.height)return s.w("LineAtlas out of space"),null;let x=0;for(let I=0;I<n.length;I++)x+=n[I];if(x!==0){const I=this.width/x,z=this.getDashRanges(n,this.width,I);u?this.addRoundDash(z,I,g):this.addRegularDash(z)}const E={y:this.nextRow+g,height:2*g,width:x};return this.nextRow+=_,this.dirty=!0,E}bind(n){const u=n.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}const qt="maplibre_preloaded_worker_pool";class Ae{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<Ae.workerCount;)this.workers.push(new Worker(s.a.WORKER_URL));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach((u=>{u.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[qt]}numActive(){return Object.keys(this.active).length}}const qe=Math.floor(R.hardwareConcurrency/2);let _t,Tt;function jt(){return _t||(_t=new Ae),_t}Ae.workerCount=s.H(globalThis)?Math.max(Math.min(qe,3),1):1;class Ht{constructor(n,u){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=u;const g=this.workerPool.acquire(u);for(let _=0;_<g.length;_++){const x=new s.J(g[_],u);x.name=`Worker ${_}`,this.actors.push(x)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,u){const g=[];for(const _ of this.actors)g.push(_.sendAsync({type:n,data:u}));return Promise.all(g)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(n=!0){this.actors.forEach((u=>{u.remove()})),this.actors=[],n&&this.workerPool.release(this.id)}registerMessageHandler(n,u){for(const g of this.actors)g.registerMessageHandler(n,u)}}function bt(){return Tt||(Tt=new Ht(jt(),s.K),Tt.registerMessageHandler("GR",((b,n,u)=>s.m(n,u)))),Tt}function nn(b,n){const u=s.L();return s.M(u,u,[1,1,0]),s.N(u,u,[.5*b.width,.5*b.height,1]),b.calculatePosMatrix?s.O(u,u,b.calculatePosMatrix(n.toUnwrapped())):u}function pt(b,n,u,g,_,x,E){var I;const z=(function(Z,ee,oe){if(Z)for(const he of Z){const de=ee[he];if(de&&de.source===oe&&de.type==="fill-extrusion")return!0}else for(const he in ee){const de=ee[he];if(de.source===oe&&de.type==="fill-extrusion")return!0}return!1})((I=_?.layers)!==null&&I!==void 0?I:null,n,b.id),U=x.maxPitchScaleFactor(),$=b.tilesIn(g,U,z);$.sort(Rt);const W=[];for(const Z of $)W.push({wrappedTileID:Z.tileID.wrapped().key,queryResults:Z.tile.queryRenderedFeatures(n,u,b._state,Z.queryGeometry,Z.cameraQueryGeometry,Z.scale,_,x,U,nn(b.transform,Z.tileID),E?(ee,oe)=>E(Z.tileID,ee,oe):void 0)});return(function(Z,ee){for(const oe in Z)for(const he of Z[oe])Ft(he,ee);return Z})((function(Z){const ee={},oe={};for(const he of Z){const de=he.queryResults,pe=he.wrappedTileID,ve=oe[pe]=oe[pe]||{};for(const xe in de){const be=de[xe],Ce=ve[xe]=ve[xe]||{},De=ee[xe]=ee[xe]||[];for(const we of be)Ce[we.featureIndex]||(Ce[we.featureIndex]=!0,De.push(we))}}return ee})(W),b)}function Rt(b,n){const u=b.tileID,g=n.tileID;return u.overscaledZ-g.overscaledZ||u.canonical.y-g.canonical.y||u.wrap-g.wrap||u.canonical.x-g.canonical.x}function Ft(b,n){const u=b.feature,g=n.getFeatureState(u.layer["source-layer"],u.id);u.source=u.layer.source,u.layer["source-layer"]&&(u.sourceLayer=u.layer["source-layer"]),u.state=g}function ot(b,n,u){return s._(this,void 0,void 0,(function*(){let g=b;if(b.url?g=(yield s.j(n.transformRequest(b.url,"Source"),u)).data:yield R.frameAsync(u),!g)return null;const _=s.Q(s.e(g,b),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in g&&g.vector_layers&&(_.vectorLayerIds=g.vector_layers.map((x=>x.id))),_}))}class rn{constructor(n,u){n&&(u?this.setSouthWest(n).setNorthEast(u):Array.isArray(n)&&(n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])))}setNorthEast(n){return this._ne=n instanceof s.S?new s.S(n.lng,n.lat):s.S.convert(n),this}setSouthWest(n){return this._sw=n instanceof s.S?new s.S(n.lng,n.lat):s.S.convert(n),this}extend(n){const u=this._sw,g=this._ne;let _,x;if(n instanceof s.S)_=n,x=n;else{if(!(n instanceof rn))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(rn.convert(n)):this.extend(s.S.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(s.S.convert(n)):this;if(_=n._sw,x=n._ne,!_||!x)return this}return u||g?(u.lng=Math.min(_.lng,u.lng),u.lat=Math.min(_.lat,u.lat),g.lng=Math.max(x.lng,g.lng),g.lat=Math.max(x.lat,g.lat)):(this._sw=new s.S(_.lng,_.lat),this._ne=new s.S(x.lng,x.lat)),this}getCenter(){return new s.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.S(this.getWest(),this.getNorth())}getSouthEast(){return new s.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:u,lat:g}=s.S.convert(n);let _=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=g&&g<=this._ne.lat&&_}static convert(n){return n instanceof rn?n:n&&new rn(n)}static fromLngLat(n,u=0){const g=360*u/40075017,_=g/Math.cos(Math.PI/180*n.lat);return new rn(new s.S(n.lng-_,n.lat-g),new s.S(n.lng+_,n.lat+g))}adjustAntiMeridian(){const n=new s.S(this._sw.lng,this._sw.lat),u=new s.S(this._ne.lng,this._ne.lat);return new rn(n,n.lng>u.lng?new s.S(u.lng+360,u.lat):u)}}class Wt{constructor(n,u,g){this.bounds=rn.convert(this.validateBounds(n)),this.minzoom=u||0,this.maxzoom=g||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const u=Math.pow(2,n.z),g=Math.floor(s.V(this.bounds.getWest())*u),_=Math.floor(s.U(this.bounds.getNorth())*u),x=Math.ceil(s.V(this.bounds.getEast())*u),E=Math.ceil(s.U(this.bounds.getSouth())*u);return n.x>=g&&n.x<x&&n.y>=_&&n.y<E}}class Vn extends s.E{constructor(n,u,g,_){if(super(),this.id=n,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.Q(u,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_)}load(){return s._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield ot(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),n&&(s.e(this,n),n.bounds&&(this.tileBounds=new Wt(n.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this._loaded=!0,this.fire(new s.k(n))}}))}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.abort(),n(),this.load()}setTiles(n){return this.setSourceProperty((()=>{this._options.tiles=n})),this}setUrl(n){return this.setSourceProperty((()=>{this.url=n,this._options.url=n})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(n){return s._(this,void 0,void 0,(function*(){const u=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(u,"Tile"),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};g.request.collectResourceTiming=this._collectResourceTiming;let _="RT";if(n.actor&&n.state!=="expired"){if(n.state==="loading")return new Promise(((x,E)=>{n.reloadPromise={resolve:x,reject:E}}))}else n.actor=this.dispatcher.getActor(),_="LT";n.abortController=new AbortController;try{const x=yield n.actor.sendAsync({type:_,data:g},n.abortController);if(delete n.abortController,n.aborted)return;this._afterTileLoadWorkerResponse(n,x)}catch(x){if(delete n.abortController,n.aborted)return;if(x&&x.status!==404)throw x;this._afterTileLoadWorkerResponse(n,null)}}))}_afterTileLoadWorkerResponse(n,u){if(u&&u.resourceTiming&&(n.resourceTiming=u.resourceTiming),u&&this.map._refreshExpiredTiles&&n.setExpiryData(u),n.loadVectorData(u,this.map.painter),n.reloadPromise){const g=n.reloadPromise;n.reloadPromise=null,this.loadTile(n).then(g.resolve).catch(g.reject)}}abortTile(n){return s._(this,void 0,void 0,(function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.actor&&(yield n.actor.sendAsync({type:"AT",data:{uid:n.uid,type:this.type,source:this.id}}))}))}unloadTile(n){return s._(this,void 0,void 0,(function*(){n.unloadVectorData(),n.actor&&(yield n.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Zn extends s.E{constructor(n,u,g,_){super(),this.id=n,this.dispatcher=g,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},u),s.e(this,s.Q(u,["url","scheme","tileSize"]))}load(){return s._(this,arguments,void 0,(function*(n=!1){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield ot(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,u&&(s.e(this,u),u.bounds&&(this.tileBounds=new Wt(u.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:n})))}catch(u){this._tileJSONRequest=null,this._loaded=!0,this.fire(new s.k(u))}}))}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(n){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),n(),this.load(!0)}setTiles(n){return this.setSourceProperty((()=>{this._options.tiles=n})),this}setUrl(n){return this.setSourceProperty((()=>{this.url=n,this._options.url=n})),this}serialize(){return s.e({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n){return s._(this,void 0,void 0,(function*(){const u=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.abortController=new AbortController;try{const g=yield me.getImage(this.map._requestManager.transformRequest(u,"Tile"),n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(g&&g.data){this.map._refreshExpiredTiles&&(g.cacheControl||g.expires)&&n.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});const _=this.map.painter.context,x=_.gl,E=g.data;n.texture=this.map.painter.getTileTexture(E.width),n.texture?n.texture.update(E,{useMipmap:!0}):(n.texture=new s.T(_,E,x.RGBA,{useMipmap:!0}),n.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST)),n.state="loaded"}}catch(g){if(delete n.abortController,n.aborted)n.state="unloaded";else if(g)throw n.state="errored",g}}))}abortTile(n){return s._(this,void 0,void 0,(function*(){n.abortController&&(n.abortController.abort(),delete n.abortController)}))}unloadTile(n){return s._(this,void 0,void 0,(function*(){n.texture&&this.map.painter.saveTileTexture(n.texture)}))}hasTransition(){return!1}}class Wr extends Zn{constructor(n,u,g,_){super(n,u,g,_),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(n){return s._(this,void 0,void 0,(function*(){const u=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(u,"Tile");n.neighboringTiles=this._getNeighboringTiles(n.tileID),n.abortController=new AbortController;try{const _=yield me.getImage(g,n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(_&&_.data){const x=_.data;this.map._refreshExpiredTiles&&(_.cacheControl||_.expires)&&n.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});const E=s.b(x)&&s.W()?x:yield this.readImageNow(x),I={type:this.type,uid:n.uid,source:this.id,rawImageData:E,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!n.actor||n.state==="expired"){n.actor=this.dispatcher.getActor();const z=yield n.actor.sendAsync({type:"LDT",data:I});n.dem=z,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded"}}}catch(_){if(delete n.abortController,n.aborted)n.state="unloaded";else if(_)throw n.state="errored",_}}))}readImageNow(n){return s._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&s.X()){const u=n.width+2,g=n.height+2;try{return new s.R({width:u,height:g},yield s.Y(n,-1,-1,u,g))}catch{}}return R.getImageData(n,1)}))}_getNeighboringTiles(n){const u=n.canonical,g=Math.pow(2,u.z),_=(u.x-1+g)%g,x=u.x===0?n.wrap-1:n.wrap,E=(u.x+1+g)%g,I=u.x+1===g?n.wrap+1:n.wrap,z={};return z[new s.Z(n.overscaledZ,x,u.z,_,u.y).key]={backfilled:!1},z[new s.Z(n.overscaledZ,I,u.z,E,u.y).key]={backfilled:!1},u.y>0&&(z[new s.Z(n.overscaledZ,x,u.z,_,u.y-1).key]={backfilled:!1},z[new s.Z(n.overscaledZ,n.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},z[new s.Z(n.overscaledZ,I,u.z,E,u.y-1).key]={backfilled:!1}),u.y+1<g&&(z[new s.Z(n.overscaledZ,x,u.z,_,u.y+1).key]={backfilled:!1},z[new s.Z(n.overscaledZ,n.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},z[new s.Z(n.overscaledZ,I,u.z,E,u.y+1).key]={backfilled:!1}),z}unloadTile(n){return s._(this,void 0,void 0,(function*(){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&(yield n.actor.sendAsync({type:"RDT",data:{type:this.type,uid:n.uid,source:this.id}}))}))}}class Pa extends s.E{constructor(n,u,g,_){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:u.data},this.actor=g.getActor(),this.setEventedParent(_),this._data=u.data,this._options=s.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId,u.clusterMaxZoom!==void 0&&this.maxzoom<=u.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${u.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(u.buffer!==void 0?u.buffer:128),tolerance:this._pixelsToTileUnits(u.tolerance!==void 0?u.tolerance:.375),extent:s.$,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(u.clusterMaxZoom),minPoints:Math.max(2,u.clusterMinPoints||2),extent:s.$,radius:this._pixelsToTileUnits(u.clusterRadius||50),log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(n){return n*(s.$/this.tileSize)}_getClusterMaxZoom(n){const u=n?Math.round(n):this.maxzoom-1;return Number.isInteger(n)||n===void 0||s.w(`Integer expected for option 'clusterMaxZoom': provided value "${n}" rounded to "${u}"`),u}load(){return s._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(n){this.map=n,this.load()}setData(n){return this._data=n,this._pendingWorkerUpdate={data:n},this._updateWorkerData(),this}updateData(n){return this._pendingWorkerUpdate.diff=s.a0(this._pendingWorkerUpdate.diff,n),this._updateWorkerData(),this}getData(){return s._(this,void 0,void 0,(function*(){const n=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:n})}))}getCoordinatesFromGeometry(n){return n.type==="GeometryCollection"?n.geometries.map((u=>u.coordinates)).flat(1/0):n.coordinates.flat(1/0)}getBounds(){return s._(this,void 0,void 0,(function*(){const n=new rn,u=yield this.getData();let g;switch(u.type){case"FeatureCollection":g=u.features.map((_=>this.getCoordinatesFromGeometry(_.geometry))).flat(1/0);break;case"Feature":g=this.getCoordinatesFromGeometry(u.geometry);break;default:g=this.getCoordinatesFromGeometry(u)}if(g.length==0)return n;for(let _=0;_<g.length-1;_+=2)n.extend([g[_],g[_+1]]);return n}))}setClusterOptions(n){return this.workerOptions.cluster=n.cluster,n&&(n.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(n.clusterRadius)),n.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(n.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(n){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:n,source:this.id}})}getClusterChildren(n){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:n,source:this.id}})}getClusterLeaves(n,u,g){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:n,limit:u,offset:g}})}_updateWorkerData(){return s._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;const{data:n,diff:u}=this._pendingWorkerUpdate;if(!n&&!u)return void s.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const g=s.e({type:this.type},this.workerOptions);n?(typeof n=="string"?(g.request=this.map._requestManager.transformRequest(R.resolveURL(n),"Source"),g.request.collectResourceTiming=this._collectResourceTiming):g.data=JSON.stringify(n),this._pendingWorkerUpdate.data=void 0):u&&(g.dataDiff=u,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new s.l("dataloading",{dataType:"source"}));try{const _=yield this.actor.sendAsync({type:"LD",data:g});if(this._isUpdatingWorker=!1,this._removed||_.abandoned)return void this.fire(new s.l("dataabort",{dataType:"source"}));this._data=_.data;let x=null;_.resourceTiming&&_.resourceTiming[this.id]&&(x=_.resourceTiming[this.id].slice(0));const E={dataType:"source"};this._collectResourceTiming&&x&&x.length>0&&s.e(E,{resourceTiming:x}),this.fire(new s.l("data",Object.assign(Object.assign({},E),{sourceDataType:"metadata"}))),this.fire(new s.l("data",Object.assign(Object.assign({},E),{sourceDataType:"content"})))}catch(_){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new s.l("dataabort",{dataType:"source"}));this.fire(new s.k(_))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}}))}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(n){return s._(this,void 0,void 0,(function*(){const u=n.actor?"RT":"LT";n.actor=this.actor;const g={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};n.abortController=new AbortController;const _=yield this.actor.sendAsync({type:u,data:g},n.abortController);delete n.abortController,n.unloadVectorData(),n.aborted||n.loadVectorData(_,this.map.painter,u==="RT")}))}abortTile(n){return s._(this,void 0,void 0,(function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.aborted=!0}))}unloadTile(n){return s._(this,void 0,void 0,(function*(){n.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Oi extends s.E{constructor(n,u,g,_){super(),this.flippedWindingOrder=!1,this.id=n,this.dispatcher=g,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=u}load(n){return s._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const u=yield me.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,u&&u.data&&(this.image=u.data,n&&(this.coordinates=n),this._finishLoading())}catch(u){this._request=null,this._loaded=!0,this.fire(new s.k(u))}}))}loaded(){return this._loaded}updateImage(n){return n.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=n.url,this.load(n.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(n){this.coordinates=n;const u=n.map(s.a1.fromLngLat);var g;return this.tileID=(function(_){const x=s.a2.fromPoints(_),E=x.width(),I=x.height(),z=Math.max(E,I),U=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),$=Math.pow(2,U);return new s.a4(U,Math.floor((x.minX+x.maxX)/2*$),Math.floor((x.minY+x.maxY)/2*$))})(u),this.terrainTileRanges=this._getOverlappingTileRanges(u),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=u.map((_=>this.tileID.getTilePoint(_)._round())),this.flippedWindingOrder=((g=this.tileCoords)[1].x-g[0].x)*(g[2].y-g[0].y)-(g[1].y-g[0].y)*(g[2].x-g[0].x)<0,this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,u=n.gl;this.texture||(this.texture=new s.T(n,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let g=!1;for(const _ in this.tiles){const x=this.tiles[_];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,g=!0)}g&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(n){return s._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={}):n.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(n){const{minX:u,minY:g,maxX:_,maxY:x}=s.a2.fromPoints(n),E={};for(let I=0;I<=s.a3;I++){const z=Math.pow(2,I),U=Math.floor(u*z),$=Math.floor(g*z),W=Math.floor(_*z),Z=Math.floor(x*z);E[I]={minTileX:U,minTileY:$,maxTileX:W,maxTileY:Z}}return E}}class qo extends Oi{constructor(n,u,g,_){super(n,u,g,_),this.roundZoom=!0,this.type="video",this.options=u}load(){return s._(this,void 0,void 0,(function*(){this._loaded=!1;const n=this.options;this.urls=[];for(const u of n.urls)this.urls.push(this.map._requestManager.transformRequest(u,"Source").url);try{const u=yield s.a5(this.urls);if(this._loaded=!0,!u)return;this.video=u,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(u){this.fire(new s.k(u))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const u=this.video.seekable;n<u.start(0)||n>u.end(0)?this.fire(new s.k(new s.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,u=n.gl;this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new s.T(n,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let g=!1;for(const _ in this.tiles){const x=this.tiles[_];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,g=!0)}g&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class fs extends Oi{constructor(n,u,g,_){super(n,u,g,_),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some((x=>!Array.isArray(x)||x.length!==2||x.some((E=>typeof E!="number"))))||this.fire(new s.k(new s.a6(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.k(new s.a6(`sources.${n}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new s.k(new s.a6(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new s.k(new s.a6(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.k(new s.a6(`sources.${n}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){return s._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,g=u.gl;this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.T(u,this.canvas,g.RGBA,{premultiply:!0});let _=!1;for(const x in this.tiles){const E=this.tiles[x];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,_=!0)}_&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const wo={},ha=b=>{switch(b){case"geojson":return Pa;case"image":return Oi;case"raster":return Zn;case"raster-dem":return Wr;case"vector":return Vn;case"video":return qo;case"canvas":return fs}return wo[b]},Rr="RTLPluginLoaded";class ec extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=bt()}_syncState(n){return this.status=n,this.dispatcher.broadcast("SRPS",{pluginStatus:n,pluginURL:this.url}).catch((u=>{throw this.status="error",u}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(n){return s._(this,arguments,void 0,(function*(u,g=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=R.resolveURL(u),!this.url)throw new Error(`requested url ${u} is invalid`);if(this.status==="unavailable"){if(!g)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return s._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.l(Rr))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ji=null;function So(){return Ji||(Ji=new ec),Ji}var Ii,ze;(function(b){b[b.Base=0]="Base",b[b.Parent=1]="Parent"})(Ii||(Ii={})),(function(b){b[b.Departing=0]="Departing",b[b.Incoming=1]="Incoming"})(ze||(ze={}));class ie{constructor(n,u){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=n,this.uid=s.a7(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(n){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(n||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:n,fadingDirection:u,fadingParentID:g,fadeEndTime:_}){this.resetFadeLogic(),this.fadingRole=n,this.fadingDirection=u,this.fadingParentID=g,this.fadeEndTime=_}setSelfFadeLogic(n){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=n}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=R.now(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,u,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=(function(_,x){const E={};if(!x)return E;for(const I of _){const z=I.layerIds.map((U=>x.getLayer(U))).filter(Boolean);if(z.length!==0){I.layers=z,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map((U=>z.filter(($=>$.id===U))[0])));for(const U of z)E[U.id]=I}}return E})(n.buckets,u?.style),this.hasSymbolBuckets=!1;for(const _ in this.buckets){const x=this.buckets[_];if(x instanceof s.a9){if(this.hasSymbolBuckets=!0,!g)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const _ in this.buckets){const x=this.buckets[_];if(x instanceof s.a9&&x.hasRTLText){this.hasRTLText=!0,So().lazyLoad();break}}this.queryPadding=0;for(const _ in this.buckets){const x=this.buckets[_];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(_).queryRadius(x))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage),this.dashPositions=n.dashPositions}else this.collisionBoxArray=new s.a8}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const g in this.buckets){const _=this.buckets[g];_.uploadPending()&&_.upload(n)}const u=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new s.T(n,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new s.T(n,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,u,g,_,x,E,I,z,U,$,W){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:_,cameraQueryGeometry:x,scale:E,tileSize:this.tileSize,pixelPosMatrix:$,transform:z,params:I,queryPadding:this.queryPadding*U,getElevation:W},n,u,g):{}}querySourceFeatures(n,u){const g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;const _=g.loadVTLayers(),x=u&&u.sourceLayer?u.sourceLayer:"",E=_._geojsonTileLayer||_[x];if(!E)return;const I=s.aa(u?.filter,u?.globalState),{z,x:U,y:$}=this.tileID.canonical,W={z,x:U,y:$};for(let Z=0;Z<E.length;Z++){const ee=E.feature(Z);if(I.needGeometry){const de=s.ab(ee,!0);if(!I.filter(new s.F(this.tileID.overscaledZ),de,this.tileID.canonical))continue}else if(!I.filter(new s.F(this.tileID.overscaledZ),ee))continue;const oe=g.getId(ee,x),he=new s.ac(ee,z,U,$,oe);he.tile=W,n.push(he)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const u=this.expirationTime;if(n.cacheControl){const g=s.ad(n.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const g=Date.now();let _=!1;if(this.expirationTime>g)_=!1;else if(u)if(this.expirationTime<u)_=!0;else{const x=this.expirationTime-u;x?this.expirationTime=g+Math.max(x,3e4):_=!0}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const g=this.latestFeatureIndex.loadVTLayers();for(const _ in this.buckets){if(!u.style.hasLayer(_))continue;const x=this.buckets[_],E=x.layers[0].sourceLayer||"_geojsonTileLayer",I=g[E],z=n[E];if(!I||!z||Object.keys(z).length===0)continue;x.update(z,I,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const U=u&&u.style&&u.style.getLayer(_);U&&(this.queryPadding=Math.max(this.queryPadding,U.queryRadius(x)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<R.now()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(n){this.symbolFadeHoldUntil=R.now()+n}setDependencies(n,u){const g={};for(const _ of u)g[_]=!0;this.dependencies[n]=g}hasDependency(n,u){for(const g of n){const _=this.dependencies[g];if(_){for(const x of u)if(_[x])return!0}}return!1}}class ae{constructor(n,u){this.max=n,this.onRemove=u,this.reset()}reset(){for(const n in this.data)for(const u of this.data[n])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(n,u,g){const _=n.wrapped().key;this.data[_]===void 0&&(this.data[_]=[]);const x={value:u,timeout:void 0};if(g!==void 0&&(x.timeout=setTimeout((()=>{this.remove(n,x)}),g)),this.data[_].push(x),this.order.push(_),this.order.length>this.max){const E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const u=this.data[n].shift();return u.timeout&&clearTimeout(u.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),u.value}getByKey(n){const u=this.data[n];return u?u[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,u){if(!this.has(n))return this;const g=n.wrapped().key,_=u===void 0?0:this.data[g].indexOf(u),x=this.data[g][_];return this.data[g].splice(_,1),x.timeout&&clearTimeout(x.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(x.value),this.order.splice(this.order.indexOf(g),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(n){const u=[];for(const g in this.data)for(const _ of this.data[g])n(_.value)||u.push(_);for(const g of u)this.remove(g.value.tileID,g)}}class ce{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,u,g){const _=String(u);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][_]=this.stateChanges[n][_]||{},s.e(this.stateChanges[n][_],g),this.deletedStates[n]===null){this.deletedStates[n]={};for(const x in this.state[n])x!==_&&(this.deletedStates[n][x]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][_]===null){this.deletedStates[n][_]={};for(const x in this.state[n][_])g[x]||(this.deletedStates[n][_][x]=null)}else for(const x in g)this.deletedStates[n]&&this.deletedStates[n][_]&&this.deletedStates[n][_][x]===null&&delete this.deletedStates[n][_][x]}removeFeatureState(n,u,g){if(this.deletedStates[n]===null)return;const _=String(u);if(this.deletedStates[n]=this.deletedStates[n]||{},g&&u!==void 0)this.deletedStates[n][_]!==null&&(this.deletedStates[n][_]=this.deletedStates[n][_]||{},this.deletedStates[n][_][g]=null);else if(u!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][_])for(g in this.deletedStates[n][_]={},this.stateChanges[n][_])this.deletedStates[n][_][g]=null;else this.deletedStates[n][_]=null;else this.deletedStates[n]=null}getState(n,u){const g=String(u),_=s.e({},(this.state[n]||{})[g],(this.stateChanges[n]||{})[g]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const x=this.deletedStates[n][u];if(x===null)return{};for(const E in x)delete _[E]}return _}initializeTileState(n,u){n.setFeatureState(this.state,u)}coalesceChanges(n,u){const g={};for(const _ in this.stateChanges){this.state[_]=this.state[_]||{};const x={};for(const E in this.stateChanges[_])this.state[_][E]||(this.state[_][E]={}),s.e(this.state[_][E],this.stateChanges[_][E]),x[E]=this.state[_][E];g[_]=x}for(const _ in this.deletedStates){this.state[_]=this.state[_]||{};const x={};if(this.deletedStates[_]===null)for(const E in this.state[_])x[E]={},this.state[_][E]={};else for(const E in this.deletedStates[_]){if(this.deletedStates[_][E]===null)this.state[_][E]={};else for(const I of Object.keys(this.deletedStates[_][E]))delete this.state[_][E][I];x[E]=this.state[_][E]}g[_]=g[_]||{},s.e(g[_],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(const _ in n)n[_].setFeatureState(g,u)}}const Se=89.25;function Me(b,n){const u=s.ah(n.lat,-s.ai,s.ai);return new s.P(s.V(n.lng)*b,s.U(u)*b)}function Ie(b,n){return new s.a1(n.x/b,n.y/b).toLngLat()}function $e(b){return b.cameraToCenterDistance*Math.min(.85*Math.tan(s.ae(90-b.pitch)),Math.tan(s.ae(Se-b.pitch)))}function Be(b,n){const u=b.canonical,g=n/s.af(u.z),_=u.x+Math.pow(2,u.z)*b.wrap,x=s.ag(new Float64Array(16));return s.M(x,x,[_*g,u.y*g,0]),s.N(x,x,[g/s.$,g/s.$,1]),x}function Ue(b,n,u,g,_){const x=s.a1.fromLngLat(b,n),E=_*s.aj(1,b.lat),I=E*Math.cos(s.ae(u)),z=Math.sqrt(E*E-I*I),U=z*Math.sin(s.ae(-g)),$=z*Math.cos(s.ae(-g));return new s.a1(x.x+U,x.y+$,x.z+I)}function st(b,n,u){const g=n.intersectsFrustum(b);if(!u||g===0)return g;const _=n.intersectsPlane(u);return _===0?0:g===2&&_===2?2:1}function Ge(b,n,u){let g=0;const _=(u-n)/10;for(let x=0;x<10;x++)g+=_*Math.pow(Math.cos(n+(x+.5)/10*(u-n)),b);return g}function Mt(b,n){return function(u,g,_,x,E){const I=2*((b-1)/s.ak(Math.cos(s.ae(Se-E))/Math.cos(s.ae(Se)))-1),z=Math.acos(_/x),U=2*Ge(I-1,0,s.ae(E/2)),$=Math.min(s.ae(Se),z+s.ae(E/2)),W=Ge(I-1,Math.min($,z-s.ae(E/2)),$),Z=Math.atan(g/_),ee=Math.hypot(g,_);let oe=u;return oe+=s.ak(x/ee/Math.max(.5,Math.cos(s.ae(E/2)))),oe+=I*s.ak(Math.cos(Z))/2,oe-=s.ak(Math.max(1,W/U/n))/2,oe}}const Lt=Mt(9.314,3);function ke(b,n){const u=(n.roundZoom?Math.round:Math.floor)(b.zoom+s.ak(b.tileSize/n.tileSize));return Math.max(0,u)}function wn(b,n){const u=b.getCameraFrustum(),g=b.getClippingPlane(),_=b.screenPointToMercatorCoordinate(b.getCameraPoint()),x=s.a1.fromLngLat(b.center,b.elevation);_.z=x.z+Math.cos(b.pitchInRadians)*b.cameraToCenterDistance/b.worldSize;const E=b.getCoveringTilesDetailsProvider(),I=E.allowVariableZoom(b,n),z=ke(b,n),U=n.minzoom||0,$=n.maxzoom!==void 0?n.maxzoom:b.maxZoom,W=Math.min(Math.max(0,z),$),Z=Math.pow(2,W),ee=[Z*_.x,Z*_.y,0],oe=[Z*x.x,Z*x.y,0],he=Math.hypot(x.x-_.x,x.y-_.y),de=Math.abs(x.z-_.z),pe=Math.hypot(he,de),ve=Ce=>({zoom:0,x:0,y:0,wrap:Ce,fullyVisible:!1}),xe=[],be=[];if(b.renderWorldCopies&&E.allowWorldCopies())for(let Ce=1;Ce<=3;Ce++)xe.push(ve(-Ce)),xe.push(ve(Ce));for(xe.push(ve(0));xe.length>0;){const Ce=xe.pop(),De=Ce.x,we=Ce.y;let Re=Ce.fullyVisible;const Xe={x:De,y:we,z:Ce.zoom},He=E.getTileBoundingVolume(Xe,Ce.wrap,b.elevation,n);if(!Re){const St=st(u,He,g);if(St===0)continue;Re=St===2}const We=E.distanceToTile2d(_.x,_.y,Xe,He);let Ye=z;I&&(Ye=(n.calculateTileZoom||Lt)(b.zoom+s.ak(b.tileSize/n.tileSize),We,de,pe,b.fov)),Ye=(n.roundZoom?Math.round:Math.floor)(Ye),Ye=Math.max(0,Ye);const wt=Math.min(Ye,$);if(Ce.wrap=E.getWrap(x,Xe,Ce.wrap),Ce.zoom>=wt){if(Ce.zoom<U)continue;const St=W-Ce.zoom,dt=ee[0]-.5-(De<<St),Vt=ee[1]-.5-(we<<St),un=n.reparseOverscaled?Math.max(Ce.zoom,Ye):Ce.zoom;be.push({tileID:new s.Z(Ce.zoom===$?un:Ce.zoom,Ce.wrap,Ce.zoom,De,we),distanceSq:s.al([oe[0]-.5-De,oe[1]-.5-we]),tileDistanceToCamera:Math.sqrt(dt*dt+Vt*Vt)})}else for(let St=0;St<4;St++)xe.push({zoom:Ce.zoom+1,x:(De<<1)+St%2,y:(we<<1)+(St>>1),wrap:Ce.wrap,fullyVisible:Re})}return be.sort(((Ce,De)=>Ce.distanceSq-De.distanceSq)).map((Ce=>Ce.tileID))}const On=s.a2.fromPoints([new s.P(0,0),new s.P(s.$,s.$)]);class $t extends s.E{constructor(n,u,g){super(),this.id=n,this.dispatcher=g,this.on("data",(_=>this._dataHandler(_))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((_,x,E,I)=>{const z=new(ha(x.type))(_,x,E,I);if(z.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${z.id}`);return z})(n,u,g,this),this._tiles={},this._cache=new ae(0,(_=>this._unloadTile(_))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new ce,this._didEmitContent=!1,this._updated=!1}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._maxTileCacheZoomLevels=n?n._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const n in this._tiles){const u=this._tiles[n];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,u,g){return s._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(n),this._tileLoaded(n,u,g)}catch(_){n.state="errored",_.status!==404?this._source.fire(new s.k(_,{tile:n})):this.update(this.transform,this.terrain)}}))}_unloadTile(n){this._source.unloadTile&&this._source.unloadTile(n)}_abortTile(n){this._source.abortTile&&this._source.abortTile(n),this._source.fire(new s.l("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const g=this._tiles[u];g.upload(n),g.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((n=>n.tileID)).sort(Sn).map((n=>n.key))}getRenderableIds(n){const u=[];for(const g in this._tiles)this._isIdRenderable(g,n)&&u.push(this._tiles[g]);return n?u.sort(((g,_)=>{const x=g.tileID,E=_.tileID,I=new s.P(x.canonical.x,x.canonical.y)._rotate(-this.transform.bearingInRadians),z=new s.P(E.canonical.x,E.canonical.y)._rotate(-this.transform.bearingInRadians);return x.overscaledZ-E.overscaledZ||z.y-I.y||z.x-I.x})).map((g=>g.tileID.key)):u.map((g=>g.tileID)).sort(Sn).map((g=>g.key))}hasRenderableParent(n){const u=n.overscaledZ-1;if(u>=this._source.minzoom){const g=this._getLoadedTile(n.scaledTo(u));if(g)return this._isIdRenderable(g.tileID.key)}return!1}_isIdRenderable(n,u=!1){var g;return(g=this._tiles[n])===null||g===void 0?void 0:g.isRenderable(u)}reload(n){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const u in this._tiles)n?this._reloadTile(u,"expired"):this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")}}_reloadTile(n,u){return s._(this,void 0,void 0,(function*(){const g=this._tiles[n];g&&(g.state!=="loading"&&(g.state=u),yield this._loadTile(g,n,u))}))}_tileLoaded(n,u,g){n.timeAdded=R.now(),g==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(u,n),this.getSource().type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new s.l("data",{dataType:"source",tile:n,coord:n.tileID}))}_backfillDEM(n){const u=this.getRenderableIds();for(let _=0;_<u.length;_++){const x=u[_];if(n.neighboringTiles&&n.neighboringTiles[x]){const E=this.getTileByID(x);g(n,E),g(E,n)}}function g(_,x){_.needsHillshadePrepare=!0,_.needsTerrainPrepare=!0;let E=x.tileID.canonical.x-_.tileID.canonical.x;const I=x.tileID.canonical.y-_.tileID.canonical.y,z=Math.pow(2,_.tileID.canonical.z),U=x.tileID.key;E===0&&I===0||Math.abs(I)>1||(Math.abs(E)>1&&(Math.abs(E+z)===1?E+=z:Math.abs(E-z)===1&&(E-=z)),x.dem&&_.dem&&(_.dem.backfillBorder(x.dem,E,I),_.neighboringTiles&&_.neighboringTiles[U]&&(_.neighboringTiles[U].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,u){const g=Object.values(n),_=this._getLoadedDescendents(g),x={};for(const E of g){const I=_[E.key];if(!I?.length){x[E.key]=E;continue}const z=E.overscaledZ+$t.maxUnderzooming,U=I.filter((Z=>Z.tileID.overscaledZ<=z));if(!U.length){x[E.key]=E;continue}const $=Math.min(...U.map((Z=>Z.tileID.overscaledZ))),W=U.filter((Z=>Z.tileID.overscaledZ===$)).map((Z=>Z.tileID));for(const Z of W)u[Z.key]=Z;this._areDescendentsComplete(W,$,E.overscaledZ)||(x[E.key]=E)}return x}_getLoadedDescendents(n){var u;const g={};for(const _ in this._tiles){const x=this._tiles[_];if(x.hasData())for(const E of n)x.tileID.isChildOf(E)&&(g[u=E.key]||(g[u]=[])).push(x)}return g}_areDescendentsComplete(n,u,g){return n.length===1&&n[0].isOverscaled()?n[0].overscaledZ===u:Math.pow(4,u-g)===n.length}_getLoadedTile(n){const u=this._tiles[n.key];return u?.hasData()?u:null}updateCacheSize(n){const u=Math.ceil(n.width/this._source.tileSize)+1,g=Math.ceil(n.height/this._source.tileSize)+1,_=Math.floor(u*g*(this._maxTileCacheZoomLevels===null?s.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(x)}handleWrapJump(n){const u=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,u){const g={};for(const _ in this._tiles){const x=this._tiles[_];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+u),g[x.tileID.key]=x}this._tiles=g;for(const _ in this._timers)clearTimeout(this._timers[_]),delete this._timers[_];for(const _ in this._tiles)this._setTileReloadTimer(_,this._tiles[_])}}update(n,u){if(!this._sourceLoaded||this._paused)return;let g;this.transform=n,this.terrain=u,this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?g=n.getVisibleUnwrappedCoordinates(this._source.tileID).map((z=>new s.Z(z.canonical.z,z.wrap,z.canonical.z,z.canonical.x,z.canonical.y))):(g=wn(n,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(g=g.filter((z=>this._source.hasTile(z))))):g=[],this.usedForTerrain&&(g=this._addTerrainIdealTiles(g));const _=g.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,_&&this.fire(new s.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const x=ke(n,this._source),E=this._updateRetainedTiles(g,x),I=xr(this._source.type);I&&this._rasterFadeDuration>0&&!u&&this._updateFadingTiles(g,E),I?this._cleanUpRasterTiles(E):this._cleanUpVectorTiles(E)}_cleanUpRasterTiles(n){for(const u in this._tiles)n[u]||this._removeTile(u)}_cleanUpVectorTiles(n){for(const u in this._tiles){const g=this._tiles[u];n[u]?g.clearSymbolFadeHold():g.hasSymbolBuckets?g.holdingForSymbolFade()?g.symbolFadeFinished()&&this._removeTile(u):g.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(u)}}_addTerrainIdealTiles(n){const u=[];for(const g of n)if(g.canonical.z>this._source.minzoom){const _=g.scaledTo(g.canonical.z-1);u.push(_);const x=g.scaledTo(Math.max(this._source.minzoom,Math.min(g.canonical.z,5)));u.push(x)}return n.concat(u)}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForSymbolFade()&&this._removeTile(n)}_updateRetainedTiles(n,u){var g;const _={},x={},E=Math.max(u-$t.maxOverzooming,this._source.minzoom);let I={};for(const z of n){const U=this._addTile(z);_[z.key]=z,U.hasData()||(I[z.key]=z)}I=this._retainLoadedChildren(I,_);for(const z in I){const U=I[z];let $=this._tiles[z],W=$?.wasRequested();for(let Z=U.overscaledZ-1;Z>=E;--Z){const ee=U.scaledTo(Z);if(x[ee.key])break;if(x[ee.key]=!0,$=this.getTile(ee),!$&&W&&($=this._addTile(ee)),$){const oe=$.hasData();if((oe||!(!((g=this.map)===null||g===void 0)&&g.cancelPendingTileRequestsWhileZooming)||W)&&(_[ee.key]=ee),W=$.wasRequested(),oe)break}}}return _}_updateFadingTiles(n,u){const g=R.now(),_=s.am(n);for(const x of n){const E=this._tiles[x.key];E.fadingDirection!==ze.Departing&&E.fadeOpacity!==0||E.resetFadeLogic(),this._updateFadingAncestor(E,u,g)||this._updateFadingDescendents(E,u,g)||this._updateFadingEdge(E,_,g)||E.resetFadeLogic()}}_updateFadingAncestor(n,u,g){if(!n.hasData())return!1;const{tileID:_,fadingRole:x,fadingDirection:E,fadingParentID:I}=n;if(x===Ii.Base&&E===ze.Incoming&&I)return u[I.key]=I,!0;const z=Math.max(_.overscaledZ-this._maxFadingAncestorLevels,this._source.minzoom);for(let U=_.overscaledZ-1;U>=z;U--){const $=_.scaledTo(U),W=this._getLoadedTile($);if(W)return n.setCrossFadeLogic({fadingRole:Ii.Base,fadingDirection:ze.Incoming,fadingParentID:W.tileID,fadeEndTime:g+this._rasterFadeDuration}),W.setCrossFadeLogic({fadingRole:Ii.Parent,fadingDirection:ze.Departing,fadeEndTime:g+this._rasterFadeDuration}),u[$.key]=$,!0}return!1}_updateFadingDescendents(n,u,g){if(!n.hasData())return!1;const _=n.tileID.children(this._source.maxzoom);let x=this._updateFadingChildren(n,_,u,g);if(x)return!0;for(const E of _){const I=E.children(this._source.maxzoom);this._updateFadingChildren(n,I,u,g)&&(x=!0)}return x}_updateFadingChildren(n,u,g,_){if(u[0].overscaledZ>=this._source.maxzoom)return!1;let x=!1;for(const E of u){const I=this._getLoadedTile(E);if(!I)continue;const{fadingRole:z,fadingDirection:U,fadingParentID:$}=I;z===Ii.Base&&U===ze.Departing&&$||(I.setCrossFadeLogic({fadingRole:Ii.Base,fadingDirection:ze.Departing,fadingParentID:n.tileID,fadeEndTime:_+this._rasterFadeDuration}),n.setCrossFadeLogic({fadingRole:Ii.Parent,fadingDirection:ze.Incoming,fadeEndTime:_+this._rasterFadeDuration})),g[E.key]=E,x=!0}return x}_updateFadingEdge(n,u,g){const _=n.tileID;return!!n.selfFading||!n.hasData()&&!!u.has(_)&&(n.setSelfFadeLogic(g+this._rasterFadeDuration),!0)}_addTile(n){let u=this._tiles[n.key];if(u)return u;u=this._cache.getAndRemove(n),u&&(u.resetFadeLogic(),this._setTileReloadTimer(n.key,u),u.tileID=n,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,u)));const g=u;return u||(u=new ie(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(u,n.key,u.state)),u.uses++,this._tiles[n.key]=u,g||this._source.fire(new s.l("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(n,u){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const g=u.getExpiryTimeout();g&&(this._timers[n]=setTimeout((()=>{this._reloadTile(n,"expired"),delete this._timers[n]}),g))}refreshTiles(n){for(const u in this._tiles)(this._isIdRenderable(u)||this._tiles[u].state=="errored")&&n.some((g=>g.equals(this._tiles[u].tileID.canonical)))&&this._reloadTile(u,"expired")}_removeTile(n){const u=this._tiles[n];u&&(u.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}_dataHandler(n){n.dataType==="source"&&(n.sourceDataType!=="metadata"?n.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(n.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(n);this._cache.reset()}tilesIn(n,u,g){const _=[],x=this.transform;if(!x)return _;const E=x.getCoveringTilesDetailsProvider().allowWorldCopies(),I=g?x.getCameraQueryGeometry(n):n,z=ee=>x.screenPointToMercatorCoordinate(ee,this.terrain),U=this.transformBbox(n,z,!E),$=this.transformBbox(I,z,!E),W=this.getIds(),Z=s.a2.fromPoints($);for(let ee=0;ee<W.length;ee++){const oe=this._tiles[W[ee]];if(oe.holdingForSymbolFade())continue;const he=E?[oe.tileID]:[oe.tileID.unwrapTo(-1),oe.tileID.unwrapTo(0)],de=Math.pow(2,x.zoom-oe.tileID.overscaledZ),pe=u*oe.queryPadding*s.$/oe.tileSize/de;for(const ve of he){const xe=Z.map((be=>ve.getTilePoint(new s.a1(be.x,be.y))));if(xe.expandBy(pe),xe.intersects(On)){const be=U.map((De=>ve.getTilePoint(De))),Ce=$.map((De=>ve.getTilePoint(De)));_.push({tile:oe,tileID:E?ve:ve.unwrapTo(0),queryGeometry:be,cameraQueryGeometry:Ce,scale:de})}}}return _}transformBbox(n,u,g){let _=n.map(u);if(g){const x=s.a2.fromPoints(n);x.shrinkBy(.001*Math.min(x.width(),x.height()));const E=x.map(u);s.a2.fromPoints(_).covers(E)||(_=_.map((I=>I.x>.5?new s.a1(I.x-1,I.y,I.z):I)))}return _}getVisibleCoordinates(n){const u=this.getRenderableIds(n).map((g=>this._tiles[g].tileID));return this.transform&&this.transform.populateCache(u),u}hasTransition(){if(this._source.hasTransition())return!0;if(xr(this._source.type)&&this._rasterFadeDuration>0){const n=R.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=n)return!0}return!1}setRasterFadeDuration(n){this._rasterFadeDuration=n}setFeatureState(n,u,g){this._state.updateState(n=n||"_geojsonTileLayer",u,g)}removeFeatureState(n,u,g){this._state.removeFeatureState(n=n||"_geojsonTileLayer",u,g)}getFeatureState(n,u){return this._state.getState(n=n||"_geojsonTileLayer",u)}setDependencies(n,u,g){const _=this._tiles[n];_&&_.setDependencies(u,g)}reloadTilesForDependencies(n,u){for(const g in this._tiles)this._tiles[g].hasDependency(n,u)&&this._reloadTile(g,"reloading");this._cache.filter((g=>!g.hasDependency(n,u)))}}function Sn(b,n){const u=Math.abs(2*b.wrap)-+(b.wrap<0),g=Math.abs(2*n.wrap)-+(n.wrap<0);return b.overscaledZ-n.overscaledZ||g-u||n.canonical.y-b.canonical.y||n.canonical.x-b.canonical.x}function xr(b){return b==="raster"||b==="image"||b==="video"}$t.maxOverzooming=10,$t.maxUnderzooming=3;class jr{constructor(n,u){this.reset(n,u)}reset(n,u){this.points=n||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=s.ah(n,0,1);let u=1,g=this._distances[u];const _=n*this.paddedLength+this.padding;for(;g<_&&u<this._distances.length;)g=this._distances[++u];const x=u-1,E=this._distances[x],I=g-E,z=I>0?(_-E)/I:0;return this.points[x].mult(1-z).add(this.points[u].mult(z))}}function ti(b,n){let u=!0;return b==="always"||b!=="never"&&n!=="never"||(u=!1),u}class wi{constructor(n,u,g){const _=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(n/g),this.yCellCount=Math.ceil(u/g);for(let E=0;E<this.xCellCount*this.yCellCount;E++)_.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=u,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,u,g,_,x){this._forEachCell(u,g,_,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(u),this.bboxes.push(g),this.bboxes.push(_),this.bboxes.push(x)}insertCircle(n,u,g,_){this._forEachCell(u-_,g-_,u+_,g+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(u),this.circles.push(g),this.circles.push(_)}_insertBoxCell(n,u,g,_,x,E){this.boxCells[x].push(E)}_insertCircleCell(n,u,g,_,x,E){this.circleCells[x].push(E)}_query(n,u,g,_,x,E,I){if(g<0||n>this.width||_<0||u>this.height)return[];const z=[];if(n<=0&&u<=0&&this.width<=g&&this.height<=_){if(x)return[{key:null,x1:n,y1:u,x2:g,y2:_}];for(let U=0;U<this.boxKeys.length;U++)z.push({key:this.boxKeys[U],x1:this.bboxes[4*U],y1:this.bboxes[4*U+1],x2:this.bboxes[4*U+2],y2:this.bboxes[4*U+3]});for(let U=0;U<this.circleKeys.length;U++){const $=this.circles[3*U],W=this.circles[3*U+1],Z=this.circles[3*U+2];z.push({key:this.circleKeys[U],x1:$-Z,y1:W-Z,x2:$+Z,y2:W+Z})}}else this._forEachCell(n,u,g,_,this._queryCell,z,{hitTest:x,overlapMode:E,seenUids:{box:{},circle:{}}},I);return z}query(n,u,g,_){return this._query(n,u,g,_,!1,null)}hitTest(n,u,g,_,x,E){return this._query(n,u,g,_,!0,x,E).length>0}hitTestCircle(n,u,g,_,x){const E=n-g,I=n+g,z=u-g,U=u+g;if(I<0||E>this.width||U<0||z>this.height)return!1;const $=[];return this._forEachCell(E,z,I,U,this._queryCellCircle,$,{hitTest:!0,overlapMode:_,circle:{x:n,y:u,radius:g},seenUids:{box:{},circle:{}}},x),$.length>0}_queryCell(n,u,g,_,x,E,I,z){const{seenUids:U,hitTest:$,overlapMode:W}=I,Z=this.boxCells[x];if(Z!==null){const oe=this.bboxes;for(const he of Z)if(!U.box[he]){U.box[he]=!0;const de=4*he,pe=this.boxKeys[he];if(n<=oe[de+2]&&u<=oe[de+3]&&g>=oe[de+0]&&_>=oe[de+1]&&(!z||z(pe))&&(!$||!ti(W,pe.overlapMode))&&(E.push({key:pe,x1:oe[de],y1:oe[de+1],x2:oe[de+2],y2:oe[de+3]}),$))return!0}}const ee=this.circleCells[x];if(ee!==null){const oe=this.circles;for(const he of ee)if(!U.circle[he]){U.circle[he]=!0;const de=3*he,pe=this.circleKeys[he];if(this._circleAndRectCollide(oe[de],oe[de+1],oe[de+2],n,u,g,_)&&(!z||z(pe))&&(!$||!ti(W,pe.overlapMode))){const ve=oe[de],xe=oe[de+1],be=oe[de+2];if(E.push({key:pe,x1:ve-be,y1:xe-be,x2:ve+be,y2:xe+be}),$)return!0}}}return!1}_queryCellCircle(n,u,g,_,x,E,I,z){const{circle:U,seenUids:$,overlapMode:W}=I,Z=this.boxCells[x];if(Z!==null){const oe=this.bboxes;for(const he of Z)if(!$.box[he]){$.box[he]=!0;const de=4*he,pe=this.boxKeys[he];if(this._circleAndRectCollide(U.x,U.y,U.radius,oe[de+0],oe[de+1],oe[de+2],oe[de+3])&&(!z||z(pe))&&!ti(W,pe.overlapMode))return E.push(!0),!0}}const ee=this.circleCells[x];if(ee!==null){const oe=this.circles;for(const he of ee)if(!$.circle[he]){$.circle[he]=!0;const de=3*he,pe=this.circleKeys[he];if(this._circlesCollide(oe[de],oe[de+1],oe[de+2],U.x,U.y,U.radius)&&(!z||z(pe))&&!ti(W,pe.overlapMode))return E.push(!0),!0}}}_forEachCell(n,u,g,_,x,E,I,z){const U=this._convertToXCellCoord(n),$=this._convertToYCellCoord(u),W=this._convertToXCellCoord(g),Z=this._convertToYCellCoord(_);for(let ee=U;ee<=W;ee++)for(let oe=$;oe<=Z;oe++)if(x.call(this,n,u,g,_,this.xCellCount*oe+ee,E,I,z))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,u,g,_,x,E){const I=_-n,z=x-u,U=g+E;return U*U>I*I+z*z}_circleAndRectCollide(n,u,g,_,x,E,I){const z=(E-_)/2,U=Math.abs(n-(_+z));if(U>z+g)return!1;const $=(I-x)/2,W=Math.abs(u-(x+$));if(W>$+g)return!1;if(U<=z||W<=$)return!0;const Z=U-z,ee=W-$;return Z*Z+ee*ee<=g*g}}function ir(b,n,u){const g=s.L();if(!b){const{vecSouth:W,vecEast:Z}=qn(n),ee=C();ee[0]=Z[0],ee[1]=Z[1],ee[2]=W[0],ee[3]=W[1],_=ee,($=(E=(x=ee)[0])*(U=x[3])-(z=x[2])*(I=x[1]))&&(_[0]=U*($=1/$),_[1]=-I*$,_[2]=-z*$,_[3]=E*$),g[0]=ee[0],g[1]=ee[1],g[4]=ee[2],g[5]=ee[3]}var _,x,E,I,z,U,$;return s.N(g,g,[1/u,1/u,1]),g}function ni(b,n,u,g){if(b){const _=s.L();if(!n){const{vecSouth:x,vecEast:E}=qn(u);_[0]=E[0],_[1]=E[1],_[4]=x[0],_[5]=x[1]}return s.N(_,_,[g,g,1]),_}return u.pixelsToClipSpaceMatrix}function qn(b){const n=Math.cos(b.rollInRadians),u=Math.sin(b.rollInRadians),g=Math.cos(b.pitchInRadians),_=Math.cos(b.bearingInRadians),x=Math.sin(b.bearingInRadians),E=s.ar();E[0]=-_*g*u-x*n,E[1]=-x*g*u+_*n;const I=s.as(E);I<1e-9?s.at(E):s.au(E,E,1/I);const z=s.ar();z[0]=_*g*n-x*u,z[1]=x*g*n+_*u;const U=s.as(z);return U<1e-9?s.at(z):s.au(z,z,1/U),{vecEast:z,vecSouth:E}}function yt(b,n,u,g){let _;g?(_=[b,n,g(b,n),1],s.aw(_,_,u)):(_=[b,n,0,1],Ar(_,_,u));const x=_[3];return{point:new s.P(_[0]/x,_[1]/x),signedDistanceFromCamera:x,isOccluded:!1}}function To(b,n){return .5+b/n*.5}function da(b,n){return b.x>=-n[0]&&b.x<=n[0]&&b.y>=-n[1]&&b.y<=n[1]}function ri(b,n,u,g,_,x,E,I,z,U,$,W,Z){const ee=u?b.textSizeData:b.iconSizeData,oe=s.an(ee,n.transform.zoom),he=[256/n.width*2+1,256/n.height*2+1],de=u?b.text.dynamicLayoutVertexArray:b.icon.dynamicLayoutVertexArray;de.clear();const pe=b.lineVertexArray,ve=u?b.text.placedSymbolArray:b.icon.placedSymbolArray,xe=n.transform.width/n.transform.height;let be=!1;for(let Ce=0;Ce<ve.length;Ce++){const De=ve.get(Ce);if(De.hidden||De.writingMode===s.ao.vertical&&!be){fa(De.numGlyphs,de);continue}be=!1;const we=new s.P(De.anchorX,De.anchorY),Re={getElevation:Z,pitchedLabelPlaneMatrix:g,lineVertexArray:pe,pitchWithMap:x,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:n.transform,tileAnchorPoint:we,unwrappedTileID:z,width:U,height:$,translation:W},Xe=pn(De.anchorX,De.anchorY,Re);if(!da(Xe.point,he)){fa(De.numGlyphs,de);continue}const He=To(n.transform.cameraToCenterDistance,Xe.signedDistanceFromCamera),We=s.ap(ee,oe,De),Ye=x?We*n.transform.getPitchedTextCorrection(De.anchorX,De.anchorY,z)/He:We*He,wt=mn({projectionContext:Re,pitchedLabelPlaneMatrixInverse:_,symbol:De,fontSize:Ye,flip:!1,keepUpright:E,glyphOffsetArray:b.glyphOffsetArray,dynamicLayoutVertexArray:de,aspectRatio:xe,rotateToLine:I});be=wt.useVertical,(wt.notEnoughRoom||be||wt.needsFlipping&&mn({projectionContext:Re,pitchedLabelPlaneMatrixInverse:_,symbol:De,fontSize:Ye,flip:!0,keepUpright:E,glyphOffsetArray:b.glyphOffsetArray,dynamicLayoutVertexArray:de,aspectRatio:xe,rotateToLine:I}).notEnoughRoom)&&fa(De.numGlyphs,de)}u?b.text.dynamicLayoutVertexBuffer.updateData(de):b.icon.dynamicLayoutVertexBuffer.updateData(de)}function Ln(b,n,u,g,_,x,E,I){const z=x.glyphStartIndex+x.numGlyphs,U=x.lineStartIndex,$=x.lineStartIndex+x.lineLength,W=n.getoffsetX(x.glyphStartIndex),Z=n.getoffsetX(z-1),ee=to(b*W,u,g,_,x.segment,U,$,I,E);if(!ee)return null;const oe=to(b*Z,u,g,_,x.segment,U,$,I,E);return oe?I.projectionCache.anyProjectionOccluded?null:{first:ee,last:oe}:null}function xt(b,n,u,g){return b===s.ao.horizontal&&Math.abs(u.y-n.y)>Math.abs(u.x-n.x)*g?{useVertical:!0}:(b===s.ao.vertical?n.y<u.y:n.x>u.x)?{needsFlipping:!0}:null}function mn(b){const{projectionContext:n,pitchedLabelPlaneMatrixInverse:u,symbol:g,fontSize:_,flip:x,keepUpright:E,glyphOffsetArray:I,dynamicLayoutVertexArray:z,aspectRatio:U,rotateToLine:$}=b,W=_/24,Z=g.lineOffsetX*W,ee=g.lineOffsetY*W;let oe;if(g.numGlyphs>1){const he=g.glyphStartIndex+g.numGlyphs,de=g.lineStartIndex,pe=g.lineStartIndex+g.lineLength,ve=Ln(W,I,Z,ee,x,g,$,n);if(!ve)return{notEnoughRoom:!0};const xe=Mo(ve.first.point.x,ve.first.point.y,n,u),be=Mo(ve.last.point.x,ve.last.point.y,n,u);if(E&&!x){const Ce=xt(g.writingMode,xe,be,U);if(Ce)return Ce}oe=[ve.first];for(let Ce=g.glyphStartIndex+1;Ce<he-1;Ce++){const De=to(W*I.getoffsetX(Ce),Z,ee,x,g.segment,de,pe,n,$);if(!De)return{notEnoughRoom:!0};oe.push(De)}oe.push(ve.last)}else{if(E&&!x){const de=Go(n.tileAnchorPoint.x,n.tileAnchorPoint.y,n).point,pe=g.lineStartIndex+g.segment+1,ve=new s.P(n.lineVertexArray.getx(pe),n.lineVertexArray.gety(pe)),xe=Go(ve.x,ve.y,n),be=xe.signedDistanceFromCamera>0?xe.point:yn(n.tileAnchorPoint,ve,de,1,n),Ce=Mo(de.x,de.y,n,u),De=Mo(be.x,be.y,n,u),we=xt(g.writingMode,Ce,De,U);if(we)return we}const he=to(W*I.getoffsetX(g.glyphStartIndex),Z,ee,x,g.segment,g.lineStartIndex,g.lineStartIndex+g.lineLength,n,$);if(!he||n.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};oe=[he]}for(const he of oe)s.av(z,he.point,he.angle);return{}}function yn(b,n,u,g,_){const x=b.add(b.sub(n)._unit()),E=Go(x.x,x.y,_).point,I=u.sub(E);return u.add(I._mult(g/I.mag()))}function Da(b,n,u){const g=n.projectionCache;if(g.projections[b])return g.projections[b];const _=new s.P(n.lineVertexArray.getx(b),n.lineVertexArray.gety(b)),x=Go(_.x,_.y,n);if(x.signedDistanceFromCamera>0)return g.projections[b]=x.point,g.anyProjectionOccluded=g.anyProjectionOccluded||x.isOccluded,x.point;const E=b-u.direction;return yn(u.distanceFromAnchor===0?n.tileAnchorPoint:new s.P(n.lineVertexArray.getx(E),n.lineVertexArray.gety(E)),_,u.previousVertex,u.absOffsetX-u.distanceFromAnchor+1,n)}function Go(b,n,u){const g=b+u.translation[0],_=n+u.translation[1];let x;return u.pitchWithMap?(x=yt(g,_,u.pitchedLabelPlaneMatrix,u.getElevation),x.isOccluded=!1):(x=u.transform.projectTileCoordinates(g,_,u.unwrappedTileID,u.getElevation),x.point.x=(.5*x.point.x+.5)*u.width,x.point.y=(.5*-x.point.y+.5)*u.height),x}function Mo(b,n,u,g){if(u.pitchWithMap){const _=[b,n,0,1];return s.aw(_,_,g),u.transform.projectTileCoordinates(_[0]/_[3],_[1]/_[3],u.unwrappedTileID,u.getElevation).point}return{x:b/u.width*2-1,y:1-n/u.height*2}}function pn(b,n,u){return u.transform.projectTileCoordinates(b,n,u.unwrappedTileID,u.getElevation)}function al(b,n,u){return b._unit()._perp()._mult(n*u)}function Ho(b,n,u,g,_,x,E,I,z){if(I.projectionCache.offsets[b])return I.projectionCache.offsets[b];const U=u.add(n);if(b+z.direction<g||b+z.direction>=_)return I.projectionCache.offsets[b]=U,U;const $=Da(b+z.direction,I,z),W=al($.sub(u),E,z.direction),Z=u.add(W),ee=$.add(W);return I.projectionCache.offsets[b]=s.ax(x,U,Z,ee)||U,I.projectionCache.offsets[b]}function to(b,n,u,g,_,x,E,I,z){const U=g?b-n:b+n;let $=U>0?1:-1,W=0;g&&($*=-1,W=Math.PI),$<0&&(W+=Math.PI);let Z,ee=$>0?x+_:x+_+1;I.projectionCache.cachedAnchorPoint?Z=I.projectionCache.cachedAnchorPoint:(Z=Go(I.tileAnchorPoint.x,I.tileAnchorPoint.y,I).point,I.projectionCache.cachedAnchorPoint=Z);let oe,he,de=Z,pe=Z,ve=0,xe=0;const be=Math.abs(U),Ce=[];let De;for(;ve+xe<=be;){if(ee+=$,ee<x||ee>=E)return null;ve+=xe,pe=de,he=oe;const Xe={absOffsetX:be,direction:$,distanceFromAnchor:ve,previousVertex:pe};if(de=Da(ee,I,Xe),u===0)Ce.push(pe),De=de.sub(pe);else{let He;const We=de.sub(pe);He=We.mag()===0?al(Da(ee+$,I,Xe).sub(de),u,$):al(We,u,$),he||(he=pe.add(He)),oe=Ho(ee,He,de,x,E,he,u,I,Xe),Ce.push(he),De=oe.sub(he)}xe=De.mag()}const we=De._mult((be-ve)/xe)._add(he||pe),Re=W+Math.atan2(de.y-pe.y,de.x-pe.x);return Ce.push(we),{point:we,angle:z?Re:0,path:Ce}}const ps=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function fa(b,n){for(let u=0;u<b;u++){const g=n.length;n.resize(g+4),n.float32.set(ps,3*g)}}function Ar(b,n,u){const g=n[0],_=n[1];return b[0]=u[0]*g+u[4]*_+u[12],b[1]=u[1]*g+u[5]*_+u[13],b[3]=u[3]*g+u[7]*_+u[15],b}const Br=100;class pa{constructor(n,u=new wi(n.width+200,n.height+200,25),g=new wi(n.width+200,n.height+200,25)){this.transform=n,this.grid=u,this.ignoredGrid=g,this.pitchFactor=Math.cos(n.pitch*Math.PI/180)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+Br,this.screenBottomBoundary=n.height+Br,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,u,g,_,x,E,I,z,U,$,W,Z){const ee=this.projectAndGetPerspectiveRatio(n.anchorPointX+z[0],n.anchorPointY+z[1],x,$,Z),oe=g*ee.perspectiveRatio;let he;if(E||I)he=this._projectCollisionBox(n,oe,_,x,E,I,z,ee,$,W,Z);else{const De=ee.x+(W?W.x*oe:0),we=ee.y+(W?W.y*oe:0);he={allPointsOccluded:!1,box:[De+n.x1*oe,we+n.y1*oe,De+n.x2*oe,we+n.y2*oe]}}const[de,pe,ve,xe]=he.box,be=E?he.allPointsOccluded:ee.isOccluded;let Ce=be;return Ce||(Ce=ee.perspectiveRatio<this.perspectiveRatioCutoff),Ce||(Ce=!this.isInsideGrid(de,pe,ve,xe)),Ce||u!=="always"&&this.grid.hitTest(de,pe,ve,xe,u,U)?{box:[de,pe,ve,xe],placeable:!1,offscreen:!1,occluded:be}:{box:[de,pe,ve,xe],placeable:!0,offscreen:this.isOffscreen(de,pe,ve,xe),occluded:be}}placeCollisionCircles(n,u,g,_,x,E,I,z,U,$,W,Z,ee,oe){const he=[],de=new s.P(u.anchorX,u.anchorY),pe=this.getPerspectiveRatio(de.x,de.y,E,oe),ve=(U?x*this.transform.getPitchedTextCorrection(u.anchorX,u.anchorY,E)/pe:x*pe)/s.aB,xe={getElevation:oe,pitchedLabelPlaneMatrix:I,lineVertexArray:g,pitchWithMap:U,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:de,unwrappedTileID:E,width:this.transform.width,height:this.transform.height,translation:ee},be=Ln(ve,_,u.lineOffsetX*ve,u.lineOffsetY*ve,!1,u,!1,xe);let Ce=!1,De=!1,we=!0;if(be){const Re=.5*W*pe+Z,Xe=new s.P(-100,-100),He=new s.P(this.screenRightBoundary,this.screenBottomBoundary),We=new jr,Ye=be.first,wt=be.last;let St=[];for(let un=Ye.path.length-1;un>=1;un--)St.push(Ye.path[un]);for(let un=1;un<wt.path.length;un++)St.push(wt.path[un]);const dt=2.5*Re;if(U){const un=this.projectPathToScreenSpace(St,xe);St=un.some((jn=>jn.signedDistanceFromCamera<=0))?[]:un.map((jn=>jn.point))}let Vt=[];if(St.length>0){const un=St[0].clone(),jn=St[0].clone();for(let Wn=1;Wn<St.length;Wn++)un.x=Math.min(un.x,St[Wn].x),un.y=Math.min(un.y,St[Wn].y),jn.x=Math.max(jn.x,St[Wn].x),jn.y=Math.max(jn.y,St[Wn].y);Vt=un.x>=Xe.x&&jn.x<=He.x&&un.y>=Xe.y&&jn.y<=He.y?[St]:jn.x<Xe.x||un.x>He.x||jn.y<Xe.y||un.y>He.y?[]:s.ay([St],Xe.x,Xe.y,He.x,He.y)}for(const un of Vt){We.reset(un,.25*Re);let jn=0;jn=We.length<=.5*Re?1:Math.ceil(We.paddedLength/dt)+1;for(let Wn=0;Wn<jn;Wn++){const Yn=Wn/Math.max(jn-1,1),mr=We.lerp(Yn),lr=mr.x+Br,Cn=mr.y+Br;he.push(lr,Cn,Re,0);const Sr=lr-Re,Di=Cn-Re,$r=lr+Re,Vr=Cn+Re;if(we=we&&this.isOffscreen(Sr,Di,$r,Vr),De=De||this.isInsideGrid(Sr,Di,$r,Vr),n!=="always"&&this.grid.hitTestCircle(lr,Cn,Re,n,$)&&(Ce=!0,!z))return{circles:[],offscreen:!1,collisionDetected:Ce}}}}return{circles:!z&&Ce||!De||pe<this.perspectiveRatioCutoff?[]:he,offscreen:we,collisionDetected:Ce}}projectPathToScreenSpace(n,u){const g=(function(_,x){const E=s.L();return s.aq(E,x.pitchedLabelPlaneMatrix),_.map((I=>{const z=yt(I.x,I.y,E,x.getElevation),U=x.transform.projectTileCoordinates(z.point.x,z.point.y,x.unwrappedTileID,x.getElevation);return U.point.x=(.5*U.point.x+.5)*x.width,U.point.y=(.5*-U.point.y+.5)*x.height,U}))})(n,u);return(function(_){let x=0,E=0,I=0,z=0;for(let U=0;U<_.length;U++)_[U].isOccluded?(I=U+1,z=0):(z++,z>E&&(E=z,x=I));return _.slice(x,x+E)})(g)}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[],g=new s.a2;for(const W of n){const Z=new s.P(W.x+Br,W.y+Br);g.extend(Z),u.push(Z)}const{minX:_,minY:x,maxX:E,maxY:I}=g,z=this.grid.query(_,x,E,I).concat(this.ignoredGrid.query(_,x,E,I)),U={},$={};for(const W of z){const Z=W.key;if(U[Z.bucketInstanceId]===void 0&&(U[Z.bucketInstanceId]={}),U[Z.bucketInstanceId][Z.featureIndex])continue;const ee=[new s.P(W.x1,W.y1),new s.P(W.x2,W.y1),new s.P(W.x2,W.y2),new s.P(W.x1,W.y2)];s.az(u,ee)&&(U[Z.bucketInstanceId][Z.featureIndex]=!0,$[Z.bucketInstanceId]===void 0&&($[Z.bucketInstanceId]=[]),$[Z.bucketInstanceId].push(Z.featureIndex))}return $}insertCollisionBox(n,u,g,_,x,E){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:x,collisionGroupID:E,overlapMode:u},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,u,g,_,x,E){const I=g?this.ignoredGrid:this.grid,z={bucketInstanceId:_,featureIndex:x,collisionGroupID:E,overlapMode:u};for(let U=0;U<n.length;U+=4)I.insertCircle(z,n[U],n[U+1],n[U+2])}projectAndGetPerspectiveRatio(n,u,g,_,x){if(x){let E;_?(E=[n,u,_(n,u),1],s.aw(E,E,x)):(E=[n,u,0,1],Ar(E,E,x));const I=E[3];return{x:(E[0]/I+1)/2*this.transform.width+Br,y:(-E[1]/I+1)/2*this.transform.height+Br,perspectiveRatio:.5+this.transform.cameraToCenterDistance/I*.5,isOccluded:!1,signedDistanceFromCamera:I}}{const E=this.transform.projectTileCoordinates(n,u,g,_);return{x:(E.point.x+1)/2*this.transform.width+Br,y:(1-E.point.y)/2*this.transform.height+Br,perspectiveRatio:.5+this.transform.cameraToCenterDistance/E.signedDistanceFromCamera*.5,isOccluded:E.isOccluded,signedDistanceFromCamera:E.signedDistanceFromCamera}}}getPerspectiveRatio(n,u,g,_){const x=this.transform.projectTileCoordinates(n,u,g,_);return .5+this.transform.cameraToCenterDistance/x.signedDistanceFromCamera*.5}isOffscreen(n,u,g,_){return g<Br||n>=this.screenRightBoundary||_<Br||u>this.screenBottomBoundary}isInsideGrid(n,u,g,_){return g>=0&&n<this.gridRightBoundary&&_>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const n=s.ag([]);return s.M(n,n,[-100,-100,0]),n}_projectCollisionBox(n,u,g,_,x,E,I,z,U,$,W){let Z=1,ee=0,oe=0,he=1;const de=n.anchorPointX+I[0],pe=n.anchorPointY+I[1];if(E&&!x){const St=this.projectAndGetPerspectiveRatio(de+1,pe,_,U,W),dt=St.x-z.x,Vt=Math.atan((St.y-z.y)/dt)+(dt<0?Math.PI:0),un=Math.sin(Vt),jn=Math.cos(Vt);Z=jn,ee=un,oe=-un,he=jn}else if(!E&&x){const St=qn(this.transform);Z=St.vecEast[0],ee=St.vecEast[1],oe=St.vecSouth[0],he=St.vecSouth[1]}let ve=z.x,xe=z.y,be=u;x&&(ve=de,xe=pe,be=Math.pow(2,-(this.transform.zoom-g.overscaledZ)),be*=this.transform.getPitchedTextCorrection(de,pe,_),$||(be*=s.ah(.5+z.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),$&&(ve+=Z*$.x*be+oe*$.y*be,xe+=ee*$.x*be+he*$.y*be);const Ce=n.x1*be,De=n.x2*be,we=(Ce+De)/2,Re=n.y1*be,Xe=n.y2*be,He=(Re+Xe)/2,We=[{offsetX:Ce,offsetY:Re},{offsetX:we,offsetY:Re},{offsetX:De,offsetY:Re},{offsetX:De,offsetY:He},{offsetX:De,offsetY:Xe},{offsetX:we,offsetY:Xe},{offsetX:Ce,offsetY:Xe},{offsetX:Ce,offsetY:He}];let Ye=[];for(const{offsetX:St,offsetY:dt}of We)Ye.push(new s.P(ve+Z*St+oe*dt,xe+ee*St+he*dt));let wt=!1;if(x){const St=Ye.map((dt=>this.projectAndGetPerspectiveRatio(dt.x,dt.y,_,U,W)));wt=St.some((dt=>!dt.isOccluded)),Ye=St.map((dt=>new s.P(dt.x,dt.y)))}else wt=!0;return{box:s.aA(Ye),allPointsOccluded:!wt}}}class Xn{constructor(n,u,g,_){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?u:-u))):_&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class Zo{constructor(n,u,g,_,x){this.text=new Xn(n?n.text:null,u,g,x),this.icon=new Xn(n?n.icon:null,u,_,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Gc{constructor(n,u,g){this.text=n,this.icon=u,this.skipFade=g}}class ud{constructor(n,u,g,_,x){this.bucketInstanceId=n,this.featureIndex=u,this.sourceLayerIndex=g,this.bucketIndex=_,this.tileID=x}}class ol{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const u=++this.maxGroupID;this.collisionGroups[n]={ID:u,predicate:g=>g.collisionGroupID===u}}return this.collisionGroups[n]}}function ms(b,n,u,g,_){const{horizontalAlign:x,verticalAlign:E}=s.aH(b);return new s.P(-(x-.5)*n+g[0]*_,-(E-.5)*u+g[1]*_)}class qu{constructor(n,u,g,_,x){this.transform=n.clone(),this.terrain=u,this.collisionIndex=new pa(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new ol(_),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(n){const u=this.terrain;return u?(g,_)=>u.getElevation(n,g,_):null}getBucketParts(n,u,g,_){const x=g.getBucket(u),E=g.latestFeatureIndex;if(!x||!E||u.id!==x.layerIds[0])return;const I=g.collisionBoxArray,z=x.layers[0].layout,U=x.layers[0].paint,$=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),W=g.tileSize/s.$,Z=g.tileID.toUnwrapped(),ee=z.get("text-rotation-alignment")==="map",oe=s.aC(g,1,this.transform.zoom),he=s.aD(this.collisionIndex.transform,g,U.get("text-translate"),U.get("text-translate-anchor")),de=s.aD(this.collisionIndex.transform,g,U.get("icon-translate"),U.get("icon-translate-anchor")),pe=ir(ee,this.transform,oe);this.retainedQueryData[x.bucketInstanceId]=new ud(x.bucketInstanceId,E,x.sourceLayerIndex,x.index,g.tileID);const ve={bucket:x,layout:z,translationText:he,translationIcon:de,unwrappedTileID:Z,pitchedLabelPlaneMatrix:pe,scale:$,textPixelRatio:W,holdingForFade:g.holdingForSymbolFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:s.an(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(_)for(const xe of x.sortKeyRanges){const{sortKey:be,symbolInstanceStart:Ce,symbolInstanceEnd:De}=xe;n.push({sortKey:be,symbolInstanceStart:Ce,symbolInstanceEnd:De,parameters:ve})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:ve})}attemptAnchorPlacement(n,u,g,_,x,E,I,z,U,$,W,Z,ee,oe,he,de,pe,ve,xe,be){const Ce=s.aE[n.textAnchor],De=[n.textOffset0,n.textOffset1],we=ms(Ce,g,_,De,x),Re=this.collisionIndex.placeCollisionBox(u,Z,z,U,$,I,E,de,W.predicate,xe,we,be);if((!ve||this.collisionIndex.placeCollisionBox(ve,Z,z,U,$,I,E,pe,W.predicate,xe,we,be).placeable)&&Re.placeable){let Xe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID].text&&(Xe=this.prevPlacement.variableOffsets[ee.crossTileID].anchor),ee.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ee.crossTileID]={textOffset:De,width:g,height:_,anchor:Ce,textBoxScale:x,prevAnchor:Xe},this.markUsedJustification(oe,Ce,ee,he),oe.allowVerticalPlacement&&(this.markUsedOrientation(oe,he,ee),this.placedOrientations[ee.crossTileID]=he),{shift:we,placedGlyphBoxes:Re}}}placeLayerBucketPart(n,u,g){const{bucket:_,layout:x,translationText:E,translationIcon:I,unwrappedTileID:z,pitchedLabelPlaneMatrix:U,textPixelRatio:$,holdingForFade:W,collisionBoxArray:Z,partiallyEvaluatedTextSize:ee,collisionGroup:oe}=n.parameters,he=x.get("text-optional"),de=x.get("icon-optional"),pe=s.aF(x,"text-overlap","text-allow-overlap"),ve=pe==="always",xe=s.aF(x,"icon-overlap","icon-allow-overlap"),be=xe==="always",Ce=x.get("text-rotation-alignment")==="map",De=x.get("text-pitch-alignment")==="map",we=x.get("icon-text-fit")!=="none",Re=x.get("symbol-z-order")==="viewport-y",Xe=ve&&(be||!_.hasIconData()||de),He=be&&(ve||!_.hasTextData()||he);!_.collisionArrays&&Z&&_.deserializeCollisionBoxes(Z);const We=this.retainedQueryData[_.bucketInstanceId].tileID,Ye=this._getTerrainElevationFunc(We),wt=this.transform.getFastPathSimpleProjectionMatrix(We),St=(dt,Vt,un)=>{var jn,Wn;if(u[dt.crossTileID])return;if(W)return void(this.placements[dt.crossTileID]=new Gc(!1,!1,!1));let Yn=!1,mr=!1,lr=!0,Cn=null,Sr={box:null,placeable:!1,offscreen:null,occluded:!1},Di={placeable:!1},$r=null,Vr=null,qi=null,Is=0,$a=0,zs=0;Vt.textFeatureIndex?Is=Vt.textFeatureIndex:dt.useRuntimeCollisionCircles&&(Is=dt.featureIndex),Vt.verticalTextFeatureIndex&&($a=Vt.verticalTextFeatureIndex);const kl=Vt.textBox;if(kl){const Va=Dr=>{let ai=s.ao.horizontal;if(_.allowVerticalPlacement&&!Dr&&this.prevPlacement){const _a=this.prevPlacement.placedOrientations[dt.crossTileID];_a&&(this.placedOrientations[dt.crossTileID]=_a,ai=_a,this.markUsedOrientation(_,ai,dt))}return ai},co=(Dr,ai)=>{if(_.allowVerticalPlacement&&dt.numVerticalGlyphVertices>0&&Vt.verticalTextBox){for(const _a of _.writingModes)if(_a===s.ao.vertical?(Sr=ai(),Di=Sr):Sr=Dr(),Sr&&Sr.placeable)break}else Sr=Dr()},Ro=dt.textAnchorOffsetStartIndex,va=dt.textAnchorOffsetEndIndex;if(va===Ro){const Dr=(ai,_a)=>{const ki=this.collisionIndex.placeCollisionBox(ai,pe,$,We,z,De,Ce,E,oe.predicate,Ye,void 0,wt);return ki&&ki.placeable&&(this.markUsedOrientation(_,_a,dt),this.placedOrientations[dt.crossTileID]=_a),ki};co((()=>Dr(kl,s.ao.horizontal)),(()=>{const ai=Vt.verticalTextBox;return _.allowVerticalPlacement&&dt.numVerticalGlyphVertices>0&&ai?Dr(ai,s.ao.vertical):{box:null,offscreen:null}})),Va(Sr&&Sr.placeable)}else{let Dr=s.aE[(Wn=(jn=this.prevPlacement)===null||jn===void 0?void 0:jn.variableOffsets[dt.crossTileID])===null||Wn===void 0?void 0:Wn.anchor];const ai=(ki,Vf,du)=>{const jo=ki.x2-ki.x1,Lo=ki.y2-ki.y1,ba=dt.textBoxScale,Rs=we&&xe==="never"?Vf:null;let js=null,Cc=pe==="never"?1:2,kd="never";Dr&&Cc++;for(let ls=0;ls<Cc;ls++){for(let Od=Ro;Od<va;Od++){const wh=_.textAnchorOffsets.get(Od);if(Dr&&wh.textAnchor!==Dr)continue;const Ec=this.attemptAnchorPlacement(wh,ki,jo,Lo,ba,Ce,De,$,We,z,oe,kd,dt,_,du,E,I,Rs,Ye);if(Ec&&(js=Ec.placedGlyphBoxes,js&&js.placeable))return Yn=!0,Cn=Ec.shift,js}Dr?Dr=null:kd=pe}return g&&!js&&(js={box:this.collisionIndex.placeCollisionBox(kl,"always",$,We,z,De,Ce,E,oe.predicate,Ye,void 0,wt).box,offscreen:!1,placeable:!1,occluded:!1}),js};co((()=>ai(kl,Vt.iconBox,s.ao.horizontal)),(()=>{const ki=Vt.verticalTextBox;return _.allowVerticalPlacement&&(!Sr||!Sr.placeable)&&dt.numVerticalGlyphVertices>0&&ki?ai(ki,Vt.verticalIconBox,s.ao.vertical):{box:null,occluded:!0,offscreen:null}})),Sr&&(Yn=Sr.placeable,lr=Sr.offscreen);const _a=Va(Sr&&Sr.placeable);if(!Yn&&this.prevPlacement){const ki=this.prevPlacement.variableOffsets[dt.crossTileID];ki&&(this.variableOffsets[dt.crossTileID]=ki,this.markUsedJustification(_,ki.anchor,dt,_a))}}}if($r=Sr,Yn=$r&&$r.placeable,lr=$r&&$r.offscreen,dt.useRuntimeCollisionCircles&&dt.centerJustifiedTextSymbolIndex>=0){const Va=_.text.placedSymbolArray.get(dt.centerJustifiedTextSymbolIndex),co=s.ap(_.textSizeData,ee,Va),Ro=x.get("text-padding");Vr=this.collisionIndex.placeCollisionCircles(pe,Va,_.lineVertexArray,_.glyphOffsetArray,co,z,U,g,De,oe.predicate,dt.collisionCircleDiameter,Ro,E,Ye),Vr.circles.length&&Vr.collisionDetected&&!g&&s.w("Collisions detected, but collision boxes are not shown"),Yn=ve||Vr.circles.length>0&&!Vr.collisionDetected,lr=lr&&Vr.offscreen}if(Vt.iconFeatureIndex&&(zs=Vt.iconFeatureIndex),Vt.iconBox){const Va=co=>this.collisionIndex.placeCollisionBox(co,xe,$,We,z,De,Ce,I,oe.predicate,Ye,we&&Cn?Cn:void 0,wt);Di&&Di.placeable&&Vt.verticalIconBox?(qi=Va(Vt.verticalIconBox),mr=qi.placeable):(qi=Va(Vt.iconBox),mr=qi.placeable),lr=lr&&qi.offscreen}const hu=he||dt.numHorizontalGlyphVertices===0&&dt.numVerticalGlyphVertices===0,Mc=de||dt.numIconVertices===0;hu||Mc?Mc?hu||(mr=mr&&Yn):Yn=mr&&Yn:mr=Yn=mr&&Yn;const ss=mr&&qi.placeable;if(Yn&&$r.placeable&&this.collisionIndex.insertCollisionBox($r.box,pe,x.get("text-ignore-placement"),_.bucketInstanceId,Di&&Di.placeable&&$a?$a:Is,oe.ID),ss&&this.collisionIndex.insertCollisionBox(qi.box,xe,x.get("icon-ignore-placement"),_.bucketInstanceId,zs,oe.ID),Vr&&Yn&&this.collisionIndex.insertCollisionCircles(Vr.circles,pe,x.get("text-ignore-placement"),_.bucketInstanceId,Is,oe.ID),g&&this.storeCollisionData(_.bucketInstanceId,un,Vt,$r,qi,Vr),dt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(_.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[dt.crossTileID]=new Gc((Yn||Xe)&&!$r?.occluded,(mr||He)&&!qi?.occluded,lr||_.justReloaded),u[dt.crossTileID]=!0};if(Re){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const dt=_.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Vt=dt.length-1;Vt>=0;--Vt){const un=dt[Vt];St(_.symbolInstances.get(un),_.collisionArrays[un],un)}}else for(let dt=n.symbolInstanceStart;dt<n.symbolInstanceEnd;dt++)St(_.symbolInstances.get(dt),_.collisionArrays[dt],dt);_.justReloaded=!1}storeCollisionData(n,u,g,_,x,E){if(g.textBox||g.iconBox){let I,z;this.collisionBoxArrays.has(n)?I=this.collisionBoxArrays.get(n):(I=new Map,this.collisionBoxArrays.set(n,I)),I.has(u)?z=I.get(u):(z={text:null,icon:null},I.set(u,z)),g.textBox&&(z.text=_.box),g.iconBox&&(z.icon=x.box)}if(E){let I=this.collisionCircleArrays[n];I===void 0&&(I=this.collisionCircleArrays[n]=[]);for(let z=0;z<E.circles.length;z+=4)I.push(E.circles[z+0]-Br),I.push(E.circles[z+1]-Br),I.push(E.circles[z+2]),I.push(E.collisionDetected?1:0)}}markUsedJustification(n,u,g,_){let x;x=_===s.ao.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[s.aG(u)];const E=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];for(const I of E)I>=0&&(n.text.placedSymbolArray.get(I).crossTileID=x>=0&&I!==x?0:g.crossTileID)}markUsedOrientation(n,u,g){const _=u===s.ao.horizontal||u===s.ao.horizontalOnly?u:0,x=u===s.ao.vertical?u:0,E=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];for(const I of E)n.text.placedSymbolArray.get(I).placedOrientation=_;g.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let g=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const _=u?u.symbolFadeChange(n):1,x=u?u.opacities:{},E=u?u.variableOffsets:{},I=u?u.placedOrientations:{};for(const z in this.placements){const U=this.placements[z],$=x[z];$?(this.opacities[z]=new Zo($,_,U.text,U.icon),g=g||U.text!==$.text.placed||U.icon!==$.icon.placed):(this.opacities[z]=new Zo(null,_,U.text,U.icon,U.skipFade),g=g||U.text||U.icon)}for(const z in x){const U=x[z];if(!this.opacities[z]){const $=new Zo(U,_,!1,!1);$.isHidden()||(this.opacities[z]=$,g=g||U.text.placed||U.icon.placed)}}for(const z in E)this.variableOffsets[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.variableOffsets[z]=E[z]);for(const z in I)this.placedOrientations[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.placedOrientations[z]=I[z]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");g?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:n)}updateLayerOpacities(n,u){const g={};for(const _ of u){const x=_.getBucket(n);x&&_.latestFeatureIndex&&n.id===x.layerIds[0]&&this.updateBucketOpacities(x,_.tileID,g,_.collisionBoxArray)}}updateBucketOpacities(n,u,g,_){n.hasTextData()&&(n.text.opacityVertexArray.clear(),n.text.hasVisibleVertices=!1),n.hasIconData()&&(n.icon.opacityVertexArray.clear(),n.icon.hasVisibleVertices=!1),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const x=n.layers[0],E=x.layout,I=new Zo(null,0,!1,!1,!0),z=E.get("text-allow-overlap"),U=E.get("icon-allow-overlap"),$=x._unevaluatedLayout.hasValue("text-variable-anchor")||x._unevaluatedLayout.hasValue("text-variable-anchor-offset"),W=E.get("text-rotation-alignment")==="map",Z=E.get("text-pitch-alignment")==="map",ee=E.get("icon-text-fit")!=="none",oe=new Zo(null,0,z&&(U||!n.hasIconData()||E.get("icon-optional")),U&&(z||!n.hasTextData()||E.get("text-optional")),!0);!n.collisionArrays&&_&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(_);const he=(pe,ve,xe)=>{for(let be=0;be<ve/4;be++)pe.opacityVertexArray.emplaceBack(xe);pe.hasVisibleVertices=pe.hasVisibleVertices||xe!==Si},de=this.collisionBoxArrays.get(n.bucketInstanceId);for(let pe=0;pe<n.symbolInstances.length;pe++){const ve=n.symbolInstances.get(pe),{numHorizontalGlyphVertices:xe,numVerticalGlyphVertices:be,crossTileID:Ce}=ve;let De=this.opacities[Ce];g[Ce]?De=I:De||(De=oe,this.opacities[Ce]=De),g[Ce]=!0;const we=ve.numIconVertices>0,Re=this.placedOrientations[ve.crossTileID],Xe=Re===s.ao.vertical,He=Re===s.ao.horizontal||Re===s.ao.horizontalOnly;if(xe>0||be>0){const Ye=yf(De.text);he(n.text,xe,Xe?Si:Ye),he(n.text,be,He?Si:Ye);const wt=De.text.isHidden();[ve.rightJustifiedTextSymbolIndex,ve.centerJustifiedTextSymbolIndex,ve.leftJustifiedTextSymbolIndex].forEach((Vt=>{Vt>=0&&(n.text.placedSymbolArray.get(Vt).hidden=wt||Xe?1:0)})),ve.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(ve.verticalPlacedTextSymbolIndex).hidden=wt||He?1:0);const St=this.variableOffsets[ve.crossTileID];St&&this.markUsedJustification(n,St.anchor,ve,Re);const dt=this.placedOrientations[ve.crossTileID];dt&&(this.markUsedJustification(n,"left",ve,dt),this.markUsedOrientation(n,dt,ve))}if(we){const Ye=yf(De.icon),wt=!(ee&&ve.verticalPlacedIconSymbolIndex&&Xe);ve.placedIconSymbolIndex>=0&&(he(n.icon,ve.numIconVertices,wt?Ye:Si),n.icon.placedSymbolArray.get(ve.placedIconSymbolIndex).hidden=De.icon.isHidden()),ve.verticalPlacedIconSymbolIndex>=0&&(he(n.icon,ve.numVerticalIconVertices,wt?Si:Ye),n.icon.placedSymbolArray.get(ve.verticalPlacedIconSymbolIndex).hidden=De.icon.isHidden())}const We=de&&de.has(pe)?de.get(pe):{text:null,icon:null};if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const Ye=n.collisionArrays[pe];if(Ye){let wt=new s.P(0,0);if(Ye.textBox||Ye.verticalTextBox){let St=!0;if($){const dt=this.variableOffsets[Ce];dt?(wt=ms(dt.anchor,dt.width,dt.height,dt.textOffset,dt.textBoxScale),W&&wt._rotate(Z?-this.transform.bearingInRadians:this.transform.bearingInRadians)):St=!1}if(Ye.textBox||Ye.verticalTextBox){let dt;Ye.textBox&&(dt=Xe),Ye.verticalTextBox&&(dt=He),Hc(n.textCollisionBox.collisionVertexArray,De.text.placed,!St||dt,We.text,wt.x,wt.y)}}if(Ye.iconBox||Ye.verticalIconBox){const St=!!(!He&&Ye.verticalIconBox);let dt;Ye.iconBox&&(dt=St),Ye.verticalIconBox&&(dt=!St),Hc(n.iconCollisionBox.collisionVertexArray,De.icon.placed,dt,We.icon,ee?wt.x:0,ee?wt.y:0)}}}}if(n.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);n.bucketInstanceId in this.collisionCircleArrays&&(n.collisionCircleArray=this.collisionCircleArrays[n.bucketInstanceId],delete this.collisionCircleArrays[n.bucketInstanceId])}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,u){const g=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*g>n}setStale(){this.stale=!0}}function Hc(b,n,u,g,_,x){g&&g.length!==0||(g=[0,0,0,0]);const E=g[0]-Br,I=g[1]-Br,z=g[2]-Br,U=g[3]-Br;b.emplaceBack(n?1:0,u?1:0,_||0,x||0,E,I),b.emplaceBack(n?1:0,u?1:0,_||0,x||0,z,I),b.emplaceBack(n?1:0,u?1:0,_||0,x||0,z,U),b.emplaceBack(n?1:0,u?1:0,_||0,x||0,E,U)}const Wo=Math.pow(2,25),zi=Math.pow(2,24),mf=Math.pow(2,17),Ig=Math.pow(2,16),gf=Math.pow(2,9),Wp=Math.pow(2,8),Gu=Math.pow(2,1);function yf(b){if(b.opacity===0&&!b.placed)return 0;if(b.opacity===1&&b.placed)return 4294967295;const n=b.placed?1:0,u=Math.floor(127*b.opacity);return u*Wo+n*zi+u*mf+n*Ig+u*gf+n*Wp+u*Gu+n}const Si=0;class Hu{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,u,g,_,x){const E=this._bucketParts;for(;this._currentTileIndex<n.length;)if(u.getBucketParts(E,_,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort(((I,z)=>I.sortKey-z.sortKey)));this._currentPartIndex<E.length;)if(u.placeLayerBucketPart(E[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,x())return!0;return!1}}class vf{constructor(n,u,g,_,x,E,I,z){this.placement=new qu(n,u,E,I,z),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(n,u,g){const _=R.now(),x=()=>!this._forceFullPlacement&&R.now()-_>2;for(;this._currentPlacementIndex>=0;){const E=u[n[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=I)&&(!E.maxzoom||E.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new Hu(E)),this._inProgressLayer.continuePlacement(g[E.source],this.placement,this._showCollisionBoxes,E,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const gs=512/s.$/2;class sl{constructor(n,u,g){this.tileID=n,this.bucketInstanceId=g,this._symbolsByKey={};const _=new Map;for(let x=0;x<u.length;x++){const E=u.get(x),I=E.key,z=_.get(I);z?z.push(E):_.set(I,[E])}for(const[x,E]of _){const I={positions:E.map((z=>({x:Math.floor(z.anchorX*gs),y:Math.floor(z.anchorY*gs)}))),crossTileIDs:E.map((z=>z.crossTileID))};if(I.positions.length>128){const z=new s.aI(I.positions.length,16,Uint16Array);for(const{x:U,y:$}of I.positions)z.add(U,$);z.finish(),delete I.positions,I.index=z}this._symbolsByKey[x]=I}}getScaledCoordinates(n,u){const{x:g,y:_,z:x}=this.tileID.canonical,{x:E,y:I,z}=u.canonical,U=gs/Math.pow(2,z-x),$=(I*s.$+n.anchorY)*U,W=_*s.$*gs;return{x:Math.floor((E*s.$+n.anchorX)*U-g*s.$*gs),y:Math.floor($-W)}}findMatches(n,u,g){const _=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let x=0;x<n.length;x++){const E=n.get(x);if(E.crossTileID)continue;const I=this._symbolsByKey[E.key];if(!I)continue;const z=this.getScaledCoordinates(E,u);if(I.index){const U=I.index.range(z.x-_,z.y-_,z.x+_,z.y+_).sort();for(const $ of U){const W=I.crossTileIDs[$];if(!g[W]){g[W]=!0,E.crossTileID=W;break}}}else if(I.positions)for(let U=0;U<I.positions.length;U++){const $=I.positions[U],W=I.crossTileIDs[U];if(Math.abs($.x-z.x)<=_&&Math.abs($.y-z.y)<=_&&!g[W]){g[W]=!0,E.crossTileID=W;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:n})=>n))}}class Yp{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Zc{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const u=Math.round((n-this.lng)/360);if(u!==0)for(const g in this.indexes){const _=this.indexes[g],x={};for(const E in _){const I=_[E];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+u),x[I.tileID.key]=I}this.indexes[g]=x}this.lng=n}addBucket(n,u,g){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let x=0;x<u.symbolInstances.length;x++)u.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const _=this.usedCrossTileIDs[n.overscaledZ];for(const x in this.indexes){const E=this.indexes[x];if(Number(x)>n.overscaledZ)for(const I in E){const z=E[I];z.tileID.isChildOf(n)&&z.findMatches(u.symbolInstances,n,_)}else{const I=E[n.scaledTo(Number(x)).key];I&&I.findMatches(u.symbolInstances,n,_)}}for(let x=0;x<u.symbolInstances.length;x++){const E=u.symbolInstances.get(x);E.crossTileID||(E.crossTileID=g.generate(),_[E.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new sl(n,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(n,u){for(const g of u.getCrossTileIDsLists())for(const _ of g)delete this.usedCrossTileIDs[n][_]}removeStaleBuckets(n){let u=!1;for(const g in this.indexes){const _=this.indexes[g];for(const x in _)n[_[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,_[x]),delete _[x],u=!0)}return u}}class Yo{constructor(){this.layerIndexes={},this.crossTileIDs=new Yp,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,u,g){let _=this.layerIndexes[n.id];_===void 0&&(_=this.layerIndexes[n.id]=new Zc);let x=!1;const E={};_.handleWrapJump(g);for(const I of u){const z=I.getBucket(n);z&&n.id===z.layerIds[0]&&(z.bucketInstanceId||(z.bucketInstanceId=++this.maxBucketInstanceId),_.addBucket(I.tileID,z,this.crossTileIDs)&&(x=!0),E[z.bucketInstanceId]=!0)}return _.removeStaleBuckets(E)&&(x=!0),x}pruneUnusedLayers(n){const u={};n.forEach((g=>{u[g]=!0}));for(const g in this.layerIndexes)u[g]||delete this.layerIndexes[g]}}var _f="void main() {fragColor=vec4(1.0);}";const Ui={prelude:Dn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Dn("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Dn("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Dn(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Dn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Dn(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Dn(_f,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Dn(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Dn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Dn("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Dn("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Dn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Dn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Dn(_f,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Dn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Dn(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Dn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Dn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Dn(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Dn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Dn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Dn(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Dn(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Dn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Dn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Dn(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:Dn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:Dn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Dn(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Dn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Dn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Dn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Dn("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Dn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Dn("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Dn(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Dn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Dn(b,n){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=n.match(/in ([\w]+) ([\w]+)/g),_=b.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=x?x.concat(_):_,I={};return{fragmentSource:b=b.replace(u,((z,U,$,W,Z)=>(I[Z]=!0,U==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
in ${$} ${W} ${Z};
#else
uniform ${$} ${W} u_${Z};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Z}
    ${$} ${W} ${Z} = u_${Z};
#endif
`))),vertexSource:n=n.replace(u,((z,U,$,W,Z)=>{const ee=W==="float"?"vec2":"vec4",oe=Z.match(/color/)?"color":ee;return I[Z]?U==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
in ${$} ${ee} a_${Z};
out ${$} ${W} ${Z};
#else
uniform ${$} ${W} u_${Z};
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = a_${Z};
#else
    ${$} ${W} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = unpack_mix_${oe}(a_${Z}, u_${Z}_t);
#else
    ${$} ${W} ${Z} = u_${Z};
#endif
`:U==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
in ${$} ${ee} a_${Z};
#else
uniform ${$} ${W} u_${Z};
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${$} ${W} ${Z} = a_${Z};
#else
    ${$} ${W} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${$} ${W} ${Z} = unpack_mix_${oe}(a_${Z}, u_${Z}_t);
#else
    ${$} ${W} ${Z} = u_${Z};
#endif
`})),staticAttributes:g,staticUniforms:E}}class ll{constructor(n,u,g){this.vertexBuffer=n,this.indexBuffer=u,this.segments=g}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var ea=s.aJ([{name:"a_pos",type:"Int16",components:2}]);const tc="#define PROJECTION_MERCATOR",xn="mercator";class ka{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return xn}get shaderDefine(){return tc}get shaderPreludeCode(){return Ui.projectionMercator}get vertexShaderPreludeCode(){return Ui.projectionMercator.vertexSource}get subdivisionGranularity(){return s.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(n){}getMeshFromTileID(n,u,g,_,x){if(this._cachedMesh)return this._cachedMesh;const E=new s.aL;E.emplaceBack(0,0),E.emplaceBack(s.$,0),E.emplaceBack(0,s.$),E.emplaceBack(s.$,s.$);const I=n.createVertexBuffer(E,ea.members),z=s.aM.simpleSegment(0,0,4,2),U=new s.aN;U.emplaceBack(1,0,2),U.emplaceBack(1,2,3);const $=n.createIndexBuffer(U);return this._cachedMesh=new ll(I,$,z),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(n){}}class nc{constructor(n=0,u=0,g=0,_=0){if(isNaN(n)||n<0||isNaN(u)||u<0||isNaN(g)||g<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=u,this.left=g,this.right=_}interpolate(n,u,g){return u.top!=null&&n.top!=null&&(this.top=s.C.number(n.top,u.top,g)),u.bottom!=null&&n.bottom!=null&&(this.bottom=s.C.number(n.bottom,u.bottom,g)),u.left!=null&&n.left!=null&&(this.left=s.C.number(n.left,u.left,g)),u.right!=null&&n.right!=null&&(this.right=s.C.number(n.right,u.right,g)),this}getCenter(n,u){const g=s.ah((this.left+n-this.right)/2,0,n),_=s.ah((this.top+u-this.bottom)/2,0,u);return new s.P(g,_)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new nc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function cl(b,n){if(!b.renderWorldCopies||b.lngRange)return;const u=n.lng-b.center.lng;n.lng+=u>180?-360:u<-180?360:0}function hi(b){return Math.max(0,Math.floor(b))}class Fr{constructor(n,u,g,_,x,E){this._callbacks=n,this._tileSize=512,this._renderWorldCopies=E===void 0||!!E,this._minZoom=u||0,this._maxZoom=g||22,this._minPitch=_??0,this._maxPitch=x??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new s.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=hi(this._zoom),this._scale=s.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new nc,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(n,u,g){this._latRange=n.latRange,this._lngRange=n.lngRange,this._width=n.width,this._height=n.height,this._center=n.center,this._elevation=n.elevation,this._minElevationForCurrentTile=n.minElevationForCurrentTile,this._zoom=n.zoom,this._tileZoom=hi(this._zoom),this._scale=s.af(this._zoom),this._bearingInRadians=n.bearingInRadians,this._fovInRadians=n.fovInRadians,this._pitchInRadians=n.pitchInRadians,this._rollInRadians=n.rollInRadians,this._unmodified=n.unmodified,this._edgeInsets=new nc(n.padding.top,n.padding.bottom,n.padding.left,n.padding.right),this._minZoom=n.minZoom,this._maxZoom=n.maxZoom,this._minPitch=n.minPitch,this._maxPitch=n.maxPitch,this._renderWorldCopies=n.renderWorldCopies,this._cameraToCenterDistance=n.cameraToCenterDistance,this._nearZ=n.nearZ,this._farZ=n.farZ,this._autoCalculateNearFarZ=!g&&n.autoCalculateNearFarZ,u&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(n){this._minElevationForCurrentTile=n}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(n){this._minZoom!==n&&(this._minZoom=n,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(n){this._minPitch!==n&&(this._minPitch=n,this.setPitch(Math.max(this.pitch,n)))}get maxPitch(){return this._maxPitch}setMaxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.setPitch(Math.min(this.pitch,n)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(n){const u=s.aO(n,-180,180)*Math.PI/180;var g,_,x,E,I,z,U,$,W;this._bearingInRadians!==u&&(this._unmodified=!1,this._bearingInRadians=u,this._calcMatrices(),this._rotationMatrix=C(),g=this._rotationMatrix,x=-this._bearingInRadians,E=(_=this._rotationMatrix)[0],I=_[1],z=_[2],U=_[3],$=Math.sin(x),W=Math.cos(x),g[0]=E*W+z*$,g[1]=I*W+U*$,g[2]=E*-$+z*W,g[3]=I*-$+U*W)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(n){const u=s.ah(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==u&&(this._unmodified=!1,this._pitchInRadians=u,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(n){const u=n/180*Math.PI;this._rollInRadians!==u&&(this._unmodified=!1,this._rollInRadians=u,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return s.aP(this._fovInRadians)}setFov(n){n=s.ah(n,.1,150),this.fov!==n&&(this._unmodified=!1,this._fovInRadians=s.ae(n),this._calcMatrices())}get zoom(){return this._zoom}setZoom(n){const u=this.getConstrained(this._center,n).zoom;this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this._tileZoom=Math.max(0,Math.floor(u)),this._scale=s.af(u),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(n){n!==this._elevation&&(this._elevation=n,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(n,u){this._autoCalculateNearFarZ=!1,this._nearZ=n,this._farZ=u,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,u,g){this._unmodified=!1,this._edgeInsets.interpolate(n,u,g),this._constrain(),this._calcMatrices()}resize(n,u,g=!0){this._width=n,this._height=u,g&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new rn([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(n){n?(this._lngRange=[n.getWest(),n.getEast()],this._latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-s.ai,s.ai])}getConstrained(n,u){return this._callbacks.getConstrained(n,u)}getCameraQueryGeometry(n,u){if(u.length===1)return[u[0],n];{const{minX:g,minY:_,maxX:x,maxY:E}=s.a2.fromPoints(u).extend(n);return[new s.P(g,_),new s.P(x,_),new s.P(x,E),new s.P(g,E),new s.P(g,_)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const n=this._unmodified,{center:u,zoom:g}=this.getConstrained(this.center,this.zoom);this.setCenter(u),this.setZoom(g),this._unmodified=n,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let n=s.ag(new Float64Array(16));s.N(n,n,[this._width/2,-this._height/2,1]),s.M(n,n,[1,-1,0]),this._clipSpaceToPixelsMatrix=n,n=s.ag(new Float64Array(16)),s.N(n,n,[1,-1,1]),s.M(n,n,[-1,-1,0]),s.N(n,n,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=n,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(n,u,g,_){const x=g!==void 0?g:this.bearing,E=_=_!==void 0?_:this.pitch,I=s.a1.fromLngLat(n,u),z=-Math.cos(s.ae(E)),U=Math.sin(s.ae(E)),$=U*Math.sin(s.ae(x)),W=-U*Math.cos(s.ae(x));let Z=this.elevation;const ee=u-Z;let oe;z*ee>=0||Math.abs(z)<.1?(oe=1e4,Z=u+oe*z):oe=-ee/z;let he,de,pe=s.aQ(1,I.y),ve=0;do{if(ve+=1,ve>10)break;de=oe/pe,he=new s.a1(I.x+$*de,I.y+W*de),pe=1/he.meterInMercatorCoordinateUnits()}while(Math.abs(oe-de*pe)>1e-12);return{center:he.toLngLat(),elevation:Z,zoom:s.ak(this.height/2/Math.tan(this.fovInRadians/2)/de/this.tileSize)}}recalculateZoomAndCenter(n){if(this.elevation-n==0)return;const u=s.aj(1,this.center.lat)*this.worldSize,g=this.cameraToCenterDistance/u,_=s.a1.fromLngLat(this.center,this.elevation),x=Ue(this.center,this.elevation,this.pitch,this.bearing,g);this._elevation=n;const E=this.calculateCenterFromCameraLngLatAlt(x.toLngLat(),s.aQ(x.z,_.y),this.bearing,this.pitch);this._elevation=E.elevation,this._center=E.center,this.setZoom(E.zoom)}getCameraPoint(){const n=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(n*Math.sin(this.rollInRadians),n*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const n=s.aj(1,this.center.lat)*this.worldSize;return Ue(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/n).toLngLat()}getMercatorTileCoordinates(n){if(!n)return[0,0,1,1];const u=n.canonical.z>=0?1<<n.canonical.z:Math.pow(2,n.canonical.z);return[n.canonical.x/u,n.canonical.y/u,1/u/s.$,1/u/s.$]}}class di{constructor(n,u){this.min=n,this.max=u,this.center=s.aR([],s.aS([],this.min,this.max),.5)}quadrant(n){const u=[n%2==0,n<2],g=s.aT(this.min),_=s.aT(this.max);for(let x=0;x<u.length;x++)g[x]=u[x]?this.min[x]:this.center[x],_[x]=u[x]?this.center[x]:this.max[x];return _[2]=this.max[2],new di(g,_)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersectsFrustum(n){let u=!0;for(let g=0;g<n.planes.length;g++){const _=this.intersectsPlane(n.planes[g]);if(_===0)return 0;_===1&&(u=!1)}return u?2:n.aabb.min[0]>this.max[0]||n.aabb.min[1]>this.max[1]||n.aabb.min[2]>this.max[2]||n.aabb.max[0]<this.min[0]||n.aabb.max[1]<this.min[1]||n.aabb.max[2]<this.min[2]?0:1}intersectsPlane(n){let u=n[3],g=n[3];for(let _=0;_<3;_++)n[_]>0?(u+=n[_]*this.min[_],g+=n[_]*this.max[_]):(g+=n[_]*this.min[_],u+=n[_]*this.max[_]);return u>=0?2:g<0?0:1}}class fi{distanceToTile2d(n,u,g,_){const x=_.distanceX([n,u]),E=_.distanceY([n,u]);return Math.hypot(x,E)}getWrap(n,u,g){return g}getTileBoundingVolume(n,u,g,_){var x,E;let I=0,z=0;if(_?.terrain){const $=new s.Z(n.z,u,n.z,n.x,n.y),W=_.terrain.getMinMaxElevation($);I=(x=W.minElevation)!==null&&x!==void 0?x:Math.min(0,g),z=(E=W.maxElevation)!==null&&E!==void 0?E:Math.max(0,g)}const U=1<<n.z;return new di([u+n.x/U,n.y/U,I],[u+(n.x+1)/U,(n.y+1)/U,z])}allowVariableZoom(n,u){const g=n.fov*(Math.abs(Math.cos(n.rollInRadians))*n.height+Math.abs(Math.sin(n.rollInRadians))*n.width)/n.height,_=s.ah(78.5-g/2,0,60);return!!u.terrain||n.pitch>_}allowWorldCopies(){return!0}prepareNextFrame(){}}class hr{constructor(n,u,g){this.points=n,this.planes=u,this.aabb=g}static fromInvProjectionMatrix(n,u=1,g=0,_,x){const E=x?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],I=Math.pow(2,g),z=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((Z=>(function(ee,oe,he,de){const pe=s.aw([],ee,oe),ve=1/pe[3]/he*de;return s.aY(pe,pe,[ve,ve,1/pe[3],ve])})(Z,n,u,I)));_&&(function(Z,ee,oe,he){const de=he?4:0,pe=he?0:4;let ve=0;const xe=[],be=[];for(let we=0;we<4;we++){const Re=s.aU([],Z[we+pe],Z[we+de]),Xe=s.aZ(Re);s.aR(Re,Re,1/Xe),xe.push(Xe),be.push(Re)}for(let we=0;we<4;we++){const Re=s.a_(Z[we+de],be[we],oe);ve=Re!==null&&Re>=0?Math.max(ve,Re):Math.max(ve,xe[we])}const Ce=(function(we,Re){const Xe=s.aU([],we[Re[0]],we[Re[1]]),He=s.aU([],we[Re[2]],we[Re[1]]),We=[0,0,0,0];return s.aV(We,s.aW([],Xe,He)),We[3]=-s.aX(We,we[Re[0]]),We})(Z,ee),De=(function(we,Re){const Xe=s.a$(we),He=s.b0([],we,1/Xe),We=s.aU([],Re,s.aR([],He,s.aX(Re,He))),Ye=s.a$(We);if(Ye>0){const wt=Math.sqrt(1-He[3]*He[3]),St=s.aR([],He,-He[3]),dt=s.aS([],St,s.aR([],We,wt/Ye));return s.b1(Re,dt)}return null})(oe,Ce);if(De!==null){const we=De/s.aX(be[0],Ce);ve=Math.min(ve,we)}for(let we=0;we<4;we++){const Re=Math.min(ve,xe[we]);Z[we+pe]=[Z[we+de][0]+be[we][0]*Re,Z[we+de][1]+be[we][1]*Re,Z[we+de][2]+be[we][2]*Re,1]}})(z,E[0],_,x);const U=E.map((Z=>{const ee=s.aU([],z[Z[0]],z[Z[1]]),oe=s.aU([],z[Z[2]],z[Z[1]]),he=s.aV([],s.aW([],ee,oe)),de=-s.aX(he,z[Z[1]]);return he.concat(de)})),$=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],W=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const Z of z)for(let ee=0;ee<3;ee++)$[ee]=Math.min($[ee],Z[ee]),W[ee]=Math.max(W[ee],Z[ee]);return new hr(z,U,new di($,W))}}class Xo{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,u,g){return this._helper.interpolatePadding(n,u,g)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,u,g=!0){this._helper.resize(n,u,g)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}overrideNearFarZ(n,u){this._helper.overrideNearFarZ(n,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(n,u){}constructor(n,u,g,_,x){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Fr({calcMatrices:()=>{this._calcMatrices()},getConstrained:(E,I)=>this.getConstrained(E,I)},n,u,g,_,x),this._coveringTilesDetailsProvider=new fi}clone(){const n=new Xo;return n.apply(this),n}apply(n,u,g){this._helper.apply(n,u,g)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(n){const u=[new s.b2(0,n)];if(this._helper._renderWorldCopies){const g=this.screenPointToMercatorCoordinate(new s.P(0,0)),_=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,0)),x=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,this._helper._height)),E=this.screenPointToMercatorCoordinate(new s.P(0,this._helper._height)),I=Math.floor(Math.min(g.x,_.x,x.x,E.x)),z=Math.floor(Math.max(g.x,_.x,x.x,E.x)),U=1;for(let $=I-U;$<=z+U;$++)$!==0&&u.push(new s.b2($,n))}return u}getCameraFrustum(){return hr.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(n){const u=this.screenPointToLocation(this.centerPoint,n),g=n?n.getElevationForLngLatZoom(u,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(g)}setLocationAtPoint(n,u){const g=s.aj(this.elevation,this.center.lat),_=this.screenPointToMercatorCoordinateAtZ(u,g),x=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,g),E=s.a1.fromLngLat(n),I=new s.a1(E.x-(_.x-x.x),E.y-(_.y-x.y));this.setCenter(I?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(n,u){return u?this.coordinatePoint(s.a1.fromLngLat(n),u.getElevationForLngLatZoom(n,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(s.a1.fromLngLat(n))}screenPointToLocation(n,u){var g;return(g=this.screenPointToMercatorCoordinate(n,u))===null||g===void 0?void 0:g.toLngLat()}screenPointToMercatorCoordinate(n,u){if(u){const g=u.pointCoordinate(n);if(g!=null)return g}return this.screenPointToMercatorCoordinateAtZ(n)}screenPointToMercatorCoordinateAtZ(n,u){const g=u||0,_=[n.x,n.y,0,1],x=[n.x,n.y,1,1];s.aw(_,_,this._pixelMatrixInverse),s.aw(x,x,this._pixelMatrixInverse);const E=_[3],I=x[3],z=_[1]/E,U=x[1]/I,$=_[2]/E,W=x[2]/I,Z=$===W?0:(g-$)/(W-$);return new s.a1(s.C.number(_[0]/E,x[0]/I,Z)/this.worldSize,s.C.number(z,U,Z)/this.worldSize,g)}coordinatePoint(n,u=0,g=this._pixelMatrix){const _=[n.x*this.worldSize,n.y*this.worldSize,u,1];return s.aw(_,_,g),new s.P(_[0]/_[3],_[1]/_[3])}getBounds(){const n=Math.max(0,this._helper._height/2-$e(this));return new rn().extend(this.screenPointToLocation(new s.P(0,n))).extend(this.screenPointToLocation(new s.P(this._helper._width,n))).extend(this.screenPointToLocation(new s.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new s.P(0,this._helper._height)))}isPointOnMapSurface(n,u){return u?u.pointCoordinate(n)!=null:n.y>this.height/2-$e(this)}calculatePosMatrix(n,u=!1,g){var _;const x=(_=n.key)!==null&&_!==void 0?_:s.b3(n.wrap,n.canonical.z,n.canonical.z,n.canonical.x,n.canonical.y),E=u?this._alignedPosMatrixCache:this._posMatrixCache;if(E.has(x)){const U=E.get(x);return g?U.f32:U.f64}const I=Be(n,this.worldSize);s.O(I,u?this._alignedProjMatrix:this._viewProjMatrix,I);const z={f64:I,f32:new Float32Array(I)};return E.set(x,z),g?z.f32:z.f64}calculateFogMatrix(n){const u=n.key,g=this._fogMatrixCacheF32;if(g.has(u))return g.get(u);const _=Be(n,this.worldSize);return s.O(_,this._fogMatrix,_),g.set(u,new Float32Array(_)),g.get(u)}getConstrained(n,u){u=s.ah(+u,this.minZoom,this.maxZoom);const g={center:new s.S(n.lng,n.lat),zoom:u};let _=this._helper._lngRange;if(!this._helper._renderWorldCopies&&_===null){const xe=179.9999999999;_=[-xe,xe]}const x=this.tileSize*s.af(g.zoom);let E=0,I=x,z=0,U=x,$=0,W=0;const{x:Z,y:ee}=this.size;if(this._helper._latRange){const xe=this._helper._latRange;E=s.U(xe[1])*x,I=s.U(xe[0])*x,I-E<ee&&($=ee/(I-E))}_&&(z=s.aO(s.V(_[0])*x,0,x),U=s.aO(s.V(_[1])*x,0,x),U<z&&(U+=x),U-z<Z&&(W=Z/(U-z)));const{x:oe,y:he}=Me(x,n);let de,pe;const ve=Math.max(W||0,$||0);if(ve){const xe=new s.P(W?(U+z)/2:oe,$?(I+E)/2:he);return g.center=Ie(x,xe).wrap(),g.zoom+=s.ak(ve),g}if(this._helper._latRange){const xe=ee/2;he-xe<E&&(pe=E+xe),he+xe>I&&(pe=I-xe)}if(_){const xe=(z+U)/2;let be=oe;this._helper._renderWorldCopies&&(be=s.aO(oe,xe-x/2,xe+x/2));const Ce=Z/2;be-Ce<z&&(de=z+Ce),be+Ce>U&&(de=U-Ce)}if(de!==void 0||pe!==void 0){const xe=new s.P(de??oe,pe??he);g.center=Ie(x,xe).wrap()}return g}calculateCenterFromCameraLngLatAlt(n,u,g,_){return this._helper.calculateCenterFromCameraLngLatAlt(n,u,g,_)}_calculateNearFarZIfNeeded(n,u,g){if(!this._helper.autoCalculateNearFarZ)return;const _=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),x=n-_*this._helper._pixelPerMeter/Math.cos(u),E=_<0?x:n,I=Math.PI/2+this.pitchInRadians,z=s.ae(this.fov)*(Math.abs(Math.cos(s.ae(this.roll)))*this.height+Math.abs(Math.sin(s.ae(this.roll)))*this.width)/this.height*(.5+g.y/this.height),U=Math.sin(z)*E/Math.sin(s.ah(Math.PI-I-z,.01,Math.PI-.01)),$=$e(this),W=Math.atan($/this._helper.cameraToCenterDistance),Z=s.ae(.75),ee=W>Z?2*W*(.5+g.y/(2*$)):Z,oe=Math.sin(ee)*E/Math.sin(s.ah(Math.PI-I-ee,.01,Math.PI-.01)),he=Math.min(U,oe);this._helper._farZ=1.01*(Math.cos(Math.PI/2-u)*he+E),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const n=this.centerOffset,u=Me(this.worldSize,this.center),g=u.x,_=u.y;this._helper._pixelPerMeter=s.aj(1,this.center.lat)*this.worldSize;const x=s.ae(Math.min(this.pitch,Se)),E=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(x));let I;this._calculateNearFarZIfNeeded(E,x,n),I=new Float64Array(16),s.b4(I,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),s.aq(this._invProjMatrix,I),I[8]=2*-n.x/this._helper._width,I[9]=2*n.y/this._helper._height,this._projectionMatrix=s.b5(I),s.N(I,I,[1,-1,1]),s.M(I,I,[0,0,-this._helper.cameraToCenterDistance]),s.b6(I,I,-this.rollInRadians),s.b7(I,I,this.pitchInRadians),s.b6(I,I,-this.bearingInRadians),s.M(I,I,[-g,-_,0]),this._mercatorMatrix=s.N([],I,[this.worldSize,this.worldSize,this.worldSize]),s.N(I,I,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=s.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,I),s.M(I,I,[0,0,-this.elevation]),this._viewProjMatrix=I,this._invViewProjMatrix=s.aq([],I);const z=[0,0,-1,1];s.aw(z,z,this._invViewProjMatrix),this._cameraPosition=[z[0]/z[3],z[1]/z[3],z[2]/z[3]],this._fogMatrix=new Float64Array(16),s.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,E,this._helper._farZ),this._fogMatrix[8]=2*-n.x/this.width,this._fogMatrix[9]=2*n.y/this.height,s.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),s.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),s.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),s.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),s.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),s.M(this._fogMatrix,this._fogMatrix,[-g,-_,0]),s.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),s.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=s.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,I);const U=this._helper._width%2/2,$=this._helper._height%2/2,W=Math.cos(this.bearingInRadians),Z=Math.sin(-this.bearingInRadians),ee=g-Math.round(g)+W*U+Z*$,oe=_-Math.round(_)+W*$+Z*U,he=new Float64Array(I);if(s.M(he,he,[ee>.5?ee-1:ee,oe>.5?oe-1:oe,0]),this._alignedProjMatrix=he,I=s.aq(new Float64Array(16),this._pixelMatrix),!I)throw new Error("failed to invert matrix");this._pixelMatrixInverse=I,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const n=this.screenPointToMercatorCoordinate(new s.P(0,0)),u=[n.x*this.worldSize,n.y*this.worldSize,0,1];return s.aw(u,u,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const n=s.aj(1,this.center.lat)*this.worldSize;return Ue(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/n).toLngLat()}lngLatToCameraDepth(n,u){const g=s.a1.fromLngLat(n),_=[g.x*this.worldSize,g.y*this.worldSize,u,1];return s.aw(_,_,this._viewProjMatrix),_[2]/_[3]}getProjectionData(n){const{overscaledTileID:u,aligned:g,applyTerrainMatrix:_}=n,x=this._helper.getMercatorTileCoordinates(u),E=u?this.calculatePosMatrix(u,g,!0):null;let I;return I=u&&u.terrainRttPosMatrix32f&&_?u.terrainRttPosMatrix32f:E||s.b8(),{mainMatrix:I,tileMercatorCoords:x,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:I}}isLocationOccluded(n){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(n,u,g){return 1}transformLightDirection(n){return s.aT(n)}getRayDirectionFromPixel(n){throw new Error("Not implemented.")}projectTileCoordinates(n,u,g,_){const x=this.calculatePosMatrix(g);let E;_?(E=[n,u,_(n,u),1],s.aw(E,E,x)):(E=[n,u,0,1],Ar(E,E,x));const I=E[3];return{point:new s.P(E[0]/I,E[1]/I),signedDistanceFromCamera:I,isOccluded:!1}}populateCache(n){for(const u of n)this.calculatePosMatrix(u)}getMatrixForModel(n,u){const g=s.a1.fromLngLat(n,u),_=g.meterInMercatorCoordinateUnits(),x=s.b9();return s.M(x,x,[g.x,g.y,g.z]),s.b6(x,x,Math.PI),s.b7(x,x,Math.PI/2),s.N(x,x,[-_,_,_]),x}getProjectionDataForCustomLayer(n=!0){const u=new s.Z(0,0,0,0,0),g=this.getProjectionData({overscaledTileID:u,applyGlobeMatrix:n}),_=Be(u,this.worldSize);s.O(_,this._viewProjMatrix,_),g.tileMercatorCoords=[0,0,1,1];const x=[s.$,s.$,this.worldSize/this._helper.pixelsPerMeter],E=s.ba();return s.N(E,_,x),g.fallbackMatrix=E,g.mainMatrix=E,g}getFastPathSimpleProjectionMatrix(n){return this.calculatePosMatrix(n)}}function Lr(){s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function ta(b){if(b.useSlerp)if(b.k<1){const n=s.bb(b.startEulerAngles.roll,b.startEulerAngles.pitch,b.startEulerAngles.bearing),u=s.bb(b.endEulerAngles.roll,b.endEulerAngles.pitch,b.endEulerAngles.bearing),g=new Float64Array(4);s.bc(g,n,u,b.k);const _=s.bd(g);b.tr.setRoll(_.roll),b.tr.setPitch(_.pitch),b.tr.setBearing(_.bearing)}else b.tr.setRoll(b.endEulerAngles.roll),b.tr.setPitch(b.endEulerAngles.pitch),b.tr.setBearing(b.endEulerAngles.bearing);else b.tr.setRoll(s.C.number(b.startEulerAngles.roll,b.endEulerAngles.roll,b.k)),b.tr.setPitch(s.C.number(b.startEulerAngles.pitch,b.endEulerAngles.pitch,b.k)),b.tr.setBearing(s.C.number(b.startEulerAngles.bearing,b.endEulerAngles.bearing,b.k))}function Ti(b,n,u,g,_){const x=_.padding,E=Me(_.worldSize,u.getNorthWest()),I=Me(_.worldSize,u.getNorthEast()),z=Me(_.worldSize,u.getSouthEast()),U=Me(_.worldSize,u.getSouthWest()),$=s.ae(-g),W=E.rotate($),Z=I.rotate($),ee=z.rotate($),oe=U.rotate($),he=new s.P(Math.max(W.x,Z.x,oe.x,ee.x),Math.max(W.y,Z.y,oe.y,ee.y)),de=new s.P(Math.min(W.x,Z.x,oe.x,ee.x),Math.min(W.y,Z.y,oe.y,ee.y)),pe=he.sub(de),ve=(_.width-(x.left+x.right+n.left+n.right))/pe.x,xe=(_.height-(x.top+x.bottom+n.top+n.bottom))/pe.y;if(xe<0||ve<0)return void Lr();const be=Math.min(s.ak(_.scale*Math.min(ve,xe)),b.maxZoom),Ce=s.P.convert(b.offset),De=new s.P((n.left-n.right)/2,(n.top-n.bottom)/2).rotate(s.ae(g)),we=Ce.add(De).mult(_.scale/s.af(be));return{center:Ie(_.worldSize,E.add(z).div(2).sub(we)),zoom:be,bearing:g}}class no{get useGlobeControls(){return!1}handlePanInertia(n,u){const g=n.mag(),_=Math.abs($e(u));return{easingOffset:n.mult(Math.min(.75*_/g,1)),easingCenter:u.center}}handleMapControlsRollPitchBearingZoom(n,u){n.bearingDelta&&u.setBearing(u.bearing+n.bearingDelta),n.pitchDelta&&u.setPitch(u.pitch+n.pitchDelta),n.rollDelta&&u.setRoll(u.roll+n.rollDelta),n.zoomDelta&&u.setZoom(u.zoom+n.zoomDelta)}handleMapControlsPan(n,u,g){n.around.distSqr(u.centerPoint)<.01||u.setLocationAtPoint(g,n.around)}cameraForBoxAndBearing(n,u,g,_,x){return Ti(n,u,g,_,x)}handleJumpToCenterZoom(n,u){n.zoom!==(u.zoom!==void 0?+u.zoom:n.zoom)&&n.setZoom(+u.zoom),u.center!==void 0&&n.setCenter(s.S.convert(u.center))}handleEaseTo(n,u){const g=n.zoom,_=n.padding,x={roll:n.roll,pitch:n.pitch,bearing:n.bearing},E={roll:u.roll===void 0?n.roll:u.roll,pitch:u.pitch===void 0?n.pitch:u.pitch,bearing:u.bearing===void 0?n.bearing:u.bearing},I=u.zoom!==void 0,z=!n.isPaddingEqual(u.padding);let U=!1;const $=I?+u.zoom:n.zoom;let W=n.centerPoint.add(u.offsetAsPoint);const Z=n.screenPointToLocation(W),{center:ee,zoom:oe}=n.getConstrained(s.S.convert(u.center||Z),$??g);cl(n,ee);const he=Me(n.worldSize,Z),de=Me(n.worldSize,ee).sub(he),pe=s.af(oe-g);return U=oe!==g,{easeFunc:ve=>{if(U&&n.setZoom(s.C.number(g,oe,ve)),s.be(x,E)||ta({startEulerAngles:x,endEulerAngles:E,tr:n,k:ve,useSlerp:x.roll!=E.roll}),z&&(n.interpolatePadding(_,u.padding,ve),W=n.centerPoint.add(u.offsetAsPoint)),u.around)n.setLocationAtPoint(u.around,u.aroundPoint);else{const xe=s.af(n.zoom-g),be=oe>g?Math.min(2,pe):Math.max(.5,pe),Ce=Math.pow(be,1-ve),De=Ie(n.worldSize,he.add(de.mult(ve*Ce)).mult(xe));n.setLocationAtPoint(n.renderWorldCopies?De.wrap():De,W)}},isZooming:U,elevationCenter:ee}}handleFlyTo(n,u){const g=u.zoom!==void 0,_=n.zoom,x=n.getConstrained(s.S.convert(u.center||u.locationAtOffset),g?+u.zoom:_),E=x.center,I=x.zoom;cl(n,E);const z=Me(n.worldSize,u.locationAtOffset),U=Me(n.worldSize,E).sub(z),$=U.mag(),W=s.af(I-_);let Z;if(u.minZoom!==void 0){const ee=Math.min(+u.minZoom,_,I),oe=n.getConstrained(E,ee).zoom;Z=s.af(oe-_)}return{easeFunc:(ee,oe,he,de)=>{n.setZoom(ee===1?I:_+s.ak(oe));const pe=ee===1?E:Ie(n.worldSize,z.add(U.mult(he)).mult(oe));n.setLocationAtPoint(n.renderWorldCopies?pe.wrap():pe,de)},scaleOfZoom:W,targetCenter:E,scaleOfMinZoom:Z,pixelPathLength:$}}}class Kn{constructor(n,u,g){this.blendFunction=n,this.blendColor=u,this.mask=g}}Kn.Replace=[1,0],Kn.disabled=new Kn(Kn.Replace,s.bf.transparent,[!1,!1,!1,!1]),Kn.unblended=new Kn(Kn.Replace,s.bf.transparent,[!0,!0,!0,!0]),Kn.alphaBlended=new Kn([1,771],s.bf.transparent,[!0,!0,!0,!0]);const yr=2305;class Mn{constructor(n,u,g){this.enable=n,this.mode=u,this.frontFace=g}}Mn.disabled=new Mn(!1,1029,yr),Mn.backCCW=new Mn(!0,1029,yr),Mn.frontCCW=new Mn(!0,1028,yr);class on{constructor(n,u,g){this.func=n,this.mask=u,this.range=g}}on.ReadOnly=!1,on.ReadWrite=!0,on.disabled=new on(519,on.ReadOnly,[0,1]);const ys=7680;class vn{constructor(n,u,g,_,x,E){this.test=n,this.ref=u,this.mask=g,this.fail=_,this.depthFail=x,this.pass=E}}vn.disabled=new vn({func:519,mask:0},0,0,ys,ys,ys);const Ri=new WeakMap;function Ur(b){var n;if(Ri.has(b))return Ri.get(b);{const u=(n=b.getParameter(b.VERSION))===null||n===void 0?void 0:n.startsWith("WebGL 2.0");return Ri.set(b,u),u}}class Wc{get awaitingQuery(){return!!this._readbackQueue}constructor(n){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=n;const u=n.context,g=u.gl;this._texFormat=g.RGBA,this._texType=g.UNSIGNED_BYTE;const _=new s.aL;_.emplaceBack(-1,-1),_.emplaceBack(2,-1),_.emplaceBack(-1,2);const x=new s.aN;x.emplaceBack(0,1,2),this._fullscreenTriangle=new ll(u.createVertexBuffer(_,ea.members),u.createIndexBuffer(x),s.aM.simpleSegment(0,0,_.length,x.length)),this._resultBuffer=new Uint8Array(4),u.activeTexture.set(g.TEXTURE1);const E=g.createTexture();g.bindTexture(g.TEXTURE_2D,E),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST),g.texImage2D(g.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=u.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(E),Ur(g)&&(this._pbo=g.createBuffer(),g.bindBuffer(g.PIXEL_PACK_BUFFER,this._pbo),g.bufferData(g.PIXEL_PACK_BUFFER,4,g.STREAM_READ),g.bindBuffer(g.PIXEL_PACK_BUFFER,null))}destroy(){const n=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),n.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(n,u){const g=this._updateCount;return this._readbackQueue?g>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():g>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(n,u),this._updateCount++,this._measuredError}_bindFramebuffer(){const n=this._cachedRenderContext.context,u=n.gl;n.activeTexture.set(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,this._fbo.colorAttachment.get()),n.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(n,u){const g=this._cachedRenderContext.context,_=g.gl;if(this._bindFramebuffer(),g.viewport.set([0,0,this._texWidth,this._texHeight]),g.clear({color:s.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(g,_.TRIANGLES,on.disabled,vn.disabled,Kn.unblended,Mn.disabled,((x,E)=>({u_input:x,u_output_expected:E}))(n,u),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Ur(_)){_.bindBuffer(_.PIXEL_PACK_BUFFER,this._pbo),_.readBuffer(_.COLOR_ATTACHMENT0),_.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),_.bindBuffer(_.PIXEL_PACK_BUFFER,null);const x=_.fenceSync(_.SYNC_GPU_COMMANDS_COMPLETE,0);_.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:x}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const n=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Ur(n)){const u=n.clientWaitSync(this._readbackQueue.sync,0,0);if(u===n.WAIT_FAILED)return s.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(u===n.TIMEOUT_EXPIRED)return;n.bindBuffer(n.PIXEL_PACK_BUFFER,this._pbo),n.getBufferSubData(n.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),n.bindBuffer(n.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),n.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Wc._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(n){let u=0;return u+=n[0]/256,u+=n[1]/65536,u+=n[2]/16777216,n[3]<127&&(u=-u),u/128}}const vs=s.$/128;function Zu(b,n){const u=b.granularity!==void 0?Math.max(b.granularity,1):1,g=u+(b.generateBorders?2:0),_=u+(b.extendToNorthPole||b.generateBorders?1:0)+(b.extendToSouthPole||b.generateBorders?1:0),x=g+1,E=_+1,I=b.generateBorders?-1:0,z=b.generateBorders||b.extendToNorthPole?-1:0,U=u+(b.generateBorders?1:0),$=u+(b.generateBorders||b.extendToSouthPole?1:0),W=x*E,Z=g*_*6,ee=x*E>65536;if(ee&&n==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const oe=ee||n==="32bit",he=new Int16Array(2*W);let de=0;for(let xe=z;xe<=$;xe++)for(let be=I;be<=U;be++){let Ce=be/u*s.$;be===-1&&(Ce=-vs),be===u+1&&(Ce=s.$+vs);let De=xe/u*s.$;xe===-1&&(De=b.extendToNorthPole?s.bh:-vs),xe===u+1&&(De=b.extendToSouthPole?s.bi:s.$+vs),he[de++]=Ce,he[de++]=De}const pe=oe?new Uint32Array(Z):new Uint16Array(Z);let ve=0;for(let xe=0;xe<_;xe++)for(let be=0;be<g;be++){const Ce=be+1+xe*x,De=be+(xe+1)*x,we=be+1+(xe+1)*x;pe[ve++]=be+xe*x,pe[ve++]=De,pe[ve++]=Ce,pe[ve++]=Ce,pe[ve++]=De,pe[ve++]=we}return{vertices:he.buffer.slice(0),indices:pe.buffer.slice(0),uses32bitIndices:oe}}const ul=new s.aK({fill:new s.bj(128,2),line:new s.bj(512,0),tile:new s.bj(128,32),stencil:new s.bj(128,1),circle:3});class rc{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Ui.projectionGlobe}get vertexShaderPreludeCode(){return Ui.projectionMercator.vertexSource}get subdivisionGranularity(){return ul}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(n){this._errorMeasurement||(this._errorMeasurement=new Wc(n));const u=s.U(this._errorQueryLatitudeDegrees),g=2*Math.atan(Math.exp(Math.PI-u*Math.PI*2))-.5*Math.PI,_=this._errorMeasurement.updateErrorLoop(u,g),x=R.now();_!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=_,this._errorMeasurementLastChangeTime=x);const E=Math.min(Math.max((x-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=s.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,s.bl(E))}_getMeshKey(n){return`${n.granularity.toString(36)}_${n.generateBorders?"b":""}${n.extendToNorthPole?"n":""}${n.extendToSouthPole?"s":""}`}getMeshFromTileID(n,u,g,_,x){const E=(x==="stencil"?ul.stencil:ul.tile).getGranularityForZoomLevel(u.z);return this._getMesh(n,{granularity:E,generateBorders:g,extendToNorthPole:u.y===0&&_,extendToSouthPole:u.y===(1<<u.z)-1&&_})}_getMesh(n,u){const g=this._getMeshKey(u);if(g in this._tileMeshCache)return this._tileMeshCache[g];const _=(function(x,E){const I=Zu(E,"16bit"),z=s.aL.deserialize({arrayBuffer:I.vertices,length:I.vertices.byteLength/2/2}),U=s.aN.deserialize({arrayBuffer:I.indices,length:I.indices.byteLength/2/3});return new ll(x.createVertexBuffer(z,ea.members),x.createIndexBuffer(U),s.aM.simpleSegment(0,0,z.length,U.length))})(n,u);return this._tileMeshCache[g]=_,_}recalculate(n){}hasTransition(){const n=R.now();let u=!1;return u=u||(n-this._errorMeasurementLastChangeTime)/1e3<.7,u=u||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,u}setErrorQueryLatitudeDegrees(n){this._errorQueryLatitudeDegrees=n}}const ic=new s.r({type:new s.D(s.v.projection.type)});class ac extends s.E{constructor(n){super(),this._transitionable=new s.t(ic,void 0),this.setProjection(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.F(0)),this._mercatorProjection=new ka,this._verticalPerspectiveProjection=new rc}get transitionState(){const n=this.properties.get("type");if(typeof n=="string"&&n==="mercator")return 0;if(typeof n=="string"&&n==="vertical-perspective")return 1;if(n instanceof s.bm){if(n.from==="vertical-perspective"&&n.to==="mercator")return 1-n.transition;if(n.from==="mercator"&&n.to==="vertical-perspective")return n.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(n){this._mercatorProjection.updateGPUdependent(n),this._verticalPerspectiveProjection.updateGPUdependent(n)}getMeshFromTileID(n,u,g,_,x){return this.currentProjection.getMeshFromTileID(n,u,g,_,x)}setProjection(n){this._transitionable.setValue("type",n?.type||"mercator")}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}setErrorQueryLatitudeDegrees(n){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(n),this._mercatorProjection.setErrorQueryLatitudeDegrees(n)}}function Yc(b){const n=oc(b.worldSize,b.center.lat);return 2*Math.PI*n}function Ko(b,n,u,g,_){const x=1/(1<<_),E=n/s.$*x+g*x,I=s.bo((b/s.$*x+u*x)*Math.PI*2+Math.PI,2*Math.PI),z=2*Math.atan(Math.exp(Math.PI-E*Math.PI*2))-.5*Math.PI,U=Math.cos(z),$=new Float64Array(3);return $[0]=Math.sin(I)*U,$[1]=Math.sin(z),$[2]=Math.cos(I)*U,$}function Mi(b){return(function(n,u){const g=Math.cos(u),_=new Float64Array(3);return _[0]=Math.sin(n)*g,_[1]=Math.sin(u),_[2]=Math.cos(n)*g,_})(b.lng*Math.PI/180,b.lat*Math.PI/180)}function oc(b,n){return b/(2*Math.PI)/Math.cos(n*Math.PI/180)}function sc(b){const n=Math.asin(b[1])/Math.PI*180,u=Math.sqrt(b[0]*b[0]+b[2]*b[2]);if(u>1e-6){const g=b[0]/u,_=Math.acos(b[2]/u),x=(g>0?_:-_)/Math.PI*180;return new s.S(s.aO(x,-180,180),n)}return new s.S(0,n)}function hl(b){return Math.cos(b*Math.PI/180)}function Ci(b,n){const u=hl(b),g=hl(n);return s.ak(g/u)}function hd(b,n){const u=b.rotate(n.bearingInRadians),g=n.zoom+Ci(n.center.lat,0),_=s.bk(1/hl(n.center.lat),1/hl(Math.min(Math.abs(n.center.lat),60)),s.bn(g,7,3,0,1)),x=360/Yc({worldSize:n.worldSize,center:{lat:n.center.lat}});return new s.S(n.center.lng-u.x*x*_,s.ah(n.center.lat+u.y*x,-s.ai,s.ai))}function dd(b){const n=.5*b,u=Math.sin(n),g=Math.cos(n);return Math.log(u+g)-Math.log(g-u)}function Xp(b,n,u,g){const _=b.lat+u*g;if(Math.abs(u)>1){const x=(Math.sign(b.lat+u)!==Math.sign(b.lat)?-Math.abs(b.lat):Math.abs(b.lat))*Math.PI/180,E=Math.abs(b.lat+u)*Math.PI/180,I=dd(x+g*(E-x)),z=dd(x),U=dd(E);return new s.S(b.lng+n*((I-z)/(U-z)),_)}return new s.S(b.lng+n*g,_)}class Kp{constructor(n){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=n}swapBuffers(){if(!this._hadAnyChanges)return;const n=this._cachePrevious;this._cachePrevious=this._cache,this._cache=n,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(n,u,g,_){const x=`${n.z}_${n.x}_${n.y}_${_?.terrain?"t":""}`,E=this._cache.get(x);if(E)return E;const I=this._cachePrevious.get(x);if(I)return this._cache.set(x,I),I;const z=this._boundingVolumeFactory(n,u,g,_);return this._cache.set(x,z),this._hadAnyChanges=!0,z}}class pi{constructor(n,u,g,_){this.min=g,this.max=_,this.points=n,this.planes=u}static fromAabb(n,u){const g=[];for(let _=0;_<8;_++)g.push([1&~_?n[0]:u[0],(_>>1&1)==1?u[1]:n[1],(_>>2&1)==1?u[2]:n[2]]);return new pi(g,[[-1,0,0,u[0]],[1,0,0,-n[0]],[0,-1,0,u[1]],[0,1,0,-n[1]],[0,0,-1,u[2]],[0,0,1,-n[2]]],n,u)}static fromCenterSizeAngles(n,u,g){const _=s.br([],g[0],g[1],g[2]),x=s.bs([],[u[0],0,0],_),E=s.bs([],[0,u[1],0],_),I=s.bs([],[0,0,u[2]],_),z=[...n],U=[...n];for(let W=0;W<8;W++)for(let Z=0;Z<3;Z++){const ee=n[Z]+x[Z]*(1&~W?-1:1)+E[Z]*((W>>1&1)==1?1:-1)+I[Z]*((W>>2&1)==1?1:-1);z[Z]=Math.min(z[Z],ee),U[Z]=Math.max(U[Z],ee)}const $=[];for(let W=0;W<8;W++){const Z=[...n];s.aS(Z,Z,s.aR([],x,1&~W?-1:1)),s.aS(Z,Z,s.aR([],E,(W>>1&1)==1?1:-1)),s.aS(Z,Z,s.aR([],I,(W>>2&1)==1?1:-1)),$.push(Z)}return new pi($,[[...x,-s.aX(x,$[0])],[...E,-s.aX(E,$[0])],[...I,-s.aX(I,$[0])],[-x[0],-x[1],-x[2],-s.aX(x,$[7])],[-E[0],-E[1],-E[2],-s.aX(E,$[7])],[-I[0],-I[1],-I[2],-s.aX(I,$[7])]],z,U)}intersectsFrustum(n){let u=!0;const g=this.points.length,_=this.planes.length,x=n.planes.length,E=n.points.length;for(let I=0;I<x;I++){const z=n.planes[I];let U=0;for(let $=0;$<g;$++){const W=this.points[$];z[0]*W[0]+z[1]*W[1]+z[2]*W[2]+z[3]>=0&&U++}if(U===0)return 0;U<g&&(u=!1)}if(u)return 2;for(let I=0;I<_;I++){const z=this.planes[I];let U=0;for(let $=0;$<E;$++){const W=n.points[$];z[0]*W[0]+z[1]*W[1]+z[2]*W[2]+z[3]>=0&&U++}if(U===0)return 0}return 1}intersectsPlane(n){const u=this.points.length;let g=0;for(let _=0;_<u;_++){const x=this.points[_];n[0]*x[0]+n[1]*x[1]+n[2]*x[2]+n[3]>=0&&g++}return g===u?2:g===0?0:1}}function Xc(b,n,u){const g=b-n;return g<0?-g:Math.max(0,g-u)}function ro(b,n,u,g,_){const x=b-u;let E;return E=x<0?Math.min(-x,1+x-_):x>1?Math.min(Math.max(x-_,0),1-x):0,Math.max(E,Xc(n,g,_))}class fd{constructor(){this._boundingVolumeCache=new Kp(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(n,u,g,_){const x=1<<g.z,E=1/x,I=g.x/x,z=g.y/x;let U=2;return U=Math.min(U,ro(n,u,I,z,E)),U=Math.min(U,ro(n,u,I+.5,-z-E,E)),U=Math.min(U,ro(n,u,I+.5,2-z-E,E)),U}getWrap(n,u,g){const _=1<<u.z,x=1/_,E=u.x/_,I=Xc(n.x,E,x),z=Xc(n.x,E-1,x),U=Xc(n.x,E+1,x),$=Math.min(I,z,U);return $===U?1:$===z?-1:0}allowVariableZoom(n,u){return ke(n,u)>4}allowWorldCopies(){return!1}getTileBoundingVolume(n,u,g,_){return this._boundingVolumeCache.getTileBoundingVolume(n,u,g,_)}_computeTileBoundingVolume(n,u,g,_){var x,E;let I=0,z=0;if(_?.terrain){const U=new s.Z(n.z,u,n.z,n.x,n.y),$=_.terrain.getMinMaxElevation(U);I=(x=$.minElevation)!==null&&x!==void 0?x:Math.min(0,g),z=(E=$.maxElevation)!==null&&E!==void 0?E:Math.max(0,g)}if(I/=s.bu,z/=s.bu,I+=1,z+=1,n.z<=0)return pi.fromAabb([-z,-z,-z],[z,z,z]);if(n.z===1)return pi.fromAabb([n.x===0?-z:0,n.y===0?0:-z,-z],[n.x===0?0:z,n.y===0?z:0,z]);{const U=[Ko(0,0,n.x,n.y,n.z),Ko(s.$,0,n.x,n.y,n.z),Ko(s.$,s.$,n.x,n.y,n.z),Ko(0,s.$,n.x,n.y,n.z)],$=[];for(const We of U)$.push(s.aR([],We,z));if(z!==I)for(const We of U)$.push(s.aR([],We,I));n.y===0&&$.push([0,1,0]),n.y===(1<<n.z)-1&&$.push([0,-1,0]);const W=[1,1,1],Z=[-1,-1,-1];for(const We of $)for(let Ye=0;Ye<3;Ye++)W[Ye]=Math.min(W[Ye],We[Ye]),Z[Ye]=Math.max(Z[Ye],We[Ye]);const ee=Ko(s.$/2,s.$/2,n.x,n.y,n.z),oe=s.aW([],[0,1,0],ee);s.aV(oe,oe);const he=s.aW([],ee,oe);s.aV(he,he);const de=s.aW([],U[2],U[1]);s.aV(de,de);const pe=s.aW([],U[0],U[3]);s.aV(pe,pe),$.push(s.aR([],ee,z)),n.y>=(1<<n.z)/2&&$.push(s.aR([],Ko(s.$/2,0,n.x,n.y,n.z),z)),n.y<(1<<n.z)/2&&$.push(s.aR([],Ko(s.$/2,s.$,n.x,n.y,n.z),z));const ve=Wu(ee,$),xe=Wu(he,$),be=[-ee[0],-ee[1],-ee[2],ve.max],Ce=[ee[0],ee[1],ee[2],-ve.min],De=[-he[0],-he[1],-he[2],xe.max],we=[he[0],he[1],he[2],-xe.min],Re=[...de,0],Xe=[...pe,0],He=[];return n.y===0?He.push(s.bt(Xe,Re,be),s.bt(Xe,Re,Ce)):He.push(s.bt(De,Re,be),s.bt(De,Re,Ce),s.bt(De,Xe,be),s.bt(De,Xe,Ce)),n.y===(1<<n.z)-1?He.push(s.bt(Xe,Re,be),s.bt(Xe,Re,Ce)):He.push(s.bt(we,Re,be),s.bt(we,Re,Ce),s.bt(we,Xe,be),s.bt(we,Xe,Ce)),new pi(He,[be,Ce,De,we,Re,Xe],W,Z)}}}function Wu(b,n){let u=1/0,g=-1/0;for(const _ of n){const x=s.aX(b,_);u=Math.min(u,x),g=Math.max(g,x)}return{min:u,max:g}}class Yu{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,u,g){return this._helper.interpolatePadding(n,u,g)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,u){this._helper.resize(n,u)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}overrideNearFarZ(n,u){this._helper.overrideNearFarZ(n,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(n){}constructor(){this._cachedClippingPlane=s.bv(),this._projectionMatrix=s.b9(),this._globeViewProjMatrix32f=s.b8(),this._globeViewProjMatrixNoCorrection=s.b9(),this._globeViewProjMatrixNoCorrectionInverted=s.b9(),this._globeProjMatrixInverted=s.b9(),this._cameraPosition=s.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Fr({calcMatrices:()=>{this._calcMatrices()},getConstrained:(n,u)=>this.getConstrained(n,u)}),this._coveringTilesDetailsProvider=new fd}clone(){const n=new Yu;return n.apply(this),n}apply(n,u){this._globeLatitudeErrorCorrectionRadians=u||0,this._helper.apply(n)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const n=s.bp();return n[0]=this._cameraPosition[0],n[1]=this._cameraPosition[1],n[2]=this._cameraPosition[2],n}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(n){const{overscaledTileID:u,applyGlobeMatrix:g}=n,_=this._helper.getMercatorTileCoordinates(u);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:_,clippingPlane:this._cachedClippingPlane,projectionTransition:g?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(n){const u=this.pitchInRadians,g=this.cameraToCenterDistance/n,_=Math.sin(u)*g,x=Math.cos(u)*g+1,E=1/Math.sqrt(_*_+x*x)*1;let I=-_,z=x;const U=Math.sqrt(I*I+z*z);I/=U,z/=U;const $=[0,I,z];s.bw($,$,[0,0,0],-this.bearingInRadians),s.bx($,$,[0,0,0],-1*this.center.lat*Math.PI/180),s.by($,$,[0,0,0],this.center.lng*Math.PI/180);const W=1/s.aZ($);return s.aR($,$,W),[...$,-E*W]}isLocationOccluded(n){return!this.isSurfacePointVisible(Mi(n))}transformLightDirection(n){const u=this._helper._center.lng*Math.PI/180,g=this._helper._center.lat*Math.PI/180,_=Math.cos(g),x=[Math.sin(u)*_,Math.sin(g),Math.cos(u)*_],E=[x[2],0,-x[0]],I=[0,0,0];s.aW(I,E,x),s.aV(E,E),s.aV(I,I);const z=[0,0,0];return s.aV(z,[E[0]*n[0]+I[0]*n[1]+x[0]*n[2],E[1]*n[0]+I[1]*n[1]+x[1]*n[2],E[2]*n[0]+I[2]*n[1]+x[2]*n[2]]),z}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(n,u,g){const _=(function(I,z,U){const $=1/(1<<U.z);return new s.a1(I/s.$*$+U.x*$,z/s.$*$+U.y*$)})(n,u,g.canonical),x=(E=_.y,[s.bo(_.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-E*Math.PI*2))-.5*Math.PI]);var E;return this.getCircleRadiusCorrection()/Math.cos(x[1])}projectTileCoordinates(n,u,g,_){const x=g.canonical,E=Ko(n,u,x.x,x.y,x.z),I=1+(_?_(n,u):0)/s.bu,z=[E[0]*I,E[1]*I,E[2]*I,1];s.aw(z,z,this._globeViewProjMatrixNoCorrection);const U=this._cachedClippingPlane,$=U[0]*E[0]+U[1]*E[1]+U[2]*E[2]+U[3]<0;return{point:new s.P(z[0]/z[3],z[1]/z[3]),signedDistanceFromCamera:z[3],isOccluded:$}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const n=oc(this.worldSize,this.center.lat),u=s.ba(),g=s.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*n),s.b4(u,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const _=this.centerOffset;u[8]=2*-_.x/this._helper._width,u[9]=2*_.y/this._helper._height,this._projectionMatrix=s.b5(u),this._globeProjMatrixInverted=s.ba(),s.aq(this._globeProjMatrixInverted,u),s.M(u,u,[0,0,-this.cameraToCenterDistance]),s.b6(u,u,this.rollInRadians),s.b7(u,u,-this.pitchInRadians),s.b6(u,u,this.bearingInRadians),s.M(u,u,[0,0,-n]);const x=s.bp();x[0]=n,x[1]=n,x[2]=n,s.b7(g,u,this.center.lat*Math.PI/180),s.bz(g,g,-this.center.lng*Math.PI/180),s.N(g,g,x),this._globeViewProjMatrixNoCorrection=g,s.b7(u,u,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),s.bz(u,u,-this.center.lng*Math.PI/180),s.N(u,u,x),this._globeViewProjMatrix32f=new Float32Array(u),this._globeViewProjMatrixNoCorrectionInverted=s.ba(),s.aq(this._globeViewProjMatrixNoCorrectionInverted,g);const E=s.bp();this._cameraPosition=s.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/n,s.bw(this._cameraPosition,this._cameraPosition,E,-this.rollInRadians),s.bx(this._cameraPosition,this._cameraPosition,E,this.pitchInRadians),s.bw(this._cameraPosition,this._cameraPosition,E,-this.bearingInRadians),s.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),s.bx(this._cameraPosition,this._cameraPosition,E,-this.center.lat*Math.PI/180),s.by(this._cameraPosition,this._cameraPosition,E,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(n);const I=s.b5(this._globeViewProjMatrixNoCorrectionInverted);s.N(I,I,[1,1,-1]),this._cachedFrustum=hr.fromInvProjectionMatrix(I,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(n){s.w("calculateFogMatrix is not supported on globe projection.");const u=s.ba();return s.ag(u),u}getVisibleUnwrappedCoordinates(n){return[new s.b2(0,n)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(n){n&&s.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(n,u){if(!this._globeViewProjMatrixNoCorrection)return 1;const g=Mi(n);s.aR(g,g,1+u/s.bu);const _=s.bv();return s.aw(_,[g[0],g[1],g[2],1],this._globeViewProjMatrixNoCorrection),_[2]/_[3]}populateCache(n){}getBounds(){const n=.5*this.width,u=.5*this.height,g=[new s.P(0,0),new s.P(n,0),new s.P(this.width,0),new s.P(this.width,u),new s.P(this.width,this.height),new s.P(n,this.height),new s.P(0,this.height),new s.P(0,u)],_=[];for(const W of g)_.push(this.unprojectScreenPoint(W));let x=0,E=0,I=0,z=0;const U=this.center;for(const W of _){const Z=s.bA(U.lng,W.lng),ee=s.bA(U.lat,W.lat);Z<E&&(E=Z),Z>x&&(x=Z),ee<z&&(z=ee),ee>I&&(I=ee)}const $=[U.lng+E,U.lat+z,U.lng+x,U.lat+I];return this.isSurfacePointOnScreen([0,1,0])&&($[3]=90,$[0]=-180,$[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&($[1]=-90,$[0]=-180,$[2]=180),new rn($)}getConstrained(n,u){const g=s.ah(n.lat,-s.ai,s.ai),_=s.ah(+u,this.minZoom+Ci(0,g),this.maxZoom);return{center:new s.S(n.lng,g),zoom:_}}calculateCenterFromCameraLngLatAlt(n,u,g,_){return this._helper.calculateCenterFromCameraLngLatAlt(n,u,g,_)}setLocationAtPoint(n,u){const g=Mi(this.unprojectScreenPoint(u)),_=Mi(n),x=s.bp();s.bB(x);const E=s.bp();s.by(E,g,x,-this.center.lng*Math.PI/180),s.bx(E,E,x,this.center.lat*Math.PI/180);const I=_[0]*_[0]+_[2]*_[2],z=E[0]*E[0];if(I<z)return;const U=Math.sqrt(I-z),$=-U,W=s.bC(_[0],_[2],E[0],U),Z=s.bC(_[0],_[2],E[0],$),ee=s.bp();s.by(ee,_,x,-W);const oe=s.bC(ee[1],ee[2],E[1],E[2]),he=s.bp();s.by(he,_,x,-Z);const de=s.bC(he[1],he[2],E[1],E[2]),pe=.5*Math.PI,ve=oe>=-pe&&oe<=pe,xe=de>=-pe&&de<=pe;let be,Ce;if(ve&&xe){const Xe=this.center.lng*Math.PI/180,He=this.center.lat*Math.PI/180;s.bD(W,Xe)+s.bD(oe,He)<s.bD(Z,Xe)+s.bD(de,He)?(be=W,Ce=oe):(be=Z,Ce=de)}else if(ve)be=W,Ce=oe;else{if(!xe)return;be=Z,Ce=de}const De=be/Math.PI*180,we=Ce/Math.PI*180,Re=this.center.lat;this.setCenter(new s.S(De,s.ah(we,-90,90))),this.setZoom(this.zoom+Ci(Re,this.center.lat))}locationToScreenPoint(n,u){const g=Mi(n);if(u){const _=u.getElevationForLngLatZoom(n,this._helper._tileZoom);s.aR(g,g,1+_/s.bu)}return this._projectSurfacePointToScreen(g)}_projectSurfacePointToScreen(n){const u=s.bv();return s.aw(u,[...n,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],new s.P((.5*u[0]+.5)*this.width,(.5*-u[1]+.5)*this.height)}screenPointToMercatorCoordinate(n,u){if(u){const g=u.pointCoordinate(n);if(g)return g}return s.a1.fromLngLat(this.unprojectScreenPoint(n))}screenPointToLocation(n,u){var g;return(g=this.screenPointToMercatorCoordinate(n,u))===null||g===void 0?void 0:g.toLngLat()}isPointOnMapSurface(n,u){const g=this._cameraPosition,_=this.getRayDirectionFromPixel(n);return!!this.rayPlanetIntersection(g,_)}getRayDirectionFromPixel(n){const u=s.bv();u[0]=n.x/this.width*2-1,u[1]=-1*(n.y/this.height*2-1),u[2]=1,u[3]=1,s.aw(u,u,this._globeViewProjMatrixNoCorrectionInverted),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3];const g=s.bp();g[0]=u[0]-this._cameraPosition[0],g[1]=u[1]-this._cameraPosition[1],g[2]=u[2]-this._cameraPosition[2];const _=s.bp();return s.aV(_,g),_}isSurfacePointVisible(n){const u=this._cachedClippingPlane;return u[0]*n[0]+u[1]*n[1]+u[2]*n[2]+u[3]>=0}isSurfacePointOnScreen(n){if(!this.isSurfacePointVisible(n))return!1;const u=s.bv();return s.aw(u,[...n,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3],u[0]>-1&&u[0]<1&&u[1]>-1&&u[1]<1&&u[2]>-1&&u[2]<1}rayPlanetIntersection(n,u){const g=s.aX(n,u),_=s.bp(),x=s.bp();s.aR(x,u,g),s.aU(_,n,x);const E=1-s.aX(_,_);if(E<0)return null;const I=s.aX(n,n)-1,z=-g+(g<0?1:-1)*Math.sqrt(E),U=I/z,$=z;return{tMin:Math.min(U,$),tMax:Math.max(U,$)}}unprojectScreenPoint(n){const u=this._cameraPosition,g=this.getRayDirectionFromPixel(n),_=this.rayPlanetIntersection(u,g);if(_){const $=s.bp();s.aS($,u,[g[0]*_.tMin,g[1]*_.tMin,g[2]*_.tMin]);const W=s.bp();return s.aV(W,$),sc(W)}const x=this._cachedClippingPlane,E=x[0]*g[0]+x[1]*g[1]+x[2]*g[2],I=-s.b1(x,u)/E,z=s.bp();if(I>0)s.aS(z,u,[g[0]*I,g[1]*I,g[2]*I]);else{const $=s.bp();s.aS($,u,[2*g[0],2*g[1],2*g[2]]);const W=s.b1(this._cachedClippingPlane,$);s.aU(z,$,[this._cachedClippingPlane[0]*W,this._cachedClippingPlane[1]*W,this._cachedClippingPlane[2]*W])}const U=(function($){const W=s.bp();return W[0]=$[0]*-$[3],W[1]=$[1]*-$[3],W[2]=$[2]*-$[3],{center:W,radius:Math.sqrt(1-$[3]*$[3])}})(x);return sc((function($,W,Z){const ee=s.bp();s.aU(ee,Z,$);const oe=s.bp();return s.bq(oe,$,ee,W/s.a$(ee)),oe})(U.center,U.radius,z))}getMatrixForModel(n,u){const g=s.S.convert(n),_=1/s.bu,x=s.b9();return s.bz(x,x,g.lng/180*Math.PI),s.b7(x,x,-g.lat/180*Math.PI),s.M(x,x,[0,0,1+u/s.bu]),s.b7(x,x,.5*Math.PI),s.N(x,x,[_,_,_]),x}getProjectionDataForCustomLayer(n=!0){const u=this.getProjectionData({overscaledTileID:new s.Z(0,0,0,0,0),applyGlobeMatrix:n});return u.tileMercatorCoords=[0,0,1,1],u}getFastPathSimpleProjectionMatrix(n){}}class _s{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,u,g){return this._helper.interpolatePadding(n,u,g)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,u,g=!0){this._helper.resize(n,u,g)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}overrideNearFarZ(n,u){this._helper.overrideNearFarZ(n,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(n,u){this._globeness=n,this._globeLatitudeErrorCorrectionRadians=u,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Fr({calcMatrices:()=>{this._calcMatrices()},getConstrained:(n,u)=>this.getConstrained(n,u)}),this._globeness=1,this._mercatorTransform=new Xo,this._verticalPerspectiveTransform=new Yu}clone(){const n=new _s;return n._globeness=this._globeness,n._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,n.apply(this),n}apply(n){this._helper.apply(n),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(n){const u=this._mercatorTransform.getProjectionData(n),g=this._verticalPerspectiveTransform.getProjectionData(n);return{mainMatrix:this.isGlobeRendering?g.mainMatrix:u.mainMatrix,clippingPlane:g.clippingPlane,tileMercatorCoords:g.tileMercatorCoords,projectionTransition:n.applyGlobeMatrix?this._globeness:0,fallbackMatrix:u.fallbackMatrix}}isLocationOccluded(n){return this.currentTransform.isLocationOccluded(n)}transformLightDirection(n){return this.currentTransform.transformLightDirection(n)}getPixelScale(){return s.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return s.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(n,u,g){const _=this._mercatorTransform.getPitchedTextCorrection(n,u,g),x=this._verticalPerspectiveTransform.getPitchedTextCorrection(n,u,g);return s.bk(_,x,this._globeness)}projectTileCoordinates(n,u,g,_){return this.currentTransform.projectTileCoordinates(n,u,g,_)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(n){return this.currentTransform.calculateFogMatrix(n)}getVisibleUnwrappedCoordinates(n){return this.currentTransform.getVisibleUnwrappedCoordinates(n)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(n){this._mercatorTransform.recalculateZoomAndCenter(n),this._verticalPerspectiveTransform.recalculateZoomAndCenter(n)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(n,u){return this.currentTransform.lngLatToCameraDepth(n,u)}populateCache(n){this._mercatorTransform.populateCache(n),this._verticalPerspectiveTransform.populateCache(n)}getBounds(){return this.currentTransform.getBounds()}getConstrained(n,u){return this.currentTransform.getConstrained(n,u)}calculateCenterFromCameraLngLatAlt(n,u,g,_){return this._helper.calculateCenterFromCameraLngLatAlt(n,u,g,_)}setLocationAtPoint(n,u){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(n,u),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(n,u),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(n,u){return this.currentTransform.locationToScreenPoint(n,u)}screenPointToMercatorCoordinate(n,u){return this.currentTransform.screenPointToMercatorCoordinate(n,u)}screenPointToLocation(n,u){return this.currentTransform.screenPointToLocation(n,u)}isPointOnMapSurface(n,u){return this.currentTransform.isPointOnMapSurface(n,u)}getRayDirectionFromPixel(n){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(n)}getMatrixForModel(n,u){return this.currentTransform.getMatrixForModel(n,u)}getProjectionDataForCustomLayer(n=!0){const u=this._mercatorTransform.getProjectionDataForCustomLayer(n);if(!this.isGlobeRendering)return u;const g=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(n);return g.fallbackMatrix=u.mainMatrix,g}getFastPathSimpleProjectionMatrix(n){return this.currentTransform.getFastPathSimpleProjectionMatrix(n)}}class Co{get useGlobeControls(){return!0}handlePanInertia(n,u){const g=hd(n,u);return Math.abs(g.lng-u.center.lng)>180&&(g.lng=u.center.lng+179.5*Math.sign(g.lng-u.center.lng)),{easingCenter:g,easingOffset:new s.P(0,0)}}handleMapControlsRollPitchBearingZoom(n,u){const g=n.around,_=u.screenPointToLocation(g);n.bearingDelta&&u.setBearing(u.bearing+n.bearingDelta),n.pitchDelta&&u.setPitch(u.pitch+n.pitchDelta),n.rollDelta&&u.setRoll(u.roll+n.rollDelta);const x=u.zoom;n.zoomDelta&&u.setZoom(u.zoom+n.zoomDelta);const E=u.zoom-x;if(E===0)return;const I=s.bA(u.center.lng,_.lng),z=I/(Math.abs(I/180)+1),U=s.bA(u.center.lat,_.lat),$=u.getRayDirectionFromPixel(g),W=u.cameraPosition,Z=-1*s.aX(W,$),ee=s.bp();s.aS(ee,W,[$[0]*Z,$[1]*Z,$[2]*Z]);const oe=s.aZ(ee)-1,he=Math.exp(.5*-Math.max(oe-.3,0)),de=oc(u.worldSize,u.center.lat)/Math.min(u.width,u.height),pe=s.bn(de,.9,.5,1,.25),ve=(1-s.af(-E))*Math.min(he,pe),xe=u.center.lat,be=u.zoom,Ce=new s.S(u.center.lng+z*ve,s.ah(u.center.lat+U*ve,-s.ai,s.ai));u.setLocationAtPoint(_,g);const De=u.center,we=s.bn(Math.abs(I),45,85,0,1),Re=s.bn(de,.75,.35,0,1),Xe=Math.pow(Math.max(we,Re),.25),He=s.bA(De.lng,Ce.lng),We=s.bA(De.lat,Ce.lat);u.setCenter(new s.S(De.lng+He*Xe,De.lat+We*Xe).wrap()),u.setZoom(be+Ci(xe,u.center.lat))}handleMapControlsPan(n,u,g){if(!n.panDelta)return;const _=u.center.lat,x=u.zoom;u.setCenter(hd(n.panDelta,u).wrap()),u.setZoom(x+Ci(_,u.center.lat))}cameraForBoxAndBearing(n,u,g,_,x){const E=Ti(n,u,g,_,x),I=u.left/x.width*2-1,z=(x.width-u.right)/x.width*2-1,U=u.top/x.height*-2+1,$=(x.height-u.bottom)/x.height*-2+1,W=s.bA(g.getWest(),g.getEast())<0,Z=W?g.getEast():g.getWest(),ee=W?g.getWest():g.getEast(),oe=Math.max(g.getNorth(),g.getSouth()),he=Math.min(g.getNorth(),g.getSouth()),de=Z+.5*s.bA(Z,ee),pe=oe+.5*s.bA(oe,he),ve=x.clone();ve.setCenter(E.center),ve.setBearing(E.bearing),ve.setPitch(0),ve.setRoll(0),ve.setZoom(E.zoom);const xe=ve.modelViewProjectionMatrix,be=[Mi(g.getNorthWest()),Mi(g.getNorthEast()),Mi(g.getSouthWest()),Mi(g.getSouthEast()),Mi(new s.S(ee,pe)),Mi(new s.S(Z,pe)),Mi(new s.S(de,oe)),Mi(new s.S(de,he))],Ce=Mi(E.center);let De=Number.POSITIVE_INFINITY;for(const we of be)I<0&&(De=Co.getLesserNonNegativeNonNull(De,Co.solveVectorScale(we,Ce,xe,"x",I))),z>0&&(De=Co.getLesserNonNegativeNonNull(De,Co.solveVectorScale(we,Ce,xe,"x",z))),U>0&&(De=Co.getLesserNonNegativeNonNull(De,Co.solveVectorScale(we,Ce,xe,"y",U))),$<0&&(De=Co.getLesserNonNegativeNonNull(De,Co.solveVectorScale(we,Ce,xe,"y",$)));if(Number.isFinite(De)&&De!==0)return E.zoom=ve.zoom+s.ak(De),E;Lr()}handleJumpToCenterZoom(n,u){const g=n.center.lat,_=n.getConstrained(u.center?s.S.convert(u.center):n.center,n.zoom).center;n.setCenter(_.wrap());const x=u.zoom!==void 0?+u.zoom:n.zoom+Ci(g,_.lat);n.zoom!==x&&n.setZoom(x)}handleEaseTo(n,u){const g=n.zoom,_=n.center,x=n.padding,E={roll:n.roll,pitch:n.pitch,bearing:n.bearing},I={roll:u.roll===void 0?n.roll:u.roll,pitch:u.pitch===void 0?n.pitch:u.pitch,bearing:u.bearing===void 0?n.bearing:u.bearing},z=u.zoom!==void 0,U=!n.isPaddingEqual(u.padding);let $=!1;const W=u.center?s.S.convert(u.center):_,Z=n.getConstrained(W,g).center;cl(n,Z);const ee=n.clone();ee.setCenter(Z),ee.setZoom(z?+u.zoom:g+Ci(_.lat,W.lat)),ee.setBearing(u.bearing);const oe=new s.P(s.ah(n.centerPoint.x+u.offsetAsPoint.x,0,n.width),s.ah(n.centerPoint.y+u.offsetAsPoint.y,0,n.height));ee.setLocationAtPoint(Z,oe);const he=(u.offset&&u.offsetAsPoint.mag())>0?ee.center:Z,de=z?+u.zoom:g+Ci(_.lat,he.lat),pe=g+Ci(_.lat,0),ve=de+Ci(he.lat,0),xe=s.bA(_.lng,he.lng),be=s.bA(_.lat,he.lat),Ce=s.af(ve-pe);return $=de!==g,{easeFunc:De=>{if(s.be(E,I)||ta({startEulerAngles:E,endEulerAngles:I,tr:n,k:De,useSlerp:E.roll!=I.roll}),U&&n.interpolatePadding(x,u.padding,De),u.around)s.w("Easing around a point is not supported under globe projection."),n.setLocationAtPoint(u.around,u.aroundPoint);else{const we=ve>pe?Math.min(2,Ce):Math.max(.5,Ce),Re=Math.pow(we,1-De),Xe=Xp(_,xe,be,De*Re);n.setCenter(Xe.wrap())}if($){const we=s.C.number(pe,ve,De)+Ci(0,n.center.lat);n.setZoom(we)}},isZooming:$,elevationCenter:he}}handleFlyTo(n,u){const g=u.zoom!==void 0,_=n.center,x=n.zoom,E=n.padding,I=!n.isPaddingEqual(u.padding),z=n.getConstrained(s.S.convert(u.center||u.locationAtOffset),x).center,U=g?+u.zoom:n.zoom+Ci(n.center.lat,z.lat),$=n.clone();$.setCenter(z),$.setZoom(U),$.setBearing(u.bearing);const W=new s.P(s.ah(n.centerPoint.x+u.offsetAsPoint.x,0,n.width),s.ah(n.centerPoint.y+u.offsetAsPoint.y,0,n.height));$.setLocationAtPoint(z,W);const Z=$.center;cl(n,Z);const ee=(function(be,Ce,De){const we=Mi(Ce),Re=Mi(De),Xe=s.aX(we,Re),He=Math.acos(Xe),We=Yc(be);return He/(2*Math.PI)*We})(n,_,Z),oe=x+Ci(_.lat,0),he=U+Ci(Z.lat,0),de=s.af(he-oe);let pe;if(typeof u.minZoom=="number"){const be=+u.minZoom+Ci(Z.lat,0),Ce=Math.min(be,oe,he)+Ci(0,Z.lat),De=n.getConstrained(Z,Ce).zoom+Ci(Z.lat,0);pe=s.af(De-oe)}const ve=s.bA(_.lng,Z.lng),xe=s.bA(_.lat,Z.lat);return{easeFunc:(be,Ce,De,we)=>{const Re=Xp(_,ve,xe,De);I&&n.interpolatePadding(E,u.padding,be);const Xe=be===1?Z:Re;n.setCenter(Xe.wrap());const He=oe+s.ak(Ce);n.setZoom(be===1?U:He+Ci(0,Xe.lat))},scaleOfZoom:de,targetCenter:Z,scaleOfMinZoom:pe,pixelPathLength:ee}}static solveVectorScale(n,u,g,_,x){const E=_==="x"?[g[0],g[4],g[8],g[12]]:[g[1],g[5],g[9],g[13]],I=[g[3],g[7],g[11],g[15]],z=n[0]*E[0]+n[1]*E[1]+n[2]*E[2],U=n[0]*I[0]+n[1]*I[1]+n[2]*I[2],$=u[0]*E[0]+u[1]*E[1]+u[2]*E[2],W=u[0]*I[0]+u[1]*I[1]+u[2]*I[2];return $+x*U===z+x*W||I[3]*(z-$)+E[3]*(W-U)+z*W==$*U?null:($+E[3]-x*W-x*I[3])/($-z-x*W+x*U)}static getLesserNonNegativeNonNull(n,u){return u!==null&&u>=0&&u<n?u:n}}class bf{constructor(n){this._globe=n,this._mercatorCameraHelper=new no,this._verticalPerspectiveCameraHelper=new Co}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(n,u){return this.currentHelper.handlePanInertia(n,u)}handleMapControlsRollPitchBearingZoom(n,u){return this.currentHelper.handleMapControlsRollPitchBearingZoom(n,u)}handleMapControlsPan(n,u,g){this.currentHelper.handleMapControlsPan(n,u,g)}cameraForBoxAndBearing(n,u,g,_,x){return this.currentHelper.cameraForBoxAndBearing(n,u,g,_,x)}handleJumpToCenterZoom(n,u){this.currentHelper.handleJumpToCenterZoom(n,u)}handleEaseTo(n,u){return this.currentHelper.handleEaseTo(n,u)}handleFlyTo(n,u){return this.currentHelper.handleFlyTo(n,u)}}const pd=(b,n)=>s.y(b,n&&n.filter((u=>u.identifier!=="source.canvas"))),zg=s.bE();class xf extends s.E{constructor(n,u={}){var g,_;super(),this._rtlPluginLoaded=()=>{for(const E in this.sourceCaches){const I=this.sourceCaches[E].getSource().type;I!=="vector"&&I!=="geojson"||this.sourceCaches[E].reload()}},this.map=n,this.dispatcher=new Ht(jt(),n._getMapId()),this.dispatcher.registerMessageHandler("GG",((E,I)=>this.getGlyphs(E,I))),this.dispatcher.registerMessageHandler("GI",((E,I)=>this.getImages(E,I))),this.dispatcher.registerMessageHandler("GDA",((E,I)=>this.getDashes(E,I))),this.imageManager=new nt,this.imageManager.setEventedParent(this);const x=((g=n._container)===null||g===void 0?void 0:g.lang)||typeof document<"u"&&((_=document.documentElement)===null||_===void 0?void 0:_.lang)||void 0;this.glyphManager=new Et(n._requestManager,u.localIdeographFontFamily,x),this.lineAtlas=new ht(256,512),this.crossTileSymbolIndex=new Yo,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",s.bG()),So().on(Rr,this._rtlPluginLoaded),this.on("data",(E=>{if(E.dataType!=="source"||E.sourceDataType!=="metadata")return;const I=this.sourceCaches[E.sourceId];if(!I)return;const z=I.getSource();if(z&&z.vectorLayerIds)for(const U in this._layers){const $=this._layers[U];$.source===z.id&&this._validateLayer($)}}))}setGlobalStateProperty(n,u){var g,_,x;this._checkLoaded();const E=u===null?(x=(_=(g=this.stylesheet.state)===null||g===void 0?void 0:g[n])===null||_===void 0?void 0:_.default)!==null&&x!==void 0?x:null:u;if(s.bH(E,this._globalState[n]))return this;this._globalState[n]=E,this._applyGlobalStateChanges([n])}getGlobalState(){return this._globalState}setGlobalState(n){this._checkLoaded();const u=[];for(const g in n)!s.bH(this._globalState[g],n[g].default)&&(u.push(g),this._globalState[g]=n[g].default);this._applyGlobalStateChanges(u)}_applyGlobalStateChanges(n){if(n.length===0)return;const u=new Set,g={};for(const _ of n){g[_]=this._globalState[_];for(const x in this._layers){const E=this._layers[x],I=E.getLayoutAffectingGlobalStateRefs(),z=E.getPaintAffectingGlobalStateRefs();if(I.has(_)&&u.add(E.source),z.has(_))for(const{name:U,value:$}of z.get(_))this._updatePaintProperty(E,U,$)}}this.dispatcher.broadcast("UGS",g);for(const _ in this.sourceCaches)u.has(_)&&(this._reloadSource(_),this._changed=!0)}loadURL(n,u={},g){this.fire(new s.l("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const _=this.map._requestManager.transformRequest(n,"Style");this._loadStyleRequest=new AbortController;const x=this._loadStyleRequest;s.j(_,this._loadStyleRequest).then((E=>{this._loadStyleRequest=null,this._load(E.data,u,g)})).catch((E=>{this._loadStyleRequest=null,E&&!x.signal.aborted&&this.fire(new s.k(E))}))}loadJSON(n,u={},g){this.fire(new s.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,R.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,u.validate=u.validate!==!1,this._load(n,u,g)})).catch((()=>{}))}loadEmpty(){this.fire(new s.l("dataloading",{dataType:"style"})),this._load(zg,{validate:!1})}_load(n,u,g){var _,x;let E=u.transformStyle?u.transformStyle(g,n):n;if(!u.validate||!pd(this,s.z(E))){E=Object.assign({},E),this._loaded=!0,this.stylesheet=E;for(const I in E.sources)this.addSource(I,E.sources[I],{validate:!1});E.sprite?this._loadSprite(E.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(E.glyphs),this._createLayers(),this.light=new Le(this.stylesheet.light),this._setProjectionInternal(((_=this.stylesheet.projection)===null||_===void 0?void 0:_.type)||"mercator"),this.sky=new Ve(this.stylesheet.sky),this.map.setTerrain((x=this.stylesheet.terrain)!==null&&x!==void 0?x:null),this.fire(new s.l("data",{dataType:"style"})),this.fire(new s.l("style.load"))}}_createLayers(){var n,u,g;const _=s.bI(this.stylesheet.layers);this.setGlobalState((n=this.stylesheet.state)!==null&&n!==void 0?n:null),this.dispatcher.broadcast("SL",_),this._order=_.map((x=>x.id)),this._layers={},this._serializedLayers=null;for(const x of _){const E=s.bJ(x,this._globalState);if(E.setEventedParent(this,{layer:{id:x.id}}),this._layers[x.id]=E,s.bK(E)&&this.sourceCaches[E.source]){const I=(g=(u=x.paint)===null||u===void 0?void 0:u["raster-fade-duration"])!==null&&g!==void 0?g:E.paint.get("raster-fade-duration");this.sourceCaches[E.source].setRasterFadeDuration(I)}}}_loadSprite(n,u=!1,g=void 0){let _;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(x,E,I,z){return s._(this,void 0,void 0,(function*(){const U=_e(x),$=I>1?"@2x":"",W={},Z={};for(const{id:ee,url:oe}of U){const he=E.transformRequest(ye(oe,$,".json"),"SpriteJSON");W[ee]=s.j(he,z);const de=E.transformRequest(ye(oe,$,".png"),"SpriteImage");Z[ee]=me.getImage(de,z)}return yield Promise.all([...Object.values(W),...Object.values(Z)]),(function(ee,oe){return s._(this,void 0,void 0,(function*(){const he={};for(const de in ee){he[de]={};const pe=R.getImageCanvasContext((yield oe[de]).data),ve=(yield ee[de]).data;for(const xe in ve){const{width:be,height:Ce,x:De,y:we,sdf:Re,pixelRatio:Xe,stretchX:He,stretchY:We,content:Ye,textFitWidth:wt,textFitHeight:St}=ve[xe];he[de][xe]={data:null,pixelRatio:Xe,sdf:Re,stretchX:He,stretchY:We,content:Ye,textFitWidth:wt,textFitHeight:St,spriteData:{width:be,height:Ce,x:De,y:we,context:pe}}}}return he}))})(W,Z)}))})(n,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((x=>{if(this._spriteRequest=null,x)for(const E in x){this._spritesImagesIds[E]=[];const I=this._spritesImagesIds[E]?this._spritesImagesIds[E].filter((z=>!(z in x))):[];for(const z of I)this.imageManager.removeImage(z),this._changedImages[z]=!0;for(const z in x[E]){const U=E==="default"?z:`${E}:${z}`;this._spritesImagesIds[E].push(U),U in this.imageManager.images?this.imageManager.updateImage(U,x[E][z],!1):this.imageManager.addImage(U,x[E][z]),u&&(this._changedImages[U]=!0)}}})).catch((x=>{this._spriteRequest=null,_=x,this.fire(new s.k(_))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"})),g&&g(_)}))}_unloadSprite(){for(const n of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(n),this._changedImages[n]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}_validateLayer(n){const u=this.sourceCaches[n.source];if(!u)return;const g=n.sourceLayer;if(!g)return;const _=u.getSource();(_.type==="geojson"||_.vectorLayerIds&&_.vectorLayerIds.indexOf(g)===-1)&&this.fire(new s.k(new Error(`Source layer "${g}" does not exist on source "${_.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(n,u=!1){const g=this._serializedAllLayers();if(!n||n.length===0)return Object.values(u?s.bL(g):g);const _=[];for(const x of n)if(g[x]){const E=u?s.bL(g[x]):g[x];_.push(E)}return _}_serializedAllLayers(){let n=this._serializedLayers;if(n)return n;n=this._serializedLayers={};const u=Object.keys(this._layers);for(const g of u){const _=this._layers[g];_.type!=="custom"&&(n[g]=_.serialize())}return n}hasTransitions(){var n,u,g;if(!((n=this.light)===null||n===void 0)&&n.hasTransition()||!((u=this.sky)===null||u===void 0)&&u.hasTransition()||!((g=this.projection)===null||g===void 0)&&g.hasTransition())return!0;for(const _ in this.sourceCaches)if(this.sourceCaches[_].hasTransition())return!0;for(const _ in this._layers)if(this._layers[_].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const u=this._changed;if(u){const _=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(_.length||x.length)&&this._updateWorkerLayers(_,x);for(const E in this._updatedSources){const I=this._updatedSources[E];if(I==="reload")this._reloadSource(E);else{if(I!=="clear")throw new Error(`Invalid action ${I}`);this._clearSource(E)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const E in this._updatedPaintProps)this._layers[E].updateTransitions(n);this.light.updateTransitions(n),this.sky.updateTransitions(n),this._resetUpdates()}const g={};for(const _ in this.sourceCaches){const x=this.sourceCaches[_];g[_]=x.used,x.used=!1}for(const _ of this._order){const x=this._layers[_];x.recalculate(n,this._availableImages),!x.isHidden(n.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(const _ in g){const x=this.sourceCaches[_];!!g[_]!=!!x.used&&x.fire(new s.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:_}))}this.light.recalculate(n),this.sky.recalculate(n),this.projection.recalculate(n),this.z=n.zoom,u&&this.fire(new s.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const n in this.sourceCaches)this.sourceCaches[n].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(n,u){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(n,!1),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(n,u={}){var g;this._checkLoaded();const _=this.serialize();if(n=u.transformStyle?u.transformStyle(_,n):n,((g=u.validate)===null||g===void 0||g)&&pd(this,s.z(n)))return!1;(n=s.bL(n)).layers=s.bI(n.layers);const x=s.bM(_,n),E=this._getOperationsToPerform(x);if(E.unimplemented.length>0)throw new Error(`Unimplemented: ${E.unimplemented.join(", ")}.`);if(E.operations.length===0)return!1;for(const I of E.operations)I();return this.stylesheet=n,this._serializedLayers=null,!0}_getOperationsToPerform(n){const u=[],g=[];for(const _ of n)switch(_.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":u.push((()=>this.addLayer.apply(this,_.args)));break;case"removeLayer":u.push((()=>this.removeLayer.apply(this,_.args)));break;case"setPaintProperty":u.push((()=>this.setPaintProperty.apply(this,_.args)));break;case"setLayoutProperty":u.push((()=>this.setLayoutProperty.apply(this,_.args)));break;case"setFilter":u.push((()=>this.setFilter.apply(this,_.args)));break;case"addSource":u.push((()=>this.addSource.apply(this,_.args)));break;case"removeSource":u.push((()=>this.removeSource.apply(this,_.args)));break;case"setLayerZoomRange":u.push((()=>this.setLayerZoomRange.apply(this,_.args)));break;case"setLight":u.push((()=>this.setLight.apply(this,_.args)));break;case"setGeoJSONSourceData":u.push((()=>this.setGeoJSONSourceData.apply(this,_.args)));break;case"setGlyphs":u.push((()=>this.setGlyphs.apply(this,_.args)));break;case"setSprite":u.push((()=>this.setSprite.apply(this,_.args)));break;case"setTerrain":u.push((()=>this.map.setTerrain.apply(this,_.args)));break;case"setSky":u.push((()=>this.setSky.apply(this,_.args)));break;case"setProjection":this.setProjection.apply(this,_.args);break;case"setGlobalState":u.push((()=>this.setGlobalState.apply(this,_.args)));break;case"setTransition":u.push((()=>{}));break;default:g.push(_.command)}return{operations:u,unimplemented:g}}addImage(n,u){if(this.getImage(n))return this.fire(new s.k(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,u),this._afterImageUpdated(n)}updateImage(n,u){this.imageManager.updateImage(n,u)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new s.k(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,u,g={}){if(this._checkLoaded(),this.sourceCaches[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(s.z.source,`sources.${n}`,u,null,g))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const _=this.sourceCaches[n]=new $t(n,u,this.dispatcher);_.style=this,_.setEventedParent(this,(()=>({isSourceLoaded:_.loaded(),source:_.serialize(),sourceId:n}))),_.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error("There is no source with this ID");for(const g in this._layers)if(this._layers[g].source===n)return this.fire(new s.k(new Error(`Source "${n}" cannot be removed while layer "${g}" is using it.`)));const u=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],u.fire(new s.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,u){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const g=this.sourceCaches[n].getSource();if(g.type!=="geojson")throw new Error(`geojsonSource.type is ${g.type}, which is !== 'geojson`);g.setData(u),this._changed=!0}getSource(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()}addLayer(n,u,g={}){this._checkLoaded();const _=n.id;if(this.getLayer(_))return void this.fire(new s.k(new Error(`Layer "${_}" already exists on this map.`)));let x;if(n.type==="custom"){if(pd(this,s.bN(n)))return;x=s.bJ(n,this._globalState)}else{if("source"in n&&typeof n.source=="object"&&(this.addSource(_,n.source),n=s.bL(n),n=s.e(n,{source:_})),this._validate(s.z.layer,`layers.${_}`,n,{arrayIndex:-1},g))return;x=s.bJ(n,this._globalState),this._validateLayer(x),x.setEventedParent(this,{layer:{id:_}})}const E=u?this._order.indexOf(u):this._order.length;if(u&&E===-1)this.fire(new s.k(new Error(`Cannot add layer "${_}" before non-existing layer "${u}".`)));else{if(this._order.splice(E,0,_),this._layerOrderChanged=!0,this._layers[_]=x,this._removedLayers[_]&&x.source&&x.type!=="custom"){const I=this._removedLayers[_];delete this._removedLayers[_],I.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(n,u){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new s.k(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===u)return;const g=this._order.indexOf(n);this._order.splice(g,1);const _=u?this._order.indexOf(u):this._order.length;u&&_===-1?this.fire(new s.k(new Error(`Cannot move layer "${n}" before non-existing layer "${u}".`))):(this._order.splice(_,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const u=this._layers[n];if(!u)return void this.fire(new s.k(new Error(`Cannot remove non-existing layer "${n}".`)));u.setEventedParent(null);const g=this._order.indexOf(n);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=u,delete this._layers[n],this._serializedLayers&&delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],u.onRemove&&u.onRemove(this.map)}getLayer(n){return this._layers[n]}getLayersOrder(){return[...this._order]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,u,g){this._checkLoaded();const _=this.getLayer(n);_?_.minzoom===u&&_.maxzoom===g||(u!=null&&(_.minzoom=u),g!=null&&(_.maxzoom=g),this._updateLayer(_)):this.fire(new s.k(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,u,g={}){this._checkLoaded();const _=this.getLayer(n);if(_){if(!s.bH(_.filter,u))return u==null?(_.setFilter(void 0),void this._updateLayer(_)):void(this._validate(s.z.filter,`layers.${_.id}.filter`,u,null,g)||(_.setFilter(s.bL(u)),this._updateLayer(_)))}else this.fire(new s.k(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return s.bL(this.getLayer(n).filter)}setLayoutProperty(n,u,g,_={}){this._checkLoaded();const x=this.getLayer(n);x?s.bH(x.getLayoutProperty(u),g)||(x.setLayoutProperty(u,g,_),this._updateLayer(x)):this.fire(new s.k(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,u){const g=this.getLayer(n);if(g)return g.getLayoutProperty(u);this.fire(new s.k(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,u,g,_={}){this._checkLoaded();const x=this.getLayer(n);x?s.bH(x.getPaintProperty(u),g)||this._updatePaintProperty(x,u,g,_):this.fire(new s.k(new Error(`Cannot style non-existing layer "${n}".`)))}_updatePaintProperty(n,u,g,_={}){n.setPaintProperty(u,g,_)&&this._updateLayer(n),s.bK(n)&&u==="raster-fade-duration"&&this.sourceCaches[n.source].setRasterFadeDuration(g),this._changed=!0,this._updatedPaintProps[n.id]=!0,this._serializedLayers=null}getPaintProperty(n,u){return this.getLayer(n).getPaintProperty(u)}setFeatureState(n,u){this._checkLoaded();const g=n.source,_=n.sourceLayer,x=this.sourceCaches[g];if(x===void 0)return void this.fire(new s.k(new Error(`The source '${g}' does not exist in the map's style.`)));const E=x.getSource().type;E==="geojson"&&_?this.fire(new s.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):E!=="vector"||_?(n.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),x.setFeatureState(_,n.id,u)):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,u){this._checkLoaded();const g=n.source,_=this.sourceCaches[g];if(_===void 0)return void this.fire(new s.k(new Error(`The source '${g}' does not exist in the map's style.`)));const x=_.getSource().type,E=x==="vector"?n.sourceLayer:void 0;x!=="vector"||E?u&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new s.k(new Error("A feature id is required to remove its specific state property."))):_.removeFeatureState(E,n.id,u):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const u=n.source,g=n.sourceLayer,_=this.sourceCaches[u];if(_!==void 0)return _.getSource().type!=="vector"||g?(n.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),_.getFeatureState(g,n.id)):void this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.k(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const n=s.bO(this.sourceCaches,(x=>x.serialize())),u=this._serializeByIds(this._order,!0),g=this.map.getTerrain()||void 0,_=this.stylesheet;return s.bP({version:_.version,name:_.name,metadata:_.metadata,light:_.light,sky:_.sky,center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch,sprite:_.sprite,glyphs:_.glyphs,transition:_.transition,projection:_.projection,sources:n,layers:u,terrain:g},(x=>x!==void 0))}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.sourceCaches[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(n){const u=E=>this._layers[E].type==="fill-extrusion",g={},_=[];for(let E=this._order.length-1;E>=0;E--){const I=this._order[E];if(u(I)){g[I]=E;for(const z of n){const U=z[I];if(U)for(const $ of U)_.push($)}}}_.sort(((E,I)=>I.intersectionZ-E.intersectionZ));const x=[];for(let E=this._order.length-1;E>=0;E--){const I=this._order[E];if(u(I))for(let z=_.length-1;z>=0;z--){const U=_[z].feature;if(g[U.layer.id]<E)break;x.push(U),_.pop()}else for(const z of n){const U=z[I];if(U)for(const $ of U)x.push($.feature)}}return x}queryRenderedFeatures(n,u,g){u&&u.filter&&this._validate(s.z.filter,"queryRenderedFeatures.filter",u.filter,null,u);const _={};if(u&&u.layers){if(!(Array.isArray(u.layers)||u.layers instanceof Set))return this.fire(new s.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const U of u.layers){const $=this._layers[U];if(!$)return this.fire(new s.k(new Error(`The layer '${U}' does not exist in the map's style and cannot be queried for features.`))),[];_[$.source]=!0}}const x=[];u.availableImages=this._availableImages;const E=this._serializedAllLayers(),I=u.layers instanceof Set?u.layers:Array.isArray(u.layers)?new Set(u.layers):null,z=Object.assign(Object.assign({},u),{layers:I,globalState:this._globalState});for(const U in this.sourceCaches)u.layers&&!_[U]||x.push(pt(this.sourceCaches[U],this._layers,E,n,z,g,this.map.terrain?($,W,Z)=>this.map.terrain.getElevation($,W,Z):void 0));return this.placement&&x.push((function(U,$,W,Z,ee,oe,he){const de={},pe=oe.queryRenderedSymbols(Z),ve=[];for(const xe of Object.keys(pe).map(Number))ve.push(he[xe]);ve.sort(Rt);for(const xe of ve){const be=xe.featureIndex.lookupSymbolFeatures(pe[xe.bucketInstanceId],$,xe.bucketIndex,xe.sourceLayerIndex,{filterSpec:ee.filter,globalState:ee.globalState},ee.layers,ee.availableImages,U);for(const Ce in be){const De=de[Ce]=de[Ce]||[],we=be[Ce];we.sort(((Re,Xe)=>{const He=xe.featureSortOrder;if(He){const We=He.indexOf(Re.featureIndex);return He.indexOf(Xe.featureIndex)-We}return Xe.featureIndex-Re.featureIndex}));for(const Re of we)De.push(Re)}}return(function(xe,be,Ce){for(const De in xe)for(const we of xe[De])Ft(we,Ce[be[De].source]);return xe})(de,U,W)})(this._layers,E,this.sourceCaches,n,z,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(n,u){u?.filter&&this._validate(s.z.filter,"querySourceFeatures.filter",u.filter,null,u);const g=this.sourceCaches[n];return g?(function(_,x){const E=_.getRenderableIds().map((U=>_.getTileByID(U))),I=[],z={};for(let U=0;U<E.length;U++){const $=E[U],W=$.tileID.canonical.key;z[W]||(z[W]=!0,$.querySourceFeatures(I,x))}return I})(g,u?Object.assign(Object.assign({},u),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(n,u={}){this._checkLoaded();const g=this.light.getLight();let _=!1;for(const E in n)if(!s.bH(n[E],g[E])){_=!0;break}if(!_)return;const x={now:R.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,u),this.light.updateTransitions(x)}getProjection(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.projection}setProjection(n){if(this._checkLoaded(),this.projection){if(this.projection.name===n.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=n,this._setProjectionInternal(n.type)}getSky(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.sky}setSky(n,u={}){this._checkLoaded();const g=this.getSky();let _=!1;if(!n&&!g)return;if(n&&!g)_=!0;else if(!n&&g)_=!0;else for(const E in n)if(!s.bH(n[E],g[E])){_=!0;break}if(!_)return;const x={now:R.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=n,this.sky.setSky(n,u),this.sky.updateTransitions(x)}_setProjectionInternal(n){const u=(function(g){if(Array.isArray(g)){const _=new ac({type:g});return{projection:_,transform:new _s,cameraHelper:new bf(_)}}switch(g){case"mercator":return{projection:new ka,transform:new Xo,cameraHelper:new no};case"globe":{const _=new ac({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:_,transform:new _s,cameraHelper:new bf(_)}}case"vertical-perspective":return{projection:new rc,transform:new Yu,cameraHelper:new Co};default:return s.w(`Unknown projection name: ${g}. Falling back to mercator projection.`),{projection:new ka,transform:new Xo,cameraHelper:new no}}})(n);this.projection=u.projection,this.map.migrateProjection(u.transform,u.cameraHelper);for(const g in this.sourceCaches)this.sourceCaches[g].reload()}_validate(n,u,g,_,x={}){return(!x||x.validate!==!1)&&pd(this,n.call(s.z,s.e({key:u,style:this.serialize(),value:g,styleSpec:s.v},_)))}_remove(n=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),So().off(Rr,this._rtlPluginLoaded);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const g=this.sourceCaches[u];g.setEventedParent(null),g.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),n&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(n)}_clearSource(n){this.sourceCaches[n].clearTiles()}_reloadSource(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()}_updateSources(n){for(const u in this.sourceCaches)this.sourceCaches[u].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.sourceCaches)this._reloadSource(n)}_updatePlacement(n,u,g,_,x=!1){let E=!1,I=!1;const z={};for(const U of this._order){const $=this._layers[U];if($.type!=="symbol")continue;if(!z[$.source]){const Z=this.sourceCaches[$.source];z[$.source]=Z.getRenderableIds(!0).map((ee=>Z.getTileByID(ee))).sort(((ee,oe)=>oe.tileID.overscaledZ-ee.tileID.overscaledZ||(ee.tileID.isLessThan(oe.tileID)?-1:1)))}const W=this.crossTileSymbolIndex.addLayer($,z[$.source],n.center.lng);E=E||W}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(R.now(),n.zoom))&&(this.pauseablePlacement=new vf(n,this.map.terrain,this._order,x,u,g,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(R.now()),I=!0),E&&this.pauseablePlacement.placement.setStale()),I||E)for(const U of this._order){const $=this._layers[U];$.type==="symbol"&&this.placement.updateLayerOpacities($,z[$.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(R.now())}_releaseSymbolFadeTiles(){for(const n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()}getImages(n,u){return s._(this,void 0,void 0,(function*(){const g=yield this.imageManager.getImages(u.icons);this._updateTilesForChangedImages();const _=this.sourceCaches[u.source];return _&&_.setDependencies(u.tileID.key,u.type,u.icons),g}))}getGlyphs(n,u){return s._(this,void 0,void 0,(function*(){const g=yield this.glyphManager.getGlyphs(u.stacks),_=this.sourceCaches[u.source];return _&&_.setDependencies(u.tileID.key,u.type,[""]),g}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(n,u={}){this._checkLoaded(),n&&this._validate(s.z.glyphs,"glyphs",n,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=n,this.glyphManager.entries={},this.glyphManager.setURL(n))}getDashes(n,u){return s._(this,void 0,void 0,(function*(){const g={};for(const[_,x]of Object.entries(u.dashes))g[_]=this.lineAtlas.getDash(x.dasharray,x.round);return g}))}addSprite(n,u,g={},_){this._checkLoaded();const x=[{id:n,url:u}],E=[..._e(this.stylesheet.sprite),...x];this._validate(s.z.sprite,"sprite",E,null,g)||(this.stylesheet.sprite=E,this._loadSprite(x,!0,_))}removeSprite(n){this._checkLoaded();const u=_e(this.stylesheet.sprite);if(u.find((g=>g.id===n))){if(this._spritesImagesIds[n])for(const g of this._spritesImagesIds[n])this.imageManager.removeImage(g),this._changedImages[g]=!0;u.splice(u.findIndex((g=>g.id===n)),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[n],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}else this.fire(new s.k(new Error(`Sprite "${n}" doesn't exists on this map.`)))}getSprite(){return _e(this.stylesheet.sprite)}setSprite(n,u={},g){this._checkLoaded(),n&&this._validate(s.z.sprite,"sprite",n,null,u)||(this.stylesheet.sprite=n,n?this._loadSprite(n,!0,g):(this._unloadSprite(),g&&g(null)))}}var Rg=s.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class md{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,u,g,_,x,E,I,z,U){this.context=n;let $=this.boundPaintVertexBuffers.length!==_.length;for(let W=0;!$&&W<_.length;W++)this.boundPaintVertexBuffers[W]!==_[W]&&($=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==g||$||this.boundIndexBuffer!==x||this.boundVertexOffset!==E||this.boundDynamicVertexBuffer!==I||this.boundDynamicVertexBuffer2!==z||this.boundDynamicVertexBuffer3!==U?this.freshBind(u,g,_,x,E,I,z,U):(n.bindVertexArray.set(this.vao),I&&I.bind(),x&&x.dynamicDraw&&x.bind(),z&&z.bind(),U&&U.bind())}freshBind(n,u,g,_,x,E,I,z){const U=n.numAttributes,$=this.context,W=$.gl;this.vao&&this.destroy(),this.vao=$.createVertexArray(),$.bindVertexArray.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=_,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=E,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=z,u.enableAttributes(W,n);for(const Z of g)Z.enableAttributes(W,n);E&&E.enableAttributes(W,n),I&&I.enableAttributes(W,n),z&&z.enableAttributes(W,n),u.bind(),u.setVertexAttribPointers(W,n,x);for(const Z of g)Z.bind(),Z.setVertexAttribPointers(W,n,x);E&&(E.bind(),E.setVertexAttribPointers(W,n,x)),_&&_.bind(),I&&(I.bind(),I.setVertexAttribPointers(W,n,x)),z&&(z.bind(),z.setVertexAttribPointers(W,n,x)),$.currentNumAttributes=U}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const wf=(b,n,u,g,_)=>({u_texture:0,u_ele_delta:b,u_fog_matrix:n,u_fog_color:u?u.properties.get("fog-color"):s.bf.white,u_fog_ground_blend:u?u.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:_?0:u?u.calculateFogBlendOpacity(g):0,u_horizon_color:u?u.properties.get("horizon-color"):s.bf.white,u_horizon_fog_blend:u?u.properties.get("horizon-fog-blend"):1,u_is_globe_mode:_?1:0}),gd={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Kc(b){const n=[];for(let u=0;u<b.length;u++){if(b[u]===null)continue;const g=b[u].split(" ");n.push(g.pop())}return n}class Sf{constructor(n,u,g,_,x,E,I,z,U=[]){const $=n.gl;this.program=$.createProgram();const W=Kc(u.staticAttributes),Z=g?g.getBinderAttributes():[],ee=W.concat(Z),oe=Ui.prelude.staticUniforms?Kc(Ui.prelude.staticUniforms):[],he=I.staticUniforms?Kc(I.staticUniforms):[],de=u.staticUniforms?Kc(u.staticUniforms):[],pe=g?g.getBinderUniforms():[],ve=oe.concat(he).concat(de).concat(pe),xe=[];for(const He of ve)xe.indexOf(He)<0&&xe.push(He);const be=g?g.defines():[];Ur($)&&be.unshift("#version 300 es"),x&&be.push("#define OVERDRAW_INSPECTOR;"),E&&be.push("#define TERRAIN3D;"),z&&be.push(z),U&&be.push(...U);let Ce=be.concat(Ui.prelude.fragmentSource,I.fragmentSource,u.fragmentSource).join(`
`),De=be.concat(Ui.prelude.vertexSource,I.vertexSource,u.vertexSource).join(`
`);Ur($)||(Ce=(function(He){return He.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(Ce),De=(function(He){return He.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(De));const we=$.createShader($.FRAGMENT_SHADER);if($.isContextLost())return void(this.failedToCreate=!0);if($.shaderSource(we,Ce),$.compileShader(we),!$.getShaderParameter(we,$.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${$.getShaderInfoLog(we)}`);$.attachShader(this.program,we);const Re=$.createShader($.VERTEX_SHADER);if($.isContextLost())return void(this.failedToCreate=!0);if($.shaderSource(Re,De),$.compileShader(Re),!$.getShaderParameter(Re,$.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${$.getShaderInfoLog(Re)}`);$.attachShader(this.program,Re),this.attributes={};const Xe={};this.numAttributes=ee.length;for(let He=0;He<this.numAttributes;He++)ee[He]&&($.bindAttribLocation(this.program,He,ee[He]),this.attributes[ee[He]]=He);if($.linkProgram(this.program),!$.getProgramParameter(this.program,$.LINK_STATUS))throw new Error(`Program failed to link: ${$.getProgramInfoLog(this.program)}`);$.deleteShader(Re),$.deleteShader(we);for(let He=0;He<xe.length;He++){const We=xe[He];if(We&&!Xe[We]){const Ye=$.getUniformLocation(this.program,We);Ye&&(Xe[We]=Ye)}}this.fixedUniforms=_(n,Xe),this.terrainUniforms=((He,We)=>({u_depth:new s.bQ(He,We.u_depth),u_terrain:new s.bQ(He,We.u_terrain),u_terrain_dim:new s.bg(He,We.u_terrain_dim),u_terrain_matrix:new s.bS(He,We.u_terrain_matrix),u_terrain_unpack:new s.bT(He,We.u_terrain_unpack),u_terrain_exaggeration:new s.bg(He,We.u_terrain_exaggeration)}))(n,Xe),this.projectionUniforms=((He,We)=>({u_projection_matrix:new s.bS(He,We.u_projection_matrix),u_projection_tile_mercator_coords:new s.bT(He,We.u_projection_tile_mercator_coords),u_projection_clipping_plane:new s.bT(He,We.u_projection_clipping_plane),u_projection_transition:new s.bg(He,We.u_projection_transition),u_projection_fallback_matrix:new s.bS(He,We.u_projection_fallback_matrix)}))(n,Xe),this.binderUniforms=g?g.getUniforms(n,Xe):[]}draw(n,u,g,_,x,E,I,z,U,$,W,Z,ee,oe,he,de,pe,ve,xe){const be=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(g),n.setStencilMode(_),n.setColorMode(x),n.setCullFace(E),z){n.activeTexture.set(be.TEXTURE2),be.bindTexture(be.TEXTURE_2D,z.depthTexture),n.activeTexture.set(be.TEXTURE3),be.bindTexture(be.TEXTURE_2D,z.texture);for(const De in this.terrainUniforms)this.terrainUniforms[De].set(z[De])}if(U)for(const De in U)this.projectionUniforms[gd[De]].set(U[De]);if(I)for(const De in this.fixedUniforms)this.fixedUniforms[De].set(I[De]);de&&de.setUniforms(n,this.binderUniforms,oe,{zoom:he});let Ce=0;switch(u){case be.LINES:Ce=2;break;case be.TRIANGLES:Ce=3;break;case be.LINE_STRIP:Ce=1}for(const De of ee.get()){const we=De.vaos||(De.vaos={});(we[$]||(we[$]=new md)).bind(n,this,W,de?de.getPaintVertexBuffers():[],Z,De.vertexOffset,pe,ve,xe),be.drawElements(u,De.primitiveLength*Ce,be.UNSIGNED_SHORT,De.primitiveOffset*Ce*2)}}}function Oa(b,n,u){const g=1/s.aC(u,1,n.transform.tileZoom),_=Math.pow(2,u.tileID.overscaledZ),x=u.tileSize*Math.pow(2,n.transform.tileZoom)/_,E=x*(u.tileID.canonical.x+u.tileID.wrap*_),I=x*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[g,b.fromScale,b.toScale],u_fade:b.t,u_pixel_coord_upper:[E>>16,I>>16],u_pixel_coord_lower:[65535&E,65535&I]}}const Qc=(b,n,u,g)=>{const _=b.style.light,x=_.properties.get("position"),E=[x.x,x.y,x.z],I=s.bW();_.properties.get("anchor")==="viewport"&&s.bX(I,b.transform.bearingInRadians),s.bY(E,E,I);const z=b.transform.transformLightDirection(E),U=_.properties.get("color");return{u_lightpos:E,u_lightpos_globe:z,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[U.r,U.g,U.b],u_vertical_gradient:+n,u_opacity:u,u_fill_translate:g}},Tf=(b,n,u,g,_,x,E)=>s.e(Qc(b,n,u,g),Oa(x,b,E),{u_height_factor:-Math.pow(2,_.overscaledZ)/E.tileSize/8}),lc=(b,n,u,g)=>s.e(Oa(n,b,u),{u_fill_translate:g}),Jc=(b,n)=>({u_world:b,u_fill_translate:n}),Qp=(b,n,u,g,_)=>s.e(lc(b,n,u,_),{u_world:g}),Xu=(b,n,u,g,_)=>{const x=b.transform;let E,I,z=0;if(u.paint.get("circle-pitch-alignment")==="map"){const U=s.aC(n,1,x.zoom);E=!0,I=[U,U],z=U/(s.$*Math.pow(2,n.tileID.overscaledZ))*2*Math.PI*_}else E=!1,I=x.pixelsToGLUnits;return{u_camera_to_center_distance:x.cameraToCenterDistance,u_scale_with_map:+(u.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+E,u_device_pixel_ratio:b.pixelRatio,u_extrude_scale:I,u_globe_extrude_scale:z,u_translate:g}},Jp=b=>({u_pixel_extrude_scale:[1/b.width,1/b.height]}),Eo=b=>({u_viewport_size:[b.width,b.height]}),em=(b,n=1)=>({u_color:b,u_overlay:0,u_overlay_scale:n}),Mf=(b,n,u,g)=>{const _=s.aC(b,1,n)/(s.$*Math.pow(2,b.tileID.overscaledZ))*2*Math.PI*g;return{u_extrude_scale:s.aC(b,1,n),u_intensity:u,u_globe_extrude_scale:_}},tm=(b,n,u,g)=>{const _=s.L();s.bZ(_,0,b.width,b.height,0,0,1);const x=b.context.gl;return{u_matrix:_,u_world:[x.drawingBufferWidth,x.drawingBufferHeight],u_image:u,u_color_ramp:g,u_opacity:n.paint.get("heatmap-opacity")}},Cf=(b,n,u)=>{const g=u.paint.get("hillshade-accent-color");let _;switch(u.paint.get("hillshade-method")){case"basic":_=4;break;case"combined":_=1;break;case"igor":_=2;break;case"multidirectional":_=3;break;default:_=0}const x=u.getIlluminationProperties();for(let E=0;E<x.directionRadians.length;E++)u.paint.get("hillshade-illumination-anchor")==="viewport"&&(x.directionRadians[E]+=b.transform.bearingInRadians);return{u_image:0,u_latrange:eu(0,n.tileID),u_exaggeration:u.paint.get("hillshade-exaggeration"),u_altitudes:x.altitudeRadians,u_azimuths:x.directionRadians,u_accent:g,u_method:_,u_highlights:x.highlightColor,u_shadows:x.shadowColor}},yd=(b,n)=>{const u=n.stride,g=s.L();return s.bZ(g,0,s.$,-s.$,0,0,1),s.M(g,g,[0,-s.$,0]),{u_matrix:g,u_image:1,u_dimension:[u,u],u_zoom:b.overscaledZ,u_unpack:n.getUnpackVector()}};function eu(b,n){const u=Math.pow(2,n.canonical.z),g=n.canonical.y;return[new s.a1(0,g/u).toLngLat().lat,new s.a1(0,(g+1)/u).toLngLat().lat]}const tu=(b,n,u=0)=>({u_image:0,u_unpack:n.getUnpackVector(),u_dimension:[n.stride,n.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:u,u_opacity:b.paint.get("color-relief-opacity")}),Ku=(b,n,u,g)=>{const _=b.transform;return{u_translation:Af(b,n,u),u_ratio:g/s.aC(n,1,_.zoom),u_device_pixel_ratio:b.pixelRatio,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Qu=(b,n,u,g,_)=>s.e(Ku(b,n,u,g),{u_image:0,u_image_height:_}),dl=(b,n,u,g,_)=>{const x=b.transform,E=bs(n,x);return{u_translation:Af(b,n,u),u_texsize:n.imageAtlasTexture.size,u_ratio:g/s.aC(n,1,x.zoom),u_device_pixel_ratio:b.pixelRatio,u_image:0,u_scale:[E,_.fromScale,_.toScale],u_fade:_.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},Ef=(b,n,u,g,_)=>{const x=bs(n,b.transform);return s.e(Ku(b,n,u,g),{u_tileratio:x,u_crossfade_from:_.fromScale,u_crossfade_to:_.toScale,u_image:0,u_mix:_.t,u_lineatlas_width:b.lineAtlas.width,u_lineatlas_height:b.lineAtlas.height})},vd=(b,n,u,g,_,x)=>{const E=bs(n,b.transform);return s.e(Ku(b,n,u,g),{u_image:0,u_image_height:x,u_tileratio:E,u_crossfade_from:_.fromScale,u_crossfade_to:_.toScale,u_image_dash:1,u_mix:_.t,u_lineatlas_width:b.lineAtlas.width,u_lineatlas_height:b.lineAtlas.height})};function bs(b,n){return 1/s.aC(b,1,n.tileZoom)}function Af(b,n,u){return s.aD(b.transform,n,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const Ju=(b,n,u,g,_)=>{return{u_tl_parent:b,u_scale_parent:n,u_buffer_scale:1,u_fade_t:u.mix,u_opacity:u.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(E=g.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(x=g.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:nm(g.paint.get("raster-hue-rotate")),u_coords_top:[_[0].x,_[0].y,_[1].x,_[1].y],u_coords_bottom:[_[3].x,_[3].y,_[2].x,_[2].y]};var x,E};function nm(b){b*=Math.PI/180;const n=Math.sin(b),u=Math.cos(b);return[(2*u+1)/3,(-Math.sqrt(3)*n-u+1)/3,(Math.sqrt(3)*n-u+1)/3]}const rm=(b,n,u,g,_,x,E,I,z,U,$,W,Z)=>{const ee=E.transform;return{u_is_size_zoom_constant:+(b==="constant"||b==="source"),u_is_size_feature_constant:+(b==="constant"||b==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:ee.cameraToCenterDistance,u_pitch:ee.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:ee.width/ee.height,u_fade_change:E.options.fadeDuration?E.symbolFadeChange:1,u_label_plane_matrix:I,u_coord_matrix:z,u_is_text:+$,u_pitch_with_map:+g,u_is_along_line:_,u_is_variable_anchor:x,u_texsize:W,u_texture:0,u_translation:U,u_pitched_scale:Z}},Pf=(b,n,u,g,_,x,E,I,z,U,$,W,Z,ee)=>{const oe=E.transform;return s.e(rm(b,n,u,g,_,x,E,I,z,U,$,W,ee),{u_gamma_scale:g?Math.cos(oe.pitch*Math.PI/180)*oe.cameraToCenterDistance:1,u_device_pixel_ratio:E.pixelRatio,u_is_halo:1})},im=(b,n,u,g,_,x,E,I,z,U,$,W,Z)=>s.e(Pf(b,n,u,g,_,x,E,I,z,U,!0,$,0,Z),{u_texsize_icon:W,u_texture_icon:1}),am=(b,n)=>({u_opacity:b,u_color:n}),Df=(b,n,u,g,_)=>s.e((function(x,E,I,z){const U=I.imageManager.getPattern(x.from.toString()),$=I.imageManager.getPattern(x.to.toString()),{width:W,height:Z}=I.imageManager.getPixelSize(),ee=Math.pow(2,z.tileID.overscaledZ),oe=z.tileSize*Math.pow(2,I.transform.tileZoom)/ee,he=oe*(z.tileID.canonical.x+z.tileID.wrap*ee),de=oe*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:U.tl,u_pattern_br_a:U.br,u_pattern_tl_b:$.tl,u_pattern_br_b:$.br,u_texsize:[W,Z],u_mix:E.t,u_pattern_size_a:U.displaySize,u_pattern_size_b:$.displaySize,u_scale_a:E.fromScale,u_scale_b:E.toScale,u_tile_units_to_pixels:1/s.aC(z,1,I.transform.tileZoom),u_pixel_coord_upper:[he>>16,de>>16],u_pixel_coord_lower:[65535&he,65535&de]}})(u,_,n,g),{u_opacity:b}),na=(b,n)=>{},fl={fillExtrusion:(b,n)=>({u_lightpos:new s.bU(b,n.u_lightpos),u_lightpos_globe:new s.bU(b,n.u_lightpos_globe),u_lightintensity:new s.bg(b,n.u_lightintensity),u_lightcolor:new s.bU(b,n.u_lightcolor),u_vertical_gradient:new s.bg(b,n.u_vertical_gradient),u_opacity:new s.bg(b,n.u_opacity),u_fill_translate:new s.bV(b,n.u_fill_translate)}),fillExtrusionPattern:(b,n)=>({u_lightpos:new s.bU(b,n.u_lightpos),u_lightpos_globe:new s.bU(b,n.u_lightpos_globe),u_lightintensity:new s.bg(b,n.u_lightintensity),u_lightcolor:new s.bU(b,n.u_lightcolor),u_vertical_gradient:new s.bg(b,n.u_vertical_gradient),u_height_factor:new s.bg(b,n.u_height_factor),u_opacity:new s.bg(b,n.u_opacity),u_fill_translate:new s.bV(b,n.u_fill_translate),u_image:new s.bQ(b,n.u_image),u_texsize:new s.bV(b,n.u_texsize),u_pixel_coord_upper:new s.bV(b,n.u_pixel_coord_upper),u_pixel_coord_lower:new s.bV(b,n.u_pixel_coord_lower),u_scale:new s.bU(b,n.u_scale),u_fade:new s.bg(b,n.u_fade)}),fill:(b,n)=>({u_fill_translate:new s.bV(b,n.u_fill_translate)}),fillPattern:(b,n)=>({u_image:new s.bQ(b,n.u_image),u_texsize:new s.bV(b,n.u_texsize),u_pixel_coord_upper:new s.bV(b,n.u_pixel_coord_upper),u_pixel_coord_lower:new s.bV(b,n.u_pixel_coord_lower),u_scale:new s.bU(b,n.u_scale),u_fade:new s.bg(b,n.u_fade),u_fill_translate:new s.bV(b,n.u_fill_translate)}),fillOutline:(b,n)=>({u_world:new s.bV(b,n.u_world),u_fill_translate:new s.bV(b,n.u_fill_translate)}),fillOutlinePattern:(b,n)=>({u_world:new s.bV(b,n.u_world),u_image:new s.bQ(b,n.u_image),u_texsize:new s.bV(b,n.u_texsize),u_pixel_coord_upper:new s.bV(b,n.u_pixel_coord_upper),u_pixel_coord_lower:new s.bV(b,n.u_pixel_coord_lower),u_scale:new s.bU(b,n.u_scale),u_fade:new s.bg(b,n.u_fade),u_fill_translate:new s.bV(b,n.u_fill_translate)}),circle:(b,n)=>({u_camera_to_center_distance:new s.bg(b,n.u_camera_to_center_distance),u_scale_with_map:new s.bQ(b,n.u_scale_with_map),u_pitch_with_map:new s.bQ(b,n.u_pitch_with_map),u_extrude_scale:new s.bV(b,n.u_extrude_scale),u_device_pixel_ratio:new s.bg(b,n.u_device_pixel_ratio),u_globe_extrude_scale:new s.bg(b,n.u_globe_extrude_scale),u_translate:new s.bV(b,n.u_translate)}),collisionBox:(b,n)=>({u_pixel_extrude_scale:new s.bV(b,n.u_pixel_extrude_scale)}),collisionCircle:(b,n)=>({u_viewport_size:new s.bV(b,n.u_viewport_size)}),debug:(b,n)=>({u_color:new s.bR(b,n.u_color),u_overlay:new s.bQ(b,n.u_overlay),u_overlay_scale:new s.bg(b,n.u_overlay_scale)}),depth:na,clippingMask:na,heatmap:(b,n)=>({u_extrude_scale:new s.bg(b,n.u_extrude_scale),u_intensity:new s.bg(b,n.u_intensity),u_globe_extrude_scale:new s.bg(b,n.u_globe_extrude_scale)}),heatmapTexture:(b,n)=>({u_matrix:new s.bS(b,n.u_matrix),u_world:new s.bV(b,n.u_world),u_image:new s.bQ(b,n.u_image),u_color_ramp:new s.bQ(b,n.u_color_ramp),u_opacity:new s.bg(b,n.u_opacity)}),hillshade:(b,n)=>({u_image:new s.bQ(b,n.u_image),u_latrange:new s.bV(b,n.u_latrange),u_exaggeration:new s.bg(b,n.u_exaggeration),u_altitudes:new s.b$(b,n.u_altitudes),u_azimuths:new s.b$(b,n.u_azimuths),u_accent:new s.bR(b,n.u_accent),u_method:new s.bQ(b,n.u_method),u_shadows:new s.b_(b,n.u_shadows),u_highlights:new s.b_(b,n.u_highlights)}),hillshadePrepare:(b,n)=>({u_matrix:new s.bS(b,n.u_matrix),u_image:new s.bQ(b,n.u_image),u_dimension:new s.bV(b,n.u_dimension),u_zoom:new s.bg(b,n.u_zoom),u_unpack:new s.bT(b,n.u_unpack)}),colorRelief:(b,n)=>({u_image:new s.bQ(b,n.u_image),u_unpack:new s.bT(b,n.u_unpack),u_dimension:new s.bV(b,n.u_dimension),u_elevation_stops:new s.bQ(b,n.u_elevation_stops),u_color_stops:new s.bQ(b,n.u_color_stops),u_color_ramp_size:new s.bQ(b,n.u_color_ramp_size),u_opacity:new s.bg(b,n.u_opacity)}),line:(b,n)=>({u_translation:new s.bV(b,n.u_translation),u_ratio:new s.bg(b,n.u_ratio),u_device_pixel_ratio:new s.bg(b,n.u_device_pixel_ratio),u_units_to_pixels:new s.bV(b,n.u_units_to_pixels)}),lineGradient:(b,n)=>({u_translation:new s.bV(b,n.u_translation),u_ratio:new s.bg(b,n.u_ratio),u_device_pixel_ratio:new s.bg(b,n.u_device_pixel_ratio),u_units_to_pixels:new s.bV(b,n.u_units_to_pixels),u_image:new s.bQ(b,n.u_image),u_image_height:new s.bg(b,n.u_image_height)}),linePattern:(b,n)=>({u_translation:new s.bV(b,n.u_translation),u_texsize:new s.bV(b,n.u_texsize),u_ratio:new s.bg(b,n.u_ratio),u_device_pixel_ratio:new s.bg(b,n.u_device_pixel_ratio),u_image:new s.bQ(b,n.u_image),u_units_to_pixels:new s.bV(b,n.u_units_to_pixels),u_scale:new s.bU(b,n.u_scale),u_fade:new s.bg(b,n.u_fade)}),lineSDF:(b,n)=>({u_translation:new s.bV(b,n.u_translation),u_ratio:new s.bg(b,n.u_ratio),u_device_pixel_ratio:new s.bg(b,n.u_device_pixel_ratio),u_units_to_pixels:new s.bV(b,n.u_units_to_pixels),u_image:new s.bQ(b,n.u_image),u_mix:new s.bg(b,n.u_mix),u_tileratio:new s.bg(b,n.u_tileratio),u_crossfade_from:new s.bg(b,n.u_crossfade_from),u_crossfade_to:new s.bg(b,n.u_crossfade_to),u_lineatlas_width:new s.bg(b,n.u_lineatlas_width),u_lineatlas_height:new s.bg(b,n.u_lineatlas_height)}),lineGradientSDF:(b,n)=>({u_translation:new s.bV(b,n.u_translation),u_ratio:new s.bg(b,n.u_ratio),u_device_pixel_ratio:new s.bg(b,n.u_device_pixel_ratio),u_units_to_pixels:new s.bV(b,n.u_units_to_pixels),u_image:new s.bQ(b,n.u_image),u_image_height:new s.bg(b,n.u_image_height),u_tileratio:new s.bg(b,n.u_tileratio),u_crossfade_from:new s.bg(b,n.u_crossfade_from),u_crossfade_to:new s.bg(b,n.u_crossfade_to),u_image_dash:new s.bQ(b,n.u_image_dash),u_mix:new s.bg(b,n.u_mix),u_lineatlas_width:new s.bg(b,n.u_lineatlas_width),u_lineatlas_height:new s.bg(b,n.u_lineatlas_height)}),raster:(b,n)=>({u_tl_parent:new s.bV(b,n.u_tl_parent),u_scale_parent:new s.bg(b,n.u_scale_parent),u_buffer_scale:new s.bg(b,n.u_buffer_scale),u_fade_t:new s.bg(b,n.u_fade_t),u_opacity:new s.bg(b,n.u_opacity),u_image0:new s.bQ(b,n.u_image0),u_image1:new s.bQ(b,n.u_image1),u_brightness_low:new s.bg(b,n.u_brightness_low),u_brightness_high:new s.bg(b,n.u_brightness_high),u_saturation_factor:new s.bg(b,n.u_saturation_factor),u_contrast_factor:new s.bg(b,n.u_contrast_factor),u_spin_weights:new s.bU(b,n.u_spin_weights),u_coords_top:new s.bT(b,n.u_coords_top),u_coords_bottom:new s.bT(b,n.u_coords_bottom)}),symbolIcon:(b,n)=>({u_is_size_zoom_constant:new s.bQ(b,n.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bQ(b,n.u_is_size_feature_constant),u_size_t:new s.bg(b,n.u_size_t),u_size:new s.bg(b,n.u_size),u_camera_to_center_distance:new s.bg(b,n.u_camera_to_center_distance),u_pitch:new s.bg(b,n.u_pitch),u_rotate_symbol:new s.bQ(b,n.u_rotate_symbol),u_aspect_ratio:new s.bg(b,n.u_aspect_ratio),u_fade_change:new s.bg(b,n.u_fade_change),u_label_plane_matrix:new s.bS(b,n.u_label_plane_matrix),u_coord_matrix:new s.bS(b,n.u_coord_matrix),u_is_text:new s.bQ(b,n.u_is_text),u_pitch_with_map:new s.bQ(b,n.u_pitch_with_map),u_is_along_line:new s.bQ(b,n.u_is_along_line),u_is_variable_anchor:new s.bQ(b,n.u_is_variable_anchor),u_texsize:new s.bV(b,n.u_texsize),u_texture:new s.bQ(b,n.u_texture),u_translation:new s.bV(b,n.u_translation),u_pitched_scale:new s.bg(b,n.u_pitched_scale)}),symbolSDF:(b,n)=>({u_is_size_zoom_constant:new s.bQ(b,n.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bQ(b,n.u_is_size_feature_constant),u_size_t:new s.bg(b,n.u_size_t),u_size:new s.bg(b,n.u_size),u_camera_to_center_distance:new s.bg(b,n.u_camera_to_center_distance),u_pitch:new s.bg(b,n.u_pitch),u_rotate_symbol:new s.bQ(b,n.u_rotate_symbol),u_aspect_ratio:new s.bg(b,n.u_aspect_ratio),u_fade_change:new s.bg(b,n.u_fade_change),u_label_plane_matrix:new s.bS(b,n.u_label_plane_matrix),u_coord_matrix:new s.bS(b,n.u_coord_matrix),u_is_text:new s.bQ(b,n.u_is_text),u_pitch_with_map:new s.bQ(b,n.u_pitch_with_map),u_is_along_line:new s.bQ(b,n.u_is_along_line),u_is_variable_anchor:new s.bQ(b,n.u_is_variable_anchor),u_texsize:new s.bV(b,n.u_texsize),u_texture:new s.bQ(b,n.u_texture),u_gamma_scale:new s.bg(b,n.u_gamma_scale),u_device_pixel_ratio:new s.bg(b,n.u_device_pixel_ratio),u_is_halo:new s.bQ(b,n.u_is_halo),u_translation:new s.bV(b,n.u_translation),u_pitched_scale:new s.bg(b,n.u_pitched_scale)}),symbolTextAndIcon:(b,n)=>({u_is_size_zoom_constant:new s.bQ(b,n.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bQ(b,n.u_is_size_feature_constant),u_size_t:new s.bg(b,n.u_size_t),u_size:new s.bg(b,n.u_size),u_camera_to_center_distance:new s.bg(b,n.u_camera_to_center_distance),u_pitch:new s.bg(b,n.u_pitch),u_rotate_symbol:new s.bQ(b,n.u_rotate_symbol),u_aspect_ratio:new s.bg(b,n.u_aspect_ratio),u_fade_change:new s.bg(b,n.u_fade_change),u_label_plane_matrix:new s.bS(b,n.u_label_plane_matrix),u_coord_matrix:new s.bS(b,n.u_coord_matrix),u_is_text:new s.bQ(b,n.u_is_text),u_pitch_with_map:new s.bQ(b,n.u_pitch_with_map),u_is_along_line:new s.bQ(b,n.u_is_along_line),u_is_variable_anchor:new s.bQ(b,n.u_is_variable_anchor),u_texsize:new s.bV(b,n.u_texsize),u_texsize_icon:new s.bV(b,n.u_texsize_icon),u_texture:new s.bQ(b,n.u_texture),u_texture_icon:new s.bQ(b,n.u_texture_icon),u_gamma_scale:new s.bg(b,n.u_gamma_scale),u_device_pixel_ratio:new s.bg(b,n.u_device_pixel_ratio),u_is_halo:new s.bQ(b,n.u_is_halo),u_translation:new s.bV(b,n.u_translation),u_pitched_scale:new s.bg(b,n.u_pitched_scale)}),background:(b,n)=>({u_opacity:new s.bg(b,n.u_opacity),u_color:new s.bR(b,n.u_color)}),backgroundPattern:(b,n)=>({u_opacity:new s.bg(b,n.u_opacity),u_image:new s.bQ(b,n.u_image),u_pattern_tl_a:new s.bV(b,n.u_pattern_tl_a),u_pattern_br_a:new s.bV(b,n.u_pattern_br_a),u_pattern_tl_b:new s.bV(b,n.u_pattern_tl_b),u_pattern_br_b:new s.bV(b,n.u_pattern_br_b),u_texsize:new s.bV(b,n.u_texsize),u_mix:new s.bg(b,n.u_mix),u_pattern_size_a:new s.bV(b,n.u_pattern_size_a),u_pattern_size_b:new s.bV(b,n.u_pattern_size_b),u_scale_a:new s.bg(b,n.u_scale_a),u_scale_b:new s.bg(b,n.u_scale_b),u_pixel_coord_upper:new s.bV(b,n.u_pixel_coord_upper),u_pixel_coord_lower:new s.bV(b,n.u_pixel_coord_lower),u_tile_units_to_pixels:new s.bg(b,n.u_tile_units_to_pixels)}),terrain:(b,n)=>({u_texture:new s.bQ(b,n.u_texture),u_ele_delta:new s.bg(b,n.u_ele_delta),u_fog_matrix:new s.bS(b,n.u_fog_matrix),u_fog_color:new s.bR(b,n.u_fog_color),u_fog_ground_blend:new s.bg(b,n.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.bg(b,n.u_fog_ground_blend_opacity),u_horizon_color:new s.bR(b,n.u_horizon_color),u_horizon_fog_blend:new s.bg(b,n.u_horizon_fog_blend),u_is_globe_mode:new s.bg(b,n.u_is_globe_mode)}),terrainDepth:(b,n)=>({u_ele_delta:new s.bg(b,n.u_ele_delta)}),terrainCoords:(b,n)=>({u_texture:new s.bQ(b,n.u_texture),u_terrain_coords_id:new s.bg(b,n.u_terrain_coords_id),u_ele_delta:new s.bg(b,n.u_ele_delta)}),projectionErrorMeasurement:(b,n)=>({u_input:new s.bg(b,n.u_input),u_output_expected:new s.bg(b,n.u_output_expected)}),atmosphere:(b,n)=>({u_sun_pos:new s.bU(b,n.u_sun_pos),u_atmosphere_blend:new s.bg(b,n.u_atmosphere_blend),u_globe_position:new s.bU(b,n.u_globe_position),u_globe_radius:new s.bg(b,n.u_globe_radius),u_inv_proj_matrix:new s.bS(b,n.u_inv_proj_matrix)}),sky:(b,n)=>({u_sky_color:new s.bR(b,n.u_sky_color),u_horizon_color:new s.bR(b,n.u_horizon_color),u_horizon:new s.bV(b,n.u_horizon),u_horizon_normal:new s.bV(b,n.u_horizon_normal),u_sky_horizon_blend:new s.bg(b,n.u_sky_horizon_blend),u_sky_blend:new s.bg(b,n.u_sky_blend)})};class Qo{constructor(n,u,g){this.context=n;const _=n.gl;this.buffer=_.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const _d={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class bd{constructor(n,u,g,_){this.length=u.length,this.attributes=g,this.itemSize=u.bytesPerElement,this.dynamicDraw=_,this.context=n;const x=n.gl;this.buffer=x.createBuffer(),n.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,u){for(let g=0;g<this.attributes.length;g++){const _=u.attributes[this.attributes[g].name];_!==void 0&&n.enableVertexAttribArray(_)}}setVertexAttribPointers(n,u,g){for(let _=0;_<this.attributes.length;_++){const x=this.attributes[_],E=u.attributes[x.name];E!==void 0&&n.vertexAttribPointer(E,x.components,n[_d[x.type]],!1,this.itemSize,x.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Nn{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class xd extends Nn{getDefault(){return s.bf.transparent}set(n){const u=this.current;(n.r!==u.r||n.g!==u.g||n.b!==u.b||n.a!==u.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class kf extends Nn{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class io extends Nn{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class eh extends Nn{getDefault(){return[!0,!0,!0,!0]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||n[2]!==u[2]||n[3]!==u[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class th extends Nn{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class Of extends Nn{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class om extends Nn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const u=this.current;(n.func!==u.func||n.ref!==u.ref||n.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class cc extends Nn{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||n[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class uc extends Nn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=n,this.dirty=!1}}class If extends Nn{getDefault(){return[0,1]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class zf extends Nn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=n,this.dirty=!1}}class Jo extends Nn{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class nh extends Nn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.BLEND):u.disable(u.BLEND),this.current=n,this.dirty=!1}}class rh extends Nn{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class wd extends Nn{getDefault(){return s.bf.transparent}set(n){const u=this.current;(n.r!==u.r||n.g!==u.g||n.b!==u.b||n.a!==u.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class hc extends Nn{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class ih extends Nn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=n,this.dirty=!1}}class nu extends Nn{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class Ia extends Nn{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class Rf extends Nn{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class Sd extends Nn{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class za extends Nn{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||n[2]!==u[2]||n[3]!==u[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class es extends Nn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class ra extends Nn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class xs extends Nn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class dc extends Nn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class fc extends Nn{getDefault(){return null}set(n){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class ah extends Nn{getDefault(){return null}set(n){var u;if(n===this.current&&!this.dirty)return;const g=this.gl;Ur(g)?g.bindVertexArray(n):(u=g.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(n),this.current=n,this.dirty=!1}}class pl extends Nn{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class ao extends Nn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class jf extends Nn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class ml extends Nn{constructor(n,u){super(n),this.context=n,this.parent=u}getDefault(){return null}}class _n extends ml{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class Td extends ml{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Ra extends ml{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,n),this.current=n,this.dirty=!1}}const oh="Framebuffer is not complete";class ja{constructor(n,u,g,_,x){this.context=n,this.width=u,this.height=g;const E=n.gl,I=this.framebuffer=E.createFramebuffer();if(this.colorAttachment=new _n(n,I),_)this.depthAttachment=x?new Ra(n,I):new Td(n,I);else if(x)throw new Error("Stencil cannot be set without depth");if(E.checkFramebufferStatus(E.FRAMEBUFFER)!==E.FRAMEBUFFER_COMPLETE)throw new Error(oh)}destroy(){const n=this.context.gl,u=this.colorAttachment.get();if(u&&n.deleteTexture(u),this.depthAttachment){const g=this.depthAttachment.get();g&&n.deleteRenderbuffer(g)}n.deleteFramebuffer(this.framebuffer)}}class sm{constructor(n){var u,g;if(this.gl=n,this.clearColor=new xd(this),this.clearDepth=new kf(this),this.clearStencil=new io(this),this.colorMask=new eh(this),this.depthMask=new th(this),this.stencilMask=new Of(this),this.stencilFunc=new om(this),this.stencilOp=new cc(this),this.stencilTest=new uc(this),this.depthRange=new If(this),this.depthTest=new zf(this),this.depthFunc=new Jo(this),this.blend=new nh(this),this.blendFunc=new rh(this),this.blendColor=new wd(this),this.blendEquation=new hc(this),this.cullFace=new ih(this),this.cullFaceSide=new nu(this),this.frontFace=new Ia(this),this.program=new Rf(this),this.activeTexture=new Sd(this),this.viewport=new za(this),this.bindFramebuffer=new es(this),this.bindRenderbuffer=new ra(this),this.bindTexture=new xs(this),this.bindVertexBuffer=new dc(this),this.bindElementBuffer=new fc(this),this.bindVertexArray=new ah(this),this.pixelStoreUnpack=new pl(this),this.pixelStoreUnpackPremultiplyAlpha=new ao(this),this.pixelStoreUnpackFlipY=new jf(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),Ur(n)){this.HALF_FLOAT=n.HALF_FLOAT;const _=n.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=n.RGBA16F)!==null&&u!==void 0?u:_?.RGBA16F_EXT,this.RGB16F=(g=n.RGB16F)!==null&&g!==void 0?g:_?.RGB16F_EXT,n.getExtension("EXT_color_buffer_float")}else{n.getExtension("EXT_color_buffer_half_float"),n.getExtension("OES_texture_half_float_linear");const _=n.getExtension("OES_texture_half_float");this.HALF_FLOAT=_?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,u){return new Qo(this,n,u)}createVertexBuffer(n,u,g){return new bd(this,n,u,g)}createRenderbuffer(n,u,g){const _=this.gl,x=_.createRenderbuffer();return this.bindRenderbuffer.set(x),_.renderbufferStorage(_.RENDERBUFFER,n,u,g),this.bindRenderbuffer.set(null),x}createFramebuffer(n,u,g,_){return new ja(this,n,u,g,_)}clear({color:n,depth:u,stencil:g}){const _=this.gl;let x=0;n&&(x|=_.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(x|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),g!==void 0&&(x|=_.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),_.clear(x)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){s.bH(n.blendFunction,Kn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}createVertexArray(){var n;return Ur(this.gl)?this.gl.createVertexArray():(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.createVertexArrayOES()}deleteVertexArray(n){var u;return Ur(this.gl)?this.gl.deleteVertexArray(n):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(n)}unbindVAO(){this.bindVertexArray.set(null)}}let pc;function ws(b,n,u,g,_){const x=b.context,E=b.transform,I=x.gl,z=b.useProgram("collisionBox"),U=[];let $=0,W=0;for(let pe=0;pe<g.length;pe++){const ve=g[pe],xe=n.getTile(ve).getBucket(u);if(!xe)continue;const be=_?xe.textCollisionBox:xe.iconCollisionBox,Ce=xe.collisionCircleArray;Ce.length>0&&(U.push({circleArray:Ce,circleOffset:W,coord:ve}),$+=Ce.length/4,W=$),be&&z.draw(x,I.LINES,on.disabled,vn.disabled,b.colorModeForRenderPass(),Mn.disabled,Jp(b.transform),b.style.map.terrain&&b.style.map.terrain.getTerrainData(ve),E.getProjectionData({overscaledTileID:ve,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),u.id,be.layoutVertexBuffer,be.indexBuffer,be.segments,null,b.transform.zoom,null,null,be.collisionVertexBuffer)}if(!_||!U.length)return;const Z=b.useProgram("collisionCircle"),ee=new s.c0;ee.resize(4*$),ee._trim();let oe=0;for(const pe of U)for(let ve=0;ve<pe.circleArray.length/4;ve++){const xe=4*ve,be=pe.circleArray[xe+0],Ce=pe.circleArray[xe+1],De=pe.circleArray[xe+2],we=pe.circleArray[xe+3];ee.emplace(oe++,be,Ce,De,we,0),ee.emplace(oe++,be,Ce,De,we,1),ee.emplace(oe++,be,Ce,De,we,2),ee.emplace(oe++,be,Ce,De,we,3)}(!pc||pc.length<2*$)&&(pc=(function(pe){const ve=2*pe,xe=new s.c2;xe.resize(ve),xe._trim();for(let be=0;be<ve;be++){const Ce=6*be;xe.uint16[Ce+0]=4*be+0,xe.uint16[Ce+1]=4*be+1,xe.uint16[Ce+2]=4*be+2,xe.uint16[Ce+3]=4*be+2,xe.uint16[Ce+4]=4*be+3,xe.uint16[Ce+5]=4*be+0}return xe})($));const he=x.createIndexBuffer(pc,!0),de=x.createVertexBuffer(ee,s.c1.members,!0);for(const pe of U){const ve=Eo(b.transform);Z.draw(x,I.TRIANGLES,on.disabled,vn.disabled,b.colorModeForRenderPass(),Mn.disabled,ve,b.style.map.terrain&&b.style.map.terrain.getTerrainData(pe.coord),null,u.id,de,he,s.aM.simpleSegment(0,2*pe.circleOffset,pe.circleArray.length,pe.circleArray.length/2),null,b.transform.zoom,null,null,null)}de.destroy(),he.destroy()}const Lf=s.ag(new Float32Array(16));function Md(b,n,u,g,_,x){const{horizontalAlign:E,verticalAlign:I}=s.aH(b);return new s.P((-(E-.5)*n/_+g[0])*x,(-(I-.5)*u/_+g[1])*x)}function ru(b,n,u,g,_,x){const E=n.tileAnchorPoint.add(new s.P(n.translation[0],n.translation[1]));if(n.pitchWithMap){let I=g.mult(x);u||(I=I.rotate(-_));const z=E.add(I);return yt(z.x,z.y,n.pitchedLabelPlaneMatrix,n.getElevation).point}if(u){const I=Go(n.tileAnchorPoint.x+1,n.tileAnchorPoint.y,n).point.sub(b),z=Math.atan(I.y/I.x)+(I.x<0?Math.PI:0);return b.add(g.rotate(z))}return b.add(g)}function sh(b,n,u,g,_,x,E,I,z,U,$,W){const Z=b.text.placedSymbolArray,ee=b.text.dynamicLayoutVertexArray,oe=b.icon.dynamicLayoutVertexArray,he={};ee.clear();for(let de=0;de<Z.length;de++){const pe=Z.get(de),ve=pe.hidden||!pe.crossTileID||b.allowVerticalPlacement&&!pe.placedOrientation?null:g[pe.crossTileID];if(ve){const xe=new s.P(pe.anchorX,pe.anchorY),be={getElevation:W,width:_.width,height:_.height,pitchedLabelPlaneMatrix:x,pitchWithMap:u,transform:_,tileAnchorPoint:xe,translation:U,unwrappedTileID:$},Ce=u?pn(xe.x,xe.y,be):Go(xe.x,xe.y,be),De=To(_.cameraToCenterDistance,Ce.signedDistanceFromCamera);let we=s.ap(b.textSizeData,I,pe)*De/s.aB;u&&(we*=b.tilePixelRatio/E);const{width:Re,height:Xe,anchor:He,textOffset:We,textBoxScale:Ye}=ve,wt=Md(He,Re,Xe,We,Ye,we),St=_.getPitchedTextCorrection(xe.x+U[0],xe.y+U[1],$),dt=ru(Ce.point,be,n,wt,-_.bearingInRadians,St),Vt=b.allowVerticalPlacement&&pe.placedOrientation===s.ao.vertical?Math.PI/2:0;for(let un=0;un<pe.numGlyphs;un++)s.av(ee,dt,Vt);z&&pe.associatedIconIndex>=0&&(he[pe.associatedIconIndex]={shiftedAnchor:dt,angle:Vt})}else fa(pe.numGlyphs,ee)}if(z){oe.clear();const de=b.icon.placedSymbolArray;for(let pe=0;pe<de.length;pe++){const ve=de.get(pe);if(ve.hidden)fa(ve.numGlyphs,oe);else{const xe=he[pe];if(xe)for(let be=0;be<ve.numGlyphs;be++)s.av(oe,xe.shiftedAnchor,xe.angle);else fa(ve.numGlyphs,oe)}}b.icon.dynamicLayoutVertexBuffer.updateData(oe)}b.text.dynamicLayoutVertexBuffer.updateData(ee)}function ia(b,n,u){return u.iconsInText&&n?"symbolTextAndIcon":b?"symbolSDF":"symbolIcon"}function Ss(b,n,u,g,_,x,E,I,z,U,$,W,Z){const ee=b.context,oe=ee.gl,he=b.transform,de=I==="map",pe=z==="map",ve=I!=="viewport"&&u.layout.get("symbol-placement")!=="point",xe=de&&!pe&&!ve,be=!u.layout.get("symbol-sort-key").isConstant();let Ce=!1;const De=b.getDepthModeForSublayer(0,on.ReadOnly),we=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Re=[],Xe=he.getCircleRadiusCorrection();for(const He of g){const We=n.getTile(He),Ye=We.getBucket(u);if(!Ye)continue;const wt=_?Ye.text:Ye.icon;if(!wt||!wt.segments.get().length||!wt.hasVisibleVertices)continue;const St=wt.programConfigurations.get(u.id),dt=_||Ye.sdfIcons,Vt=_?Ye.textSizeData:Ye.iconSizeData,un=pe||he.pitch!==0,jn=b.useProgram(ia(dt,_,Ye),St),Wn=s.an(Vt,he.zoom),Yn=b.style.map.terrain&&b.style.map.terrain.getTerrainData(He);let mr,lr,Cn,Sr,Di=[0,0],$r=null;if(_)lr=We.glyphAtlasTexture,Cn=oe.LINEAR,mr=We.glyphAtlasTexture.size,Ye.iconsInText&&(Di=We.imageAtlasTexture.size,$r=We.imageAtlasTexture,Sr=un||b.options.rotating||b.options.zooming||Vt.kind==="composite"||Vt.kind==="camera"?oe.LINEAR:oe.NEAREST);else{const Dr=u.layout.get("icon-size").constantOr(0)!==1||Ye.iconsNeedLinear;lr=We.imageAtlasTexture,Cn=dt||b.options.rotating||b.options.zooming||Dr||un?oe.LINEAR:oe.NEAREST,mr=We.imageAtlasTexture.size}const Vr=s.aC(We,1,b.transform.zoom),qi=ir(de,b.transform,Vr),Is=s.L();s.aq(Is,qi);const $a=ni(pe,de,b.transform,Vr),zs=s.aD(he,We,x,E),kl=he.getProjectionData({overscaledTileID:He,applyGlobeMatrix:!Z,applyTerrainMatrix:!0}),hu=we&&Ye.hasTextData(),Mc=u.layout.get("icon-text-fit")!=="none"&&hu&&Ye.hasIconData();if(ve){const Dr=b.style.map.terrain?(_a,ki)=>b.style.map.terrain.getElevation(He,_a,ki):null,ai=u.layout.get("text-rotation-alignment")==="map";ri(Ye,b,_,qi,Is,pe,U,ai,He.toUnwrapped(),he.width,he.height,zs,Dr)}const ss=_&&we||Mc,Va=ve||ss?Lf:pe?qi:b.transform.clipSpaceToPixelsMatrix,co=dt&&u.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ro;Ro=dt?Ye.iconsInText?im(Vt.kind,Wn,xe,pe,ve,ss,b,Va,$a,zs,mr,Di,Xe):Pf(Vt.kind,Wn,xe,pe,ve,ss,b,Va,$a,zs,_,mr,0,Xe):rm(Vt.kind,Wn,xe,pe,ve,ss,b,Va,$a,zs,_,mr,Xe);const va={program:jn,buffers:wt,uniformValues:Ro,projectionData:kl,atlasTexture:lr,atlasTextureIcon:$r,atlasInterpolation:Cn,atlasInterpolationIcon:Sr,isSDF:dt,hasHalo:co};if(be&&Ye.canOverlap){Ce=!0;const Dr=wt.segments.get();for(const ai of Dr)Re.push({segments:new s.aM([ai]),sortKey:ai.sortKey,state:va,terrainData:Yn})}else Re.push({segments:wt.segments,sortKey:0,state:va,terrainData:Yn})}Ce&&Re.sort(((He,We)=>He.sortKey-We.sortKey));for(const He of Re){const We=He.state;if(ee.activeTexture.set(oe.TEXTURE0),We.atlasTexture.bind(We.atlasInterpolation,oe.CLAMP_TO_EDGE),We.atlasTextureIcon&&(ee.activeTexture.set(oe.TEXTURE1),We.atlasTextureIcon&&We.atlasTextureIcon.bind(We.atlasInterpolationIcon,oe.CLAMP_TO_EDGE)),We.isSDF){const Ye=We.uniformValues;We.hasHalo&&(Ye.u_is_halo=1,gl(We.buffers,He.segments,u,b,We.program,De,$,W,Ye,We.projectionData,He.terrainData)),Ye.u_is_halo=0}gl(We.buffers,He.segments,u,b,We.program,De,$,W,We.uniformValues,We.projectionData,He.terrainData)}}function gl(b,n,u,g,_,x,E,I,z,U,$){const W=g.context;_.draw(W,W.gl.TRIANGLES,x,E,I,Mn.backCCW,z,$,U,u.id,b.layoutVertexBuffer,b.indexBuffer,n,u.paint,g.transform.zoom,b.programConfigurations.get(u.id),b.dynamicLayoutVertexBuffer,b.opacityVertexBuffer)}function mc(b,n,u,g,_){const x=b.context,E=x.gl,I=vn.disabled,z=new Kn([E.ONE,E.ONE],s.bf.transparent,[!0,!0,!0,!0]),U=n.getBucket(u);if(!U)return;const $=g.key;let W=u.heatmapFbos.get($);W||(W=$i(x,n.tileSize,n.tileSize),u.heatmapFbos.set($,W)),x.bindFramebuffer.set(W.framebuffer),x.viewport.set([0,0,n.tileSize,n.tileSize]),x.clear({color:s.bf.transparent});const Z=U.programConfigurations.get(u.id),ee=b.useProgram("heatmap",Z,!_),oe=b.transform.getProjectionData({overscaledTileID:n.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),he=b.style.map.terrain.getTerrainData(g);ee.draw(x,E.TRIANGLES,on.disabled,I,z,Mn.disabled,Mf(n,b.transform.zoom,u.paint.get("heatmap-intensity"),1),he,oe,u.id,U.layoutVertexBuffer,U.indexBuffer,U.segments,u.paint,b.transform.zoom,Z)}function yl(b,n,u,g,_){const x=b.context,E=x.gl,I=b.transform;x.setColorMode(b.colorModeForRenderPass());const z=Ei(x,n),U=u.key,$=n.heatmapFbos.get(U);if(!$)return;x.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,$.colorAttachment.get()),x.activeTexture.set(E.TEXTURE1),z.bind(E.LINEAR,E.CLAMP_TO_EDGE);const W=I.getProjectionData({overscaledTileID:u,applyTerrainMatrix:_,applyGlobeMatrix:!g});b.useProgram("heatmapTexture").draw(x,E.TRIANGLES,on.disabled,vn.disabled,b.colorModeForRenderPass(),Mn.disabled,tm(b,n,0,1),null,W,n.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments,n.paint,I.zoom),$.destroy(),n.heatmapFbos.delete(U)}function $i(b,n,u){var g,_;const x=b.gl,E=x.createTexture();x.bindTexture(x.TEXTURE_2D,E),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.LINEAR),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.LINEAR);const I=(g=b.HALF_FLOAT)!==null&&g!==void 0?g:x.UNSIGNED_BYTE,z=(_=b.RGBA16F)!==null&&_!==void 0?_:x.RGBA;x.texImage2D(x.TEXTURE_2D,0,z,n,u,0,x.RGBA,I,null);const U=b.createFramebuffer(n,u,!1,!1);return U.colorAttachment.set(E),U}function Ei(b,n){return n.colorRampTexture||(n.colorRampTexture=new s.T(b,n.colorRamp,b.gl.RGBA)),n.colorRampTexture}function Ao(b,n,u,g,_,x,E,I){let z=256;if(_.stepInterpolant){const U=n.getSource().maxzoom,$=E.canonical.z===U?Math.ceil(1<<b.transform.maxZoom-E.canonical.z):1;z=s.ah(s.c4(x.maxLineLength/s.$*1024*$),256,u.maxTextureSize)}return I.gradient=s.c5({expression:_.gradientExpression(),evaluationKey:"lineProgress",resolution:z,image:I.gradient||void 0,clips:x.lineClipsArray}),I.texture?I.texture.update(I.gradient):I.texture=new s.T(u,I.gradient,g.RGBA),I.version=_.gradientVersion,I.texture}function ts(b,n,u,g,_){b.activeTexture.set(n.TEXTURE0),u.imageAtlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE),g.updatePaintBuffers(_)}function ma(b,n,u,g,_,x){(_||b.lineAtlas.dirty)&&(n.activeTexture.set(u.TEXTURE0),b.lineAtlas.bind(n)),g.updatePaintBuffers(x)}function Ts(b,n,u,g,_,x,E){const I=x.gradients[_.id];let z=I.texture;_.gradientVersion!==I.version&&(z=Ao(b,n,u,g,_,x,E,I)),u.activeTexture.set(g.TEXTURE0),z.bind(_.stepInterpolant?g.NEAREST:g.LINEAR,g.CLAMP_TO_EDGE)}function Nf(b,n,u,g,_,x,E,I,z){const U=x.gradients[_.id];let $=U.texture;_.gradientVersion!==U.version&&($=Ao(b,n,u,g,_,x,E,U)),u.activeTexture.set(g.TEXTURE0),$.bind(_.stepInterpolant?g.NEAREST:g.LINEAR,g.CLAMP_TO_EDGE),u.activeTexture.set(g.TEXTURE1),b.lineAtlas.bind(u),I.updatePaintBuffers(z)}function gc(b,n,u,g,_){if(!u||!g||!g.imageAtlas)return;const x=g.imageAtlas.patternPositions;let E=x[u.to.toString()],I=x[u.from.toString()];if(!E&&I&&(E=I),!I&&E&&(I=E),!E||!I){const z=_.getPaintProperty(n);E=x[z],I=x[z]}E&&I&&b.setConstantPatternPositions(E,I)}function iu(b,n,u,g,_,x,E,I){const z=b.context.gl,U="fill-pattern",$=u.paint.get(U),W=$&&$.constantOr(1),Z=u.getCrossfadeParameters();let ee,oe,he,de,pe;const ve=b.transform,xe=u.paint.get("fill-translate"),be=u.paint.get("fill-translate-anchor");E?(oe=W&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ee=z.LINES):(oe=W?"fillPattern":"fill",ee=z.TRIANGLES);const Ce=$.constantOr(null);for(const De of g){const we=n.getTile(De);if(W&&!we.patternsLoaded())continue;const Re=we.getBucket(u);if(!Re)continue;const Xe=Re.programConfigurations.get(u.id),He=b.useProgram(oe,Xe),We=b.style.map.terrain&&b.style.map.terrain.getTerrainData(De);W&&(b.context.activeTexture.set(z.TEXTURE0),we.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),Xe.updatePaintBuffers(Z)),gc(Xe,U,Ce,we,u);const Ye=ve.getProjectionData({overscaledTileID:De,applyGlobeMatrix:!I,applyTerrainMatrix:!0}),wt=s.aD(ve,we,xe,be);if(E){de=Re.indexBuffer2,pe=Re.segments2;const dt=[z.drawingBufferWidth,z.drawingBufferHeight];he=oe==="fillOutlinePattern"&&W?Qp(b,Z,we,dt,wt):Jc(dt,wt)}else de=Re.indexBuffer,pe=Re.segments,he=W?lc(b,Z,we,wt):{u_fill_translate:wt};const St=b.stencilModeForClipping(De);He.draw(b.context,ee,_,St,x,Mn.backCCW,he,We,Ye,u.id,Re.layoutVertexBuffer,de,pe,u.paint,b.transform.zoom,Xe)}}function lh(b,n,u,g,_,x,E,I){const z=b.context,U=z.gl,$="fill-extrusion-pattern",W=u.paint.get($),Z=W.constantOr(1),ee=u.getCrossfadeParameters(),oe=u.paint.get("fill-extrusion-opacity"),he=W.constantOr(null),de=b.transform;for(const pe of g){const ve=n.getTile(pe),xe=ve.getBucket(u);if(!xe)continue;const be=b.style.map.terrain&&b.style.map.terrain.getTerrainData(pe),Ce=xe.programConfigurations.get(u.id),De=b.useProgram(Z?"fillExtrusionPattern":"fillExtrusion",Ce);Z&&(b.context.activeTexture.set(U.TEXTURE0),ve.imageAtlasTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),Ce.updatePaintBuffers(ee));const we=de.getProjectionData({overscaledTileID:pe,applyGlobeMatrix:!I,applyTerrainMatrix:!0});gc(Ce,$,he,ve,u);const Re=s.aD(de,ve,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Xe=u.paint.get("fill-extrusion-vertical-gradient"),He=Z?Tf(b,Xe,oe,Re,pe,ee,ve):Qc(b,Xe,oe,Re);De.draw(z,z.gl.TRIANGLES,_,x,E,Mn.backCCW,He,be,we,u.id,xe.layoutVertexBuffer,xe.indexBuffer,xe.segments,u.paint,b.transform.zoom,Ce,b.style.map.terrain&&xe.centroidVertexBuffer)}}function ii(b,n,u,g,_,x,E,I,z){var U;const $=b.style.projection,W=b.context,Z=b.transform,ee=W.gl,oe=[`#define NUM_ILLUMINATION_SOURCES ${u.paint.get("hillshade-highlight-color").values.length}`],he=b.useProgram("hillshade",null,!1,oe),de=!b.options.moving;for(const pe of g){const ve=n.getTile(pe),xe=ve.fbo;if(!xe)continue;const be=$.getMeshFromTileID(W,pe.canonical,I,!0,"raster"),Ce=(U=b.style.map.terrain)===null||U===void 0?void 0:U.getTerrainData(pe);W.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,xe.colorAttachment.get());const De=Z.getProjectionData({overscaledTileID:pe,aligned:de,applyGlobeMatrix:!z,applyTerrainMatrix:!0});he.draw(W,ee.TRIANGLES,x,_[pe.overscaledZ],E,Mn.backCCW,Cf(b,ve,u),Ce,De,u.id,be.vertexBuffer,be.indexBuffer,be.segments)}}function Jn(b,n,u,g,_,x,E,I,z){var U;const $=b.style.projection,W=b.context,Z=b.transform,ee=W.gl,oe=b.useProgram("colorRelief"),he=!b.options.moving;let de=!0,pe=0;for(const ve of g){const xe=n.getTile(ve),be=xe.dem;if(de){const He=ee.getParameter(ee.MAX_TEXTURE_SIZE),{elevationTexture:We,colorTexture:Ye}=u.getColorRampTextures(W,He,be.getUnpackVector());W.activeTexture.set(ee.TEXTURE1),We.bind(ee.NEAREST,ee.CLAMP_TO_EDGE),W.activeTexture.set(ee.TEXTURE4),Ye.bind(ee.LINEAR,ee.CLAMP_TO_EDGE),de=!1,pe=We.size[0]}if(!be||!be.data)continue;const Ce=be.stride,De=be.getPixels();if(W.activeTexture.set(ee.TEXTURE0),W.pixelStoreUnpackPremultiplyAlpha.set(!1),xe.demTexture=xe.demTexture||b.getTileTexture(Ce),xe.demTexture){const He=xe.demTexture;He.update(De,{premultiply:!1}),He.bind(ee.LINEAR,ee.CLAMP_TO_EDGE)}else xe.demTexture=new s.T(W,De,ee.RGBA,{premultiply:!1}),xe.demTexture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE);const we=$.getMeshFromTileID(W,ve.canonical,I,!0,"raster"),Re=(U=b.style.map.terrain)===null||U===void 0?void 0:U.getTerrainData(ve),Xe=Z.getProjectionData({overscaledTileID:ve,aligned:he,applyGlobeMatrix:!z,applyTerrainMatrix:!0});oe.draw(W,ee.TRIANGLES,x,_[ve.overscaledZ],E,Mn.backCCW,tu(u,xe.dem,pe),Re,Xe,u.id,we.vertexBuffer,we.indexBuffer,we.segments)}}const kn=[new s.P(0,0),new s.P(s.$,0),new s.P(s.$,s.$),new s.P(0,s.$)];function Po(b,n,u,g,_,x,E,I,z=!1,U=!1){const $=g[g.length-1].overscaledZ,W=b.context,Z=W.gl,ee=b.useProgram("raster"),oe=b.transform,he=b.style.projection,de=b.colorModeForRenderPass(),pe=!b.options.moving,ve=u.paint.get("raster-opacity"),xe=u.paint.get("raster-resampling"),be=u.paint.get("raster-fade-duration"),Ce=!!b.style.map.terrain;for(const De of g){const we=b.getDepthModeForSublayer(De.overscaledZ-$,ve===1?on.ReadWrite:on.ReadOnly,Z.LESS),Re=n.getTile(De),Xe=xe==="nearest"?Z.NEAREST:Z.LINEAR;W.activeTexture.set(Z.TEXTURE0),Re.texture.bind(Xe,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),W.activeTexture.set(Z.TEXTURE1);const{parentTile:He,parentScaleBy:We,parentTopLeft:Ye,fadeValues:wt}=La(Re,n,be,Ce);Re.fadeOpacity=wt.tileOpacity,He?(He.fadeOpacity=wt.parentTileOpacity,He.texture.bind(Xe,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST)):Re.texture.bind(Xe,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),Re.texture.useMipmap&&W.extTextureFilterAnisotropic&&b.transform.pitch>20&&Z.texParameterf(Z.TEXTURE_2D,W.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,W.extTextureFilterAnisotropicMax);const St=b.style.map.terrain&&b.style.map.terrain.getTerrainData(De),dt=oe.getProjectionData({overscaledTileID:De,aligned:pe,applyGlobeMatrix:!U,applyTerrainMatrix:!0}),Vt=Ju(Ye,We,wt.fadeMix,u,I),un=he.getMeshFromTileID(W,De.canonical,x,E,"raster");ee.draw(W,Z.TRIANGLES,we,_?_[De.overscaledZ]:vn.disabled,de,z?Mn.frontCCW:Mn.backCCW,Vt,St,dt,u.id,un.vertexBuffer,un.indexBuffer,un.segments)}}function La(b,n,u,g){const _={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(u===0||g)return _;if(b.fadingParentID){const x=n._getLoadedTile(b.fadingParentID);if(!x)return _;const E=Math.pow(2,x.tileID.overscaledZ-b.tileID.overscaledZ),I=[b.tileID.canonical.x*E%1,b.tileID.canonical.y*E%1],z=(function(U,$,W){const Z=R.now(),ee=(Z-$.timeAdded)/W,oe=U.fadingDirection===ze.Incoming,he=s.ah((Z-U.timeAdded)/W,0,1),de=s.ah(1-ee,0,1),pe=oe?he:de;return{tileOpacity:pe,parentTileOpacity:oe?de:he,fadeMix:{opacity:1,mix:1-pe}}})(b,x,u);return{parentTile:x,parentScaleBy:E,parentTopLeft:I,fadeValues:z}}if(b.selfFading){const x=(function(E,I){const z=R.now(),U=s.ah((z-E.timeAdded)/I,0,1);return{tileOpacity:U,fadeMix:{opacity:U,mix:0}}})(b,u);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:x}}return _}const Pr=new s.bf(1,0,0,1),ga=new s.bf(0,1,0,1),Na=new s.bf(0,0,1,1),Cd=new s.bf(1,0,1,1),Ms=new s.bf(0,1,1,1);function Cs(b,n,u,g){ns(b,0,n+u/2,b.transform.width,u,g)}function Es(b,n,u,g){ns(b,n-u/2,0,u,b.transform.height,g)}function ns(b,n,u,g,_,x){const E=b.context,I=E.gl;I.enable(I.SCISSOR_TEST),I.scissor(n*b.pixelRatio,u*b.pixelRatio,g*b.pixelRatio,_*b.pixelRatio),E.clear({color:x}),I.disable(I.SCISSOR_TEST)}function yc(b,n,u){const g=b.context,_=g.gl,x=b.useProgram("debug"),E=on.disabled,I=vn.disabled,z=b.colorModeForRenderPass(),U="$debug",$=b.style.map.terrain&&b.style.map.terrain.getTerrainData(u);g.activeTexture.set(_.TEXTURE0);const W=n.getTileByID(u.key).latestRawTileData,Z=Math.floor((W&&W.byteLength||0)/1024),ee=n.getTile(u).tileSize,oe=512/Math.min(ee,512)*(u.overscaledZ/b.transform.zoom)*.5;let he=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(he+=` => ${u.overscaledZ}`),(function(pe,ve){pe.initDebugOverlayCanvas();const xe=pe.debugOverlayCanvas,be=pe.context.gl,Ce=pe.debugOverlayCanvas.getContext("2d");Ce.clearRect(0,0,xe.width,xe.height),Ce.shadowColor="white",Ce.shadowBlur=2,Ce.lineWidth=1.5,Ce.strokeStyle="white",Ce.textBaseline="top",Ce.font="bold 36px Open Sans, sans-serif",Ce.fillText(ve,5,5),Ce.strokeText(ve,5,5),pe.debugOverlayTexture.update(xe),pe.debugOverlayTexture.bind(be.LINEAR,be.CLAMP_TO_EDGE)})(b,`${he} ${Z}kB`);const de=b.transform.getProjectionData({overscaledTileID:u,applyGlobeMatrix:!0,applyTerrainMatrix:!0});x.draw(g,_.TRIANGLES,E,I,Kn.alphaBlended,Mn.disabled,em(s.bf.transparent,oe),null,de,U,b.debugBuffer,b.quadTriangleIndexBuffer,b.debugSegments),x.draw(g,_.LINE_STRIP,E,I,z,Mn.disabled,em(s.bf.red),$,de,U,b.debugBuffer,b.tileBorderIndexBuffer,b.debugSegments)}function rs(b,n,u,g){const{isRenderingGlobe:_}=g,x=b.context,E=x.gl,I=b.transform,z=b.colorModeForRenderPass(),U=b.getDepthModeFor3D(),$=b.useProgram("terrain");x.bindFramebuffer.set(null),x.viewport.set([0,0,b.width,b.height]);for(const W of u){const Z=n.getTerrainMesh(W.tileID),ee=b.renderToTexture.getTexture(W),oe=n.getTerrainData(W.tileID);x.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,ee.texture);const he=n.getMeshFrameDelta(I.zoom),de=I.calculateFogMatrix(W.tileID.toUnwrapped()),pe=wf(he,de,b.style.sky,I.pitch,_),ve=I.getProjectionData({overscaledTileID:W.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});$.draw(x,E.TRIANGLES,U,vn.disabled,z,Mn.backCCW,pe,oe,ve,"terrain",Z.vertexBuffer,Z.indexBuffer,Z.segments)}}function Do(b,n){if(!n.mesh){const u=new s.aL;u.emplaceBack(-1,-1),u.emplaceBack(1,-1),u.emplaceBack(1,1),u.emplaceBack(-1,1);const g=new s.aN;g.emplaceBack(0,1,2),g.emplaceBack(0,2,3),n.mesh=new ll(b.createVertexBuffer(u,ea.members),b.createIndexBuffer(g),s.aM.simpleSegment(0,0,u.length,g.length))}return n.mesh}class As{constructor(n,u){this.context=new sm(n),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=$t.maxUnderzooming+$t.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Yo}resize(n,u,g){if(this.width=Math.floor(n*g),this.height=Math.floor(u*g),this.pixelRatio=g,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style._order)this.style._layers[_].resize()}setup(){const n=this.context,u=new s.aL;u.emplaceBack(0,0),u.emplaceBack(s.$,0),u.emplaceBack(0,s.$),u.emplaceBack(s.$,s.$),this.tileExtentBuffer=n.createVertexBuffer(u,ea.members),this.tileExtentSegments=s.aM.simpleSegment(0,0,4,2);const g=new s.aL;g.emplaceBack(0,0),g.emplaceBack(s.$,0),g.emplaceBack(0,s.$),g.emplaceBack(s.$,s.$),this.debugBuffer=n.createVertexBuffer(g,ea.members),this.debugSegments=s.aM.simpleSegment(0,0,4,5);const _=new s.c7;_.emplaceBack(0,0,0,0),_.emplaceBack(s.$,0,s.$,0),_.emplaceBack(0,s.$,0,s.$),_.emplaceBack(s.$,s.$,s.$,s.$),this.rasterBoundsBuffer=n.createVertexBuffer(_,Rg.members),this.rasterBoundsSegments=s.aM.simpleSegment(0,0,4,2);const x=new s.aL;x.emplaceBack(0,0),x.emplaceBack(s.$,0),x.emplaceBack(0,s.$),x.emplaceBack(s.$,s.$),this.rasterBoundsBufferPosOnly=n.createVertexBuffer(x,ea.members),this.rasterBoundsSegmentsPosOnly=s.aM.simpleSegment(0,0,4,5);const E=new s.aL;E.emplaceBack(0,0),E.emplaceBack(1,0),E.emplaceBack(0,1),E.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(E,ea.members),this.viewportSegments=s.aM.simpleSegment(0,0,4,2);const I=new s.c8;I.emplaceBack(0),I.emplaceBack(1),I.emplaceBack(3),I.emplaceBack(2),I.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(I);const z=new s.aN;z.emplaceBack(1,0,2),z.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(z);const U=this.context.gl;this.stencilClearMode=new vn({func:U.ALWAYS,mask:0},0,255,U.ZERO,U.ZERO,U.ZERO),this.tileExtentMesh=new ll(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const n=this.context,u=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const g=s.L();s.bZ(g,0,this.width,this.height,0,0,1),s.N(g,g,[u.drawingBufferWidth,u.drawingBufferHeight,0]);const _={mainMatrix:g,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:g};this.useProgram("clippingMask",null,!0).draw(n,u.TRIANGLES,on.disabled,this.stencilClearMode,Kn.disabled,Mn.disabled,null,null,_,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,u,g){if(this.currentStencilSource===n.source||!n.isTileClipped()||!u||!u.length)return;this.currentStencilSource=n.source,this.nextStencilID+u.length>256&&this.clearStencil();const _=this.context;_.setColorMode(Kn.disabled),_.setDepthMode(on.disabled);const x={};for(const E of u)x[E.key]=this.nextStencilID++;this._renderTileMasks(x,u,g,!0),this._renderTileMasks(x,u,g,!1),this._tileClippingMaskIDs=x}_renderTileMasks(n,u,g,_){const x=this.context,E=x.gl,I=this.style.projection,z=this.transform,U=this.useProgram("clippingMask");for(const $ of u){const W=n[$.key],Z=this.style.map.terrain&&this.style.map.terrain.getTerrainData($),ee=I.getMeshFromTileID(this.context,$.canonical,_,!0,"stencil"),oe=z.getProjectionData({overscaledTileID:$,applyGlobeMatrix:!g,applyTerrainMatrix:!0});U.draw(x,E.TRIANGLES,on.disabled,new vn({func:E.ALWAYS,mask:0},W,255,E.KEEP,E.KEEP,E.REPLACE),Kn.disabled,g?Mn.disabled:Mn.backCCW,null,Z,oe,"$clipping",ee.vertexBuffer,ee.indexBuffer,ee.segments)}}_renderTilesDepthBuffer(){const n=this.context,u=n.gl,g=this.style.projection,_=this.transform,x=this.useProgram("depth"),E=this.getDepthModeFor3D(),I=wn(_,{tileSize:_.tileSize});for(const z of I){const U=this.style.map.terrain&&this.style.map.terrain.getTerrainData(z),$=g.getMeshFromTileID(this.context,z.canonical,!0,!0,"raster"),W=_.getProjectionData({overscaledTileID:z,applyGlobeMatrix:!0,applyTerrainMatrix:!0});x.draw(n,u.TRIANGLES,E,vn.disabled,Kn.disabled,Mn.backCCW,null,U,W,"$clipping",$.vertexBuffer,$.indexBuffer,$.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,u=this.context.gl;return new vn({func:u.NOTEQUAL,mask:255},n,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(n){const u=this.context.gl;return new vn({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,u.KEEP,u.KEEP,u.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(n){const u=this.context.gl,g=n.sort(((E,I)=>I.overscaledZ-E.overscaledZ)),_=g[g.length-1].overscaledZ,x=g[0].overscaledZ-_+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const E={};for(let I=0;I<x;I++)E[I+_]=new vn({func:u.GEQUAL,mask:255},I+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=x,[E,g]}return[{[_]:vn.disabled},g]}stencilConfigForOverlapTwoPass(n){const u=this.context.gl,g=n.sort(((E,I)=>I.overscaledZ-E.overscaledZ)),_=g[g.length-1].overscaledZ,x=g[0].overscaledZ-_+1;if(this.clearStencil(),x>1){const E={},I={};for(let z=0;z<x;z++)E[z+_]=new vn({func:u.GREATER,mask:255},x+1+z,255,u.KEEP,u.KEEP,u.REPLACE),I[z+_]=new vn({func:u.GREATER,mask:255},1+z,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID=2*x+1,[E,I,g]}return this.nextStencilID=3,[{[_]:new vn({func:u.GREATER,mask:255},2,255,u.KEEP,u.KEEP,u.REPLACE)},{[_]:new vn({func:u.GREATER,mask:255},1,255,u.KEEP,u.KEEP,u.REPLACE)},g]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new Kn([n.CONSTANT_COLOR,n.ONE],new s.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Kn.unblended:Kn.alphaBlended}getDepthModeForSublayer(n,u,g){if(!this.opaquePassEnabledForLayer())return on.disabled;const _=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new on(g||this.context.gl.LEQUAL,u,[_,_])}getDepthModeFor3D(){return new on(this.context.gl.LEQUAL,on.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,u){var g,_;this.style=n,this.options=u,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(R.now()),this.imageManager.beginFrame();const x=this.style._order,E=this.style.sourceCaches,I={},z={},U={},$={isRenderingToTexture:!1,isRenderingGlobe:((g=n.projection)===null||g===void 0?void 0:g.transitionState)>0};for(const Z in E){const ee=E[Z];ee.used&&ee.prepare(this.context),I[Z]=ee.getVisibleCoordinates(!1),z[Z]=I[Z].slice().reverse(),U[Z]=ee.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Z=0;Z<x.length;Z++)if(this.style._layers[x[Z]].is3D()){this.opaquePassCutoff=Z;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Z of x){const ee=this.style._layers[Z];if(!ee.hasOffscreenPass()||ee.isHidden(this.transform.zoom))continue;const oe=z[ee.source];(ee.type==="custom"||oe.length)&&this.renderLayer(this,E[ee.source],ee,oe,$)}if((_=this.style.projection)===null||_===void 0||_.updateGPUdependent({context:this.context,useProgram:Z=>this.useProgram(Z)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?s.bf.black:s.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(Z,ee){const oe=Z.context,he=oe.gl,de=((De,we,Re)=>{const Xe=Math.cos(we.rollInRadians),He=Math.sin(we.rollInRadians),We=$e(we),Ye=we.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:De.properties.get("sky-color"),u_horizon_color:De.properties.get("horizon-color"),u_horizon:[(we.width/2-We*He)*Re,(we.height/2+We*Xe)*Re],u_horizon_normal:[-He,Xe],u_sky_horizon_blend:De.properties.get("sky-horizon-blend")*we.height/2*Re,u_sky_blend:Ye}})(ee,Z.style.map.transform,Z.pixelRatio),pe=new on(he.LEQUAL,on.ReadWrite,[0,1]),ve=vn.disabled,xe=Z.colorModeForRenderPass(),be=Z.useProgram("sky"),Ce=Do(oe,ee);be.draw(oe,he.TRIANGLES,pe,ve,xe,Mn.disabled,de,null,void 0,"sky",Ce.vertexBuffer,Ce.indexBuffer,Ce.segments)})(this,this.style.sky),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=x.length-1;this.currentLayer>=0;this.currentLayer--){const Z=this.style._layers[x[this.currentLayer]],ee=E[Z.source],oe=I[Z.source];this._renderTileClippingMasks(Z,oe,!1),this.renderLayer(this,ee,Z,oe,$)}this.renderPass="translucent";let W=!1;for(this.currentLayer=0;this.currentLayer<x.length;this.currentLayer++){const Z=this.style._layers[x[this.currentLayer]],ee=E[Z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Z,$))continue;this.opaquePassEnabledForLayer()||W||(W=!0,$.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const oe=(Z.type==="symbol"?U:z)[Z.source];this._renderTileClippingMasks(Z,I[Z.source],!!this.renderToTexture),this.renderLayer(this,ee,Z,oe,$)}if($.isRenderingGlobe&&(function(Z,ee,oe){const he=Z.context,de=he.gl,pe=Z.useProgram("atmosphere"),ve=new on(de.LEQUAL,on.ReadOnly,[0,1]),xe=Z.transform,be=(function(Ye,wt){const St=Ye.properties.get("position"),dt=[-St.x,-St.y,-St.z],Vt=s.ag(new Float64Array(16));return Ye.properties.get("anchor")==="map"&&(s.b6(Vt,Vt,wt.rollInRadians),s.b7(Vt,Vt,-wt.pitchInRadians),s.b6(Vt,Vt,wt.bearingInRadians),s.b7(Vt,Vt,wt.center.lat*Math.PI/180),s.bz(Vt,Vt,-wt.center.lng*Math.PI/180)),s.c6(dt,dt,Vt),dt})(oe,Z.transform),Ce=xe.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),De=ee.properties.get("atmosphere-blend")*Ce.projectionTransition;if(De===0)return;const we=oc(xe.worldSize,xe.center.lat),Re=xe.inverseProjectionMatrix,Xe=new Float64Array(4);Xe[3]=1,s.aw(Xe,Xe,xe.modelViewProjectionMatrix),Xe[0]/=Xe[3],Xe[1]/=Xe[3],Xe[2]/=Xe[3],Xe[3]=1,s.aw(Xe,Xe,Re),Xe[0]/=Xe[3],Xe[1]/=Xe[3],Xe[2]/=Xe[3],Xe[3]=1;const He=((Ye,wt,St,dt,Vt)=>({u_sun_pos:Ye,u_atmosphere_blend:wt,u_globe_position:St,u_globe_radius:dt,u_inv_proj_matrix:Vt}))(be,De,[Xe[0],Xe[1],Xe[2]],we,Re),We=Do(he,ee);pe.draw(he,de.TRIANGLES,ve,vn.disabled,Kn.alphaBlended,Mn.disabled,He,null,null,"atmosphere",We.vertexBuffer,We.indexBuffer,We.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Z=(function(ee,oe){let he=null;const de=Object.values(ee._layers).flatMap((be=>be.source&&!be.isHidden(oe)?[ee.sourceCaches[be.source]]:[])),pe=de.filter((be=>be.getSource().type==="vector")),ve=de.filter((be=>be.getSource().type!=="vector")),xe=be=>{(!he||he.getSource().maxzoom<be.getSource().maxzoom)&&(he=be)};return pe.forEach((be=>xe(be))),he||ve.forEach((be=>xe(be))),he})(this.style,this.transform.zoom);Z&&(function(ee,oe,he){for(let de=0;de<he.length;de++)yc(ee,oe,he[de])})(this,Z,Z.getVisibleCoordinates())}this.options.showPadding&&(function(Z){const ee=Z.transform.padding;Cs(Z,Z.transform.height-(ee.top||0),3,Pr),Cs(Z,ee.bottom||0,3,ga),Es(Z,ee.left||0,3,Na),Es(Z,Z.transform.width-(ee.right||0),3,Cd);const oe=Z.transform.centerPoint;(function(he,de,pe,ve){ns(he,de-1,pe-10,2,20,ve),ns(he,de-10,pe-1,20,2,ve)})(Z,oe.x,Z.transform.height-oe.y,Ms)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(n){if(!this.style||!this.style.map||!this.style.map.terrain)return;const u=this.terrainFacilitator.matrix,g=this.transform.modelViewProjectionMatrix;let _=this.terrainFacilitator.dirty;_||(_=n?!s.c9(u,g):!s.ca(u,g)),_||(_=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),_&&(s.cb(u,g),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(x,E){const I=x.context,z=I.gl,U=x.transform,$=Kn.unblended,W=new on(z.LEQUAL,on.ReadWrite,[0,1]),Z=E.sourceCache.getRenderableTiles(),ee=x.useProgram("terrainDepth");I.bindFramebuffer.set(E.getFramebuffer("depth").framebuffer),I.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),I.clear({color:s.bf.transparent,depth:1});for(const oe of Z){const he=E.getTerrainMesh(oe.tileID),de=E.getTerrainData(oe.tileID),pe=U.getProjectionData({overscaledTileID:oe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),ve={u_ele_delta:E.getMeshFrameDelta(U.zoom)};ee.draw(I,z.TRIANGLES,W,vn.disabled,$,Mn.backCCW,ve,de,pe,"terrain",he.vertexBuffer,he.indexBuffer,he.segments)}I.bindFramebuffer.set(null),I.viewport.set([0,0,x.width,x.height])})(this,this.style.map.terrain),(function(x,E){const I=x.context,z=I.gl,U=x.transform,$=Kn.unblended,W=new on(z.LEQUAL,on.ReadWrite,[0,1]),Z=E.getCoordsTexture(),ee=E.sourceCache.getRenderableTiles(),oe=x.useProgram("terrainCoords");I.bindFramebuffer.set(E.getFramebuffer("coords").framebuffer),I.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),I.clear({color:s.bf.transparent,depth:1}),E.coordsIndex=[];for(const he of ee){const de=E.getTerrainMesh(he.tileID),pe=E.getTerrainData(he.tileID);I.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,Z.texture);const ve={u_terrain_coords_id:(255-E.coordsIndex.length)/255,u_texture:0,u_ele_delta:E.getMeshFrameDelta(U.zoom)},xe=U.getProjectionData({overscaledTileID:he.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});oe.draw(I,z.TRIANGLES,W,vn.disabled,$,Mn.backCCW,ve,pe,xe,"terrain",de.vertexBuffer,de.indexBuffer,de.segments),E.coordsIndex.push(he.tileID.key)}I.bindFramebuffer.set(null),I.viewport.set([0,0,x.width,x.height])})(this,this.style.map.terrain))}renderLayer(n,u,g,_,x){g.isHidden(this.transform.zoom)||(g.type==="background"||g.type==="custom"||(_||[]).length)&&(this.id=g.id,s.cc(g)?(function(E,I,z,U,$,W){if(E.renderPass!=="translucent")return;const{isRenderingToTexture:Z}=W,ee=vn.disabled,oe=E.colorModeForRenderPass();(z._unevaluatedLayout.hasValue("text-variable-anchor")||z._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(he,de,pe,ve,xe,be,Ce,De,we){const Re=de.transform,Xe=de.style.map.terrain,He=xe==="map",We=be==="map";for(const Ye of he){const wt=ve.getTile(Ye),St=wt.getBucket(pe);if(!St||!St.text||!St.text.segments.get().length)continue;const dt=s.an(St.textSizeData,Re.zoom),Vt=s.aC(wt,1,de.transform.zoom),un=ir(He,de.transform,Vt),jn=pe.layout.get("icon-text-fit")!=="none"&&St.hasIconData();if(dt){const Wn=Math.pow(2,Re.zoom-wt.tileID.overscaledZ),Yn=Xe?(mr,lr)=>Xe.getElevation(Ye,mr,lr):null;sh(St,He,We,we,Re,un,Wn,dt,jn,s.aD(Re,wt,Ce,De),Ye.toUnwrapped(),Yn)}}})(U,E,z,I,z.layout.get("text-rotation-alignment"),z.layout.get("text-pitch-alignment"),z.paint.get("text-translate"),z.paint.get("text-translate-anchor"),$),z.paint.get("icon-opacity").constantOr(1)!==0&&Ss(E,I,z,U,!1,z.paint.get("icon-translate"),z.paint.get("icon-translate-anchor"),z.layout.get("icon-rotation-alignment"),z.layout.get("icon-pitch-alignment"),z.layout.get("icon-keep-upright"),ee,oe,Z),z.paint.get("text-opacity").constantOr(1)!==0&&Ss(E,I,z,U,!0,z.paint.get("text-translate"),z.paint.get("text-translate-anchor"),z.layout.get("text-rotation-alignment"),z.layout.get("text-pitch-alignment"),z.layout.get("text-keep-upright"),ee,oe,Z),I.map.showCollisionBoxes&&(ws(E,I,z,U,!0),ws(E,I,z,U,!1))})(n,u,g,_,this.style.placement.variableOffsets,x):s.cd(g)?(function(E,I,z,U,$){if(E.renderPass!=="translucent")return;const{isRenderingToTexture:W}=$,Z=z.paint.get("circle-opacity"),ee=z.paint.get("circle-stroke-width"),oe=z.paint.get("circle-stroke-opacity"),he=!z.layout.get("circle-sort-key").isConstant();if(Z.constantOr(1)===0&&(ee.constantOr(1)===0||oe.constantOr(1)===0))return;const de=E.context,pe=de.gl,ve=E.transform,xe=E.getDepthModeForSublayer(0,on.ReadOnly),be=vn.disabled,Ce=E.colorModeForRenderPass(),De=[],we=ve.getCircleRadiusCorrection();for(let Re=0;Re<U.length;Re++){const Xe=U[Re],He=I.getTile(Xe),We=He.getBucket(z);if(!We)continue;const Ye=z.paint.get("circle-translate"),wt=z.paint.get("circle-translate-anchor"),St=s.aD(ve,He,Ye,wt),dt=We.programConfigurations.get(z.id),Vt=E.useProgram("circle",dt),un=We.layoutVertexBuffer,jn=We.indexBuffer,Wn=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Xe),Yn={programConfiguration:dt,program:Vt,layoutVertexBuffer:un,indexBuffer:jn,uniformValues:Xu(E,He,z,St,we),terrainData:Wn,projectionData:ve.getProjectionData({overscaledTileID:Xe,applyGlobeMatrix:!W,applyTerrainMatrix:!0})};if(he){const mr=We.segments.get();for(const lr of mr)De.push({segments:new s.aM([lr]),sortKey:lr.sortKey,state:Yn})}else De.push({segments:We.segments,sortKey:0,state:Yn})}he&&De.sort(((Re,Xe)=>Re.sortKey-Xe.sortKey));for(const Re of De){const{programConfiguration:Xe,program:He,layoutVertexBuffer:We,indexBuffer:Ye,uniformValues:wt,terrainData:St,projectionData:dt}=Re.state;He.draw(de,pe.TRIANGLES,xe,be,Ce,Mn.backCCW,wt,St,dt,z.id,We,Ye,Re.segments,z.paint,E.transform.zoom,Xe)}})(n,u,g,_,x):s.ce(g)?(function(E,I,z,U,$){if(z.paint.get("heatmap-opacity")===0)return;const W=E.context,{isRenderingToTexture:Z,isRenderingGlobe:ee}=$;if(E.style.map.terrain){for(const oe of U){const he=I.getTile(oe);I.hasRenderableParent(oe)||(E.renderPass==="offscreen"?mc(E,he,z,oe,ee):E.renderPass==="translucent"&&yl(E,z,oe,Z,ee))}W.viewport.set([0,0,E.width,E.height])}else E.renderPass==="offscreen"?(function(oe,he,de,pe){const ve=oe.context,xe=ve.gl,be=oe.transform,Ce=vn.disabled,De=new Kn([xe.ONE,xe.ONE],s.bf.transparent,[!0,!0,!0,!0]);(function(we,Re,Xe){const He=we.gl;we.activeTexture.set(He.TEXTURE1),we.viewport.set([0,0,Re.width/4,Re.height/4]);let We=Xe.heatmapFbos.get(s.c3);We?(He.bindTexture(He.TEXTURE_2D,We.colorAttachment.get()),we.bindFramebuffer.set(We.framebuffer)):(We=$i(we,Re.width/4,Re.height/4),Xe.heatmapFbos.set(s.c3,We))})(ve,oe,de),ve.clear({color:s.bf.transparent});for(let we=0;we<pe.length;we++){const Re=pe[we];if(he.hasRenderableParent(Re))continue;const Xe=he.getTile(Re),He=Xe.getBucket(de);if(!He)continue;const We=He.programConfigurations.get(de.id),Ye=oe.useProgram("heatmap",We),wt=be.getProjectionData({overscaledTileID:Re,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),St=be.getCircleRadiusCorrection();Ye.draw(ve,xe.TRIANGLES,on.disabled,Ce,De,Mn.backCCW,Mf(Xe,be.zoom,de.paint.get("heatmap-intensity"),St),null,wt,de.id,He.layoutVertexBuffer,He.indexBuffer,He.segments,de.paint,be.zoom,We)}ve.viewport.set([0,0,oe.width,oe.height])})(E,I,z,U):E.renderPass==="translucent"&&(function(oe,he){const de=oe.context,pe=de.gl;de.setColorMode(oe.colorModeForRenderPass());const ve=he.heatmapFbos.get(s.c3);ve&&(de.activeTexture.set(pe.TEXTURE0),pe.bindTexture(pe.TEXTURE_2D,ve.colorAttachment.get()),de.activeTexture.set(pe.TEXTURE1),Ei(de,he).bind(pe.LINEAR,pe.CLAMP_TO_EDGE),oe.useProgram("heatmapTexture").draw(de,pe.TRIANGLES,on.disabled,vn.disabled,oe.colorModeForRenderPass(),Mn.disabled,tm(oe,he,0,1),null,null,he.id,oe.viewportBuffer,oe.quadTriangleIndexBuffer,oe.viewportSegments,he.paint,oe.transform.zoom))})(E,z)})(n,u,g,_,x):s.cf(g)?(function(E,I,z,U,$){if(E.renderPass!=="translucent")return;const{isRenderingToTexture:W}=$,Z=z.paint.get("line-opacity"),ee=z.paint.get("line-width");if(Z.constantOr(1)===0||ee.constantOr(1)===0)return;const oe=E.getDepthModeForSublayer(0,on.ReadOnly),he=E.colorModeForRenderPass(),de=z.paint.get("line-dasharray"),pe=de.constantOr(1),ve=z.paint.get("line-pattern"),xe=ve.constantOr(1),be=z.paint.get("line-gradient"),Ce=z.getCrossfadeParameters();let De;De=xe?"linePattern":pe&&be?"lineGradientSDF":pe?"lineSDF":be?"lineGradient":"line";const we=E.context,Re=we.gl,Xe=E.transform;let He=!0;for(const We of U){const Ye=I.getTile(We);if(xe&&!Ye.patternsLoaded())continue;const wt=Ye.getBucket(z);if(!wt)continue;const St=wt.programConfigurations.get(z.id),dt=E.context.program.get(),Vt=E.useProgram(De,St),un=He||Vt.program!==dt,jn=E.style.map.terrain&&E.style.map.terrain.getTerrainData(We),Wn=ve.constantOr(null),Yn=de&&de.constantOr(null);if(Wn&&Ye.imageAtlas){const Di=Ye.imageAtlas,$r=Di.patternPositions[Wn.to.toString()],Vr=Di.patternPositions[Wn.from.toString()];$r&&Vr&&St.setConstantPatternPositions($r,Vr)}else if(Yn){const Di=z.layout.get("line-cap")==="round",$r=E.lineAtlas.getDash(Yn.to,Di),Vr=E.lineAtlas.getDash(Yn.from,Di);St.setConstantDashPositions($r,Vr)}const mr=Xe.getProjectionData({overscaledTileID:We,applyGlobeMatrix:!W,applyTerrainMatrix:!0}),lr=Xe.getPixelScale();let Cn;xe?(Cn=dl(E,Ye,z,lr,Ce),ts(we,Re,Ye,St,Ce)):pe&&be?(Cn=vd(E,Ye,z,lr,Ce,wt.lineClipsArray.length),Nf(E,I,we,Re,z,wt,We,St,Ce)):pe?(Cn=Ef(E,Ye,z,lr,Ce),ma(E,we,Re,St,un,Ce)):be?(Cn=Qu(E,Ye,z,lr,wt.lineClipsArray.length),Ts(E,I,we,Re,z,wt,We)):Cn=Ku(E,Ye,z,lr);const Sr=E.stencilModeForClipping(We);Vt.draw(we,Re.TRIANGLES,oe,Sr,he,Mn.disabled,Cn,jn,mr,z.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,z.paint,E.transform.zoom,St,wt.layoutVertexBuffer2),He=!1}})(n,u,g,_,x):s.cg(g)?(function(E,I,z,U,$){const W=z.paint.get("fill-color"),Z=z.paint.get("fill-opacity");if(Z.constantOr(1)===0)return;const{isRenderingToTexture:ee}=$,oe=E.colorModeForRenderPass(),he=z.paint.get("fill-pattern"),de=E.opaquePassEnabledForLayer()&&!he.constantOr(1)&&W.constantOr(s.bf.transparent).a===1&&Z.constantOr(0)===1?"opaque":"translucent";if(E.renderPass===de){const pe=E.getDepthModeForSublayer(1,E.renderPass==="opaque"?on.ReadWrite:on.ReadOnly);iu(E,I,z,U,pe,oe,!1,ee)}if(E.renderPass==="translucent"&&z.paint.get("fill-antialias")){const pe=E.getDepthModeForSublayer(z.getPaintProperty("fill-outline-color")?2:0,on.ReadOnly);iu(E,I,z,U,pe,oe,!0,ee)}})(n,u,g,_,x):s.ch(g)?(function(E,I,z,U,$){const W=z.paint.get("fill-extrusion-opacity");if(W===0)return;const{isRenderingToTexture:Z}=$;if(E.renderPass==="translucent"){const ee=new on(E.context.gl.LEQUAL,on.ReadWrite,E.depthRangeFor3D);if(W!==1||z.paint.get("fill-extrusion-pattern").constantOr(1))lh(E,I,z,U,ee,vn.disabled,Kn.disabled,Z),lh(E,I,z,U,ee,E.stencilModeFor3D(),E.colorModeForRenderPass(),Z);else{const oe=E.colorModeForRenderPass();lh(E,I,z,U,ee,vn.disabled,oe,Z)}}})(n,u,g,_,x):s.ci(g)?(function(E,I,z,U,$){if(E.renderPass!=="offscreen"&&E.renderPass!=="translucent")return;const{isRenderingToTexture:W}=$,Z=E.context,ee=E.style.projection.useSubdivision,oe=E.getDepthModeForSublayer(0,on.ReadOnly),he=E.colorModeForRenderPass();if(E.renderPass==="offscreen")(function(de,pe,ve,xe,be,Ce,De){const we=de.context,Re=we.gl;for(const Xe of ve){const He=pe.getTile(Xe),We=He.dem;if(!We||!We.data||!He.needsHillshadePrepare)continue;const Ye=We.dim,wt=We.stride,St=We.getPixels();if(we.activeTexture.set(Re.TEXTURE1),we.pixelStoreUnpackPremultiplyAlpha.set(!1),He.demTexture=He.demTexture||de.getTileTexture(wt),He.demTexture){const Vt=He.demTexture;Vt.update(St,{premultiply:!1}),Vt.bind(Re.NEAREST,Re.CLAMP_TO_EDGE)}else He.demTexture=new s.T(we,St,Re.RGBA,{premultiply:!1}),He.demTexture.bind(Re.NEAREST,Re.CLAMP_TO_EDGE);we.activeTexture.set(Re.TEXTURE0);let dt=He.fbo;if(!dt){const Vt=new s.T(we,{width:Ye,height:Ye,data:null},Re.RGBA);Vt.bind(Re.LINEAR,Re.CLAMP_TO_EDGE),dt=He.fbo=we.createFramebuffer(Ye,Ye,!0,!1),dt.colorAttachment.set(Vt.texture)}we.bindFramebuffer.set(dt.framebuffer),we.viewport.set([0,0,Ye,Ye]),de.useProgram("hillshadePrepare").draw(we,Re.TRIANGLES,be,Ce,De,Mn.disabled,yd(He.tileID,We),null,null,xe.id,de.rasterBoundsBuffer,de.quadTriangleIndexBuffer,de.rasterBoundsSegments),He.needsHillshadePrepare=!1}})(E,I,U,z,oe,vn.disabled,he),Z.viewport.set([0,0,E.width,E.height]);else if(E.renderPass==="translucent")if(ee){const[de,pe,ve]=E.stencilConfigForOverlapTwoPass(U);ii(E,I,z,ve,de,oe,he,!1,W),ii(E,I,z,ve,pe,oe,he,!0,W)}else{const[de,pe]=E.getStencilConfigForOverlapAndUpdateStencilID(U);ii(E,I,z,pe,de,oe,he,!1,W)}})(n,u,g,_,x):s.cj(g)?(function(E,I,z,U,$){if(E.renderPass!=="translucent"||!U.length)return;const{isRenderingToTexture:W}=$,Z=E.style.projection.useSubdivision,ee=E.getDepthModeForSublayer(0,on.ReadOnly),oe=E.colorModeForRenderPass();if(Z){const[he,de,pe]=E.stencilConfigForOverlapTwoPass(U);Jn(E,I,z,pe,he,ee,oe,!1,W),Jn(E,I,z,pe,de,ee,oe,!0,W)}else{const[he,de]=E.getStencilConfigForOverlapAndUpdateStencilID(U);Jn(E,I,z,de,he,ee,oe,!1,W)}})(n,u,g,_,x):s.bK(g)?(function(E,I,z,U,$){if(E.renderPass!=="translucent"||z.paint.get("raster-opacity")===0||!U.length)return;const{isRenderingToTexture:W}=$,Z=I.getSource(),ee=E.style.projection.useSubdivision;if(Z instanceof Oi)Po(E,I,z,U,null,!1,!1,Z.tileCoords,Z.flippedWindingOrder,W);else if(ee){const[oe,he,de]=E.stencilConfigForOverlapTwoPass(U);Po(E,I,z,de,oe,!1,!0,kn,!1,W),Po(E,I,z,de,he,!0,!0,kn,!1,W)}else{const[oe,he]=E.getStencilConfigForOverlapAndUpdateStencilID(U);Po(E,I,z,he,oe,!1,!0,kn,!1,W)}})(n,u,g,_,x):s.ck(g)?(function(E,I,z,U,$){const W=z.paint.get("background-color"),Z=z.paint.get("background-opacity");if(Z===0)return;const{isRenderingToTexture:ee}=$,oe=E.context,he=oe.gl,de=E.style.projection,pe=E.transform,ve=pe.tileSize,xe=z.paint.get("background-pattern");if(E.isPatternMissing(xe))return;const be=!xe&&W.a===1&&Z===1&&E.opaquePassEnabledForLayer()?"opaque":"translucent";if(E.renderPass!==be)return;const Ce=vn.disabled,De=E.getDepthModeForSublayer(0,be==="opaque"?on.ReadWrite:on.ReadOnly),we=E.colorModeForRenderPass(),Re=E.useProgram(xe?"backgroundPattern":"background"),Xe=U||wn(pe,{tileSize:ve,terrain:E.style.map.terrain});xe&&(oe.activeTexture.set(he.TEXTURE0),E.imageManager.bind(E.context));const He=z.getCrossfadeParameters();for(const We of Xe){const Ye=pe.getProjectionData({overscaledTileID:We,applyGlobeMatrix:!ee,applyTerrainMatrix:!0}),wt=xe?Df(Z,E,xe,{tileID:We,tileSize:ve},He):am(Z,W),St=E.style.map.terrain&&E.style.map.terrain.getTerrainData(We),dt=de.getMeshFromTileID(oe,We.canonical,!1,!0,"raster");Re.draw(oe,he.TRIANGLES,De,Ce,we,Mn.backCCW,wt,St,Ye,z.id,dt.vertexBuffer,dt.indexBuffer,dt.segments)}})(n,0,g,_,x):s.cl(g)&&(function(E,I,z,U){const{isRenderingGlobe:$}=U,W=E.context,Z=z.implementation,ee=E.style.projection,oe=E.transform,he=oe.getProjectionDataForCustomLayer($),de={farZ:oe.farZ,nearZ:oe.nearZ,fov:oe.fov*Math.PI/180,modelViewProjectionMatrix:oe.modelViewProjectionMatrix,projectionMatrix:oe.projectionMatrix,shaderData:{variantName:ee.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${ee.shaderPreludeCode.vertexSource}`,define:ee.shaderDefine},defaultProjectionData:he},pe=Z.renderingMode?Z.renderingMode:"2d";if(E.renderPass==="offscreen"){const ve=Z.prerender;ve&&(E.setCustomLayerDefaults(),W.setColorMode(E.colorModeForRenderPass()),ve.call(Z,W.gl,de),W.setDirty(),E.setBaseState())}else if(E.renderPass==="translucent"){E.setCustomLayerDefaults(),W.setColorMode(E.colorModeForRenderPass()),W.setStencilMode(vn.disabled);const ve=pe==="3d"?E.getDepthModeFor3D():E.getDepthModeForSublayer(0,on.ReadOnly);W.setDepthMode(ve),Z.render(W.gl,de),W.setDirty(),E.setBaseState(),W.bindFramebuffer.set(null)}})(n,0,g,x))}saveTileTexture(n){const u=this._tileTextures[n.size[0]];u?u.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const u=this._tileTextures[n];return u&&u.length>0?u.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const u=this.imageManager.getPattern(n.from.toString()),g=this.imageManager.getPattern(n.to.toString());return!u||!g}useProgram(n,u,g=!1,_=[]){this.cache=this.cache||{};const x=!!this.style.map.terrain,E=this.style.projection,I=g?Ui.projectionMercator:E.shaderPreludeCode,z=g?tc:E.shaderDefine,U=n+(u?u.cacheKey:"")+`/${g?xn:E.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(x?"/terrain":"")+(_?`/${_.join("/")}`:"");return this.cache[U]||(this.cache[U]=new Sf(this.context,Ui[n],u,fl[n],this._showOverdrawInspector,x,I,z,_)),this.cache[U]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:n,drawingBufferHeight:u}=this.context.gl;return this.width!==n||this.height!==u}}function ko(b,n){let u,g=!1,_=null,x=null;const E=()=>{_=null,g&&(b.apply(x,u),_=setTimeout(E,n),g=!1)};return(...I)=>(g=!0,x=this,u=I,_||E(),_)}class ch{constructor(n){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let g;return u.split("&").map((_=>_.split("="))).forEach((_=>{_[0]===this._hashName&&(g=_)})),(g&&g[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(!this._isValidHash(u))return!1;const g=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:g,pitch:+(u[4]||0)}),!0},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,u)},this._removeHash=()=>{const u=this._getCurrentHash();if(u.length===0)return;const g=u.join("/");let _=g;_.split("&").length>0&&(_=_.split("&")[0]),this._hashName&&(_=`${this._hashName}=${g}`);let x=window.location.hash.replace(_,"");x.startsWith("#&")?x=x.slice(0,1)+x.slice(2):x==="#"&&(x="");let E=window.location.href.replace(/(#.+)?$/,x);E=E.replace("&&","&"),window.history.replaceState(window.history.state,null,E)},this._updateHash=ko(this._updateHashUnthrottled,300),this._hashName=n&&encodeURIComponent(n)}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(n){const u=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,_=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,_),E=Math.round(u.lng*x)/x,I=Math.round(u.lat*x)/x,z=this._map.getBearing(),U=this._map.getPitch();let $="";if($+=n?`/${E}/${I}/${g}`:`${g}/${I}/${E}`,(z||U)&&($+="/"+Math.round(10*z)/10),U&&($+=`/${Math.round(U)}`),this._hashName){const W=this._hashName;let Z=!1;const ee=window.location.hash.slice(1).split("&").map((oe=>{const he=oe.split("=")[0];return he===W?(Z=!0,`${he}=${$}`):oe})).filter((oe=>oe));return Z||ee.push(`${W}=${$}`),`#${ee.join("&")}`}return`#${$}`}_isValidHash(n){if(n.length<3||n.some(isNaN))return!1;try{new s.S(+n[2],+n[1])}catch{return!1}const u=+n[0],g=+(n[3]||0),_=+(n[4]||0);return u>=this._map.getMinZoom()&&u<=this._map.getMaxZoom()&&g>=-180&&g<=180&&_>=this._map.getMinPitch()&&_<=this._map.getMaxPitch()}}const vl={linearity:.3,easing:s.cm(0,0,.3,1)},oo=s.e({deceleration:2500,maxSpeed:1400},vl),uh=s.e({deceleration:20,maxSpeed:1400},vl),_l=s.e({deceleration:1e3,maxSpeed:360},vl),Ai=s.e({deceleration:1e3,maxSpeed:90},vl),hh=s.e({deceleration:1e3,maxSpeed:360},vl);class Bf{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:R.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,u=R.now();for(;n.length>0&&u-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,roll:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)u.zoom+=x.zoomDelta||0,u.bearing+=x.bearingDelta||0,u.pitch+=x.pitchDelta||0,u.roll+=x.rollDelta||0,x.panDelta&&u.pan._add(x.panDelta),x.around&&(u.around=x.around),x.pinchAround&&(u.pinchAround=x.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(u.pan.mag()){const x=ou(u.pan.mag(),g,s.e({},oo,n||{})),E=u.pan.mult(x.amount/u.pan.mag()),I=this._map.cameraHelper.handlePanInertia(E,this._map.transform);_.center=I.easingCenter,_.offset=I.easingOffset,au(_,x)}if(u.zoom){const x=ou(u.zoom,g,uh);_.zoom=this._map.transform.zoom+x.amount,au(_,x)}if(u.bearing){const x=ou(u.bearing,g,_l);_.bearing=this._map.transform.bearing+s.ah(x.amount,-179,179),au(_,x)}if(u.pitch){const x=ou(u.pitch,g,Ai);_.pitch=this._map.transform.pitch+x.amount,au(_,x)}if(u.roll){const x=ou(u.roll,g,hh);_.roll=this._map.transform.roll+s.ah(x.amount,-179,179),au(_,x)}if(_.zoom||_.bearing){const x=u.pinchAround===void 0?u.around:u.pinchAround;_.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),s.e(_,{noMoveStart:!0})}}function au(b,n){(!b.duration||b.duration<n.duration)&&(b.duration=n.duration,b.easing=n.easing)}function ou(b,n,u){const{maxSpeed:g,linearity:_,deceleration:x}=u,E=s.ah(b*_/(n/1e3),-g,g),I=Math.abs(E)/(x*_);return{easing:u.easing,duration:1e3*I,amount:E*(I/2)}}class ya extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,u,g,_={}){g=g instanceof MouseEvent?g:new MouseEvent(n,g);const x=j.mousePos(u.getCanvas(),g),E=u.unproject(x);super(n,s.e({point:x,lngLat:E,originalEvent:g},_)),this._defaultPrevented=!1,this.target=u}}class dr extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,u,g){const _=n==="touchend"?g.changedTouches:g.touches,x=j.touchPos(u.getCanvasContainer(),_),E=x.map((z=>u.unproject(z))),I=x.reduce(((z,U,$,W)=>z.add(U.div(W.length))),new s.P(0,0));super(n,{points:x,point:I,lngLats:E,lngLat:u.unproject(I),originalEvent:g}),this._defaultPrevented=!1}}class dh extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,u,g){super(n,{originalEvent:g}),this._defaultPrevented=!1}}class Vi{constructor(n,u){this._map=n,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new dh(n.type,this._map,n))}mousedown(n,u){return this._mousedownPos=u,this._firePreventable(new ya(n.type,this._map,n))}mouseup(n){this._map.fire(new ya(n.type,this._map,n))}click(n,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new ya(n.type,this._map,n))}dblclick(n){return this._firePreventable(new ya(n.type,this._map,n))}mouseover(n){this._map.fire(new ya(n.type,this._map,n))}mouseout(n){this._map.fire(new ya(n.type,this._map,n))}touchstart(n){return this._firePreventable(new dr(n.type,this._map,n))}touchmove(n){this._map.fire(new dr(n.type,this._map,n))}touchend(n){this._map.fire(new dr(n.type,this._map,n))}touchcancel(n){this._map.fire(new dr(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class aa{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new ya(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ya("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new ya(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class bl{constructor(n){this._map=n}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(n){return this.transform.screenPointToLocation(s.P.convert(n),this._map.terrain)}}class ji{constructor(n,u){this._map=n,this._tr=new bl(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,u){this.isEnabled()&&n.shiftKey&&n.button===0&&(j.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(n,u){if(!this._active)return;const g=u;if(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)return;const _=this._startPos;this._lastPos=g,this._box||(this._box=j.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const x=Math.min(_.x,g.x),E=Math.max(_.x,g.x),I=Math.min(_.y,g.y),z=Math.max(_.y,g.y);j.setTransform(this._box,`translate(${x}px,${I}px)`),this._box.style.width=E-x+"px",this._box.style.height=z-I+"px"}mouseupWindow(n,u){if(!this._active||n.button!==0)return;const g=this._startPos,_=u;if(this.reset(),j.suppressClick(),g.x!==_.x||g.y!==_.y)return this._map.fire(new s.l("boxzoomend",{originalEvent:n})),{cameraAnimation:x=>x.fitScreenCoordinates(g,_,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(j.remove(this._box),this._box=null),j.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,u){return this._map.fire(new s.l(n,{originalEvent:u}))}}function Ba(b,n){if(b.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${b.length}, points ${n.length}`);const u={};for(let g=0;g<b.length;g++)u[b[g].identifier]=n[g];return u}class jg{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,u,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),g.length===this.numTouches&&(this.centroid=(function(_){const x=new s.P(0,0);for(const E of _)x._add(E);return x.div(_.length)})(u),this.touches=Ba(g,u)))}touchmove(n,u,g){if(this.aborted||!this.centroid)return;const _=Ba(g,u);for(const x in this.touches){const E=_[x];(!E||E.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(n,u,g){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class Ed{constructor(n){this.singleTap=new jg(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,u,g){this.singleTap.touchstart(n,u,g)}touchmove(n,u,g){this.singleTap.touchmove(n,u,g)}touchend(n,u,g){const _=this.singleTap.touchend(n,u,g);if(_){const x=n.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(_)<30;if(x&&E||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class Lg{constructor(n){this._tr=new bl(n),this._zoomIn=new Ed({numTouches:1,numTaps:2}),this._zoomOut=new Ed({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,u,g){this._zoomIn.touchstart(n,u,g),this._zoomOut.touchstart(n,u,g)}touchmove(n,u,g){this._zoomIn.touchmove(n,u,g),this._zoomOut.touchmove(n,u,g)}touchend(n,u,g){const _=this._zoomIn.touchend(n,u,g),x=this._zoomOut.touchend(n,u,g),E=this._tr;return _?(this._active=!0,n.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:E.zoom+1,around:E.unproject(_)},{originalEvent:n})}):x?(this._active=!0,n.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:E.zoom-1,around:E.unproject(x)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class su{constructor(n){this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset()}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n)}_move(...n){const u=this._moveFunction(...n);if(u.bearingDelta||u.pitchDelta||u.rollDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(n,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=Array.isArray(u)?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(n,u){if(!this.isEnabled())return;const g=this._lastPoint;if(!g)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n))return void this.reset(n);const _=Array.isArray(u)?u[0]:u;return!this._moved&&_.dist(g)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=_,this._move(g,_))}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&j.suppressClick(),this.reset(n))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const xl=0,vc=2,so={[xl]:1,[vc]:2};class It{constructor(n){this._correctEvent=n.checkCorrectEvent}startMove(n){const u=j.mouseButton(n);this._eventButton=u}endMove(n){delete this._eventButton}isValidStartEvent(n){return this._correctEvent(n)}isValidMoveEvent(n){return!(function(u,g){const _=so[g];return u.buttons===void 0||(u.buttons&_)!==_})(n,this._eventButton)}isValidEndEvent(n){return j.mouseButton(n)===this._eventButton}}class _c{constructor(){this._firstTouch=void 0}_isOneFingerTouch(n){return n.targetTouches.length===1}_isSameTouchEvent(n){return n.targetTouches[0].identifier===this._firstTouch}startMove(n){this._firstTouch=n.targetTouches[0].identifier}endMove(n){delete this._firstTouch}isValidStartEvent(n){return this._isOneFingerTouch(n)}isValidMoveEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}isValidEndEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}}class fh{constructor(n=new It({checkCorrectEvent:()=>!0}),u=new _c){this.mouseMoveStateManager=n,this.oneFingerTouchMoveStateManager=u}_executeRelevantHandler(n,u,g){return n instanceof MouseEvent?u(n):typeof TouchEvent<"u"&&n instanceof TouchEvent?g(n):void 0}startMove(n){this._executeRelevantHandler(n,(u=>this.mouseMoveStateManager.startMove(u)),(u=>this.oneFingerTouchMoveStateManager.startMove(u)))}endMove(n){this._executeRelevantHandler(n,(u=>this.mouseMoveStateManager.endMove(u)),(u=>this.oneFingerTouchMoveStateManager.endMove(u)))}isValidStartEvent(n){return this._executeRelevantHandler(n,(u=>this.mouseMoveStateManager.isValidStartEvent(u)),(u=>this.oneFingerTouchMoveStateManager.isValidStartEvent(u)))}isValidMoveEvent(n){return this._executeRelevantHandler(n,(u=>this.mouseMoveStateManager.isValidMoveEvent(u)),(u=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(u)))}isValidEndEvent(n){return this._executeRelevantHandler(n,(u=>this.mouseMoveStateManager.isValidEndEvent(u)),(u=>this.oneFingerTouchMoveStateManager.isValidEndEvent(u)))}}const wl=b=>{b.mousedown=b.dragStart,b.mousemoveWindow=b.dragMove,b.mouseup=b.dragEnd,b.contextmenu=n=>{n.preventDefault()}};class Sl{constructor(n,u){this._clickTolerance=n.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(n){return n<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(n,u,g){return this._calculateTransform(n,u,g)}touchmove(n,u,g){if(this._active){if(!this._shouldBePrevented(g.length))return n.preventDefault(),this._calculateTransform(n,u,g);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",n)}}touchend(n,u,g){this._calculateTransform(n,u,g),this._active&&this._shouldBePrevented(g.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,u,g){g.length>0&&(this._active=!0);const _=Ba(g,u),x=new s.P(0,0),E=new s.P(0,0);let I=0;for(const U in _){const $=_[U],W=this._touches[U];W&&(x._add($),E._add($.sub(W)),I++,_[U]=$)}if(this._touches=_,this._shouldBePrevented(I)||!E.mag())return;const z=E.div(I);return this._sum._add(z),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(I),panDelta:z}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Tl{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(n,u,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([u[0],u[1]]))}touchmove(n,u,g){if(!this._firstTwoTouches)return;n.preventDefault();const[_,x]=this._firstTwoTouches,E=bc(g,u,_),I=bc(g,u,x);if(!E||!I)return;const z=this._aroundCenter?null:E.add(I).div(2);return this._move([E,I],z,n)}touchend(n,u,g){if(!this._firstTwoTouches)return;const[_,x]=this._firstTwoTouches,E=bc(g,u,_),I=bc(g,u,x);E&&I||(this._active&&j.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function bc(b,n,u){for(let g=0;g<b.length;g++)if(b[g].identifier===u)return n[g]}function gn(b,n){return Math.log(b/n)/Math.LN2}class is extends Tl{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,u){const g=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(gn(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:gn(this._distance,g),pinchAround:u}}}function Ff(b,n){return 180*b.angleWith(n)/Math.PI}class ph extends Tl{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,u,g){const _=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ff(this._vector,_),pinchAround:u}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const u=25/(Math.PI*this._minDiameter)*360,g=Ff(n,this._startVector);return Math.abs(g)<u}}function Ml(b){return Math.abs(b.y)>Math.abs(b.x)}class lu extends Tl{constructor(n){super(),this._currentTouchCount=0,this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,u,g){super.touchstart(n,u,g),this._currentTouchCount=g.length}_start(n){this._lastPoints=n,Ml(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,u,g){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const _=n[0].sub(this._lastPoints[0]),x=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(_,x,g.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(_.y+x.y)/2*-.5}):void 0}gestureBeginsVertically(n,u,g){if(this._valid!==void 0)return this._valid;const _=n.mag()>=2,x=u.mag()>=2;if(!_&&!x)return;if(!_||!x)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;const E=n.y>0==u.y>0;return Ml(n)&&Ml(u)&&E}}const mh={panStep:100,bearingStep:15,pitchStep:10};class Cl{constructor(n){this._tr=new bl(n);const u=mh;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let u=0,g=0,_=0,x=0,E=0;switch(n.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:n.shiftKey?g=-1:(n.preventDefault(),x=-1);break;case 39:n.shiftKey?g=1:(n.preventDefault(),x=1);break;case 38:n.shiftKey?_=1:(n.preventDefault(),E=-1);break;case 40:n.shiftKey?_=-1:(n.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(g=0,_=0),{cameraAnimation:I=>{const z=this._tr;I.easeTo({duration:300,easeId:"keyboardHandler",easing:gh,zoom:u?Math.round(z.zoom)+u*(n.shiftKey?2:1):z.zoom,bearing:z.bearing+g*this._bearingStep,pitch:z.pitch+_*this._pitchStep,offset:[-x*this._panStep,-E*this._panStep],center:z.center},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function gh(b){return b*(2-b)}const Uf=4.000244140625,El=1/450;class $f{constructor(n,u){this._onTimeout=g=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(g)},this._map=n,this._tr=new bl(n),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=El}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(n){return!!this._map.cooperativeGestures.isEnabled()&&!(n.ctrlKey||this._map.cooperativeGestures.isBypassed(n))}wheel(n){if(!this.isEnabled())return;if(this._shouldBePrevented(n))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",n);let u=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const g=R.now(),_=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,u!==0&&u%Uf==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(_*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),n.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=n,this._delta-=u,this._active||this._start(n)),n.preventDefault()}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=j.mousePos(this._map.getCanvas(),n),g=this._tr;this._aroundPoint=this._aroundCenter?g.transform.locationToScreenPoint(s.S.convert(g.center)):u,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const I=n.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=I),typeof this._targetZoom=="number"&&(this._targetZoom+=I)}if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>Uf?this._wheelZoomRate:this._defaultZoomRate;let z=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&z!==0&&(z=1/z);const U=typeof this._targetZoom!="number"?n.scale:s.af(this._targetZoom);this._targetZoom=n.getConstrained(n.getCameraLngLat(),s.ak(U*z)).zoom,this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom!="number"?n.zoom:this._targetZoom,g=this._startZoom,_=this._easing;let x,E=!1;if(this._type==="wheel"&&g&&_){const I=R.now()-this._lastWheelEventTime,z=Math.min((I+5)/200,1),U=_(z);x=s.C.number(g,u,U),z<1?this._frameId||(this._frameId=!0):E=!0}else x=u,E=!0;return this._active=!0,E&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=x,{noInertia:!0,needsRenderFrame:!E,zoomDelta:x-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let u=s.co;if(this._prevEase){const g=this._prevEase,_=(R.now()-g.start)/g.duration,x=g.easing(_+.01)-g.easing(_),E=.27/Math.sqrt(x*x+1e-4)*.01,I=Math.sqrt(.0729-E*E);u=s.cm(E,I,.25,1)}return this._prevEase={start:R.now(),duration:n,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ps{constructor(n,u){this._clickZoom=n,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class as{constructor(n){this._tr=new bl(n),this.reset()}reset(){this._active=!1}dblclick(n,u){return n.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:this._tr.zoom+(n.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class er{constructor(){this._tap=new Ed({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(n,u,g){if(!this._swipePoint)if(this._tapTime){const _=u[0],x=n.timeStamp-this._tapTime<500,E=this._tapPoint.dist(_)<30;x&&E?g.length>0&&(this._swipePoint=_,this._swipeTouch=g[0].identifier):this.reset()}else this._tap.touchstart(n,u,g)}touchmove(n,u,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const _=u[0],x=_.y-this._swipePoint.y;return this._swipePoint=_,n.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(n,u,g)}touchend(n,u,g){if(this._tapTime)this._swipePoint&&g.length===0&&this.reset();else{const _=this._tap.touchend(n,u,g);_&&(this._tapTime=n.timeStamp,this._tapPoint=_)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ds{constructor(n,u,g){this._el=n,this._mousePan=u,this._touchPan=g}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class lo{constructor(n,u,g,_){this._pitchWithRotate=n.pitchWithRotate,this._rollEnabled=n.rollEnabled,this._mouseRotate=u,this._mousePitch=g,this._mouseRoll=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Al{constructor(n,u,g,_){this._el=n,this._touchZoom=u,this._touchRotate=g,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class yh{constructor(n,u){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=n,this._options=u,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const n=this._map.getCanvasContainer();n.classList.add("maplibregl-cooperative-gestures"),this._container=j.create("div","maplibregl-cooperative-gesture-screen",n);let u=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(u=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const g=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),_=document.createElement("div");_.className="maplibregl-desktop-message",_.textContent=u,this._container.appendChild(_);const x=document.createElement("div");x.className="maplibregl-mobile-message",x.textContent=g,this._container.appendChild(x),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(j.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(n){return n[this._bypassKey]}notifyGestureBlocked(n,u){this._enabled&&(this._map.fire(new s.l("cooperativegestureprevented",{gestureType:n,originalEvent:u})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const xc=b=>b.zoom||b.drag||b.roll||b.pitch||b.rotate;class cu extends s.l{}function wc(b){return b.panDelta&&b.panDelta.mag()||b.zoomDelta||b.bearingDelta||b.pitchDelta||b.rollDelta}class Oo{constructor(n,u){this.handleWindowEvent=_=>{this.handleEvent(_,`${_.type}Window`)},this.handleEvent=(_,x)=>{if(_.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const E=_.type==="renderFrame"?void 0:_,I={needsRenderFrame:!1},z={},U={};for(const{handlerName:Z,handler:ee,allowed:oe}of this._handlers){if(!ee.isEnabled())continue;let he;if(this._blockedByActive(U,oe,Z))ee.reset();else if(ee[x||_.type]){if(s.cp(_,x||_.type)){const de=j.mousePos(this._map.getCanvas(),_);he=ee[x||_.type](_,de)}else if(s.cq(_,x||_.type)){const de=this._getMapTouches(_.touches),pe=j.touchPos(this._map.getCanvas(),de);he=ee[x||_.type](_,pe,de)}else s.cr(x||_.type)||(he=ee[x||_.type](_));this.mergeHandlerResult(I,z,he,Z,E),he&&he.needsRenderFrame&&this._triggerRenderFrame()}(he||ee.isActive())&&(U[Z]=ee)}const $={};for(const Z in this._previousActiveHandlers)U[Z]||($[Z]=E);this._previousActiveHandlers=U,(Object.keys($).length||wc(I))&&(this._changes.push([I,z,$]),this._triggerRenderFrame()),(Object.keys(U).length||wc(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:W}=I;W&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],W(this._map))},this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Bf(n),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[window,"blur",void 0]];for(const[_,x,E]of this._listeners)j.addEventListener(_,x,_===document?this.handleWindowEvent:this.handleEvent,E)}destroy(){for(const[n,u,g]of this._listeners)j.removeEventListener(n,u,n===document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(n){const u=this._map,g=u.getCanvasContainer();this._add("mapEvent",new Vi(u,n));const _=u.boxZoom=new ji(u,n);this._add("boxZoom",_),n.interactive&&n.boxZoom&&_.enable();const x=u.cooperativeGestures=new yh(u,n.cooperativeGestures);this._add("cooperativeGestures",x),n.cooperativeGestures&&x.enable();const E=new Lg(u),I=new as(u);u.doubleClickZoom=new Ps(I,E),this._add("tapZoom",E),this._add("clickZoom",I),n.interactive&&n.doubleClickZoom&&u.doubleClickZoom.enable();const z=new er;this._add("tapDragZoom",z);const U=u.touchPitch=new lu(u);this._add("touchPitch",U),n.interactive&&n.touchPitch&&u.touchPitch.enable(n.touchPitch);const $=()=>u.project(u.getCenter()),W=(function({enable:be,clickTolerance:Ce,aroundCenter:De=!0,minPixelCenterThreshold:we=100,rotateDegreesPerPixelMoved:Re=.8},Xe){const He=new It({checkCorrectEvent:We=>j.mouseButton(We)===0&&We.ctrlKey||j.mouseButton(We)===2&&!We.ctrlKey});return new su({clickTolerance:Ce,move:(We,Ye)=>{const wt=Xe();if(De&&Math.abs(wt.y-We.y)>we)return{bearingDelta:s.cn(new s.P(We.x,Ye.y),Ye,wt)};let St=(Ye.x-We.x)*Re;return De&&Ye.y<wt.y&&(St=-St),{bearingDelta:St}},moveStateManager:He,enable:be,assignEvents:wl})})(n,$),Z=(function({enable:be,clickTolerance:Ce,pitchDegreesPerPixelMoved:De=-.5}){const we=new It({checkCorrectEvent:Re=>j.mouseButton(Re)===0&&Re.ctrlKey||j.mouseButton(Re)===2});return new su({clickTolerance:Ce,move:(Re,Xe)=>({pitchDelta:(Xe.y-Re.y)*De}),moveStateManager:we,enable:be,assignEvents:wl})})(n),ee=(function({enable:be,clickTolerance:Ce,rollDegreesPerPixelMoved:De=.3},we){const Re=new It({checkCorrectEvent:Xe=>j.mouseButton(Xe)===2&&Xe.ctrlKey});return new su({clickTolerance:Ce,move:(Xe,He)=>{const We=we();let Ye=(He.x-Xe.x)*De;return He.y<We.y&&(Ye=-Ye),{rollDelta:Ye}},moveStateManager:Re,enable:be,assignEvents:wl})})(n,$);u.dragRotate=new lo(n,W,Z,ee),this._add("mouseRotate",W,["mousePitch"]),this._add("mousePitch",Z,["mouseRotate","mouseRoll"]),this._add("mouseRoll",ee,["mousePitch"]),n.interactive&&n.dragRotate&&u.dragRotate.enable();const oe=(function({enable:be,clickTolerance:Ce}){const De=new It({checkCorrectEvent:we=>j.mouseButton(we)===0&&!we.ctrlKey});return new su({clickTolerance:Ce,move:(we,Re)=>({around:Re,panDelta:Re.sub(we)}),activateOnStart:!0,moveStateManager:De,enable:be,assignEvents:wl})})(n),he=new Sl(n,u);u.dragPan=new Ds(g,oe,he),this._add("mousePan",oe),this._add("touchPan",he,["touchZoom","touchRotate"]),n.interactive&&n.dragPan&&u.dragPan.enable(n.dragPan);const de=new ph,pe=new is;u.touchZoomRotate=new Al(g,pe,de,z),this._add("touchRotate",de,["touchPan","touchZoom"]),this._add("touchZoom",pe,["touchPan","touchRotate"]),n.interactive&&n.touchZoomRotate&&u.touchZoomRotate.enable(n.touchZoomRotate);const ve=u.scrollZoom=new $f(u,(()=>this._triggerRenderFrame()));this._add("scrollZoom",ve,["mousePan"]),n.interactive&&n.scrollZoom&&u.scrollZoom.enable(n.scrollZoom);const xe=u.keyboard=new Cl(u);this._add("keyboard",xe),n.interactive&&n.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new aa(u))}_add(n,u,g){this._handlers.push({handlerName:n,handler:u,allowed:g}),this._handlersById[n]=u}stop(n){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!xc(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,u,g){for(const _ in n)if(_!==g&&(!u||u.indexOf(_)<0))return!0;return!1}_getMapTouches(n){const u=[];for(const g of n)this._el.contains(g.target)&&u.push(g);return u}mergeHandlerResult(n,u,g,_,x){if(!g)return;s.e(n,g);const E={handlerName:_,originalEvent:g.originalEvent||x};g.zoomDelta!==void 0&&(u.zoom=E),g.panDelta!==void 0&&(u.drag=E),g.rollDelta!==void 0&&(u.roll=E),g.pitchDelta!==void 0&&(u.pitch=E),g.bearingDelta!==void 0&&(u.rotate=E)}_applyChanges(){const n={},u={},g={};for(const[_,x,E]of this._changes)_.panDelta&&(n.panDelta=(n.panDelta||new s.P(0,0))._add(_.panDelta)),_.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+_.pitchDelta),_.rollDelta&&(n.rollDelta=(n.rollDelta||0)+_.rollDelta),_.around!==void 0&&(n.around=_.around),_.pinchAround!==void 0&&(n.pinchAround=_.pinchAround),_.noInertia&&(n.noInertia=_.noInertia),s.e(u,x),s.e(g,E);this._updateMapTransform(n,u,g),this._changes=[]}_updateMapTransform(n,u,g){const _=this._map,x=_._getTransformForUpdate(),E=_.terrain;if(!(wc(n)||E&&this._terrainMovement))return this._fireEvents(u,g,!0);_._stop(!0);let{panDelta:I,zoomDelta:z,bearingDelta:U,pitchDelta:$,rollDelta:W,around:Z,pinchAround:ee}=n;ee!==void 0&&(Z=ee),Z=Z||_.transform.centerPoint,E&&!x.isPointOnMapSurface(Z)&&(Z=x.centerPoint);const oe={panDelta:I,zoomDelta:z,rollDelta:W,pitchDelta:$,bearingDelta:U,around:Z};this._map.cameraHelper.useGlobeControls&&!x.isPointOnMapSurface(Z)&&(Z=x.centerPoint);const he=Z.distSqr(x.centerPoint)<.01?x.center:x.screenPointToLocation(I?Z.sub(I):Z);this._handleMapControls({terrain:E,tr:x,deltasForHelper:oe,preZoomAroundLoc:he,combinedEventsInProgress:u,panDelta:I}),_._applyUpdatedTransform(x),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(u,g,!0)}_handleMapControls({terrain:n,tr:u,deltasForHelper:g,preZoomAroundLoc:_,combinedEventsInProgress:x,panDelta:E}){const I=this._map.cameraHelper;if(I.handleMapControlsRollPitchBearingZoom(g,u),n)return I.useGlobeControls?(this._terrainMovement||!x.drag&&!x.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void I.handleMapControlsPan(g,u,_)):this._terrainMovement||!x.drag&&!x.zoom?void(x.drag&&this._terrainMovement&&E?u.setCenter(u.screenPointToLocation(u.centerPoint.sub(E))):I.handleMapControlsPan(g,u,_)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void I.handleMapControlsPan(g,u,_));I.handleMapControlsPan(g,u,_)}_fireEvents(n,u,g){const _=xc(this._eventsInProgress),x=xc(n),E={};for(const W in n){const{originalEvent:Z}=n[W];this._eventsInProgress[W]||(E[`${W}start`]=Z),this._eventsInProgress[W]=n[W]}!_&&x&&this._fireEvent("movestart",x.originalEvent);for(const W in E)this._fireEvent(W,E[W]);x&&this._fireEvent("move",x.originalEvent);for(const W in n){const{originalEvent:Z}=n[W];this._fireEvent(W,Z)}const I={};let z;for(const W in this._eventsInProgress){const{handlerName:Z,originalEvent:ee}=this._eventsInProgress[W];this._handlersById[Z].isActive()||(delete this._eventsInProgress[W],z=u[Z]||ee,I[`${W}end`]=z)}for(const W in I)this._fireEvent(W,I[W]);const U=xc(this._eventsInProgress),$=(_||x)&&!U;if($&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const W=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&W.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(W)}if(g&&$){this._updatingCamera=!0;const W=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Z=ee=>ee!==0&&-this._bearingSnap<ee&&ee<this._bearingSnap;!W||!W.essential&&R.prefersReducedMotion?(this._map.fire(new s.l("moveend",{originalEvent:z})),Z(this._map.getBearing())&&this._map.resetNorth()):(Z(W.bearing||this._map.getBearing())&&(W.bearing=0),W.freezeElevation=!0,this._map.easeTo(W,{originalEvent:z})),this._updatingCamera=!1}}_fireEvent(n,u){this._map.fire(new s.l(n,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((n=>{delete this._frameId,this.handleEvent(new cu("renderFrame",{timeStamp:n})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class vh extends s.E{constructor(n,u,g){super(),this._renderFrameCallback=()=>{const _=Math.min((R.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(_)),_<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=g.bearingSnap,this.cameraHelper=u,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(n,u){n.apply(this.transform),this.transform=n,this.cameraHelper=u}getCenter(){return new s.S(this.transform.center.lng,this.transform.center.lat)}setCenter(n,u){return this.jumpTo({center:n},u)}getCenterElevation(){return this.transform.elevation}setCenterElevation(n,u){return this.jumpTo({elevation:n},u),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(n){this._centerClampedToGround=n}panBy(n,u,g){return n=s.P.convert(n).mult(-1),this.panTo(this.transform.center,s.e({offset:n},u),g)}panTo(n,u,g){return this.easeTo(s.e({center:n},u),g)}getZoom(){return this.transform.zoom}setZoom(n,u){return this.jumpTo({zoom:n},u),this}zoomTo(n,u,g){return this.easeTo(s.e({zoom:n},u),g)}zoomIn(n,u){return this.zoomTo(this.getZoom()+1,n,u),this}zoomOut(n,u){return this.zoomTo(this.getZoom()-1,n,u),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(n,u){return n!=this.transform.fov&&(this.transform.setFov(n),this.fire(new s.l("movestart",u)).fire(new s.l("move",u)).fire(new s.l("moveend",u))),this}getBearing(){return this.transform.bearing}setBearing(n,u){return this.jumpTo({bearing:n},u),this}getPadding(){return this.transform.padding}setPadding(n,u){return this.jumpTo({padding:n},u),this}rotateTo(n,u,g){return this.easeTo(s.e({bearing:n},u),g)}resetNorth(n,u){return this.rotateTo(0,s.e({duration:1e3},n),u),this}resetNorthPitch(n,u){return this.easeTo(s.e({bearing:0,pitch:0,roll:0,duration:1e3},n),u),this}snapToNorth(n,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,u):this}getPitch(){return this.transform.pitch}setPitch(n,u){return this.jumpTo({pitch:n},u),this}getRoll(){return this.transform.roll}setRoll(n,u){return this.jumpTo({roll:n},u),this}cameraForBounds(n,u){n=rn.convert(n).adjustAntiMeridian();const g=u&&u.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),g,u)}_cameraForBoxAndBearing(n,u,g,_){const x={top:0,bottom:0,right:0,left:0};if(typeof(_=s.e({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding=="number"){const U=_.padding;_.padding={top:U,bottom:U,right:U,left:U}}const E=s.e(x,_.padding);_.padding=E;const I=this.transform,z=new rn(n,u);return this.cameraHelper.cameraForBoxAndBearing(_,E,z,g,I)}fitBounds(n,u,g){return this._fitInternal(this.cameraForBounds(n,u),u,g)}fitScreenCoordinates(n,u,g,_,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(s.P.convert(n)),this.transform.screenPointToLocation(s.P.convert(u)),g,_),_,x)}_fitInternal(n,u,g){return n?(delete(u=s.e(n,u)).padding,u.linear?this.easeTo(u,g):this.flyTo(u,g)):this}jumpTo(n,u){this.stop();const g=this._getTransformForUpdate();let _=!1,x=!1,E=!1;const I=g.zoom;this.cameraHelper.handleJumpToCenterZoom(g,n);const z=g.zoom!==I;return"elevation"in n&&g.elevation!==+n.elevation&&g.setElevation(+n.elevation),"bearing"in n&&g.bearing!==+n.bearing&&(_=!0,g.setBearing(+n.bearing)),"pitch"in n&&g.pitch!==+n.pitch&&(x=!0,g.setPitch(+n.pitch)),"roll"in n&&g.roll!==+n.roll&&(E=!0,g.setRoll(+n.roll)),n.padding==null||g.isPaddingEqual(n.padding)||g.setPadding(n.padding),this._applyUpdatedTransform(g),this.fire(new s.l("movestart",u)).fire(new s.l("move",u)),z&&this.fire(new s.l("zoomstart",u)).fire(new s.l("zoom",u)).fire(new s.l("zoomend",u)),_&&this.fire(new s.l("rotatestart",u)).fire(new s.l("rotate",u)).fire(new s.l("rotateend",u)),x&&this.fire(new s.l("pitchstart",u)).fire(new s.l("pitch",u)).fire(new s.l("pitchend",u)),E&&this.fire(new s.l("rollstart",u)).fire(new s.l("roll",u)).fire(new s.l("rollend",u)),this.fire(new s.l("moveend",u))}calculateCameraOptionsFromTo(n,u,g,_=0){const x=s.a1.fromLngLat(n,u),E=s.a1.fromLngLat(g,_),I=E.x-x.x,z=E.y-x.y,U=E.z-x.z,$=Math.hypot(I,z,U);if($===0)throw new Error("Can't calculate camera options with same From and To");const W=Math.hypot(I,z),Z=s.ak(this.transform.cameraToCenterDistance/$/this.transform.tileSize),ee=180*Math.atan2(I,-z)/Math.PI;let oe=180*Math.acos(W/$)/Math.PI;return oe=U<0?90-oe:90+oe,{center:E.toLngLat(),elevation:_,zoom:Z,pitch:oe,bearing:ee}}calculateCameraOptionsFromCameraLngLatAltRotation(n,u,g,_,x){const E=this.transform.calculateCenterFromCameraLngLatAlt(n,u,g,_);return{center:E.center,elevation:E.elevation,zoom:E.zoom,bearing:g,pitch:_,roll:x}}easeTo(n,u){this._stop(!1,n.easeId),((n=s.e({offset:[0,0],duration:500,easing:s.co},n)).animate===!1||!n.essential&&R.prefersReducedMotion)&&(n.duration=0);const g=this._getTransformForUpdate(),_=this.getBearing(),x=g.pitch,E=g.roll,I="bearing"in n?this._normalizeBearing(n.bearing,_):_,z="pitch"in n?+n.pitch:x,U="roll"in n?this._normalizeBearing(n.roll,E):E,$="padding"in n?n.padding:g.padding,W=s.P.convert(n.offset);let Z,ee;n.around&&(Z=s.S.convert(n.around),ee=g.locationToScreenPoint(Z));const oe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},he=this.cameraHelper.handleEaseTo(g,{bearing:I,pitch:z,roll:U,padding:$,around:Z,aroundPoint:ee,offsetAsPoint:W,offset:n.offset,zoom:n.zoom,center:n.center});return this._rotating=this._rotating||_!==I,this._pitching=this._pitching||z!==x,this._rolling=this._rolling||U!==E,this._padding=!g.isPaddingEqual($),this._zooming=this._zooming||he.isZooming,this._easeId=n.easeId,this._prepareEase(u,n.noMoveStart,oe),this.terrain&&this._prepareElevation(he.elevationCenter),this._ease((de=>{he.easeFunc(de),this.terrain&&!n.freezeElevation&&this._updateElevation(de),this._applyUpdatedTransform(g),this._fireMoveEvents(u)}),(de=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(u,de)}),n),this}_prepareEase(n,u,g={}){this._moving=!0,u||g.moving||this.fire(new s.l("movestart",n)),this._zooming&&!g.zooming&&this.fire(new s.l("zoomstart",n)),this._rotating&&!g.rotating&&this.fire(new s.l("rotatestart",n)),this._pitching&&!g.pitching&&this.fire(new s.l("pitchstart",n)),this._rolling&&!g.rolling&&this.fire(new s.l("rollstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(n){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(n<1&&u!==this._elevationTarget){const g=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(g-(u-(g*n+this._elevationStart))/(1-n)),this._elevationTarget=u}this.transform.setElevation(s.C.number(this._elevationStart,this._elevationTarget,n))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(n){if(!this.terrain&&n.elevation>=0&&n.pitch<=90)return{};const u=n.getCameraLngLat(),g=n.getCameraAltitude(),_=this.terrain?this.terrain.getElevationForLngLatZoom(u,n.zoom):0;if(g<_){const x=this.calculateCameraOptionsFromTo(u,_,n.center,n.elevation);return{pitch:x.pitch,zoom:x.zoom}}return{}}_applyUpdatedTransform(n){const u=[];if(u.push((_=>this._elevateCameraIfInsideTerrain(_))),this.transformCameraUpdate&&u.push((_=>this.transformCameraUpdate(_))),!u.length)return;const g=n.clone();for(const _ of u){const x=g.clone(),{center:E,zoom:I,roll:z,pitch:U,bearing:$,elevation:W}=_(x);E&&x.setCenter(E),W!==void 0&&x.setElevation(W),I!==void 0&&x.setZoom(I),z!==void 0&&x.setRoll(z),U!==void 0&&x.setPitch(U),$!==void 0&&x.setBearing($),g.apply(x)}this.transform.apply(g)}_fireMoveEvents(n){this.fire(new s.l("move",n)),this._zooming&&this.fire(new s.l("zoom",n)),this._rotating&&this.fire(new s.l("rotate",n)),this._pitching&&this.fire(new s.l("pitch",n)),this._rolling&&this.fire(new s.l("roll",n))}_afterEase(n,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const g=this._zooming,_=this._rotating,x=this._pitching,E=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,g&&this.fire(new s.l("zoomend",n)),_&&this.fire(new s.l("rotateend",n)),x&&this.fire(new s.l("pitchend",n)),E&&this.fire(new s.l("rollend",n)),this.fire(new s.l("moveend",n))}flyTo(n,u){if(!n.essential&&R.prefersReducedMotion){const Ye=s.Q(n,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Ye,u)}this.stop(),n=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.co},n);const g=this._getTransformForUpdate(),_=g.bearing,x=g.pitch,E=g.roll,I=g.padding,z="bearing"in n?this._normalizeBearing(n.bearing,_):_,U="pitch"in n?+n.pitch:x,$="roll"in n?this._normalizeBearing(n.roll,E):E,W="padding"in n?n.padding:g.padding,Z=s.P.convert(n.offset);let ee=g.centerPoint.add(Z);const oe=g.screenPointToLocation(ee),he=this.cameraHelper.handleFlyTo(g,{bearing:z,pitch:U,roll:$,padding:W,locationAtOffset:oe,offsetAsPoint:Z,center:n.center,minZoom:n.minZoom,zoom:n.zoom});let de=n.curve;const pe=Math.max(g.width,g.height),ve=pe/he.scaleOfZoom,xe=he.pixelPathLength;typeof he.scaleOfMinZoom=="number"&&(de=Math.sqrt(pe/he.scaleOfMinZoom/xe*2));const be=de*de;function Ce(Ye){const wt=(ve*ve-pe*pe+(Ye?-1:1)*be*be*xe*xe)/(2*(Ye?ve:pe)*be*xe);return Math.log(Math.sqrt(wt*wt+1)-wt)}function De(Ye){return(Math.exp(Ye)-Math.exp(-Ye))/2}function we(Ye){return(Math.exp(Ye)+Math.exp(-Ye))/2}const Re=Ce(!1);let Xe=function(Ye){return we(Re)/we(Re+de*Ye)},He=function(Ye){return pe*((we(Re)*(De(wt=Re+de*Ye)/we(wt))-De(Re))/be)/xe;var wt},We=(Ce(!0)-Re)/de;if(Math.abs(xe)<2e-6||!isFinite(We)){if(Math.abs(pe-ve)<1e-6)return this.easeTo(n,u);const Ye=ve<pe?-1:1;We=Math.abs(Math.log(ve/pe))/de,He=()=>0,Xe=wt=>Math.exp(Ye*de*wt)}return n.duration="duration"in n?+n.duration:1e3*We/("screenSpeed"in n?+n.screenSpeed/de:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=_!==z,this._pitching=U!==x,this._rolling=$!==E,this._padding=!g.isPaddingEqual(W),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(he.targetCenter),this._ease((Ye=>{const wt=Ye*We,St=1/Xe(wt),dt=He(wt);this._rotating&&g.setBearing(s.C.number(_,z,Ye)),this._pitching&&g.setPitch(s.C.number(x,U,Ye)),this._rolling&&g.setRoll(s.C.number(E,$,Ye)),this._padding&&(g.interpolatePadding(I,W,Ye),ee=g.centerPoint.add(Z)),he.easeFunc(Ye,St,dt,ee),this.terrain&&!n.freezeElevation&&this._updateElevation(Ye),this._applyUpdatedTransform(g),this._fireMoveEvents(u)}),(()=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(u)}),n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,u){var g;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const _=this._onEaseEnd;delete this._onEaseEnd,_.call(this,u)}return n||(g=this.handlers)===null||g===void 0||g.stop(!1),this}_ease(n,u,g){g.animate===!1||g.duration===0?(n(1),u()):(this._easeStart=R.now(),this._easeOptions=g,this._onEaseFrame=n,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(n,u){n=s.aO(n,-180,180);const g=Math.abs(n-u);return Math.abs(n-360-u)<g&&(n-=360),Math.abs(n+360-u)<g&&(n+=360),n}queryTerrainElevation(n){return this.terrain?this.terrain.getElevationForLngLatZoom(s.S.convert(n),this.transform.tileZoom):null}}const Bt={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Kt{constructor(n=Bt){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=n}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options.compact,this._container=j.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=j.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=j.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){j.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,u){const g=this._map._getUIString(`AttributionControl.${u}`);n.title=g,n.setAttribute("aria-label",g)}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map((_=>typeof _!="string"?"":_))):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const u=this._map.style.sourceCaches;for(const _ in u){const x=u[_];if(x.used||x.usedForTerrain){const E=x.getSource();E.attribution&&n.indexOf(E.attribution)<0&&n.push(E.attribution)}}n=n.filter((_=>String(_).trim())),n.sort(((_,x)=>_.length-x.length)),n=n.filter(((_,x)=>{for(let E=x+1;E<n.length;E++)if(n[E].indexOf(_)>=0)return!1;return!0}));const g=n.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,n.length?(this._innerContainer.innerHTML=j.sanitize(g),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Sc{constructor(n={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const g=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&g.classList.add("maplibregl-compact"):g.classList.remove("maplibregl-compact")}},this.options=n}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=j.create("div","maplibregl-ctrl");const u=j.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){j.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Ad{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const u=++this._id;return this._queue.push({callback:n,id:u,cancelled:!1}),u}remove(n){const u=this._currentlyRunning,g=u?this._queue.concat(u):this._queue;for(const _ of g)if(_.id===n)return void(_.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const g of u)if(!g.cancelled&&(g.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var uu=s.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class fr extends s.E{constructor(n){super(),this._lastTilesetChange=R.now(),this.sourceCache=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=n._source.tileSize*2**this.deltaZoom,n.usedForTerrain=!0,n.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(n,u){this.sourceCache.update(n,u),this._renderableTilesKeys=[];const g={};for(const _ of wn(n,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))g[_.key]=!0,this._renderableTilesKeys.push(_.key),this._tiles[_.key]||(_.terrainRttPosMatrix32f=new Float64Array(16),s.bZ(_.terrainRttPosMatrix32f,0,s.$,s.$,0,0,1),this._tiles[_.key]=new ie(_,this.tileSize),this._lastTilesetChange=R.now());for(const _ in this._tiles)g[_]||delete this._tiles[_]}freeRtt(n){for(const u in this._tiles){const g=this._tiles[u];(!n||g.tileID.equals(n)||g.tileID.isChildOf(n)||n.isChildOf(g.tileID))&&(g.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((n=>this.getTileByID(n)))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n,u){return u?this._getTerrainCoordsForTileRanges(n,u):this._getTerrainCoordsForRegularTile(n)}_getTerrainCoordsForRegularTile(n){const u={};for(const g of this._renderableTilesKeys){const _=this._tiles[g].tileID,x=n.clone(),E=s.ba();if(_.canonical.equals(n.canonical))s.bZ(E,0,s.$,s.$,0,0,1);else if(_.canonical.isChildOf(n.canonical)){const I=_.canonical.z-n.canonical.z,z=_.canonical.x-(_.canonical.x>>I<<I),U=_.canonical.y-(_.canonical.y>>I<<I),$=s.$>>I;s.bZ(E,0,$,$,0,0,1),s.M(E,E,[-z*$,-U*$,0])}else{if(!n.canonical.isChildOf(_.canonical))continue;{const I=n.canonical.z-_.canonical.z,z=n.canonical.x-(n.canonical.x>>I<<I),U=n.canonical.y-(n.canonical.y>>I<<I),$=s.$>>I;s.bZ(E,0,s.$,s.$,0,0,1),s.M(E,E,[z*$,U*$,0]),s.N(E,E,[1/2**I,1/2**I,0])}}x.terrainRttPosMatrix32f=new Float32Array(E),u[g]=x}return u}_getTerrainCoordsForTileRanges(n,u){const g={};for(const _ of this._renderableTilesKeys){const x=this._tiles[_].tileID;if(!this._isWithinTileRanges(x,u))continue;const E=n.clone(),I=s.ba();if(x.canonical.z===n.canonical.z){const z=n.canonical.x-x.canonical.x,U=n.canonical.y-x.canonical.y;s.bZ(I,0,s.$,s.$,0,0,1),s.M(I,I,[z*s.$,U*s.$,0])}else if(x.canonical.z>n.canonical.z){const z=x.canonical.z-n.canonical.z,U=x.canonical.x-(x.canonical.x>>z<<z),$=x.canonical.y-(x.canonical.y>>z<<z),W=n.canonical.x-(x.canonical.x>>z),Z=n.canonical.y-(x.canonical.y>>z),ee=s.$>>z;s.bZ(I,0,ee,ee,0,0,1),s.M(I,I,[-U*ee+W*s.$,-$*ee+Z*s.$,0])}else{const z=n.canonical.z-x.canonical.z,U=n.canonical.x-(n.canonical.x>>z<<z),$=n.canonical.y-(n.canonical.y>>z<<z),W=(n.canonical.x>>z)-x.canonical.x,Z=(n.canonical.y>>z)-x.canonical.y,ee=s.$<<z;s.bZ(I,0,ee,ee,0,0,1),s.M(I,I,[U*s.$+W*ee,$*s.$+Z*ee,0])}E.terrainRttPosMatrix32f=new Float32Array(I),g[_]=E}return g}getSourceTile(n,u){const g=this.sourceCache._source;let _=n.overscaledZ-this.deltaZoom;if(_>g.maxzoom&&(_=g.maxzoom),_<g.minzoom)return null;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(_).key);let x=this.sourceCache.getTileByID(this._sourceTileCache[n.key]);if((!x||!x.dem)&&u)for(;_>=g.minzoom&&(!x||!x.dem);)x=this.sourceCache.getTileByID(n.scaledTo(_--).key);return x}anyTilesAfterTime(n=Date.now()){return this._lastTilesetChange>=n}_isWithinTileRanges(n,u){return u[n.canonical.z]&&n.canonical.x>=u[n.canonical.z].minTileX&&n.canonical.x<=u[n.canonical.z].maxTileX&&n.canonical.y>=u[n.canonical.z].minTileY&&n.canonical.y<=u[n.canonical.z].maxTileY}}class Fa{constructor(n,u,g){this._meshCache={},this.painter=n,this.sourceCache=new fr(u),this.options=g,this.exaggeration=typeof g.exaggeration=="number"?g.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,u,g,_=s.$){var x;if(!(u>=0&&u<_&&g>=0&&g<_))return 0;const E=this.getTerrainData(n),I=(x=E.tile)===null||x===void 0?void 0:x.dem;if(!I)return 0;const z=s.cs([],[u/_*s.$,g/_*s.$],E.u_terrain_matrix),U=[z[0]*I.dim,z[1]*I.dim],$=Math.floor(U[0]),W=Math.floor(U[1]),Z=U[0]-$,ee=U[1]-W;return I.get($,W)*(1-Z)*(1-ee)+I.get($+1,W)*Z*(1-ee)+I.get($,W+1)*(1-Z)*ee+I.get($+1,W+1)*Z*ee}getElevationForLngLatZoom(n,u){if(!s.ct(u,n.wrap()))return 0;const{tileID:g,mercatorX:_,mercatorY:x}=this._getOverscaledTileIDFromLngLatZoom(n,u);return this.getElevation(g,_%s.$,x%s.$,s.$)}getElevation(n,u,g,_=s.$){return this.getDEMElevation(n,u,g,_)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const _=this.painter.context,x=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new s.T(_,x,_.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new s.T(_,new s.R({width:1,height:1}),_.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.ag([])}const u=this.sourceCache.getSourceTile(n,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const _=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new s.T(_,u.dem.getPixels(),_.gl.RGBA,{premultiply:!1}),u.demTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const g=u&&u+u.tileID.key+n.key;if(g&&!this._demMatrixCache[g]){const _=this.sourceCache.sourceCache._source.maxzoom;let x=n.canonical.z-u.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=_?x=n.canonical.z-_:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const E=n.canonical.x-(n.canonical.x>>x<<x),I=n.canonical.y-(n.canonical.y>>x<<x),z=s.cu(new Float64Array(16),[1/(s.$<<x),1/(s.$<<x),0]);s.M(z,z,[E*s.$,I*s.$,0]),this._demMatrixCache[n.key]={matrix:z,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:g?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(n){const u=this.painter,g=u.width/devicePixelRatio,_=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===g&&this._fbo.height===_||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new s.T(u.context,{width:g,height:_,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new s.T(u.context,{width:g,height:_,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(g,_,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,g,_))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let x=0,E=0;x<this._coordsTextureSize;x++)for(let I=0;I<this._coordsTextureSize;I++,E+=4)u[E+0]=255&I,u[E+1]=255&x,u[E+2]=I>>8<<4|x>>8,u[E+3]=0;const g=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),_=new s.T(n,g,n.gl.RGBA,{premultiply:!1});return _.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=_,_}pointCoordinate(n){this.painter.maybeDrawDepthAndCoords(!0);const u=new Uint8Array(4),g=this.painter.context,_=g.gl,x=Math.round(n.x*this.painter.pixelRatio/devicePixelRatio),E=Math.round(n.y*this.painter.pixelRatio/devicePixelRatio),I=Math.round(this.painter.height/devicePixelRatio);g.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),_.readPixels(x,I-E-1,1,1,_.RGBA,_.UNSIGNED_BYTE,u),g.bindFramebuffer.set(null);const z=u[0]+(u[2]>>4<<8),U=u[1]+((15&u[2])<<8),$=this.coordsIndex[255-u[3]],W=$&&this.sourceCache.getTileByID($);if(!W)return null;const Z=this._coordsTextureSize,ee=(1<<W.tileID.canonical.z)*Z;return new s.a1((W.tileID.canonical.x*Z+z)/ee+W.tileID.wrap,(W.tileID.canonical.y*Z+U)/ee,this.getElevation(W.tileID,z,U,Z))}depthAtPoint(n){const u=new Uint8Array(4),g=this.painter.context,_=g.gl;return g.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),_.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,_.RGBA,_.UNSIGNED_BYTE,u),g.bindFramebuffer.set(null),(u[0]/16777216+u[1]/65536+u[2]/256+u[3])/256}getTerrainMesh(n){var u;const g=((u=this.painter.style.projection)===null||u===void 0?void 0:u.transitionState)>0,_=g&&n.canonical.y===0,x=g&&n.canonical.y===(1<<n.canonical.z)-1,E=`m_${_?"n":""}_${x?"s":""}`;if(this._meshCache[E])return this._meshCache[E];const I=this.painter.context,z=new s.cv,U=new s.aN,$=this.meshSize,W=s.$/$,Z=$*$;for(let we=0;we<=$;we++)for(let Re=0;Re<=$;Re++)z.emplaceBack(Re*W,we*W,0);for(let we=0;we<Z;we+=$+1)for(let Re=0;Re<$;Re++)U.emplaceBack(Re+we,$+Re+we+1,$+Re+we+2),U.emplaceBack(Re+we,$+Re+we+2,Re+we+1);const ee=z.length,oe=ee+($+1),he=($+1)*$,de=_?s.bh:0,pe=_?0:1,ve=x?s.bi:s.$,xe=x?0:1;for(let we=0;we<=$;we++)z.emplaceBack(we*W,de,pe);for(let we=0;we<=$;we++)z.emplaceBack(we*W,ve,xe);for(let we=0;we<$;we++)U.emplaceBack(he+we,oe+we,oe+we+1),U.emplaceBack(he+we,oe+we+1,he+we+1),U.emplaceBack(0+we,ee+we+1,ee+we),U.emplaceBack(0+we,0+we+1,ee+we+1);const be=z.length,Ce=be+2*($+1);for(const we of[0,1])for(let Re=0;Re<=$;Re++)for(const Xe of[0,1])z.emplaceBack(we*s.$,Re*W,Xe);for(let we=0;we<2*$;we+=2)U.emplaceBack(be+we,be+we+1,be+we+3),U.emplaceBack(be+we,be+we+3,be+we+2),U.emplaceBack(Ce+we,Ce+we+3,Ce+we+1),U.emplaceBack(Ce+we,Ce+we+2,Ce+we+3);const De=new ll(I.createVertexBuffer(z,uu.members),I.createIndexBuffer(U),s.aM.simpleSegment(0,0,z.length,U.length));return this._meshCache[E]=De,De}getMeshFrameDelta(n){return 2*Math.PI*s.bu/Math.pow(2,Math.max(n,0))/5}getMinTileElevationForLngLatZoom(n,u){var g;const{tileID:_}=this._getOverscaledTileIDFromLngLatZoom(n,u);return(g=this.getMinMaxElevation(_).minElevation)!==null&&g!==void 0?g:0}getMinMaxElevation(n){const u=this.getTerrainData(n).tile,g={minElevation:null,maxElevation:null};return u&&u.dem&&(g.minElevation=u.dem.min*this.exaggeration,g.maxElevation=u.dem.max*this.exaggeration),g}_getOverscaledTileIDFromLngLatZoom(n,u){const g=s.a1.fromLngLat(n.wrap()),_=(1<<u)*s.$,x=g.x*_,E=g.y*_,I=Math.floor(x/s.$),z=Math.floor(E/s.$);return{tileID:new s.Z(u,0,u,I,z),mercatorX:x,mercatorY:E}}}class Pi{constructor(n,u,g){this._context=n,this._size=u,this._tileSize=g,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),g=new s.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return g.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(g.texture),{id:n,fbo:u,texture:g,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((u=>n.id!==u)),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((n=>!n.inUse))===!1}}const ks={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class lm{constructor(n,u){this.painter=n,this.terrain=u,this.pool=new Pi(n.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=n._order.filter((g=>!n._layers[g].isHidden(u))),this._coordsAscending={};for(const g in n.sourceCaches){this._coordsAscending[g]={};const _=n.sourceCaches[g].getVisibleCoordinates(),x=n.sourceCaches[g].getSource(),E=x instanceof Oi?x.terrainTileRanges:null;for(const I of _){const z=this.terrain.sourceCache.getTerrainCoords(I,E);for(const U in z)this._coordsAscending[g][U]||(this._coordsAscending[g][U]=[]),this._coordsAscending[g][U].push(z[U])}}this._coordsAscendingStr={};for(const g of n._order){const _=n._layers[g],x=_.source;if(ks[_.type]&&!this._coordsAscendingStr[x]){this._coordsAscendingStr[x]={};for(const E in this._coordsAscending[x])this._coordsAscendingStr[x][E]=this._coordsAscending[x][E].map((I=>I.key)).sort().join()}}for(const g of this._renderableTiles)for(const _ in this._coordsAscendingStr){const x=this._coordsAscendingStr[_][g.tileID.key];x&&x!==g.rttCoords[_]&&(g.rtt=[])}}renderLayer(n,u){if(n.isHidden(this.painter.transform.zoom))return!1;const g=Object.assign(Object.assign({},u),{isRenderingToTexture:!0}),_=n.type,x=this.painter,E=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(ks[_]&&(this._prevType&&ks[this._prevType]||this._stacks.push([]),this._prevType=_,this._stacks[this._stacks.length-1].push(n.id),!E))return!0;if(ks[this._prevType]||ks[_]&&E){this._prevType=_;const I=this._stacks.length-1,z=this._stacks[I]||[];for(const U of this._renderableTiles){if(this.pool.isFull()&&(rs(this.painter,this.terrain,this._rttTiles,g),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(U),U.rtt[I]){const W=this.pool.getObjectForId(U.rtt[I].id);if(W.stamp===U.rtt[I].stamp){this.pool.useObject(W);continue}}const $=this.pool.getOrCreateFreeObject();this.pool.useObject($),this.pool.stampObject($),U.rtt[I]={id:$.id,stamp:$.stamp},x.context.bindFramebuffer.set($.fbo.framebuffer),x.context.clear({color:s.bf.transparent,stencil:0}),x.currentStencilSource=void 0;for(let W=0;W<z.length;W++){const Z=x.style._layers[z[W]],ee=Z.source?this._coordsAscending[Z.source][U.tileID.key]:[U.tileID];x.context.viewport.set([0,0,$.fbo.width,$.fbo.height]),x._renderTileClippingMasks(Z,ee,!0),x.renderLayer(x,x.style.sourceCaches[Z.source],Z,ee,g),Z.source&&(U.rttCoords[Z.source]=this._coordsAscendingStr[Z.source][U.tileID.key])}}return rs(this.painter,this.terrain,this._rttTiles,g),this._rttTiles=[],this.pool.freeAllObjects(),ks[_]}return!1}}const Pl={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Ua=M,vr={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Bt,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},pr={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class tr{constructor(n,u,g=!1){this.mousedown=x=>{this.startMove(x,j.mousePos(this.element,x)),j.addEventListener(window,"mousemove",this.mousemove),j.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=x=>{this.move(x,j.mousePos(this.element,x))},this.mouseup=x=>{this._rotatePitchHandler.dragEnd(x),this.offTemp()},this.touchstart=x=>{x.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=j.touchPos(this.element,x.targetTouches)[0],this.startMove(x,this._startPos),j.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),j.addEventListener(window,"touchend",this.touchend))},this.touchmove=x=>{x.targetTouches.length!==1?this.reset():(this._lastPos=j.touchPos(this.element,x.targetTouches)[0],this.move(x,this._lastPos))},this.touchend=x=>{x.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=u;const _=new fh;this._rotatePitchHandler=new su({clickTolerance:3,move:(x,E)=>{const I=u.getBoundingClientRect(),z=new s.P((I.bottom-I.top)/2,(I.right-I.left)/2);return{bearingDelta:s.cn(new s.P(x.x,E.y),E,z),pitchDelta:g?-.5*(E.y-x.y):void 0}},moveStateManager:_,enable:!0,assignEvents:()=>{}}),this.map=n,j.addEventListener(u,"mousedown",this.mousedown),j.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),j.addEventListener(u,"touchcancel",this.reset)}startMove(n,u){this._rotatePitchHandler.dragStart(n,u),j.disableDrag()}move(n,u){const g=this.map,{bearingDelta:_,pitchDelta:x}=this._rotatePitchHandler.dragMove(n,u)||{};_&&g.setBearing(g.getBearing()+_),x&&g.setPitch(g.getPitch()+x)}off(){const n=this.element;j.removeEventListener(n,"mousedown",this.mousedown),j.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),j.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),j.removeEventListener(window,"touchend",this.touchend),j.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){j.enableDrag(),j.removeEventListener(window,"mousemove",this.mousemove),j.removeEventListener(window,"mouseup",this.mouseup),j.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),j.removeEventListener(window,"touchend",this.touchend)}}let dn;function Gn(b,n,u,g=!1){if(g||!u.getCoveringTilesDetailsProvider().allowWorldCopies())return b?.wrap();const _=new s.S(b.lng,b.lat);if(b=new s.S(b.lng,b.lat),n){const x=new s.S(b.lng-360,b.lat),E=new s.S(b.lng+360,b.lat),I=u.locationToScreenPoint(b).distSqr(n);u.locationToScreenPoint(x).distSqr(n)<I?b=x:u.locationToScreenPoint(E).distSqr(n)<I&&(b=E)}for(;Math.abs(b.lng-u.center.lng)>180;){const x=u.locationToScreenPoint(b);if(x.x>=0&&x.y>=0&&x.x<=u.width&&x.y<=u.height)break;b.lng>u.center.lng?b.lng-=360:b.lng+=360}return b.lng!==_.lng&&u.isPointOnMapSurface(u.locationToScreenPoint(b))?b:_}const wr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Tc(b,n,u){const g=b.classList;for(const _ in wr)g.remove(`maplibregl-${u}-anchor-${_}`);g.add(`maplibregl-${u}-anchor-${n}`)}class os extends s.E{constructor(n){if(super(),this._onKeyPress=u=>{const g=u.code,_=u.charCode||u.keyCode;g!=="Space"&&g!=="Enter"&&_!==32&&_!==13||this.togglePopup()},this._onMapClick=u=>{const g=u.originalEvent.target,_=this._element;this._popup&&(g===_||_.contains(g))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const g=this._map.loaded()&&!this._map.isMoving();(u?.type==="terrain"||u?.type==="render"&&!g)&&this._map.once("render",this._update),this._lngLat=Gn(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let x="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?x="rotateX(0deg)":this._pitchAlignment==="map"&&(x=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||u&&u.type!=="moveend"||(this._pos=this._pos.round()),j.setTransform(this._element,`${wr[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${x} ${_}`),R.frameAsync(new AbortController).then((()=>{this._updateOpacity(u&&u.type==="moveend")})).catch((()=>{}))},this._onMove=u=>{if(!this._isDragging){const g=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=g}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.l("dragstart"))),this.fire(new s.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.l("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._subpixelPositioning=n&&n.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,this.setOpacity(n?.opacity,n?.opacityWhenCovered),n&&n.element)this._element=n.element,this._offset=s.P.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=j.create("div");const u=j.createNS("http://www.w3.org/2000/svg","svg"),g=41,_=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${g}px`),u.setAttributeNS(null,"width",`${_}px`),u.setAttributeNS(null,"viewBox",`0 0 ${_} ${g}`);const x=j.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"stroke","none"),x.setAttributeNS(null,"stroke-width","1"),x.setAttributeNS(null,"fill","none"),x.setAttributeNS(null,"fill-rule","evenodd");const E=j.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"fill-rule","nonzero");const I=j.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const pe of z){const ve=j.createNS("http://www.w3.org/2000/svg","ellipse");ve.setAttributeNS(null,"opacity","0.04"),ve.setAttributeNS(null,"cx","10.5"),ve.setAttributeNS(null,"cy","5.80029008"),ve.setAttributeNS(null,"rx",pe.rx),ve.setAttributeNS(null,"ry",pe.ry),I.appendChild(ve)}const U=j.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"fill",this._color);const $=j.createNS("http://www.w3.org/2000/svg","path");$.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),U.appendChild($);const W=j.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"opacity","0.25"),W.setAttributeNS(null,"fill","#000000");const Z=j.createNS("http://www.w3.org/2000/svg","path");Z.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),W.appendChild(Z);const ee=j.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ee.setAttributeNS(null,"fill","#FFFFFF");const oe=j.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const he=j.createNS("http://www.w3.org/2000/svg","circle");he.setAttributeNS(null,"fill","#000000"),he.setAttributeNS(null,"opacity","0.25"),he.setAttributeNS(null,"cx","5.5"),he.setAttributeNS(null,"cy","5.5"),he.setAttributeNS(null,"r","5.4999962");const de=j.createNS("http://www.w3.org/2000/svg","circle");de.setAttributeNS(null,"fill","#FFFFFF"),de.setAttributeNS(null,"cx","5.5"),de.setAttributeNS(null,"cy","5.5"),de.setAttributeNS(null,"r","5.4999962"),oe.appendChild(he),oe.appendChild(de),E.appendChild(I),E.appendChild(U),E.appendChild(W),E.appendChild(ee),E.appendChild(oe),u.appendChild(E),u.setAttributeNS(null,"height",g*this._scale+"px"),u.setAttributeNS(null,"width",_*this._scale+"px"),this._element.appendChild(u),this._offset=s.P.convert(n&&n.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(u=>{u.preventDefault()})),this._element.addEventListener("mousedown",(u=>{u.preventDefault()})),Tc(this._element,this._anchor,"marker"),n&&n.className)for(const u of n.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(n){return this.remove(),this._map=n,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",n._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),n.on("terrain",this._update),n.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),j.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=s.S.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const _=Math.abs(13.5)/Math.SQRT2;n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(n){return this._subpixelPositioning=n,this}getPopup(){return this._popup}togglePopup(){const n=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:n?(n.isOpen()?n.remove():(n.setLngLat(this._lngLat),n.addTo(this._map)),this):this}_updateOpacity(n=!1){var u,g;const _=(u=this._map)===null||u===void 0?void 0:u.terrain,x=this._map.transform.isLocationOccluded(this._lngLat);if(!_||x){const ee=x?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==ee&&(this._element.style.opacity=ee))}if(n)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const E=this._map,I=E.terrain.depthAtPoint(this._pos),z=E.terrain.getElevationForLngLatZoom(this._lngLat,E.transform.tileZoom);if(E.transform.lngLatToCameraDepth(this._lngLat,z)-I<.006)return void(this._element.style.opacity=this._opacity);const U=-this._offset.y/E.transform.pixelsPerMeter,$=Math.sin(E.getPitch()*Math.PI/180)*U,W=E.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),Z=E.transform.lngLatToCameraDepth(this._lngLat,z+$)-W>.006;!((g=this._popup)===null||g===void 0)&&g.isOpen()&&Z&&this._popup.remove(),this._element.style.opacity=Z?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(n){return this._offset=s.P.convert(n),this._update(),this}addClassName(n){this._element.classList.add(n)}removeClassName(n){this._element.classList.remove(n)}toggleClassName(n){return this._element.classList.toggle(n)}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(n,u){return(this._opacity===void 0||n===void 0&&u===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),n!==void 0&&(this._opacity=n),u!==void 0&&(this._opacityWhenCovered=u),this._map&&this._updateOpacity(!0),this}}const Os={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Io=0,zo=!1;const Dl={maxWidth:100,unit:"metric"};function Pd(b,n,u){const g=u&&u.maxWidth||100,_=b._container.clientHeight/2,x=b._container.clientWidth/2,E=b.unproject([x-g/2,_]),I=b.unproject([x+g/2,_]),z=Math.round(b.project(I).x-b.project(E).x),U=Math.min(g,z,b._container.clientWidth),$=E.distanceTo(I);if(u&&u.unit==="imperial"){const W=3.2808*$;W>5280?sr(n,U,W/5280,b._getUIString("ScaleControl.Miles")):sr(n,U,W,b._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?sr(n,U,$/1852,b._getUIString("ScaleControl.NauticalMiles")):$>=1e3?sr(n,U,$/1e3,b._getUIString("ScaleControl.Kilometers")):sr(n,U,$,b._getUIString("ScaleControl.Meters"))}function sr(b,n,u,g){const _=(function(x){const E=Math.pow(10,`${Math.floor(x)}`.length-1);let I=x/E;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:(function(z){const U=Math.pow(10,Math.ceil(-Math.log(z)/Math.LN10));return Math.round(z*U)/U})(I),E*I})(u);b.style.width=n*(_/u)+"px",b.innerHTML=`${_}&nbsp;${g}`}const _h={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},bh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function xh(b){if(b){if(typeof b=="number"){const n=Math.round(Math.abs(b)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,b),"top-left":new s.P(n,n),"top-right":new s.P(-n,n),bottom:new s.P(0,-b),"bottom-left":new s.P(n,-n),"bottom-right":new s.P(-n,-n),left:new s.P(b,0),right:new s.P(-b,0)}}if(b instanceof s.P||Array.isArray(b)){const n=s.P.convert(b);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:s.P.convert(b.center||[0,0]),top:s.P.convert(b.top||[0,0]),"top-left":s.P.convert(b["top-left"]||[0,0]),"top-right":s.P.convert(b["top-right"]||[0,0]),bottom:s.P.convert(b.bottom||[0,0]),"bottom-left":s.P.convert(b["bottom-left"]||[0,0]),"bottom-right":s.P.convert(b["bottom-right"]||[0,0]),left:s.P.convert(b.left||[0,0]),right:s.P.convert(b.right||[0,0])}}return xh(new s.P(0,0))}const Dd=M;m.AJAXError=s.cz,m.Event=s.l,m.Evented=s.E,m.LngLat=s.S,m.MercatorCoordinate=s.a1,m.Point=s.P,m.addProtocol=s.cA,m.config=s.a,m.removeProtocol=s.cB,m.AttributionControl=Kt,m.BoxZoomHandler=ji,m.CanvasSource=fs,m.CooperativeGesturesHandler=yh,m.DoubleClickZoomHandler=Ps,m.DragPanHandler=Ds,m.DragRotateHandler=lo,m.EdgeInsets=nc,m.FullscreenControl=class extends s.E{constructor(b={}){super(),this._onFullscreenChange=()=>{var n;let u=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((n=u?.shadowRoot)===null||n===void 0)&&n.fullscreenElement;)u=u.shadowRoot.fullscreenElement;u===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,b&&b.container&&(b.container instanceof HTMLElement?this._container=b.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(b){return this._map=b,this._container||(this._container=this._map.getContainer()),this._controlContainer=j.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){j.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const b=this._fullscreenButton=j.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);j.create("span","maplibregl-ctrl-icon",b).setAttribute("aria-hidden","true"),b.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const b=this._getTitle();this._fullscreenButton.setAttribute("aria-label",b),this._fullscreenButton.title=b}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},m.GeoJSONSource=Pa,m.GeolocateControl=class extends s.E{constructor(b){super(),this._onSuccess=n=>{if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new s.l("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(n),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.l("geolocate",n)),this._finish()}},this._updateCamera=n=>{const u=new s.S(n.coords.longitude,n.coords.latitude),g=n.coords.accuracy,_=this._map.getBearing(),x=s.e({bearing:_},this.options.fitBoundsOptions),E=rn.fromLngLat(u,g);this._map.fitBounds(E,x,{geolocateSource:!0})},this._updateMarker=n=>{if(n){const u=new s.S(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=n.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=n=>{if(this._map){if(n.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(n.code===3&&zo)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.l("error",n)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(n=>n.preventDefault())),this._geolocateButton=j.create("button","maplibregl-ctrl-geolocate",this._container),j.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=n=>{if(this._map){if(n===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=j.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new os({element:this._dotElement}),this._circleElement=j.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new os({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(u=>{const g=u?.[0]instanceof ResizeObserverEntry;u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||g||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.l("trackuserlocationend")),this.fire(new s.l("userlocationlostfocus")))}))}},this.options=s.e({},Os,b)}onAdd(b){return this._map=b,this._container=j.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return s._(this,arguments,void 0,(function*(n=!1){if(dn!==void 0&&!n)return dn;if(window.navigator.permissions===void 0)return dn=!!window.navigator.geolocation,dn;try{dn=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{dn=!!window.navigator.geolocation}return dn}))})().then((n=>this._finishSetupUI(n))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),j.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,Io=0,zo=!1}_isOutOfMapMaxBounds(b){const n=this._map.getMaxBounds(),u=b.coords;return n&&(u.longitude<n.getWest()||u.longitude>n.getEast()||u.latitude<n.getSouth()||u.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const b=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&b))return;const n=this._map.project(b),u=this._map.unproject([n.x+100,n.y]),g=b.distanceTo(u)/100,_=2*this._accuracy/g;this._circleElement.style.width=`${_.toFixed(2)}px`,this._circleElement.style.height=`${_.toFixed(2)}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Io--,zo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.l("trackuserlocationstart")),this.fire(new s.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let b;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Io++,Io>1?(b={maximumAge:6e5,timeout:0},zo=!0):(b=this.options.positionOptions,zo=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,b)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},m.GlobeControl=class{constructor(){this._toggleProjection=()=>{var b;const n=(b=this._map.getProjection())===null||b===void 0?void 0:b.type;this._map.setProjection(n!=="mercator"&&n?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var b;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((b=this._map.getProjection())===null||b===void 0?void 0:b.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(b){return this._map=b,this._container=j.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=j.create("button","maplibregl-ctrl-globe",this._container),j.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){j.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},m.Hash=ch,m.ImageSource=Oi,m.KeyboardHandler=Cl,m.LngLatBounds=rn,m.LogoControl=Sc,m.Map=class extends vh{constructor(b){var n,u;s.cw.mark(s.cx.create);const g=Object.assign(Object.assign(Object.assign({},vr),b),{canvasContextAttributes:Object.assign(Object.assign({},vr.canvasContextAttributes),b.canvasContextAttributes)});if(g.minZoom!=null&&g.maxZoom!=null&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(g.minPitch!=null&&g.maxPitch!=null&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(g.minPitch!=null&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(g.maxPitch!=null&&g.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const _=new Xo,x=new no;if(g.minZoom!==void 0&&_.setMinZoom(g.minZoom),g.maxZoom!==void 0&&_.setMaxZoom(g.maxZoom),g.minPitch!==void 0&&_.setMinPitch(g.minPitch),g.maxPitch!==void 0&&_.setMaxPitch(g.maxPitch),g.renderWorldCopies!==void 0&&_.setRenderWorldCopies(g.renderWorldCopies),super(_,x,{bearingSnap:g.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Ad,this._controls=[],this._mapId=s.a7(),this._contextLost=I=>{I.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new s.l("webglcontextlost",{originalEvent:I}))},this._contextRestored=I=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.l("webglcontextrestored",{originalEvent:I}))},this._onMapScroll=I=>{if(I.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=g.interactive,this._maxTileCacheSize=g.maxTileCacheSize,this._maxTileCacheZoomLevels=g.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},g.canvasContextAttributes),this._trackResize=g.trackResize===!0,this._bearingSnap=g.bearingSnap,this._centerClampedToGround=g.centerClampedToGround,this._refreshExpiredTiles=g.refreshExpiredTiles===!0,this._fadeDuration=g.fadeDuration,this._crossSourceCollisions=g.crossSourceCollisions===!0,this._collectResourceTiming=g.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Pl),g.locale),this._clickTolerance=g.clickTolerance,this._overridePixelRatio=g.pixelRatio,this._maxCanvasSize=g.maxCanvasSize,this.transformCameraUpdate=g.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=g.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=me.addThrottleControl((()=>this.isMoving())),this._requestManager=new fe(g.transformRequest),typeof g.container=="string"){if(this._container=document.getElementById(g.container),!this._container)throw new Error(`Container '${g.container}' not found.`)}else{if(!(g.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(g.maxBounds&&this.setMaxBounds(g.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let I=!1;const z=ko((U=>{this._trackResize&&!this._removed&&(this.resize(U),this.redraw())}),50);this._resizeObserver=new ResizeObserver((U=>{I?z(U):I=!0})),this._resizeObserver.observe(this._container)}this.handlers=new Oo(this,g),this._hash=g.hash&&new ch(typeof g.hash=="string"&&g.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:g.center,elevation:g.elevation,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,roll:g.roll}),g.bounds&&(this.resize(),this.fitBounds(g.bounds,s.e({},g.fitBoundsOptions,{duration:0}))));const E=typeof g.style=="string"||((u=(n=g.style)===null||n===void 0?void 0:n.projection)===null||u===void 0?void 0:u.type)!=="globe";this.resize(null,E),this._localIdeographFontFamily=g.localIdeographFontFamily,this._validateStyle=g.validateStyle,g.style&&this.setStyle(g.style,{localIdeographFontFamily:g.localIdeographFontFamily}),g.attributionControl&&this.addControl(new Kt(typeof g.attributionControl=="boolean"?void 0:g.attributionControl)),g.maplibreLogo&&this.addControl(new Sc,g.logoPosition),this.on("style.load",(()=>{if(E||this._resizeTransform(),this.transform.unmodified){const I=s.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(I)}})),this.on("data",(I=>{this._update(I.dataType==="style"),this.fire(new s.l(`${I.dataType}data`,I))})),this.on("dataloading",(I=>{this.fire(new s.l(`${I.dataType}dataloading`,I))})),this.on("dataabort",(I=>{this.fire(new s.l("sourcedataabort",I))}))}_getMapId(){return this._mapId}setGlobalStateProperty(b,n){return this.style.setGlobalStateProperty(b,n),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(b,n){if(n===void 0&&(n=b.getDefaultPosition?b.getDefaultPosition():"top-right"),!b||!b.onAdd)return this.fire(new s.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=b.onAdd(this);this._controls.push(b);const g=this._controlPositions[n];return n.indexOf("bottom")!==-1?g.insertBefore(u,g.firstChild):g.appendChild(u),this}removeControl(b){if(!b||!b.onRemove)return this.fire(new s.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(b);return n>-1&&this._controls.splice(n,1),b.onRemove(this),this}hasControl(b){return this._controls.indexOf(b)>-1}coveringTiles(b){return wn(this.transform,b)}calculateCameraOptionsFromTo(b,n,u,g){return g==null&&this.terrain&&(g=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(b,n,u,g)}resize(b,n=!0){const[u,g]=this._containerDimensions(),_=this._getClampedPixelRatio(u,g);if(this._resizeCanvas(u,g,_),this.painter.resize(u,g,_),this.painter.overLimit()){const E=this.painter.context.gl;this._maxCanvasSize=[E.drawingBufferWidth,E.drawingBufferHeight];const I=this._getClampedPixelRatio(u,g);this._resizeCanvas(u,g,I),this.painter.resize(u,g,I)}this._resizeTransform(n);const x=!this._moving;return x&&(this.stop(),this.fire(new s.l("movestart",b)).fire(new s.l("move",b))),this.fire(new s.l("resize",b)),x&&this.fire(new s.l("moveend",b)),this}_resizeTransform(b=!0){var n;const[u,g]=this._containerDimensions();this.transform.resize(u,g,b),(n=this._requestedCameraState)===null||n===void 0||n.resize(u,g,b)}_getClampedPixelRatio(b,n){const{0:u,1:g}=this._maxCanvasSize,_=this.getPixelRatio(),x=b*_,E=n*_;return Math.min(x>u?u/x:1,E>g?g/E:1)*_}getPixelRatio(){var b;return(b=this._overridePixelRatio)!==null&&b!==void 0?b:devicePixelRatio}setPixelRatio(b){this._overridePixelRatio=b,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(b){return this.transform.setMaxBounds(rn.convert(b)),this._update()}setMinZoom(b){if((b=b??-2)>=-2&&b<=this.transform.maxZoom)return this.transform.setMinZoom(b),this._update(),this.getZoom()<b&&this.setZoom(b),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(b){if((b=b??22)>=this.transform.minZoom)return this.transform.setMaxZoom(b),this._update(),this.getZoom()>b&&this.setZoom(b),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(b){if((b=b??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(b>=0&&b<=this.transform.maxPitch)return this.transform.setMinPitch(b),this._update(),this.getPitch()<b&&this.setPitch(b),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(b){if((b=b??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(b>=this.transform.minPitch)return this.transform.setMaxPitch(b),this._update(),this.getPitch()>b&&this.setPitch(b),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(b){return this.transform.setRenderWorldCopies(b),this._update()}project(b){return this.transform.locationToScreenPoint(s.S.convert(b),this.style&&this.terrain)}unproject(b){return this.transform.screenPointToLocation(s.P.convert(b),this.terrain)}isMoving(){var b;return this._moving||((b=this.handlers)===null||b===void 0?void 0:b.isMoving())}isZooming(){var b;return this._zooming||((b=this.handlers)===null||b===void 0?void 0:b.isZooming())}isRotating(){var b;return this._rotating||((b=this.handlers)===null||b===void 0?void 0:b.isRotating())}_createDelegatedListener(b,n,u){if(b==="mouseenter"||b==="mouseover"){let g=!1;return{layers:n,listener:u,delegates:{mousemove:x=>{const E=n.filter((z=>this.getLayer(z))),I=E.length!==0?this.queryRenderedFeatures(x.point,{layers:E}):[];I.length?g||(g=!0,u.call(this,new ya(b,this,x.originalEvent,{features:I}))):g=!1},mouseout:()=>{g=!1}}}}if(b==="mouseleave"||b==="mouseout"){let g=!1;return{layers:n,listener:u,delegates:{mousemove:E=>{const I=n.filter((z=>this.getLayer(z)));(I.length!==0?this.queryRenderedFeatures(E.point,{layers:I}):[]).length?g=!0:g&&(g=!1,u.call(this,new ya(b,this,E.originalEvent)))},mouseout:E=>{g&&(g=!1,u.call(this,new ya(b,this,E.originalEvent)))}}}}{const g=_=>{const x=n.filter((I=>this.getLayer(I))),E=x.length!==0?this.queryRenderedFeatures(_.point,{layers:x}):[];E.length&&(_.features=E,u.call(this,_),delete _.features)};return{layers:n,listener:u,delegates:{[b]:g}}}}_saveDelegatedListener(b,n){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[b]=this._delegatedListeners[b]||[],this._delegatedListeners[b].push(n)}_removeDelegatedListener(b,n,u){if(!this._delegatedListeners||!this._delegatedListeners[b])return;const g=this._delegatedListeners[b];for(let _=0;_<g.length;_++){const x=g[_];if(x.listener===u&&x.layers.length===n.length&&x.layers.every((E=>n.includes(E)))){for(const E in x.delegates)this.off(E,x.delegates[E]);return void g.splice(_,1)}}}on(b,n,u){if(u===void 0)return super.on(b,n);const g=typeof n=="string"?[n]:n,_=this._createDelegatedListener(b,g,u);this._saveDelegatedListener(b,_);for(const x in _.delegates)this.on(x,_.delegates[x]);return{unsubscribe:()=>{this._removeDelegatedListener(b,g,u)}}}once(b,n,u){if(u===void 0)return super.once(b,n);const g=typeof n=="string"?[n]:n,_=this._createDelegatedListener(b,g,u);for(const x in _.delegates){const E=_.delegates[x];_.delegates[x]=(...I)=>{this._removeDelegatedListener(b,g,u),E(...I)}}this._saveDelegatedListener(b,_);for(const x in _.delegates)this.once(x,_.delegates[x]);return this}off(b,n,u){return u===void 0?super.off(b,n):(this._removeDelegatedListener(b,typeof n=="string"?[n]:n,u),this)}queryRenderedFeatures(b,n){if(!this.style)return[];let u;const g=b instanceof s.P||Array.isArray(b),_=g?b:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(g?{}:b)||{},_ instanceof s.P||typeof _[0]=="number")u=[s.P.convert(_)];else{const x=s.P.convert(_[0]),E=s.P.convert(_[1]);u=[x,new s.P(E.x,x.y),E,new s.P(x.x,E.y),x]}return this.style.queryRenderedFeatures(u,n,this.transform)}querySourceFeatures(b,n){return this.style.querySourceFeatures(b,n)}setStyle(b,n){return(n=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&b?(this._diffStyle(b,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(b,n))}setTransformRequest(b){return this._requestManager.setTransformRequest(b),this}_getUIString(b){const n=this._locale[b];if(n==null)throw new Error(`Missing UI string '${b}'`);return n}_updateStyle(b,n){var u,g;if(n.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(b,n)));const _=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!b)),b?(this.style=new xf(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof b=="string"?this.style.loadURL(b,n,_):this.style.loadJSON(b,n,_),this):((g=(u=this.style)===null||u===void 0?void 0:u.projection)===null||g===void 0||g.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new xf(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(b,n){if(typeof b=="string"){const u=this._requestManager.transformRequest(b,"Style");s.j(u,new AbortController).then((g=>{this._updateDiff(g.data,n)})).catch((g=>{g&&this.fire(new s.k(g))}))}else typeof b=="object"&&this._updateDiff(b,n)}_updateDiff(b,n){try{this.style.setState(b,n)&&this._update(!0)}catch(u){s.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(b,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(b,n){return this._lazyInitEmptyStyle(),this.style.addSource(b,n),this._update(!0)}isSourceLoaded(b){const n=this.style&&this.style.sourceCaches[b];if(n!==void 0)return n.loaded();this.fire(new s.k(new Error(`There is no source with ID '${b}'`)))}setTerrain(b){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),b){const n=this.style.sourceCaches[b.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${b.source}`);this.terrain===null&&n.reload();for(const u in this.style._layers){const g=this.style._layers[u];g.type==="hillshade"&&g.source===b.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),g.type==="color-relief"&&g.source===b.source&&s.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Fa(this.painter,n,b),this.painter.renderToTexture=new lm(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=u=>{var g;u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==b.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((g=u.source)===null||g===void 0?void 0:g.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new s.l("terrain",{terrain:b})),this}getTerrain(){var b,n;return(n=(b=this.terrain)===null||b===void 0?void 0:b.options)!==null&&n!==void 0?n:null}areTilesLoaded(){const b=this.style&&this.style.sourceCaches;for(const n in b){const u=b[n]._tiles;for(const g in u){const _=u[g];if(_.state!=="loaded"&&_.state!=="errored")return!1}}return!0}removeSource(b){return this.style.removeSource(b),this._update(!0)}getSource(b){return this.style.getSource(b)}setSourceTileLodParams(b,n,u){if(u){const g=this.getSource(u);if(!g)throw new Error(`There is no source with ID "${u}", cannot set LOD parameters`);g.calculateTileZoom=Mt(Math.max(1,b),Math.max(1,n))}else for(const g in this.style.sourceCaches)this.style.sourceCaches[g].getSource().calculateTileZoom=Mt(Math.max(1,b),Math.max(1,n));return this._update(!0),this}refreshTiles(b,n){const u=this.style.sourceCaches[b];if(!u)throw new Error(`There is no source cache with ID "${b}", cannot refresh tile`);n===void 0?u.reload(!0):u.refreshTiles(n.map((g=>new s.a4(g.z,g.x,g.y))))}addImage(b,n,u={}){const{pixelRatio:g=1,sdf:_=!1,stretchX:x,stretchY:E,content:I,textFitWidth:z,textFitHeight:U}=u;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||s.b(n))){if(n.width===void 0||n.height===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:$,height:W,data:Z}=n,ee=n;return this.style.addImage(b,{data:new s.R({width:$,height:W},new Uint8Array(Z)),pixelRatio:g,stretchX:x,stretchY:E,content:I,textFitWidth:z,textFitHeight:U,sdf:_,version:0,userImage:ee}),ee.onAdd&&ee.onAdd(this,b),this}}{const{width:$,height:W,data:Z}=R.getImageData(n);this.style.addImage(b,{data:new s.R({width:$,height:W},Z),pixelRatio:g,stretchX:x,stretchY:E,content:I,textFitWidth:z,textFitHeight:U,sdf:_,version:0})}}updateImage(b,n){const u=this.style.getImage(b);if(!u)return this.fire(new s.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=n instanceof HTMLImageElement||s.b(n)?R.getImageData(n):n,{width:_,height:x,data:E}=g;if(_===void 0||x===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_!==u.data.width||x!==u.data.height)return this.fire(new s.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const I=!(n instanceof HTMLImageElement||s.b(n));return u.data.replace(E,I),this.style.updateImage(b,u),this}getImage(b){return this.style.getImage(b)}hasImage(b){return b?!!this.style.getImage(b):(this.fire(new s.k(new Error("Missing required image id"))),!1)}removeImage(b){this.style.removeImage(b)}loadImage(b){return me.getImage(this._requestManager.transformRequest(b,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(b,n){return this._lazyInitEmptyStyle(),this.style.addLayer(b,n),this._update(!0)}moveLayer(b,n){return this.style.moveLayer(b,n),this._update(!0)}removeLayer(b){return this.style.removeLayer(b),this._update(!0)}getLayer(b){return this.style.getLayer(b)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(b,n,u){return this.style.setLayerZoomRange(b,n,u),this._update(!0)}setFilter(b,n,u={}){return this.style.setFilter(b,n,u),this._update(!0)}getFilter(b){return this.style.getFilter(b)}setPaintProperty(b,n,u,g={}){return this.style.setPaintProperty(b,n,u,g),this._update(!0)}getPaintProperty(b,n){return this.style.getPaintProperty(b,n)}setLayoutProperty(b,n,u,g={}){return this.style.setLayoutProperty(b,n,u,g),this._update(!0)}getLayoutProperty(b,n){return this.style.getLayoutProperty(b,n)}setGlyphs(b,n={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(b,n),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(b,n,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(b,n,u,(g=>{g||this._update(!0)})),this}removeSprite(b){return this._lazyInitEmptyStyle(),this.style.removeSprite(b),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(b,n={}){return this._lazyInitEmptyStyle(),this.style.setSprite(b,n,(u=>{u||this._update(!0)})),this}setLight(b,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(b,n),this._update(!0)}getLight(){return this.style.getLight()}setSky(b,n={}){return this._lazyInitEmptyStyle(),this.style.setSky(b,n),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(b,n){return this.style.setFeatureState(b,n),this._update()}removeFeatureState(b,n){return this.style.removeFeatureState(b,n),this._update()}getFeatureState(b){return this.style.getFeatureState(b)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let b=0,n=0;return this._container&&(b=this._container.clientWidth||400,n=this._container.clientHeight||300),[b,n]}_setupContainer(){const b=this._container;b.classList.add("maplibregl-map");const n=this._canvasContainer=j.create("div","maplibregl-canvas-container",b);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=j.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),g=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],g);const _=this._controlContainer=j.create("div","maplibregl-control-container",b),x=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((E=>{x[E]=j.create("div",`maplibregl-ctrl-${E} `,_)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(b,n,u){this._canvas.width=Math.floor(u*b),this._canvas.height=Math.floor(u*n),this._canvas.style.width=`${b}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const b=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let n=null;this._canvas.addEventListener("webglcontextcreationerror",(g=>{n={requestedAttributes:b},g&&(n.statusMessage=g.statusMessage,n.type=g.type)}),{once:!0});let u=null;if(u=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,b):this._canvas.getContext("webgl2",b)||this._canvas.getContext("webgl",b),!u){const g="Failed to initialize WebGL";throw n?(n.message=g,new Error(JSON.stringify(n))):new Error(g)}this.painter=new As(u,this.transform),G.testSupport(u)}migrateProjection(b,n){super.migrateProjection(b,n),this.painter.transform=b,this.fire(new s.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(b){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||b,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(b){return this._update(),this._renderTaskQueue.add(b)}_cancelRenderFrame(b){this._renderTaskQueue.remove(b)}_render(b){var n,u,g,_,x;const E=this._idleTriggered?this._fadeDuration:0,I=((n=this.style.projection)===null||n===void 0?void 0:n.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(b),this._removed)return;let z=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const W=this.transform.zoom,Z=R.now();this.style.zoomHistory.update(W,Z);const ee=new s.F(W,{now:Z,fadeDuration:E,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),oe=ee.crossFadingFactor();oe===1&&oe===this._crossFadingFactor||(z=!0,this._crossFadingFactor=oe),this.style.update(ee)}const U=((u=this.style.projection)===null||u===void 0?void 0:u.transitionState)>0!==I;(g=this.style.projection)===null||g===void 0||g.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((_=this.style.projection)===null||_===void 0?void 0:_.transitionState,(x=this.style.projection)===null||x===void 0?void 0:x.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||U)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,E,this._crossSourceCollisions,U),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:E,showPadding:this.showPadding}),this.fire(new s.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.cw.mark(s.cx.load),this.fire(new s.l("load"))),this.style&&(this.style.hasTransitions()||z)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const $=this._sourcesDirty||this._styleDirty||this._placementDirty;return $||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.l("idle")),!this._loaded||this._fullyLoaded||$||(this._fullyLoaded=!0,s.cw.mark(s.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var b;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),me.removeThrottleControl(this._imageQueueHandle),(b=this._resizeObserver)===null||b===void 0||b.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n?.loseContext&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),j.remove(this._canvasContainer),j.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),s.cw.clearMetrics(),this._removed=!0,this.fire(new s.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,R.frame(this._frameRequest,(b=>{s.cw.frame(b),this._frameRequest=null;try{this._render(b)}catch(n){if(!s.cy(n)&&!(function(u){return u.message===oh})(n))throw n}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(b){this._showTileBoundaries!==b&&(this._showTileBoundaries=b,this._update())}get showPadding(){return!!this._showPadding}set showPadding(b){this._showPadding!==b&&(this._showPadding=b,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(b){this._showCollisionBoxes!==b&&(this._showCollisionBoxes=b,b?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(b){this._showOverdrawInspector!==b&&(this._showOverdrawInspector=b,this._update())}get repaint(){return!!this._repaint}set repaint(b){this._repaint!==b&&(this._repaint=b,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(b){this._vertices=b,this._update()}get version(){return Ua}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(b){return this._lazyInitEmptyStyle(),this.style.setProjection(b),this._update(!0)}},m.MapMouseEvent=ya,m.MapTouchEvent=dr,m.MapWheelEvent=dh,m.Marker=os,m.NavigationControl=class{constructor(b){this._updateZoomButtons=()=>{const n=this._map.getZoom(),u=n===this._map.getMaxZoom(),g=n===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(n,u)=>{const g=this._map._getUIString(`NavigationControl.${u}`);n.title=g,n.setAttribute("aria-label",g)},this.options=s.e({},pr,b),this._container=j.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(n=>n.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(n=>this._map.zoomIn({},{originalEvent:n}))),j.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(n=>this._map.zoomOut({},{originalEvent:n}))),j.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})})),this._compassIcon=j.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(b){return this._map=b,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new tr(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){j.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(b,n){const u=j.create("button",b,this._container);return u.type="button",u.addEventListener("click",n),u}},m.Popup=class extends s.E{constructor(b){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&j.remove(this._content),this._container&&(j.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.l("close"))),this),this._onMouseUp=n=>{this._update(n.point)},this._onMouseMove=n=>{this._update(n.point)},this._onDrag=n=>{this._update(n.point)},this._update=n=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=j.create("div","maplibregl-popup",this._map.getContainer()),this._tip=j.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const E of this.options.className.split(" "))this._container.classList.add(E);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Gn(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!n)return;const u=this._flatPos=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&n?n:this._map.transform.locationToScreenPoint(this._lngLat));let g=this.options.anchor;const _=xh(this.options.offset);if(!g){const E=this._container.offsetWidth,I=this._container.offsetHeight;let z;z=u.y+_.bottom.y<I?["top"]:u.y>this._map.transform.height-I?["bottom"]:[],u.x<E/2?z.push("left"):u.x>this._map.transform.width-E/2&&z.push("right"),g=z.length===0?"bottom":z.join("-")}let x=u.add(_[g]);this.options.subpixelPositioning||(x=x.round()),j.setTransform(this._container,`${wr[g]} translate(${x.x}px,${x.y}px)`),Tc(this._container,g,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(_h),b)}addTo(b){return this._map&&this.remove(),this._map=b,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(b){return this._lngLat=s.S.convert(b),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(b){return this.setDOMContent(document.createTextNode(b))}setHTML(b){const n=document.createDocumentFragment(),u=document.createElement("body");let g;for(u.innerHTML=b;g=u.firstChild,g;)n.appendChild(g);return this.setDOMContent(n)}getMaxWidth(){var b;return(b=this._container)===null||b===void 0?void 0:b.style.maxWidth}setMaxWidth(b){return this.options.maxWidth=b,this._update(),this}setDOMContent(b){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=j.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(b),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(b){return this._container&&this._container.classList.add(b),this}removeClassName(b){return this._container&&this._container.classList.remove(b),this}setOffset(b){return this.options.offset=b,this._update(),this}toggleClassName(b){if(this._container)return this._container.classList.toggle(b)}setSubpixelPositioning(b){this.options.subpixelPositioning=b}_createCloseButton(){this.options.closeButton&&(this._closeButton=j.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const b=this._container.querySelector(bh);b&&b.focus()}},m.RasterDEMTileSource=Wr,m.RasterTileSource=Zn,m.ScaleControl=class{constructor(b){this._onMove=()=>{Pd(this._map,this._container,this.options)},this.setUnit=n=>{this.options.unit=n,Pd(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Dl),b)}getDefaultPosition(){return"bottom-left"}onAdd(b){return this._map=b,this._container=j.create("div","maplibregl-ctrl maplibregl-ctrl-scale",b.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){j.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},m.ScrollZoomHandler=$f,m.Style=xf,m.TerrainControl=class{constructor(b){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=b}onAdd(b){return this._map=b,this._container=j.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=j.create("button","maplibregl-ctrl-terrain",this._container),j.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){j.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},m.TwoFingersTouchPitchHandler=lu,m.TwoFingersTouchRotateHandler=ph,m.TwoFingersTouchZoomHandler=is,m.TwoFingersTouchZoomRotateHandler=Al,m.VectorTileSource=Vn,m.VideoSource=qo,m.addSourceType=(b,n)=>s._(void 0,void 0,void 0,(function*(){if(ha(b))throw new Error(`A source type called "${b}" already exists.`);((u,g)=>{wo[u]=g})(b,n)})),m.clearPrewarmedResources=function(){const b=_t;b&&(b.isPreloaded()&&b.numActive()===1?(b.release(qt),_t=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},m.createTileMesh=Zu,m.getMaxParallelImageRequests=function(){return s.a.MAX_PARALLEL_IMAGE_REQUESTS},m.getRTLTextPluginStatus=function(){return So().getRTLTextPluginStatus()},m.getVersion=function(){return Dd},m.getWorkerCount=function(){return Ae.workerCount},m.getWorkerUrl=function(){return s.a.WORKER_URL},m.importScriptInWorkers=function(b){return bt().broadcast("IS",b)},m.prewarm=function(){jt().acquire(qt)},m.setMaxParallelImageRequests=function(b){s.a.MAX_PARALLEL_IMAGE_REQUESTS=b},m.setRTLTextPlugin=function(b,n){return So().setRTLTextPlugin(b,n)},m.setWorkerCount=function(b){Ae.workerCount=b},m.setWorkerUrl=function(b){s.a.WORKER_URL=b}}));var p=r;return p}))})(K_)),K_.exports}var l3=s3();const Wy=Fu(l3);function qP({stations:e,onSelect:t,sidebarOpen:r}){const a=F.useRef(null),d=F.useRef(null),p=F.useRef([]),m=F.useRef(null);return F.useEffect(()=>{d.current||(d.current=new Wy.Map({container:a.current,style:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",center:[-76.5,-11.85],zoom:8}),d.current.addControl(new Wy.NavigationControl({visualizePitch:!0}),"top-left"),m.current=document.createElement("div"),m.current.style.position="absolute",m.current.style.background="white",m.current.style.padding="2px 6px",m.current.style.fontSize="12px",m.current.style.borderRadius="4px",m.current.style.boxShadow="0 1px 4px rgba(0,0,0,0.3)",m.current.style.pointerEvents="none",m.current.style.opacity="0",m.current.style.transition="opacity 0.2s",a.current.appendChild(m.current),d.current.on("load",()=>{d.current.addSource("rios-quebradas",{type:"geojson",data:"${import.meta.env.BASE_URL}rios-quebradas.geojson"}),d.current.addLayer({id:"rios-quebradas-line",type:"line",source:"rios-quebradas",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#1E90FF","line-width":3}}),d.current.on("mousemove","rios-quebradas-line",s=>{if(!s.features||!s.features.length)return;const C=s.features[0].properties?.TEXTO_MAP||"Sin nombre";m.current.innerText=C,m.current.style.opacity="1",m.current.style.left=s.point.x+10+"px",m.current.style.top=s.point.y+10+"px",d.current.getCanvas().style.cursor="pointer"}),d.current.on("mouseleave","rios-quebradas-line",()=>{m.current.style.opacity="0",d.current.getCanvas().style.cursor=""}),d.current.addSource("lagos-lagunas",{type:"geojson",data:"${import.meta.env.BASE_URL}lagos-lagunas.geojson"}),d.current.addLayer({id:"lagos-lagunas-fill",type:"fill",source:"lagos-lagunas",layout:{},paint:{"fill-color":"#4FC3F7","fill-opacity":.5}}),d.current.addLayer({id:"lagos-lagunas-outline",type:"line",source:"lagos-lagunas",layout:{},paint:{"line-color":"#0288D1","line-width":1.5}}),d.current.addSource("lim-departamental",{type:"geojson",data:"/lim-departamental.geojson"}),d.current.addLayer({id:"lim-departamental-line",type:"line",source:"lim-departamental",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#a6a6a6ff","line-width":1.5}}),d.current.on("mousemove","lagos-lagunas-fill",s=>{if(!s.features||!s.features.length)return;const C=s.features[0].properties?.NOMBRECUER||"Lago/Laguna sin nombre";m.current.innerText=C,m.current.style.opacity="1",m.current.style.left=s.point.x+10+"px",m.current.style.top=s.point.y+10+"px",d.current.getCanvas().style.cursor="pointer"}),d.current.on("mouseleave","lagos-lagunas-fill",()=>{m.current.style.opacity="0",d.current.getCanvas().style.cursor=""})}))},[]),F.useEffect(()=>{d.current&&(p.current.forEach(s=>s.remove()),p.current=[],e.forEach(s=>{const M=document.createElement("div");M.className="group relative flex flex-col items-center cursor-pointer";const C=document.createElement("div"),A=document.createElement("div");s.owner==="Natek"?(C.className="absolute w-5 h-5 bg-blue-400 opacity-40 rounded-full animate-ping ",A.className="w-5 h-5 bg-blue-600 border-2 border-white rounded-full shadow-lg"):(C.className="absolute w-5 h-5 bg-gray-400 opacity-40 rounded-full animate-ping",A.className="w-5 h-5 bg-gray-600 border-2 border-white rounded-full shadow-lg");const D=document.createElement("div");D.textContent=s.name,D.className="absolute -top-7 bg-white text-gray-800 text-xs font-medium px-2 py-1 rounded-md shadow-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap",M.appendChild(C),M.appendChild(A),M.appendChild(D);const R=new Wy.Marker({element:M,anchor:"bottom",offset:[0,-5]}).setLngLat([s.lon,s.lat]).addTo(d.current);M.addEventListener("click",j=>{j.stopPropagation(),t&&t(s)}),p.current.push(R)}))},[e,t]),F.useEffect(()=>{if(!d.current)return;const s=setTimeout(()=>d.current?.resize(),300);return()=>clearTimeout(s)},[r]),F.useEffect(()=>{const s=()=>d.current?.resize();return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),X.jsx("div",{ref:a,className:"w-full h-full"})}function c3({station:e,onClose:t,onView:r}){const a=e.data?.[0]?.date,d=e.data?.[e.data.length-1]?.date;return X.jsxs("div",{className:"absolute top-4 right-4 bottom-4 bg-white rounded-lg w-96 z-50 flex flex-col  overflow-hidden",children:[X.jsxs("div",{className:"flex-shrink-0",children:[X.jsxs("div",{className:"flex justify-between items-center px-6 pt-6 pb-3",children:[X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsx($P,{className:"text-blue-600",size:22}),X.jsx("h3",{className:"text-lg font-semibold",children:e.name})]}),X.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:X.jsx(t3,{size:20})})]}),X.jsx("div",{className:"border-t border-gray-200"})]}),X.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden px-6 py-4 text-sm text-gray-700 space-y-4",children:[X.jsxs("div",{children:[X.jsx("h4",{className:"text-gray-500 font-semibold uppercase tracking-wide text-xs mb-1",children:"Ubicación"}),X.jsxs("p",{children:["Latitud: ",e.lat.toFixed(3)]}),X.jsxs("p",{children:["Longitud: ",e.lon.toFixed(3)]})]}),X.jsx("div",{className:"border-t border-gray-200 mx-2"}),X.jsxs("div",{children:[X.jsx("h4",{className:"text-gray-500 font-semibold uppercase tracking-wide text-xs mb-1",children:"Cuerpo de agua que mide"}),X.jsx("p",{children:e.river||"No especificado"})]}),X.jsx("div",{className:"border-t border-gray-200 mx-2"}),X.jsxs("div",{children:[X.jsx("h4",{className:"text-gray-500 font-semibold uppercase tracking-wide text-xs mb-1",children:"Rango de datos"}),X.jsx("p",{children:a&&d?`${a} — ${d}`:"Sin registros disponibles"})]}),X.jsx("div",{className:"border-t border-gray-200 mx-2"}),X.jsxs("div",{children:[X.jsx("h4",{className:"text-gray-500 font-semibold uppercase tracking-wide text-xs mb-1",children:"Variables medidas"}),X.jsx("ul",{className:"list-disc ml-5",children:e.variables?.length?e.variables.map(p=>X.jsx("li",{children:p},p)):X.jsx("li",{children:"No registradas"})})]})]}),X.jsx("div",{className:"flex-shrink-0 border-t border-gray-200 p-4 bg-white",children:X.jsx("button",{onClick:r,className:"w-full py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition",children:"Ver estación"})})]})}function u3({stations:e,onSelect:t}){const[r,a]=F.useState(null);return X.jsxs("div",{className:"relative rounded-lg flex-1 h-full overflow-hidden",children:[X.jsx(qP,{stations:e,onSelect:d=>a(d)}),r&&X.jsx(c3,{station:r,onClose:()=>a(null),onView:()=>t(r)})]})}function GP(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var d=e.length;for(t=0;t<d;t++)e[t]&&(r=GP(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function Er(){for(var e,t,r=0,a="",d=arguments.length;r<d;r++)(e=arguments[r])&&(t=GP(e))&&(a&&(a+=" "),a+=t);return a}const bS="-",h3=e=>{const t=f3(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:m=>{const s=m.split(bS);return s[0]===""&&s.length!==1&&s.shift(),HP(s,t)||d3(m)},getConflictingClassGroupIds:(m,s)=>{const M=r[m]||[];return s&&a[m]?[...M,...a[m]]:M}}},HP=(e,t)=>{if(e.length===0)return t.classGroupId;const r=e[0],a=t.nextPart.get(r),d=a?HP(e.slice(1),a):void 0;if(d)return d;if(t.validators.length===0)return;const p=e.join(bS);return t.validators.find(({validator:m})=>m(p))?.classGroupId},NT=/^\[(.+)\]$/,d3=e=>{if(NT.test(e)){const t=NT.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},f3=e=>{const{theme:t,classGroups:r}=e,a={nextPart:new Map,validators:[]};for(const d in r)tw(r[d],a,d,t);return a},tw=(e,t,r,a)=>{e.forEach(d=>{if(typeof d=="string"){const p=d===""?t:BT(t,d);p.classGroupId=r;return}if(typeof d=="function"){if(p3(d)){tw(d(a),t,r,a);return}t.validators.push({validator:d,classGroupId:r});return}Object.entries(d).forEach(([p,m])=>{tw(m,BT(t,p),r,a)})})},BT=(e,t)=>{let r=e;return t.split(bS).forEach(a=>{r.nextPart.has(a)||r.nextPart.set(a,{nextPart:new Map,validators:[]}),r=r.nextPart.get(a)}),r},p3=e=>e.isThemeGetter,m3=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,a=new Map;const d=(p,m)=>{r.set(p,m),t++,t>e&&(t=0,a=r,r=new Map)};return{get(p){let m=r.get(p);if(m!==void 0)return m;if((m=a.get(p))!==void 0)return d(p,m),m},set(p,m){r.has(p)?r.set(p,m):d(p,m)}}},nw="!",rw=":",g3=rw.length,y3=e=>{const{prefix:t,experimentalParseClassName:r}=e;let a=d=>{const p=[];let m=0,s=0,M=0,C;for(let G=0;G<d.length;G++){let V=d[G];if(m===0&&s===0){if(V===rw){p.push(d.slice(M,G)),M=G+g3;continue}if(V==="/"){C=G;continue}}V==="["?m++:V==="]"?m--:V==="("?s++:V===")"&&s--}const A=p.length===0?d:d.substring(M),D=v3(A),R=D!==A,j=C&&C>M?C-M:void 0;return{modifiers:p,hasImportantModifier:R,baseClassName:D,maybePostfixModifierPosition:j}};if(t){const d=t+rw,p=a;a=m=>m.startsWith(d)?p(m.substring(d.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:m,maybePostfixModifierPosition:void 0}}if(r){const d=a;a=p=>r({className:p,parseClassName:d})}return a},v3=e=>e.endsWith(nw)?e.substring(0,e.length-1):e.startsWith(nw)?e.substring(1):e,_3=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(a=>[a,!0]));return a=>{if(a.length<=1)return a;const d=[];let p=[];return a.forEach(m=>{m[0]==="["||t[m]?(d.push(...p.sort(),m),p=[]):p.push(m)}),d.push(...p.sort()),d}},b3=e=>({cache:m3(e.cacheSize),parseClassName:y3(e),sortModifiers:_3(e),...h3(e)}),x3=/\s+/,w3=(e,t)=>{const{parseClassName:r,getClassGroupId:a,getConflictingClassGroupIds:d,sortModifiers:p}=t,m=[],s=e.trim().split(x3);let M="";for(let C=s.length-1;C>=0;C-=1){const A=s[C],{isExternal:D,modifiers:R,hasImportantModifier:j,baseClassName:G,maybePostfixModifierPosition:V}=r(A);if(D){M=A+(M.length>0?" "+M:M);continue}let H=!!V,Q=a(H?G.substring(0,V):G);if(!Q){if(!H){M=A+(M.length>0?" "+M:M);continue}if(Q=a(G),!Q){M=A+(M.length>0?" "+M:M);continue}H=!1}const te=p(R).join(":"),ne=j?te+nw:te,me=ne+Q;if(m.includes(me))continue;m.push(me);const fe=d(Q,H);for(let _e=0;_e<fe.length;++_e){const ye=fe[_e];m.push(ne+ye)}M=A+(M.length>0?" "+M:M)}return M};function S3(){let e=0,t,r,a="";for(;e<arguments.length;)(t=arguments[e++])&&(r=ZP(t))&&(a&&(a+=" "),a+=r);return a}const ZP=e=>{if(typeof e=="string")return e;let t,r="";for(let a=0;a<e.length;a++)e[a]&&(t=ZP(e[a]))&&(r&&(r+=" "),r+=t);return r};function T3(e,...t){let r,a,d,p=m;function m(M){const C=t.reduce((A,D)=>D(A),e());return r=b3(C),a=r.cache.get,d=r.cache.set,p=s,s(M)}function s(M){const C=a(M);if(C)return C;const A=w3(M,r);return d(M,A),A}return function(){return p(S3.apply(null,arguments))}}const sa=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},WP=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,YP=/^\((?:(\w[\w-]*):)?(.+)\)$/i,M3=/^\d+\/\d+$/,C3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,E3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,A3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,P3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,D3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,qm=e=>M3.test(e),Un=e=>!!e&&!Number.isNaN(Number(e)),Kd=e=>!!e&&Number.isInteger(Number(e)),hx=e=>e.endsWith("%")&&Un(e.slice(0,-1)),Nh=e=>C3.test(e),k3=()=>!0,O3=e=>E3.test(e)&&!A3.test(e),XP=()=>!1,I3=e=>P3.test(e),z3=e=>D3.test(e),R3=e=>!Jt(e)&&!en(e),j3=e=>yg(e,JP,XP),Jt=e=>WP.test(e),vp=e=>yg(e,eD,O3),dx=e=>yg(e,U3,Un),FT=e=>yg(e,KP,XP),L3=e=>yg(e,QP,z3),S_=e=>yg(e,tD,I3),en=e=>YP.test(e),jy=e=>vg(e,eD),N3=e=>vg(e,$3),UT=e=>vg(e,KP),B3=e=>vg(e,JP),F3=e=>vg(e,QP),T_=e=>vg(e,tD,!0),yg=(e,t,r)=>{const a=WP.exec(e);return a?a[1]?t(a[1]):r(a[2]):!1},vg=(e,t,r=!1)=>{const a=YP.exec(e);return a?a[1]?t(a[1]):r:!1},KP=e=>e==="position"||e==="percentage",QP=e=>e==="image"||e==="url",JP=e=>e==="length"||e==="size"||e==="bg-size",eD=e=>e==="length",U3=e=>e==="number",$3=e=>e==="family-name",tD=e=>e==="shadow",V3=()=>{const e=sa("color"),t=sa("font"),r=sa("text"),a=sa("font-weight"),d=sa("tracking"),p=sa("leading"),m=sa("breakpoint"),s=sa("container"),M=sa("spacing"),C=sa("radius"),A=sa("shadow"),D=sa("inset-shadow"),R=sa("text-shadow"),j=sa("drop-shadow"),G=sa("blur"),V=sa("perspective"),H=sa("aspect"),Q=sa("ease"),te=sa("animate"),ne=()=>["auto","avoid","all","avoid-page","page","left","right","column"],me=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],fe=()=>[...me(),en,Jt],_e=()=>["auto","hidden","clip","visible","scroll"],ye=()=>["auto","contain","none"],Oe=()=>[en,Jt,M],nt=()=>[qm,"full","auto",...Oe()],ft=()=>[Kd,"none","subgrid",en,Jt],rt=()=>["auto",{span:["full",Kd,en,Jt]},Kd,en,Jt],at=()=>[Kd,"auto",en,Jt],Et=()=>["auto","min","max","fr",en,Jt],At=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],zt=()=>["start","end","center","stretch","center-safe","end-safe"],Le=()=>["auto",...Oe()],Qe=()=>[qm,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...Oe()],Ve=()=>[e,en,Jt],ht=()=>[...me(),UT,FT,{position:[en,Jt]}],qt=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Ae=()=>["auto","cover","contain",B3,j3,{size:[en,Jt]}],qe=()=>[hx,jy,vp],_t=()=>["","none","full",C,en,Jt],Tt=()=>["",Un,jy,vp],jt=()=>["solid","dashed","dotted","double"],Ht=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],bt=()=>[Un,hx,UT,FT],nn=()=>["","none",G,en,Jt],pt=()=>["none",Un,en,Jt],Rt=()=>["none",Un,en,Jt],Ft=()=>[Un,en,Jt],ot=()=>[qm,"full",...Oe()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Nh],breakpoint:[Nh],color:[k3],container:[Nh],"drop-shadow":[Nh],ease:["in","out","in-out"],font:[R3],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Nh],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Nh],shadow:[Nh],spacing:["px",Un],text:[Nh],"text-shadow":[Nh],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",qm,Jt,en,H]}],container:["container"],columns:[{columns:[Un,Jt,en,s]}],"break-after":[{"break-after":ne()}],"break-before":[{"break-before":ne()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:fe()}],overflow:[{overflow:_e()}],"overflow-x":[{"overflow-x":_e()}],"overflow-y":[{"overflow-y":_e()}],overscroll:[{overscroll:ye()}],"overscroll-x":[{"overscroll-x":ye()}],"overscroll-y":[{"overscroll-y":ye()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:nt()}],"inset-x":[{"inset-x":nt()}],"inset-y":[{"inset-y":nt()}],start:[{start:nt()}],end:[{end:nt()}],top:[{top:nt()}],right:[{right:nt()}],bottom:[{bottom:nt()}],left:[{left:nt()}],visibility:["visible","invisible","collapse"],z:[{z:[Kd,"auto",en,Jt]}],basis:[{basis:[qm,"full","auto",s,...Oe()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Un,qm,"auto","initial","none",Jt]}],grow:[{grow:["",Un,en,Jt]}],shrink:[{shrink:["",Un,en,Jt]}],order:[{order:[Kd,"first","last","none",en,Jt]}],"grid-cols":[{"grid-cols":ft()}],"col-start-end":[{col:rt()}],"col-start":[{"col-start":at()}],"col-end":[{"col-end":at()}],"grid-rows":[{"grid-rows":ft()}],"row-start-end":[{row:rt()}],"row-start":[{"row-start":at()}],"row-end":[{"row-end":at()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Et()}],"auto-rows":[{"auto-rows":Et()}],gap:[{gap:Oe()}],"gap-x":[{"gap-x":Oe()}],"gap-y":[{"gap-y":Oe()}],"justify-content":[{justify:[...At(),"normal"]}],"justify-items":[{"justify-items":[...zt(),"normal"]}],"justify-self":[{"justify-self":["auto",...zt()]}],"align-content":[{content:["normal",...At()]}],"align-items":[{items:[...zt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...zt(),{baseline:["","last"]}]}],"place-content":[{"place-content":At()}],"place-items":[{"place-items":[...zt(),"baseline"]}],"place-self":[{"place-self":["auto",...zt()]}],p:[{p:Oe()}],px:[{px:Oe()}],py:[{py:Oe()}],ps:[{ps:Oe()}],pe:[{pe:Oe()}],pt:[{pt:Oe()}],pr:[{pr:Oe()}],pb:[{pb:Oe()}],pl:[{pl:Oe()}],m:[{m:Le()}],mx:[{mx:Le()}],my:[{my:Le()}],ms:[{ms:Le()}],me:[{me:Le()}],mt:[{mt:Le()}],mr:[{mr:Le()}],mb:[{mb:Le()}],ml:[{ml:Le()}],"space-x":[{"space-x":Oe()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":Oe()}],"space-y-reverse":["space-y-reverse"],size:[{size:Qe()}],w:[{w:[s,"screen",...Qe()]}],"min-w":[{"min-w":[s,"screen","none",...Qe()]}],"max-w":[{"max-w":[s,"screen","none","prose",{screen:[m]},...Qe()]}],h:[{h:["screen","lh",...Qe()]}],"min-h":[{"min-h":["screen","lh","none",...Qe()]}],"max-h":[{"max-h":["screen","lh",...Qe()]}],"font-size":[{text:["base",r,jy,vp]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,en,dx]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",hx,Jt]}],"font-family":[{font:[N3,Jt,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[d,en,Jt]}],"line-clamp":[{"line-clamp":[Un,"none",en,dx]}],leading:[{leading:[p,...Oe()]}],"list-image":[{"list-image":["none",en,Jt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",en,Jt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Ve()}],"text-color":[{text:Ve()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...jt(),"wavy"]}],"text-decoration-thickness":[{decoration:[Un,"from-font","auto",en,vp]}],"text-decoration-color":[{decoration:Ve()}],"underline-offset":[{"underline-offset":[Un,"auto",en,Jt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Oe()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",en,Jt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",en,Jt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ht()}],"bg-repeat":[{bg:qt()}],"bg-size":[{bg:Ae()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Kd,en,Jt],radial:["",en,Jt],conic:[Kd,en,Jt]},F3,L3]}],"bg-color":[{bg:Ve()}],"gradient-from-pos":[{from:qe()}],"gradient-via-pos":[{via:qe()}],"gradient-to-pos":[{to:qe()}],"gradient-from":[{from:Ve()}],"gradient-via":[{via:Ve()}],"gradient-to":[{to:Ve()}],rounded:[{rounded:_t()}],"rounded-s":[{"rounded-s":_t()}],"rounded-e":[{"rounded-e":_t()}],"rounded-t":[{"rounded-t":_t()}],"rounded-r":[{"rounded-r":_t()}],"rounded-b":[{"rounded-b":_t()}],"rounded-l":[{"rounded-l":_t()}],"rounded-ss":[{"rounded-ss":_t()}],"rounded-se":[{"rounded-se":_t()}],"rounded-ee":[{"rounded-ee":_t()}],"rounded-es":[{"rounded-es":_t()}],"rounded-tl":[{"rounded-tl":_t()}],"rounded-tr":[{"rounded-tr":_t()}],"rounded-br":[{"rounded-br":_t()}],"rounded-bl":[{"rounded-bl":_t()}],"border-w":[{border:Tt()}],"border-w-x":[{"border-x":Tt()}],"border-w-y":[{"border-y":Tt()}],"border-w-s":[{"border-s":Tt()}],"border-w-e":[{"border-e":Tt()}],"border-w-t":[{"border-t":Tt()}],"border-w-r":[{"border-r":Tt()}],"border-w-b":[{"border-b":Tt()}],"border-w-l":[{"border-l":Tt()}],"divide-x":[{"divide-x":Tt()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Tt()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...jt(),"hidden","none"]}],"divide-style":[{divide:[...jt(),"hidden","none"]}],"border-color":[{border:Ve()}],"border-color-x":[{"border-x":Ve()}],"border-color-y":[{"border-y":Ve()}],"border-color-s":[{"border-s":Ve()}],"border-color-e":[{"border-e":Ve()}],"border-color-t":[{"border-t":Ve()}],"border-color-r":[{"border-r":Ve()}],"border-color-b":[{"border-b":Ve()}],"border-color-l":[{"border-l":Ve()}],"divide-color":[{divide:Ve()}],"outline-style":[{outline:[...jt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Un,en,Jt]}],"outline-w":[{outline:["",Un,jy,vp]}],"outline-color":[{outline:Ve()}],shadow:[{shadow:["","none",A,T_,S_]}],"shadow-color":[{shadow:Ve()}],"inset-shadow":[{"inset-shadow":["none",D,T_,S_]}],"inset-shadow-color":[{"inset-shadow":Ve()}],"ring-w":[{ring:Tt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Ve()}],"ring-offset-w":[{"ring-offset":[Un,vp]}],"ring-offset-color":[{"ring-offset":Ve()}],"inset-ring-w":[{"inset-ring":Tt()}],"inset-ring-color":[{"inset-ring":Ve()}],"text-shadow":[{"text-shadow":["none",R,T_,S_]}],"text-shadow-color":[{"text-shadow":Ve()}],opacity:[{opacity:[Un,en,Jt]}],"mix-blend":[{"mix-blend":[...Ht(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ht()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Un]}],"mask-image-linear-from-pos":[{"mask-linear-from":bt()}],"mask-image-linear-to-pos":[{"mask-linear-to":bt()}],"mask-image-linear-from-color":[{"mask-linear-from":Ve()}],"mask-image-linear-to-color":[{"mask-linear-to":Ve()}],"mask-image-t-from-pos":[{"mask-t-from":bt()}],"mask-image-t-to-pos":[{"mask-t-to":bt()}],"mask-image-t-from-color":[{"mask-t-from":Ve()}],"mask-image-t-to-color":[{"mask-t-to":Ve()}],"mask-image-r-from-pos":[{"mask-r-from":bt()}],"mask-image-r-to-pos":[{"mask-r-to":bt()}],"mask-image-r-from-color":[{"mask-r-from":Ve()}],"mask-image-r-to-color":[{"mask-r-to":Ve()}],"mask-image-b-from-pos":[{"mask-b-from":bt()}],"mask-image-b-to-pos":[{"mask-b-to":bt()}],"mask-image-b-from-color":[{"mask-b-from":Ve()}],"mask-image-b-to-color":[{"mask-b-to":Ve()}],"mask-image-l-from-pos":[{"mask-l-from":bt()}],"mask-image-l-to-pos":[{"mask-l-to":bt()}],"mask-image-l-from-color":[{"mask-l-from":Ve()}],"mask-image-l-to-color":[{"mask-l-to":Ve()}],"mask-image-x-from-pos":[{"mask-x-from":bt()}],"mask-image-x-to-pos":[{"mask-x-to":bt()}],"mask-image-x-from-color":[{"mask-x-from":Ve()}],"mask-image-x-to-color":[{"mask-x-to":Ve()}],"mask-image-y-from-pos":[{"mask-y-from":bt()}],"mask-image-y-to-pos":[{"mask-y-to":bt()}],"mask-image-y-from-color":[{"mask-y-from":Ve()}],"mask-image-y-to-color":[{"mask-y-to":Ve()}],"mask-image-radial":[{"mask-radial":[en,Jt]}],"mask-image-radial-from-pos":[{"mask-radial-from":bt()}],"mask-image-radial-to-pos":[{"mask-radial-to":bt()}],"mask-image-radial-from-color":[{"mask-radial-from":Ve()}],"mask-image-radial-to-color":[{"mask-radial-to":Ve()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":me()}],"mask-image-conic-pos":[{"mask-conic":[Un]}],"mask-image-conic-from-pos":[{"mask-conic-from":bt()}],"mask-image-conic-to-pos":[{"mask-conic-to":bt()}],"mask-image-conic-from-color":[{"mask-conic-from":Ve()}],"mask-image-conic-to-color":[{"mask-conic-to":Ve()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ht()}],"mask-repeat":[{mask:qt()}],"mask-size":[{mask:Ae()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",en,Jt]}],filter:[{filter:["","none",en,Jt]}],blur:[{blur:nn()}],brightness:[{brightness:[Un,en,Jt]}],contrast:[{contrast:[Un,en,Jt]}],"drop-shadow":[{"drop-shadow":["","none",j,T_,S_]}],"drop-shadow-color":[{"drop-shadow":Ve()}],grayscale:[{grayscale:["",Un,en,Jt]}],"hue-rotate":[{"hue-rotate":[Un,en,Jt]}],invert:[{invert:["",Un,en,Jt]}],saturate:[{saturate:[Un,en,Jt]}],sepia:[{sepia:["",Un,en,Jt]}],"backdrop-filter":[{"backdrop-filter":["","none",en,Jt]}],"backdrop-blur":[{"backdrop-blur":nn()}],"backdrop-brightness":[{"backdrop-brightness":[Un,en,Jt]}],"backdrop-contrast":[{"backdrop-contrast":[Un,en,Jt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Un,en,Jt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Un,en,Jt]}],"backdrop-invert":[{"backdrop-invert":["",Un,en,Jt]}],"backdrop-opacity":[{"backdrop-opacity":[Un,en,Jt]}],"backdrop-saturate":[{"backdrop-saturate":[Un,en,Jt]}],"backdrop-sepia":[{"backdrop-sepia":["",Un,en,Jt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":Oe()}],"border-spacing-x":[{"border-spacing-x":Oe()}],"border-spacing-y":[{"border-spacing-y":Oe()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",en,Jt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Un,"initial",en,Jt]}],ease:[{ease:["linear","initial",Q,en,Jt]}],delay:[{delay:[Un,en,Jt]}],animate:[{animate:["none",te,en,Jt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[V,en,Jt]}],"perspective-origin":[{"perspective-origin":fe()}],rotate:[{rotate:pt()}],"rotate-x":[{"rotate-x":pt()}],"rotate-y":[{"rotate-y":pt()}],"rotate-z":[{"rotate-z":pt()}],scale:[{scale:Rt()}],"scale-x":[{"scale-x":Rt()}],"scale-y":[{"scale-y":Rt()}],"scale-z":[{"scale-z":Rt()}],"scale-3d":["scale-3d"],skew:[{skew:Ft()}],"skew-x":[{"skew-x":Ft()}],"skew-y":[{"skew-y":Ft()}],transform:[{transform:[en,Jt,"","none","gpu","cpu"]}],"transform-origin":[{origin:fe()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ot()}],"translate-x":[{"translate-x":ot()}],"translate-y":[{"translate-y":ot()}],"translate-z":[{"translate-z":ot()}],"translate-none":["translate-none"],accent:[{accent:Ve()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Ve()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",en,Jt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Oe()}],"scroll-mx":[{"scroll-mx":Oe()}],"scroll-my":[{"scroll-my":Oe()}],"scroll-ms":[{"scroll-ms":Oe()}],"scroll-me":[{"scroll-me":Oe()}],"scroll-mt":[{"scroll-mt":Oe()}],"scroll-mr":[{"scroll-mr":Oe()}],"scroll-mb":[{"scroll-mb":Oe()}],"scroll-ml":[{"scroll-ml":Oe()}],"scroll-p":[{"scroll-p":Oe()}],"scroll-px":[{"scroll-px":Oe()}],"scroll-py":[{"scroll-py":Oe()}],"scroll-ps":[{"scroll-ps":Oe()}],"scroll-pe":[{"scroll-pe":Oe()}],"scroll-pt":[{"scroll-pt":Oe()}],"scroll-pr":[{"scroll-pr":Oe()}],"scroll-pb":[{"scroll-pb":Oe()}],"scroll-pl":[{"scroll-pl":Oe()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",en,Jt]}],fill:[{fill:["none",...Ve()]}],"stroke-w":[{stroke:[Un,jy,vp,dx]}],stroke:[{stroke:["none",...Ve()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},q3=T3(V3);function Rn(...e){return q3(Er(e))}function Zs({className:e,...t}){return X.jsx("div",{"data-slot":"card",className:Rn("bg-card text-card-foreground flex flex-col rounded-lg border overflow-hidden",e),...t})}function Ws({className:e,withDivider:t=!0,...r}){return X.jsx("div",{"data-slot":"card-header",className:Rn("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start px-6 py-3",t&&"border-b border-gray-200","has-data-[slot=card-action]:grid-cols-[1fr_auto]",e),...r})}function Ys({className:e,...t}){return X.jsx("div",{"data-slot":"card-title",className:Rn("leading-none font-semibold text-gray-800",e),...t})}function Xs({className:e,...t}){return X.jsx("div",{"data-slot":"card-content",className:Rn("px-6 py-4",e),...t})}const Wi={name:"Estación Carhuamayoc - 01",river:"Río Carhuamayoc",basin:"Cuenca Santa Eulalia",id:"ST-001",location:{lat:-11.742,lon:-76.512,altitude:3950},owner:"Natek",type:"Hidrológica + Meteorológica",meteorological:[{name:"Temperatura",value:14.2,previousValue:13.8,unit:"°C"},{name:"Humedad",value:78,previousValue:75,unit:"%"},{name:"Velocidad del viento",value:5.3,previousValue:5,unit:"m/s"}],hydrological:[{name:"Nivel de agua",value:.84,previousValue:.8,unit:"m"},{name:"Caudal",value:3.6,previousValue:3.2,unit:"m³/s"},{name:"Velocidad",value:1.2,previousValue:1.1,unit:"m/s"}],alerts:[{id:1,message:"Aumento inusual del caudal",date:"2025-10-08",severity:"high"},{id:2,message:"Nivel de agua cercano al umbral",date:"2025-10-05",severity:"medium"}],lastVideoUrl:"${import.meta.env.BASE_URL}video.mp4",lastUpdateMeteorological:"2025-10-10T14:32:00",lastUpdateHydrological:"2025-10-10T14:35:00"};function G3(){const e=F.useRef(null);F.useEffect(()=>{if(!e.current)return;const d=new Wy.Map({container:e.current,style:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",center:[Wi.location.lon,Wi.location.lat],zoom:8});return new Wy.Marker({color:"#2563eb"}).setLngLat([Wi.location.lon,Wi.location.lat]).addTo(d),()=>d.remove()},[]);const t={low:"text-yellow-500",medium:"text-orange-500",high:"text-red-600"},r=d=>d.toLowerCase().includes("nivel")||d.toLowerCase().includes("caudal")?X.jsx(zT,{size:18,className:"text-blue-600"}):d.toLowerCase().includes("temperatura")||d.toLowerCase().includes("viento")||d.toLowerCase().includes("humedad")?X.jsx(ux,{size:18,className:"text-blue-600"}):X.jsx(ux,{size:18,className:"text-blue-600"}),a=d=>{const p=d.previousValue!==void 0?(d.value-d.previousValue)/d.previousValue*100:void 0,m=p!==void 0?p>=0?"bg-green-100 text-green-800":"bg-red-100 text-red-800":"";return X.jsxs("div",{className:"flex justify-between items-center",children:[X.jsxs("span",{className:"flex items-center gap-2 text-gray-700",children:[r(d.name)," ",d.name]}),X.jsxs("div",{className:"flex items-center gap-2",children:[X.jsxs("span",{className:"text-blue-700 font-semibold",children:[d.value," ",X.jsx("span",{className:"text-gray-500 text-sm",children:d.unit})]}),p!==void 0&&X.jsxs("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${m}`,children:[p.toFixed(1),"%"]})]})]},d.name)};return X.jsx("div",{className:"container mx-auto",style:{containerType:"inline-size"},children:X.jsxs("div",{className:"grid grid-cols-1 gap-6 [@container(min-width:600px)]:grid-cols-2 [@container(min-width:900px)]:grid-cols-3",children:[X.jsxs(Zs,{className:"bg-white flex flex-col h-80",children:[X.jsx(Ws,{className:"border-b border-gray-200 pb-3",children:X.jsxs(Ys,{className:"flex items-center gap-2 text-gray-700",children:[X.jsx(ew,{size:20,className:"text-blue-600"}),"Información de la estación"]})}),X.jsxs(Xs,{className:"text-sm text-gray-700 flex-1 overflow-auto space-y-1",children:[X.jsxs("p",{children:[X.jsx("strong",{children:"Nombre:"})," ",Wi.name]}),X.jsxs("p",{children:[X.jsx("strong",{children:"Río:"})," ",Wi.river]}),X.jsxs("p",{children:[X.jsx("strong",{children:"Cuenca:"})," ",Wi.basin]}),X.jsxs("p",{children:[X.jsx("strong",{children:"ID:"})," ",Wi.id]}),X.jsxs("p",{children:[X.jsx("strong",{children:"Owner:"})," ",Wi.owner]}),X.jsxs("p",{children:[X.jsx("strong",{children:"Tipo:"})," ",Wi.type]}),X.jsxs("p",{children:[X.jsx("strong",{children:"Lat/Lon:"})," ",Wi.location.lat,", ",Wi.location.lon]}),X.jsxs("p",{children:[X.jsx("strong",{children:"Altitud:"})," ",Wi.location.altitude," m"]})]})]}),X.jsxs(Zs,{className:"bg-white flex flex-col h-80 overflow-hidden",children:[X.jsx(Ws,{className:"border-b border-gray-200 pb-3",children:X.jsxs(Ys,{className:"flex items-center gap-2 text-gray-700",children:[X.jsx(ew,{size:18,className:"text-blue-600"}),"Ubicación de la estación"]})}),X.jsx(Xs,{className:"flex-1 p-0",children:X.jsx("div",{ref:e,className:"w-full h-full"})})]}),X.jsxs(Zs,{className:"bg-white flex flex-col h-80",children:[X.jsx(Ws,{className:"border-b border-gray-200 pb-3",children:X.jsxs(Ys,{className:"flex items-center gap-2 text-gray-700",children:[X.jsx(QN,{size:18,className:"text-blue-600"}),"Último video registrado"]})}),X.jsx(Xs,{className:"flex-1 p-0 overflow-hidden rounded-b-xl",children:X.jsx("video",{src:Wi.lastVideoUrl,controls:!0,className:"w-full h-full object-cover"})})]}),X.jsxs(Zs,{className:"bg-white flex flex-col h-80",children:[X.jsxs(Ws,{className:"border-b border-gray-200 pb-3 flex justify-between items-center",children:[X.jsxs(Ys,{className:"flex items-center gap-2 text-gray-700",children:[X.jsx(ux,{size:20,className:"text-blue-600"}),"Valores Meteorológicos"]}),X.jsx("span",{className:"text-gray-500 text-sm",children:new Date(Wi.lastUpdateMeteorological).toLocaleString()})]}),X.jsx(Xs,{className:"flex-1 overflow-auto grid grid-cols-1 gap-3",children:Wi.meteorological.map(a)})]}),X.jsxs(Zs,{className:"bg-white flex flex-col h-80",children:[X.jsxs(Ws,{className:"border-b border-gray-200 pb-3 flex justify-between items-center",children:[X.jsxs(Ys,{className:"flex items-center gap-2 text-gray-700",children:[X.jsx(zT,{size:20,className:"text-blue-600"}),"Valores Hidrológicos"]}),X.jsx("span",{className:"text-gray-500 text-sm",children:new Date(Wi.lastUpdateHydrological).toLocaleString()})]}),X.jsx(Xs,{className:"flex-1 overflow-auto grid grid-cols-1 gap-3",children:Wi.hydrological.map(a)})]}),X.jsxs(Zs,{className:"bg-white flex flex-col h-80",children:[X.jsx(Ws,{className:"border-b border-gray-200 pb-3",children:X.jsxs(Ys,{className:"flex items-center gap-2 text-gray-700",children:[X.jsx(a0,{size:18,className:"text-blue-600"}),"Resumen de alertas"]})}),X.jsx(Xs,{className:"flex-1 overflow-auto",children:Wi.alerts.length>0?X.jsx("ul",{className:"text-sm",children:Wi.alerts.map(d=>X.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-0",children:[X.jsxs("span",{className:`flex items-center gap-2 ${t[d.severity]}`,children:[X.jsx(a0,{size:16}),d.message]}),X.jsx("span",{className:"text-gray-500 text-xs",children:d.date})]},d.id))}):X.jsx("p",{className:"text-gray-500 text-sm",children:"No hay alertas recientes."})})]})]})})}var fx={},px={},$T;function H3(){return $T||($T=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(px)),px}var mx={},VT;function nD(){return VT||(VT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(mx)),mx}var gx={},qT;function xS(){return qT||(qT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(gx)),gx}var yx={},vx={},GT;function Z3(){return GT||(GT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const a=String(r);return a==="0"&&Object.is(Number(r),-0)?"-0":a}e.toString=t})(vx)),vx}var HT;function wS(){return HT||(HT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Z3(),r=xS();function a(d){if(Array.isArray(d))return d.map(r.toKey);if(typeof d=="symbol")return[d];d=t.toString(d);const p=[],m=d.length;if(m===0)return p;let s=0,M="",C="",A=!1;for(d.charCodeAt(0)===46&&(p.push(""),s++);s<m;){const D=d[s];C?D==="\\"&&s+1<m?(s++,M+=d[s]):D===C?C="":M+=D:A?D==='"'||D==="'"?C=D:D==="]"?(A=!1,p.push(M),M=""):M+=D:D==="["?(A=!0,M&&(p.push(M),M="")):D==="."?M&&(p.push(M),M=""):M+=D,s++}return M&&p.push(M),p}e.toPath=a})(yx)),yx}var ZT;function SS(){return ZT||(ZT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H3(),r=nD(),a=xS(),d=wS();function p(s,M,C){if(s==null)return C;switch(typeof M){case"string":{if(t.isUnsafeProperty(M))return C;const A=s[M];return A===void 0?r.isDeepKey(M)?p(s,d.toPath(M),C):C:A}case"number":case"symbol":{typeof M=="number"&&(M=a.toKey(M));const A=s[M];return A===void 0?C:A}default:{if(Array.isArray(M))return m(s,M,C);if(Object.is(M?.valueOf(),-0)?M="-0":M=String(M),t.isUnsafeProperty(M))return C;const A=s[M];return A===void 0?C:A}}}function m(s,M,C){if(M.length===0)return C;let A=s;for(let D=0;D<M.length;D++){if(A==null||t.isUnsafeProperty(M[D]))return C;A=A[M[D]]}return A===void 0?C:A}e.get=p})(fx)),fx}var _x,WT;function W3(){return WT||(WT=1,_x=SS().get),_x}var Y3=W3();const X0=Fu(Y3);var Hl=e=>e===0?0:e>0?1:-1,Wl=e=>typeof e=="number"&&e!=+e,Mp=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,bn=e=>(typeof e=="number"||e instanceof Number)&&!Wl(e),Lu=e=>bn(e)||typeof e=="string",X3=0,Qy=e=>{var t=++X3;return"".concat(e||"").concat(t)},af=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!bn(t)&&typeof t!="string")return a;var p;if(Mp(t)){if(r==null)return a;var m=t.indexOf("%");p=r*parseFloat(t.slice(0,m))/100}else p=+t;return Wl(p)&&(p=a),d&&r!=null&&p>r&&(p=r),p},rD=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},a=0;a<t;a++)if(!r[e[a]])r[e[a]]=!0;else return!0;return!1};function Bh(e,t,r){return bn(e)&&bn(t)?e+r*(t-e):t}function iD(e,t,r){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):X0(a,t))===r)}var Ma=e=>e===null||typeof e>"u",gv=e=>Ma(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),K3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function TS(e){if(typeof e!="string")return!1;var t=K3;return t.includes(e)}var Q3=["viewBox","children"],YT=["points","pathLength"],bx={svg:Q3,polygon:YT,polyline:YT},MS=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(F.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var a={};return Object.keys(r).forEach(d=>{TS(d)&&(a[d]=(p=>r[d](r,p)))}),a},J3=(e,t,r)=>a=>(e(t,r,a),null),aD=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(d=>{var p=e[d];TS(d)&&typeof p=="function"&&(a||(a={}),a[d]=J3(p,t,r))}),a},e5=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function oD(e){if(typeof e!="string")return!1;var t=e5;return t.includes(e)}function qp(e){var t=Object.entries(e).filter(r=>{var[a]=r;return oD(a)});return Object.fromEntries(t)}var sD=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,t5=(e,t,r,a)=>{var d;if(typeof t=="symbol"||typeof t=="number")return!0;var p=(d=a&&bx?.[a])!==null&&d!==void 0?d:[],m=t.startsWith("data-"),s=typeof e!="function"&&(!!a&&p.includes(t)||oD(t)),M=!!r&&TS(t);return m||s||M},Ca=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(F.isValidElement(e)&&(a=e.props),typeof a!="object"&&typeof a!="function")return null;var d={};return Object.keys(a).forEach(p=>{var m;t5((m=a)===null||m===void 0?void 0:m[p],p,t,r)&&(d[p]=a[p])}),d},n5=["children","width","height","viewBox","className","style","title","desc"];function iw(){return iw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},iw.apply(null,arguments)}function r5(e,t){if(e==null)return{};var r,a,d=i5(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)r=p[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(d[r]=e[r])}return d}function i5(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var CS=F.forwardRef((e,t)=>{var{children:r,width:a,height:d,viewBox:p,className:m,style:s,title:M,desc:C}=e,A=r5(e,n5),D=p||{width:a,height:d,x:0,y:0},R=Er("recharts-surface",m);return F.createElement("svg",iw({},Ca(A,!0,"svg"),{className:R,width:a,height:d,style:s,viewBox:"".concat(D.x," ").concat(D.y," ").concat(D.width," ").concat(D.height),ref:t}),F.createElement("title",null,M),F.createElement("desc",null,C),r)}),a5=["children","className"];function aw(){return aw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},aw.apply(null,arguments)}function o5(e,t){if(e==null)return{};var r,a,d=s5(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)r=p[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(d[r]=e[r])}return d}function s5(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var _g=F.forwardRef((e,t)=>{var{children:r,className:a}=e,d=o5(e,a5),p=Er("recharts-layer",a);return F.createElement("g",aw({className:p},Ca(d,!0),{ref:t}),r)}),lD=F.createContext(null),l5=()=>F.useContext(lD);function Zr(e){return function(){return e}}const cD=Math.cos,o0=Math.sin,qc=Math.sqrt,s0=Math.PI,K0=2*s0,ow=Math.PI,sw=2*ow,xp=1e-6,c5=sw-xp;function uD(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function u5(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return uD;const r=10**t;return function(a){this._+=a[0];for(let d=1,p=a.length;d<p;++d)this._+=Math.round(arguments[d]*r)/r+a[d]}}class h5{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?uD:u5(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,a,d){this._append`Q${+t},${+r},${this._x1=+a},${this._y1=+d}`}bezierCurveTo(t,r,a,d,p,m){this._append`C${+t},${+r},${+a},${+d},${this._x1=+p},${this._y1=+m}`}arcTo(t,r,a,d,p){if(t=+t,r=+r,a=+a,d=+d,p=+p,p<0)throw new Error(`negative radius: ${p}`);let m=this._x1,s=this._y1,M=a-t,C=d-r,A=m-t,D=s-r,R=A*A+D*D;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(R>xp)if(!(Math.abs(D*M-C*A)>xp)||!p)this._append`L${this._x1=t},${this._y1=r}`;else{let j=a-m,G=d-s,V=M*M+C*C,H=j*j+G*G,Q=Math.sqrt(V),te=Math.sqrt(R),ne=p*Math.tan((ow-Math.acos((V+R-H)/(2*Q*te)))/2),me=ne/te,fe=ne/Q;Math.abs(me-1)>xp&&this._append`L${t+me*A},${r+me*D}`,this._append`A${p},${p},0,0,${+(D*j>A*G)},${this._x1=t+fe*M},${this._y1=r+fe*C}`}}arc(t,r,a,d,p,m){if(t=+t,r=+r,a=+a,m=!!m,a<0)throw new Error(`negative radius: ${a}`);let s=a*Math.cos(d),M=a*Math.sin(d),C=t+s,A=r+M,D=1^m,R=m?d-p:p-d;this._x1===null?this._append`M${C},${A}`:(Math.abs(this._x1-C)>xp||Math.abs(this._y1-A)>xp)&&this._append`L${C},${A}`,a&&(R<0&&(R=R%sw+sw),R>c5?this._append`A${a},${a},0,1,${D},${t-s},${r-M}A${a},${a},0,1,${D},${this._x1=C},${this._y1=A}`:R>xp&&this._append`A${a},${a},0,${+(R>=ow)},${D},${this._x1=t+a*Math.cos(p)},${this._y1=r+a*Math.sin(p)}`)}rect(t,r,a,d){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${a=+a}v${+d}h${-a}Z`}toString(){return this._}}function ES(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const a=Math.floor(r);if(!(a>=0))throw new RangeError(`invalid digits: ${r}`);t=a}return e},()=>new h5(t)}function AS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function hD(e){this._context=e}hD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Q0(e){return new hD(e)}function dD(e){return e[0]}function fD(e){return e[1]}function pD(e,t){var r=Zr(!0),a=null,d=Q0,p=null,m=ES(s);e=typeof e=="function"?e:e===void 0?dD:Zr(e),t=typeof t=="function"?t:t===void 0?fD:Zr(t);function s(M){var C,A=(M=AS(M)).length,D,R=!1,j;for(a==null&&(p=d(j=m())),C=0;C<=A;++C)!(C<A&&r(D=M[C],C,M))===R&&((R=!R)?p.lineStart():p.lineEnd()),R&&p.point(+e(D,C,M),+t(D,C,M));if(j)return p=null,j+""||null}return s.x=function(M){return arguments.length?(e=typeof M=="function"?M:Zr(+M),s):e},s.y=function(M){return arguments.length?(t=typeof M=="function"?M:Zr(+M),s):t},s.defined=function(M){return arguments.length?(r=typeof M=="function"?M:Zr(!!M),s):r},s.curve=function(M){return arguments.length?(d=M,a!=null&&(p=d(a)),s):d},s.context=function(M){return arguments.length?(M==null?a=p=null:p=d(a=M),s):a},s}function M_(e,t,r){var a=null,d=Zr(!0),p=null,m=Q0,s=null,M=ES(C);e=typeof e=="function"?e:e===void 0?dD:Zr(+e),t=typeof t=="function"?t:Zr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?fD:Zr(+r);function C(D){var R,j,G,V=(D=AS(D)).length,H,Q=!1,te,ne=new Array(V),me=new Array(V);for(p==null&&(s=m(te=M())),R=0;R<=V;++R){if(!(R<V&&d(H=D[R],R,D))===Q)if(Q=!Q)j=R,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),G=R-1;G>=j;--G)s.point(ne[G],me[G]);s.lineEnd(),s.areaEnd()}Q&&(ne[R]=+e(H,R,D),me[R]=+t(H,R,D),s.point(a?+a(H,R,D):ne[R],r?+r(H,R,D):me[R]))}if(te)return s=null,te+""||null}function A(){return pD().defined(d).curve(m).context(p)}return C.x=function(D){return arguments.length?(e=typeof D=="function"?D:Zr(+D),a=null,C):e},C.x0=function(D){return arguments.length?(e=typeof D=="function"?D:Zr(+D),C):e},C.x1=function(D){return arguments.length?(a=D==null?null:typeof D=="function"?D:Zr(+D),C):a},C.y=function(D){return arguments.length?(t=typeof D=="function"?D:Zr(+D),r=null,C):t},C.y0=function(D){return arguments.length?(t=typeof D=="function"?D:Zr(+D),C):t},C.y1=function(D){return arguments.length?(r=D==null?null:typeof D=="function"?D:Zr(+D),C):r},C.lineX0=C.lineY0=function(){return A().x(e).y(t)},C.lineY1=function(){return A().x(e).y(r)},C.lineX1=function(){return A().x(a).y(t)},C.defined=function(D){return arguments.length?(d=typeof D=="function"?D:Zr(!!D),C):d},C.curve=function(D){return arguments.length?(m=D,p!=null&&(s=m(p)),C):m},C.context=function(D){return arguments.length?(D==null?p=s=null:s=m(p=D),C):p},C}class mD{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function d5(e){return new mD(e,!0)}function f5(e){return new mD(e,!1)}const PS={draw(e,t){const r=qc(t/s0);e.moveTo(r,0),e.arc(0,0,r,0,K0)}},p5={draw(e,t){const r=qc(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},gD=qc(1/3),m5=gD*2,g5={draw(e,t){const r=qc(t/m5),a=r*gD;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},y5={draw(e,t){const r=qc(t),a=-r/2;e.rect(a,a,r,r)}},v5=.8908130915292852,yD=o0(s0/10)/o0(7*s0/10),_5=o0(K0/10)*yD,b5=-cD(K0/10)*yD,x5={draw(e,t){const r=qc(t*v5),a=_5*r,d=b5*r;e.moveTo(0,-r),e.lineTo(a,d);for(let p=1;p<5;++p){const m=K0*p/5,s=cD(m),M=o0(m);e.lineTo(M*r,-s*r),e.lineTo(s*a-M*d,M*a+s*d)}e.closePath()}},xx=qc(3),w5={draw(e,t){const r=-qc(t/(xx*3));e.moveTo(0,r*2),e.lineTo(-xx*r,-r),e.lineTo(xx*r,-r),e.closePath()}},Ul=-.5,$l=qc(3)/2,lw=1/qc(12),S5=(lw/2+1)*3,T5={draw(e,t){const r=qc(t/S5),a=r/2,d=r*lw,p=a,m=r*lw+r,s=-p,M=m;e.moveTo(a,d),e.lineTo(p,m),e.lineTo(s,M),e.lineTo(Ul*a-$l*d,$l*a+Ul*d),e.lineTo(Ul*p-$l*m,$l*p+Ul*m),e.lineTo(Ul*s-$l*M,$l*s+Ul*M),e.lineTo(Ul*a+$l*d,Ul*d-$l*a),e.lineTo(Ul*p+$l*m,Ul*m-$l*p),e.lineTo(Ul*s+$l*M,Ul*M-$l*s),e.closePath()}};function M5(e,t){let r=null,a=ES(d);e=typeof e=="function"?e:Zr(e||PS),t=typeof t=="function"?t:Zr(t===void 0?64:+t);function d(){let p;if(r||(r=p=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),p)return r=null,p+""||null}return d.type=function(p){return arguments.length?(e=typeof p=="function"?p:Zr(p),d):e},d.size=function(p){return arguments.length?(t=typeof p=="function"?p:Zr(+p),d):t},d.context=function(p){return arguments.length?(r=p??null,d):r},d}function l0(){}function c0(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function vD(e){this._context=e}vD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:c0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:c0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function C5(e){return new vD(e)}function _D(e){this._context=e}_D.prototype={areaStart:l0,areaEnd:l0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:c0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function E5(e){return new _D(e)}function bD(e){this._context=e}bD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:c0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function A5(e){return new bD(e)}function xD(e){this._context=e}xD.prototype={areaStart:l0,areaEnd:l0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function P5(e){return new xD(e)}function XT(e){return e<0?-1:1}function KT(e,t,r){var a=e._x1-e._x0,d=t-e._x1,p=(e._y1-e._y0)/(a||d<0&&-0),m=(r-e._y1)/(d||a<0&&-0),s=(p*d+m*a)/(a+d);return(XT(p)+XT(m))*Math.min(Math.abs(p),Math.abs(m),.5*Math.abs(s))||0}function QT(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function wx(e,t,r){var a=e._x0,d=e._y0,p=e._x1,m=e._y1,s=(p-a)/3;e._context.bezierCurveTo(a+s,d+s*t,p-s,m-s*r,p,m)}function u0(e){this._context=e}u0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:wx(this,this._t0,QT(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,wx(this,QT(this,r=KT(this,e,t)),r);break;default:wx(this,this._t0,r=KT(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function wD(e){this._context=new SD(e)}(wD.prototype=Object.create(u0.prototype)).point=function(e,t){u0.prototype.point.call(this,t,e)};function SD(e){this._context=e}SD.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,a,d,p){this._context.bezierCurveTo(t,e,a,r,p,d)}};function D5(e){return new u0(e)}function k5(e){return new wD(e)}function TD(e){this._context=e}TD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var a=JT(e),d=JT(t),p=0,m=1;m<r;++p,++m)this._context.bezierCurveTo(a[0][p],d[0][p],a[1][p],d[1][p],e[m],t[m]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function JT(e){var t,r=e.length-1,a,d=new Array(r),p=new Array(r),m=new Array(r);for(d[0]=0,p[0]=2,m[0]=e[0]+2*e[1],t=1;t<r-1;++t)d[t]=1,p[t]=4,m[t]=4*e[t]+2*e[t+1];for(d[r-1]=2,p[r-1]=7,m[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)a=d[t]/p[t-1],p[t]-=a,m[t]-=a*m[t-1];for(d[r-1]=m[r-1]/p[r-1],t=r-2;t>=0;--t)d[t]=(m[t]-d[t+1])/p[t];for(p[r-1]=(e[r]+d[r-1])/2,t=0;t<r-1;++t)p[t]=2*e[t+1]-d[t+1];return[d,p]}function O5(e){return new TD(e)}function J0(e,t){this._context=e,this._t=t}J0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function I5(e){return new J0(e,.5)}function z5(e){return new J0(e,0)}function R5(e){return new J0(e,1)}function ng(e,t){if((m=e.length)>1)for(var r=1,a,d,p=e[t[0]],m,s=p.length;r<m;++r)for(d=p,p=e[t[r]],a=0;a<s;++a)p[a][1]+=p[a][0]=isNaN(d[a][1])?d[a][0]:d[a][1]}function cw(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function j5(e,t){return e[t]}function L5(e){const t=[];return t.key=e,t}function N5(){var e=Zr([]),t=cw,r=ng,a=j5;function d(p){var m=Array.from(e.apply(this,arguments),L5),s,M=m.length,C=-1,A;for(const D of p)for(s=0,++C;s<M;++s)(m[s][C]=[0,+a(D,m[s].key,C,p)]).data=D;for(s=0,A=AS(t(m));s<M;++s)m[A[s]].index=s;return r(m,A),m}return d.keys=function(p){return arguments.length?(e=typeof p=="function"?p:Zr(Array.from(p)),d):e},d.value=function(p){return arguments.length?(a=typeof p=="function"?p:Zr(+p),d):a},d.order=function(p){return arguments.length?(t=p==null?cw:typeof p=="function"?p:Zr(Array.from(p)),d):t},d.offset=function(p){return arguments.length?(r=p??ng,d):r},d}function B5(e,t){if((a=e.length)>0){for(var r,a,d=0,p=e[0].length,m;d<p;++d){for(m=r=0;r<a;++r)m+=e[r][d][1]||0;if(m)for(r=0;r<a;++r)e[r][d][1]/=m}ng(e,t)}}function F5(e,t){if((d=e.length)>0){for(var r=0,a=e[t[0]],d,p=a.length;r<p;++r){for(var m=0,s=0;m<d;++m)s+=e[m][r][1]||0;a[r][1]+=a[r][0]=-s/2}ng(e,t)}}function U5(e,t){if(!(!((m=e.length)>0)||!((p=(d=e[t[0]]).length)>0))){for(var r=0,a=1,d,p,m;a<p;++a){for(var s=0,M=0,C=0;s<m;++s){for(var A=e[t[s]],D=A[a][1]||0,R=A[a-1][1]||0,j=(D-R)/2,G=0;G<s;++G){var V=e[t[G]],H=V[a][1]||0,Q=V[a-1][1]||0;j+=H-Q}M+=D,C+=j*D}d[a-1][1]+=d[a-1][0]=r,M&&(r-=C/M)}d[a-1][1]+=d[a-1][0]=r,ng(e,t)}}var $5=["type","size","sizeType"];function uw(){return uw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},uw.apply(null,arguments)}function eM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function tM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eM(Object(r),!0).forEach(function(a){V5(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eM(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function V5(e,t,r){return(t=q5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q5(e){var t=G5(e,"string");return typeof t=="symbol"?t:t+""}function G5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function H5(e,t){if(e==null)return{};var r,a,d=Z5(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)r=p[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(d[r]=e[r])}return d}function Z5(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var MD={symbolCircle:PS,symbolCross:p5,symbolDiamond:g5,symbolSquare:y5,symbolStar:x5,symbolTriangle:w5,symbolWye:T5},W5=Math.PI/180,Y5=e=>{var t="symbol".concat(gv(e));return MD[t]||PS},X5=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*W5;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},K5=(e,t)=>{MD["symbol".concat(gv(e))]=t},CD=e=>{var{type:t="circle",size:r=64,sizeType:a="area"}=e,d=H5(e,$5),p=tM(tM({},d),{},{type:t,size:r,sizeType:a}),m="circle";typeof t=="string"&&(m=t);var s=()=>{var R=Y5(m),j=M5().type(R).size(X5(r,a,m));return j()},{className:M,cx:C,cy:A}=p,D=Ca(p,!0);return C===+C&&A===+A&&r===+r?F.createElement("path",uw({},D,{className:Er("recharts-symbols",M),transform:"translate(".concat(C,", ").concat(A,")"),d:s()})):null};CD.registerSymbol=K5;function hw(){return hw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},hw.apply(null,arguments)}function nM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function Q5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nM(Object(r),!0).forEach(function(a){DS(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nM(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function DS(e,t,r){return(t=J5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J5(e){var t=e4(e,"string");return typeof t=="symbol"?t:t+""}function e4(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vl=32;class kS extends F.PureComponent{renderIcon(t,r){var{inactiveColor:a}=this.props,d=Vl/2,p=Vl/6,m=Vl/3,s=t.inactive?a:t.color,M=r??t.type;if(M==="none")return null;if(M==="plainline")return F.createElement("line",{strokeWidth:4,fill:"none",stroke:s,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:d,x2:Vl,y2:d,className:"recharts-legend-icon"});if(M==="line")return F.createElement("path",{strokeWidth:4,fill:"none",stroke:s,d:"M0,".concat(d,"h").concat(m,`
            A`).concat(p,",").concat(p,",0,1,1,").concat(2*m,",").concat(d,`
            H`).concat(Vl,"M").concat(2*m,",").concat(d,`
            A`).concat(p,",").concat(p,",0,1,1,").concat(m,",").concat(d),className:"recharts-legend-icon"});if(M==="rect")return F.createElement("path",{stroke:"none",fill:s,d:"M0,".concat(Vl/8,"h").concat(Vl,"v").concat(Vl*3/4,"h").concat(-Vl,"z"),className:"recharts-legend-icon"});if(F.isValidElement(t.legendIcon)){var C=Q5({},t);return delete C.legendIcon,F.cloneElement(t.legendIcon,C)}return F.createElement(CD,{fill:s,cx:d,cy:d,size:Vl,sizeType:"diameter",type:M})}renderItems(){var{payload:t,iconSize:r,layout:a,formatter:d,inactiveColor:p,iconType:m}=this.props,s={x:0,y:0,width:Vl,height:Vl},M={display:a==="horizontal"?"inline-block":"block",marginRight:10},C={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((A,D)=>{var R=A.formatter||d,j=Er({"recharts-legend-item":!0,["legend-item-".concat(D)]:!0,inactive:A.inactive});if(A.type==="none")return null;var G=A.inactive?p:A.color,V=R?R(A.value,A,D):A.value;return F.createElement("li",hw({className:j,style:M,key:"legend-item-".concat(D)},aD(this.props,A,D)),F.createElement(CS,{width:r,height:r,viewBox:s,style:C,"aria-label":"".concat(V," legend icon")},this.renderIcon(A,m)),F.createElement("span",{className:"recharts-legend-item-text",style:{color:G}},V))})}render(){var{payload:t,layout:r,align:a}=this.props;if(!t||!t.length)return null;var d={padding:0,margin:0,textAlign:r==="horizontal"?a:"left"};return F.createElement("ul",{className:"recharts-default-legend",style:d},this.renderItems())}}DS(kS,"displayName","Legend");DS(kS,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Sx={},Tx={},rM;function t4(){return rM||(rM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){const d=new Map;for(let p=0;p<r.length;p++){const m=r[p],s=a(m);d.has(s)||d.set(s,m)}return Array.from(d.values())}e.uniqBy=t})(Tx)),Tx}var Mx={},iM;function ED(){return iM||(iM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(Mx)),Mx}var Cx={},Ex={},Ax={},aM;function n4(){return aM||(aM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(Ax)),Ax}var oM;function OS(){return oM||(oM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=n4();function r(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=r})(Ex)),Ex}var Px={},sM;function r4(){return sM||(sM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Px)),Px}var lM;function i4(){return lM||(lM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OS(),r=r4();function a(d){return r.isObjectLike(d)&&t.isArrayLike(d)}e.isArrayLikeObject=a})(Cx)),Cx}var Dx={},kx={},cM;function a4(){return cM||(cM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SS();function r(a){return function(d){return t.get(d,a)}}e.property=r})(kx)),kx}var Ox={},Ix={},zx={},Rx={},uM;function AD(){return uM||(uM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(Rx)),Rx}var jx={},hM;function PD(){return hM||(hM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(jx)),jx}var Lx={},dM;function DD(){return dM||(dM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a){return r===a||Number.isNaN(r)&&Number.isNaN(a)}e.eq=t})(Lx)),Lx}var fM;function o4(){return fM||(fM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IS(),r=AD(),a=PD(),d=DD();function p(D,R,j){return typeof j!="function"?t.isMatch(D,R):m(D,R,function G(V,H,Q,te,ne,me){const fe=j(V,H,Q,te,ne,me);return fe!==void 0?!!fe:m(V,H,G,me)},new Map)}function m(D,R,j,G){if(R===D)return!0;switch(typeof R){case"object":return s(D,R,j,G);case"function":return Object.keys(R).length>0?m(D,{...R},j,G):d.eq(D,R);default:return r.isObject(D)?typeof R=="string"?R==="":!0:d.eq(D,R)}}function s(D,R,j,G){if(R==null)return!0;if(Array.isArray(R))return C(D,R,j,G);if(R instanceof Map)return M(D,R,j,G);if(R instanceof Set)return A(D,R,j,G);const V=Object.keys(R);if(D==null)return V.length===0;if(V.length===0)return!0;if(G&&G.has(R))return G.get(R)===D;G&&G.set(R,D);try{for(let H=0;H<V.length;H++){const Q=V[H];if(!a.isPrimitive(D)&&!(Q in D)||R[Q]===void 0&&D[Q]!==void 0||R[Q]===null&&D[Q]!==null||!j(D[Q],R[Q],Q,D,R,G))return!1}return!0}finally{G&&G.delete(R)}}function M(D,R,j,G){if(R.size===0)return!0;if(!(D instanceof Map))return!1;for(const[V,H]of R.entries()){const Q=D.get(V);if(j(Q,H,V,D,R,G)===!1)return!1}return!0}function C(D,R,j,G){if(R.length===0)return!0;if(!Array.isArray(D))return!1;const V=new Set;for(let H=0;H<R.length;H++){const Q=R[H];let te=!1;for(let ne=0;ne<D.length;ne++){if(V.has(ne))continue;const me=D[ne];let fe=!1;if(j(me,Q,H,D,R,G)&&(fe=!0),fe){V.add(ne),te=!0;break}}if(!te)return!1}return!0}function A(D,R,j,G){return R.size===0?!0:D instanceof Set?C([...D],[...R],j,G):!1}e.isMatchWith=p,e.isSetMatch=A})(zx)),zx}var pM;function IS(){return pM||(pM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=o4();function r(a,d){return t.isMatchWith(a,d,()=>{})}e.isMatch=r})(Ix)),Ix}var Nx={},Bx={},Fx={},mM;function s4(){return mM||(mM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(a=>Object.prototype.propertyIsEnumerable.call(r,a))}e.getSymbols=t})(Fx)),Fx}var Ux={},gM;function kD(){return gM||(gM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Ux)),Ux}var $x={},yM;function OD(){return yM||(yM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",a="[object Number]",d="[object Boolean]",p="[object Arguments]",m="[object Symbol]",s="[object Date]",M="[object Map]",C="[object Set]",A="[object Array]",D="[object Function]",R="[object ArrayBuffer]",j="[object Object]",G="[object Error]",V="[object DataView]",H="[object Uint8Array]",Q="[object Uint8ClampedArray]",te="[object Uint16Array]",ne="[object Uint32Array]",me="[object BigUint64Array]",fe="[object Int8Array]",_e="[object Int16Array]",ye="[object Int32Array]",Oe="[object BigInt64Array]",nt="[object Float32Array]",ft="[object Float64Array]";e.argumentsTag=p,e.arrayBufferTag=R,e.arrayTag=A,e.bigInt64ArrayTag=Oe,e.bigUint64ArrayTag=me,e.booleanTag=d,e.dataViewTag=V,e.dateTag=s,e.errorTag=G,e.float32ArrayTag=nt,e.float64ArrayTag=ft,e.functionTag=D,e.int16ArrayTag=_e,e.int32ArrayTag=ye,e.int8ArrayTag=fe,e.mapTag=M,e.numberTag=a,e.objectTag=j,e.regexpTag=t,e.setTag=C,e.stringTag=r,e.symbolTag=m,e.uint16ArrayTag=te,e.uint32ArrayTag=ne,e.uint8ArrayTag=H,e.uint8ClampedArrayTag=Q})($x)),$x}var Vx={},vM;function l4(){return vM||(vM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Vx)),Vx}var _M;function ID(){return _M||(_M=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=s4(),r=kD(),a=OD(),d=PD(),p=l4();function m(A,D){return s(A,void 0,A,new Map,D)}function s(A,D,R,j=new Map,G=void 0){const V=G?.(A,D,R,j);if(V!==void 0)return V;if(d.isPrimitive(A))return A;if(j.has(A))return j.get(A);if(Array.isArray(A)){const H=new Array(A.length);j.set(A,H);for(let Q=0;Q<A.length;Q++)H[Q]=s(A[Q],Q,R,j,G);return Object.hasOwn(A,"index")&&(H.index=A.index),Object.hasOwn(A,"input")&&(H.input=A.input),H}if(A instanceof Date)return new Date(A.getTime());if(A instanceof RegExp){const H=new RegExp(A.source,A.flags);return H.lastIndex=A.lastIndex,H}if(A instanceof Map){const H=new Map;j.set(A,H);for(const[Q,te]of A)H.set(Q,s(te,Q,R,j,G));return H}if(A instanceof Set){const H=new Set;j.set(A,H);for(const Q of A)H.add(s(Q,void 0,R,j,G));return H}if(typeof Buffer<"u"&&Buffer.isBuffer(A))return A.subarray();if(p.isTypedArray(A)){const H=new(Object.getPrototypeOf(A)).constructor(A.length);j.set(A,H);for(let Q=0;Q<A.length;Q++)H[Q]=s(A[Q],Q,R,j,G);return H}if(A instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&A instanceof SharedArrayBuffer)return A.slice(0);if(A instanceof DataView){const H=new DataView(A.buffer.slice(0),A.byteOffset,A.byteLength);return j.set(A,H),M(H,A,R,j,G),H}if(typeof File<"u"&&A instanceof File){const H=new File([A],A.name,{type:A.type});return j.set(A,H),M(H,A,R,j,G),H}if(typeof Blob<"u"&&A instanceof Blob){const H=new Blob([A],{type:A.type});return j.set(A,H),M(H,A,R,j,G),H}if(A instanceof Error){const H=new A.constructor;return j.set(A,H),H.message=A.message,H.name=A.name,H.stack=A.stack,H.cause=A.cause,M(H,A,R,j,G),H}if(A instanceof Boolean){const H=new Boolean(A.valueOf());return j.set(A,H),M(H,A,R,j,G),H}if(A instanceof Number){const H=new Number(A.valueOf());return j.set(A,H),M(H,A,R,j,G),H}if(A instanceof String){const H=new String(A.valueOf());return j.set(A,H),M(H,A,R,j,G),H}if(typeof A=="object"&&C(A)){const H=Object.create(Object.getPrototypeOf(A));return j.set(A,H),M(H,A,R,j,G),H}return A}function M(A,D,R=A,j,G){const V=[...Object.keys(D),...t.getSymbols(D)];for(let H=0;H<V.length;H++){const Q=V[H],te=Object.getOwnPropertyDescriptor(A,Q);(te==null||te.writable)&&(A[Q]=s(D[Q],Q,R,j,G))}}function C(A){switch(r.getTag(A)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=m,e.cloneDeepWithImpl=s,e.copyProperties=M})(Bx)),Bx}var bM;function c4(){return bM||(bM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ID();function r(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=r})(Nx)),Nx}var xM;function u4(){return xM||(xM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IS(),r=c4();function a(d){return d=r.cloneDeep(d),p=>t.isMatch(p,d)}e.matches=a})(Ox)),Ox}var qx={},Gx={},Hx={},wM;function h4(){return wM||(wM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ID(),r=OD();function a(d,p){return t.cloneDeepWith(d,(m,s,M,C)=>{const A=p?.(m,s,M,C);if(A!==void 0)return A;if(typeof d=="object")switch(Object.prototype.toString.call(d)){case r.numberTag:case r.stringTag:case r.booleanTag:{const D=new d.constructor(d?.valueOf());return t.copyProperties(D,d),D}case r.argumentsTag:{const D={};return t.copyProperties(D,d),D.length=d.length,D[Symbol.iterator]=d[Symbol.iterator],D}default:return}})}e.cloneDeepWith=a})(Hx)),Hx}var SM;function d4(){return SM||(SM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=h4();function r(a){return t.cloneDeepWith(a)}e.cloneDeep=r})(Gx)),Gx}var Zx={},Wx={},TM;function zD(){return TM||(TM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(a,d=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<d;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=r})(Wx)),Wx}var Yx={},MM;function f4(){return MM||(MM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kD();function r(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=r})(Yx)),Yx}var CM;function p4(){return CM||(CM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nD(),r=zD(),a=f4(),d=wS();function p(m,s){let M;if(Array.isArray(s)?M=s:typeof s=="string"&&t.isDeepKey(s)&&m?.[s]==null?M=d.toPath(s):M=[s],M.length===0)return!1;let C=m;for(let A=0;A<M.length;A++){const D=M[A];if((C==null||!Object.hasOwn(C,D))&&!((Array.isArray(C)||a.isArguments(C))&&r.isIndex(D)&&D<C.length))return!1;C=C[D]}return!0}e.has=p})(Zx)),Zx}var EM;function m4(){return EM||(EM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IS(),r=xS(),a=d4(),d=SS(),p=p4();function m(s,M){switch(typeof s){case"object":{Object.is(s?.valueOf(),-0)&&(s="-0");break}case"number":{s=r.toKey(s);break}}return M=a.cloneDeep(M),function(C){const A=d.get(C,s);return A===void 0?p.has(C,s):M===void 0?A===void 0:t.isMatch(A,M)}}e.matchesProperty=m})(qx)),qx}var AM;function g4(){return AM||(AM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ED(),r=a4(),a=u4(),d=m4();function p(m){if(m==null)return t.identity;switch(typeof m){case"function":return m;case"object":return Array.isArray(m)&&m.length===2?d.matchesProperty(m[0],m[1]):a.matches(m);case"string":case"symbol":case"number":return r.property(m)}}e.iteratee=p})(Dx)),Dx}var PM;function y4(){return PM||(PM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=t4(),r=ED(),a=i4(),d=g4();function p(m,s=r.identity){return a.isArrayLikeObject(m)?t.uniqBy(Array.from(m),d.iteratee(s)):[]}e.uniqBy=p})(Sx)),Sx}var Xx,DM;function v4(){return DM||(DM=1,Xx=y4().uniqBy),Xx}var _4=v4();const kM=Fu(_4);function RD(e,t,r){return t===!0?kM(e,r):typeof t=="function"?kM(e,t):e}var Kx={exports:{}},Qx={},Jx={exports:{}},e1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OM;function b4(){if(OM)return e1;OM=1;var e=pg();function t(D,R){return D===R&&(D!==0||1/D===1/R)||D!==D&&R!==R}var r=typeof Object.is=="function"?Object.is:t,a=e.useState,d=e.useEffect,p=e.useLayoutEffect,m=e.useDebugValue;function s(D,R){var j=R(),G=a({inst:{value:j,getSnapshot:R}}),V=G[0].inst,H=G[1];return p(function(){V.value=j,V.getSnapshot=R,M(V)&&H({inst:V})},[D,j,R]),d(function(){return M(V)&&H({inst:V}),D(function(){M(V)&&H({inst:V})})},[D]),m(j),j}function M(D){var R=D.getSnapshot;D=D.value;try{var j=R();return!r(D,j)}catch{return!0}}function C(D,R){return R()}var A=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?C:s;return e1.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:A,e1}var IM;function x4(){return IM||(IM=1,Jx.exports=b4()),Jx.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zM;function w4(){if(zM)return Qx;zM=1;var e=pg(),t=x4();function r(C,A){return C===A&&(C!==0||1/C===1/A)||C!==C&&A!==A}var a=typeof Object.is=="function"?Object.is:r,d=t.useSyncExternalStore,p=e.useRef,m=e.useEffect,s=e.useMemo,M=e.useDebugValue;return Qx.useSyncExternalStoreWithSelector=function(C,A,D,R,j){var G=p(null);if(G.current===null){var V={hasValue:!1,value:null};G.current=V}else V=G.current;G=s(function(){function Q(_e){if(!te){if(te=!0,ne=_e,_e=R(_e),j!==void 0&&V.hasValue){var ye=V.value;if(j(ye,_e))return me=ye}return me=_e}if(ye=me,a(ne,_e))return ye;var Oe=R(_e);return j!==void 0&&j(ye,Oe)?(ne=_e,ye):(ne=_e,me=Oe)}var te=!1,ne,me,fe=D===void 0?null:D;return[function(){return Q(A())},fe===null?void 0:function(){return Q(fe())}]},[A,D,R,j]);var H=d(C,G[0],G[1]);return m(function(){V.hasValue=!0,V.value=H},[H]),M(H),H},Qx}var RM;function S4(){return RM||(RM=1,Kx.exports=w4()),Kx.exports}var T4=S4(),zS=F.createContext(null),M4=e=>e,Ja=()=>{var e=F.useContext(zS);return e?e.store.dispatch:M4},Q_=()=>{},C4=()=>Q_,E4=(e,t)=>e===t;function hn(e){var t=F.useContext(zS);return T4.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:C4,t?t.store.getState:Q_,t?t.store.getState:Q_,t?e:Q_,E4)}function A4(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function P4(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function D4(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${r}]`)}}var jM=e=>Array.isArray(e)?e:[e];function k4(e){const t=Array.isArray(e[0])?e[0]:e;return D4(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function O4(e,t){const r=[],{length:a}=e;for(let d=0;d<a;d++)r.push(e[d].apply(null,t));return r}var I4=class{constructor(e){this.value=e}deref(){return this.value}},z4=typeof WeakRef<"u"?WeakRef:I4,R4=0,LM=1;function C_(){return{s:R4,v:void 0,o:null,p:null}}function jD(e,t={}){let r=C_();const{resultEqualityCheck:a}=t;let d,p=0;function m(){let s=r;const{length:M}=arguments;for(let D=0,R=M;D<R;D++){const j=arguments[D];if(typeof j=="function"||typeof j=="object"&&j!==null){let G=s.o;G===null&&(s.o=G=new WeakMap);const V=G.get(j);V===void 0?(s=C_(),G.set(j,s)):s=V}else{let G=s.p;G===null&&(s.p=G=new Map);const V=G.get(j);V===void 0?(s=C_(),G.set(j,s)):s=V}}const C=s;let A;if(s.s===LM)A=s.v;else if(A=e.apply(null,arguments),p++,a){const D=d?.deref?.()??d;D!=null&&a(D,A)&&(A=D,p!==0&&p--),d=typeof A=="object"&&A!==null||typeof A=="function"?new z4(A):A}return C.s=LM,C.v=A,A}return m.clearCache=()=>{r=C_(),m.resetResultsCount()},m.resultsCount=()=>p,m.resetResultsCount=()=>{p=0},m}function j4(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...d)=>{let p=0,m=0,s,M={},C=d.pop();typeof C=="object"&&(M=C,C=d.pop()),A4(C,`createSelector expects an output function after the inputs, but received: [${typeof C}]`);const A={...r,...M},{memoize:D,memoizeOptions:R=[],argsMemoize:j=jD,argsMemoizeOptions:G=[]}=A,V=jM(R),H=jM(G),Q=k4(d),te=D(function(){return p++,C.apply(null,arguments)},...V),ne=j(function(){m++;const fe=O4(Q,arguments);return s=te.apply(null,fe),s},...H);return Object.assign(ne,{resultFunc:C,memoizedResultFunc:te,dependencies:Q,dependencyRecomputations:()=>m,resetDependencyRecomputations:()=>{m=0},lastResult:()=>s,recomputations:()=>p,resetRecomputations:()=>{p=0},memoize:D,argsMemoize:j})};return Object.assign(a,{withTypes:()=>a}),a}var ut=j4(jD),L4=Object.assign((e,t=ut)=>{P4(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),a=r.map(p=>e[p]);return t(a,(...p)=>p.reduce((m,s,M)=>(m[r[M]]=s,m),{}))},{withTypes:()=>L4}),t1={},n1={},r1={},NM;function N4(){return NM||(NM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const r=(a,d,p)=>{if(a!==d){const m=t(a),s=t(d);if(m===s&&m===0){if(a<d)return p==="desc"?1:-1;if(a>d)return p==="desc"?-1:1}return p==="desc"?s-m:m-s}return 0};e.compareValues=r})(r1)),r1}var i1={},a1={},BM;function LD(){return BM||(BM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(a1)),a1}var FM;function B4(){return FM||(FM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LD(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function d(p,m){return Array.isArray(p)?!1:typeof p=="number"||typeof p=="boolean"||p==null||t.isSymbol(p)?!0:typeof p=="string"&&(a.test(p)||!r.test(p))||m!=null&&Object.hasOwn(m,p)}e.isKey=d})(i1)),i1}var UM;function F4(){return UM||(UM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=N4(),r=B4(),a=wS();function d(p,m,s,M){if(p==null)return[];s=M?void 0:s,Array.isArray(p)||(p=Object.values(p)),Array.isArray(m)||(m=m==null?[null]:[m]),m.length===0&&(m=[null]),Array.isArray(s)||(s=s==null?[]:[s]),s=s.map(j=>String(j));const C=(j,G)=>{let V=j;for(let H=0;H<G.length&&V!=null;++H)V=V[G[H]];return V},A=(j,G)=>G==null||j==null?G:typeof j=="object"&&"key"in j?Object.hasOwn(G,j.key)?G[j.key]:C(G,j.path):typeof j=="function"?j(G):Array.isArray(j)?C(G,j):typeof G=="object"?G[j]:G,D=m.map(j=>(Array.isArray(j)&&j.length===1&&(j=j[0]),j==null||typeof j=="function"||Array.isArray(j)||r.isKey(j)?j:{key:j,path:a.toPath(j)}));return p.map(j=>({original:j,criteria:D.map(G=>A(G,j))})).slice().sort((j,G)=>{for(let V=0;V<D.length;V++){const H=t.compareValues(j.criteria[V],G.criteria[V],s[V]);if(H!==0)return H}return 0}).map(j=>j.original)}e.orderBy=d})(n1)),n1}var o1={},$M;function U4(){return $M||($M=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a=1){const d=[],p=Math.floor(a),m=(s,M)=>{for(let C=0;C<s.length;C++){const A=s[C];Array.isArray(A)&&M<p?m(A,M+1):d.push(A)}};return m(r,0),d}e.flatten=t})(o1)),o1}var s1={},VM;function ND(){return VM||(VM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zD(),r=OS(),a=AD(),d=DD();function p(m,s,M){return a.isObject(M)&&(typeof s=="number"&&r.isArrayLike(M)&&t.isIndex(s)&&s<M.length||typeof s=="string"&&s in M)?d.eq(M[s],m):!1}e.isIterateeCall=p})(s1)),s1}var qM;function $4(){return qM||(qM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=F4(),r=U4(),a=ND();function d(p,...m){const s=m.length;return s>1&&a.isIterateeCall(p,m[0],m[1])?m=[]:s>2&&a.isIterateeCall(m[0],m[1],m[2])&&(m=[m[0]]),t.orderBy(p,r.flatten(m),["asc"])}e.sortBy=d})(t1)),t1}var l1,GM;function V4(){return GM||(GM=1,l1=$4().sortBy),l1}var q4=V4();const eb=Fu(q4);var BD=e=>e.legend.settings,G4=e=>e.legend.size,H4=e=>e.legend.payload,Z4=ut([H4,BD],(e,t)=>{var{itemSorter:r}=t,a=e.flat(1);return r?eb(a,r):a});function W4(){return hn(Z4)}var E_=1;function FD(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=F.useState({height:0,left:0,top:0,width:0}),a=F.useCallback(d=>{if(d!=null){var p=d.getBoundingClientRect(),m={height:p.height,left:p.left,top:p.top,width:p.width};(Math.abs(m.height-t.height)>E_||Math.abs(m.left-t.left)>E_||Math.abs(m.top-t.top)>E_||Math.abs(m.width-t.width)>E_)&&r({height:m.height,left:m.left,top:m.top,width:m.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function Xa(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Y4=typeof Symbol=="function"&&Symbol.observable||"@@observable",HM=Y4,c1=()=>Math.random().toString(36).substring(7).split("").join("."),X4={INIT:`@@redux/INIT${c1()}`,REPLACE:`@@redux/REPLACE${c1()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${c1()}`},h0=X4;function RS(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function UD(e,t,r){if(typeof e!="function")throw new Error(Xa(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Xa(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Xa(1));return r(UD)(e,t)}let a=e,d=t,p=new Map,m=p,s=0,M=!1;function C(){m===p&&(m=new Map,p.forEach((H,Q)=>{m.set(Q,H)}))}function A(){if(M)throw new Error(Xa(3));return d}function D(H){if(typeof H!="function")throw new Error(Xa(4));if(M)throw new Error(Xa(5));let Q=!0;C();const te=s++;return m.set(te,H),function(){if(Q){if(M)throw new Error(Xa(6));Q=!1,C(),m.delete(te),p=null}}}function R(H){if(!RS(H))throw new Error(Xa(7));if(typeof H.type>"u")throw new Error(Xa(8));if(typeof H.type!="string")throw new Error(Xa(17));if(M)throw new Error(Xa(9));try{M=!0,d=a(d,H)}finally{M=!1}return(p=m).forEach(te=>{te()}),H}function j(H){if(typeof H!="function")throw new Error(Xa(10));a=H,R({type:h0.REPLACE})}function G(){const H=D;return{subscribe(Q){if(typeof Q!="object"||Q===null)throw new Error(Xa(11));function te(){const me=Q;me.next&&me.next(A())}return te(),{unsubscribe:H(te)}},[HM](){return this}}}return R({type:h0.INIT}),{dispatch:R,subscribe:D,getState:A,replaceReducer:j,[HM]:G}}function K4(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:h0.INIT})>"u")throw new Error(Xa(12));if(typeof r(void 0,{type:h0.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Xa(13))})}function $D(e){const t=Object.keys(e),r={};for(let p=0;p<t.length;p++){const m=t[p];typeof e[m]=="function"&&(r[m]=e[m])}const a=Object.keys(r);let d;try{K4(r)}catch(p){d=p}return function(m={},s){if(d)throw d;let M=!1;const C={};for(let A=0;A<a.length;A++){const D=a[A],R=r[D],j=m[D],G=R(j,s);if(typeof G>"u")throw s&&s.type,new Error(Xa(14));C[D]=G,M=M||G!==j}return M=M||a.length!==Object.keys(m).length,M?C:m}}function d0(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...a)=>t(r(...a)))}function Q4(...e){return t=>(r,a)=>{const d=t(r,a);let p=()=>{throw new Error(Xa(15))};const m={getState:d.getState,dispatch:(M,...C)=>p(M,...C)},s=e.map(M=>M(m));return p=d0(...s)(d.dispatch),{...d,dispatch:p}}}function VD(e){return RS(e)&&"type"in e&&typeof e.type=="string"}var qD=Symbol.for("immer-nothing"),ZM=Symbol.for("immer-draftable"),nl=Symbol.for("immer-state");function Nc(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var rg=Object.getPrototypeOf;function zp(e){return!!e&&!!e[nl]}function Xh(e){return e?GD(e)||Array.isArray(e)||!!e[ZM]||!!e.constructor?.[ZM]||yv(e)||nb(e):!1}var J4=Object.prototype.constructor.toString();function GD(e){if(!e||typeof e!="object")return!1;const t=rg(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===J4}function f0(e,t){tb(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,a)=>t(a,r,e))}function tb(e){const t=e[nl];return t?t.type_:Array.isArray(e)?1:yv(e)?2:nb(e)?3:0}function dw(e,t){return tb(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function HD(e,t,r){const a=tb(e);a===2?e.set(t,r):a===3?e.add(r):e[t]=r}function eB(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function yv(e){return e instanceof Map}function nb(e){return e instanceof Set}function wp(e){return e.copy_||e.base_}function fw(e,t){if(yv(e))return new Map(e);if(nb(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=GD(e);if(t===!0||t==="class_only"&&!r){const a=Object.getOwnPropertyDescriptors(e);delete a[nl];let d=Reflect.ownKeys(a);for(let p=0;p<d.length;p++){const m=d[p],s=a[m];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(a[m]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[m]})}return Object.create(rg(e),a)}else{const a=rg(e);if(a!==null&&r)return{...e};const d=Object.create(a);return Object.assign(d,e)}}function jS(e,t=!1){return rb(e)||zp(e)||!Xh(e)||(tb(e)>1&&Object.defineProperties(e,{set:{value:A_},add:{value:A_},clear:{value:A_},delete:{value:A_}}),Object.freeze(e),t&&Object.values(e).forEach(r=>jS(r,!0))),e}function A_(){Nc(2)}function rb(e){return Object.isFrozen(e)}var tB={};function Rp(e){const t=tB[e];return t||Nc(0,e),t}var Jy;function ZD(){return Jy}function nB(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function WM(e,t){t&&(Rp("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function pw(e){mw(e),e.drafts_.forEach(rB),e.drafts_=null}function mw(e){e===Jy&&(Jy=e.parent_)}function YM(e){return Jy=nB(Jy,e)}function rB(e){const t=e[nl];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function XM(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[nl].modified_&&(pw(t),Nc(4)),Xh(e)&&(e=p0(t,e),t.parent_||m0(t,e)),t.patches_&&Rp("Patches").generateReplacementPatches_(r[nl].base_,e,t.patches_,t.inversePatches_)):e=p0(t,r,[]),pw(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==qD?e:void 0}function p0(e,t,r){if(rb(t))return t;const a=t[nl];if(!a)return f0(t,(d,p)=>KM(e,a,t,d,p,r)),t;if(a.scope_!==e)return t;if(!a.modified_)return m0(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const d=a.copy_;let p=d,m=!1;a.type_===3&&(p=new Set(d),d.clear(),m=!0),f0(p,(s,M)=>KM(e,a,d,s,M,r,m)),m0(e,d,!1),r&&e.patches_&&Rp("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function KM(e,t,r,a,d,p,m){if(zp(d)){const s=p&&t&&t.type_!==3&&!dw(t.assigned_,a)?p.concat(a):void 0,M=p0(e,d,s);if(HD(r,a,M),zp(M))e.canAutoFreeze_=!1;else return}else m&&r.add(d);if(Xh(d)&&!rb(d)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;p0(e,d),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&(yv(r)?r.has(a):Object.prototype.propertyIsEnumerable.call(r,a))&&m0(e,d)}}function m0(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&jS(t,r)}function iB(e,t){const r=Array.isArray(e),a={type_:r?1:0,scope_:t?t.scope_:ZD(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let d=a,p=LS;r&&(d=[a],p=ev);const{revoke:m,proxy:s}=Proxy.revocable(d,p);return a.draft_=s,a.revoke_=m,s}var LS={get(e,t){if(t===nl)return e;const r=wp(e);if(!dw(r,t))return aB(e,r,t);const a=r[t];return e.finalized_||!Xh(a)?a:a===u1(e.base_,t)?(h1(e),e.copy_[t]=yw(a,e)):a},has(e,t){return t in wp(e)},ownKeys(e){return Reflect.ownKeys(wp(e))},set(e,t,r){const a=WD(wp(e),t);if(a?.set)return a.set.call(e.draft_,r),!0;if(!e.modified_){const d=u1(wp(e),t),p=d?.[nl];if(p&&p.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(eB(r,d)&&(r!==void 0||dw(e.base_,t)))return!0;h1(e),gw(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return u1(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,h1(e),gw(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=wp(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:r[t]}},defineProperty(){Nc(11)},getPrototypeOf(e){return rg(e.base_)},setPrototypeOf(){Nc(12)}},ev={};f0(LS,(e,t)=>{ev[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ev.deleteProperty=function(e,t){return ev.set.call(this,e,t,void 0)};ev.set=function(e,t,r){return LS.set.call(this,e[0],t,r,e[0])};function u1(e,t){const r=e[nl];return(r?wp(r):e)[t]}function aB(e,t,r){const a=WD(t,r);return a?"value"in a?a.value:a.get?.call(e.draft_):void 0}function WD(e,t){if(!(t in e))return;let r=rg(e);for(;r;){const a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=rg(r)}}function gw(e){e.modified_||(e.modified_=!0,e.parent_&&gw(e.parent_))}function h1(e){e.copy_||(e.copy_=fw(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var oB=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,a)=>{if(typeof t=="function"&&typeof r!="function"){const p=r;r=t;const m=this;return function(M=p,...C){return m.produce(M,A=>r.call(this,A,...C))}}typeof r!="function"&&Nc(6),a!==void 0&&typeof a!="function"&&Nc(7);let d;if(Xh(t)){const p=YM(this),m=yw(t,void 0);let s=!0;try{d=r(m),s=!1}finally{s?pw(p):mw(p)}return WM(p,a),XM(d,p)}else if(!t||typeof t!="object"){if(d=r(t),d===void 0&&(d=t),d===qD&&(d=void 0),this.autoFreeze_&&jS(d,!0),a){const p=[],m=[];Rp("Patches").generateReplacementPatches_(t,d,p,m),a(p,m)}return d}else Nc(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(m,...s)=>this.produceWithPatches(m,M=>t(M,...s));let a,d;return[this.produce(t,r,(m,s)=>{a=m,d=s}),a,d]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Xh(e)||Nc(8),zp(e)&&(e=Zh(e));const t=YM(this),r=yw(e,void 0);return r[nl].isManual_=!0,mw(t),r}finishDraft(e,t){const r=e&&e[nl];(!r||!r.isManual_)&&Nc(9);const{scope_:a}=r;return WM(a,t),XM(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const d=t[r];if(d.path.length===0&&d.op==="replace"){e=d.value;break}}r>-1&&(t=t.slice(r+1));const a=Rp("Patches").applyPatches_;return zp(e)?a(e,t):this.produce(e,d=>a(d,t))}};function yw(e,t){const r=yv(e)?Rp("MapSet").proxyMap_(e,t):nb(e)?Rp("MapSet").proxySet_(e,t):iB(e,t);return(t?t.scope_:ZD()).drafts_.push(r),r}function Zh(e){return zp(e)||Nc(10,e),YD(e)}function YD(e){if(!Xh(e)||rb(e))return e;const t=e[nl];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=fw(e,t.scope_.immer_.useStrictShallowCopy_)}else r=fw(e,!0);return f0(r,(a,d)=>{HD(r,a,YD(d))}),t&&(t.finalized_=!1),r}var sB=new oB,XD=sB.produce;function KD(e){return({dispatch:r,getState:a})=>d=>p=>typeof p=="function"?p(r,a,e):d(p)}var lB=KD(),cB=KD,uB=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?d0:d0.apply(null,arguments)};function Yl(e,t){function r(...a){if(t){let d=t(...a);if(!d)throw new Error(el(0));return{type:e,payload:d.payload,..."meta"in d&&{meta:d.meta},..."error"in d&&{error:d.error}}}return{type:e,payload:a[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=a=>VD(a)&&a.type===e,r}var QD=class qy extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,qy.prototype)}static get[Symbol.species](){return qy}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new qy(...t[0].concat(this)):new qy(...t.concat(this))}};function QM(e){return Xh(e)?XD(e,()=>{}):e}function P_(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function hB(e){return typeof e=="boolean"}var dB=()=>function(t){const{thunk:r=!0,immutableCheck:a=!0,serializableCheck:d=!0,actionCreatorCheck:p=!0}=t??{};let m=new QD;return r&&(hB(r)?m.push(lB):m.push(cB(r.extraArgument))),m},fB="RTK_autoBatch",JM=e=>t=>{setTimeout(t,e)},pB=(e={type:"raf"})=>t=>(...r)=>{const a=t(...r);let d=!0,p=!1,m=!1;const s=new Set,M=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:JM(10):e.type==="callback"?e.queueNotification:JM(e.timeout),C=()=>{m=!1,p&&(p=!1,s.forEach(A=>A()))};return Object.assign({},a,{subscribe(A){const D=()=>d&&A(),R=a.subscribe(D);return s.add(A),()=>{R(),s.delete(A)}},dispatch(A){try{return d=!A?.meta?.[fB],p=!d,p&&(m||(m=!0,M(C))),a.dispatch(A)}finally{d=!0}}})},mB=e=>function(r){const{autoBatch:a=!0}=r??{};let d=new QD(e);return a&&d.push(pB(typeof a=="object"?a:void 0)),d};function gB(e){const t=dB(),{reducer:r=void 0,middleware:a,devTools:d=!0,preloadedState:p=void 0,enhancers:m=void 0}=e||{};let s;if(typeof r=="function")s=r;else if(RS(r))s=$D(r);else throw new Error(el(1));let M;typeof a=="function"?M=a(t):M=t();let C=d0;d&&(C=uB({trace:!1,...typeof d=="object"&&d}));const A=Q4(...M),D=mB(A);let R=typeof m=="function"?m(D):D();const j=C(...R);return UD(s,p,j)}function JD(e){const t={},r=[];let a;const d={addCase(p,m){const s=typeof p=="string"?p:p.type;if(!s)throw new Error(el(28));if(s in t)throw new Error(el(29));return t[s]=m,d},addAsyncThunk(p,m){return m.pending&&(t[p.pending.type]=m.pending),m.rejected&&(t[p.rejected.type]=m.rejected),m.fulfilled&&(t[p.fulfilled.type]=m.fulfilled),m.settled&&r.push({matcher:p.settled,reducer:m.settled}),d},addMatcher(p,m){return r.push({matcher:p,reducer:m}),d},addDefaultCase(p){return a=p,d}};return e(d),[t,r,a]}function yB(e){return typeof e=="function"}function vB(e,t){let[r,a,d]=JD(t),p;if(yB(e))p=()=>QM(e());else{const s=QM(e);p=()=>s}function m(s=p(),M){let C=[r[M.type],...a.filter(({matcher:A})=>A(M)).map(({reducer:A})=>A)];return C.filter(A=>!!A).length===0&&(C=[d]),C.reduce((A,D)=>{if(D)if(zp(A)){const j=D(A,M);return j===void 0?A:j}else{if(Xh(A))return XD(A,R=>D(R,M));{const R=D(A,M);if(R===void 0){if(A===null)return A;throw Error("A case reducer on a non-draftable value must not return undefined")}return R}}return A},s)}return m.getInitialState=p,m}var _B="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",bB=(e=21)=>{let t="",r=e;for(;r--;)t+=_B[Math.random()*64|0];return t},xB=Symbol.for("rtk-slice-createasyncthunk");function wB(e,t){return`${e}/${t}`}function SB({creators:e}={}){const t=e?.asyncThunk?.[xB];return function(a){const{name:d,reducerPath:p=d}=a;if(!d)throw new Error(el(11));const m=(typeof a.reducers=="function"?a.reducers(MB()):a.reducers)||{},s=Object.keys(m),M={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},C={addCase(ne,me){const fe=typeof ne=="string"?ne:ne.type;if(!fe)throw new Error(el(12));if(fe in M.sliceCaseReducersByType)throw new Error(el(13));return M.sliceCaseReducersByType[fe]=me,C},addMatcher(ne,me){return M.sliceMatchers.push({matcher:ne,reducer:me}),C},exposeAction(ne,me){return M.actionCreators[ne]=me,C},exposeCaseReducer(ne,me){return M.sliceCaseReducersByName[ne]=me,C}};s.forEach(ne=>{const me=m[ne],fe={reducerName:ne,type:wB(d,ne),createNotation:typeof a.reducers=="function"};EB(me)?PB(fe,me,C,t):CB(fe,me,C)});function A(){const[ne={},me=[],fe=void 0]=typeof a.extraReducers=="function"?JD(a.extraReducers):[a.extraReducers],_e={...ne,...M.sliceCaseReducersByType};return vB(a.initialState,ye=>{for(let Oe in _e)ye.addCase(Oe,_e[Oe]);for(let Oe of M.sliceMatchers)ye.addMatcher(Oe.matcher,Oe.reducer);for(let Oe of me)ye.addMatcher(Oe.matcher,Oe.reducer);fe&&ye.addDefaultCase(fe)})}const D=ne=>ne,R=new Map,j=new WeakMap;let G;function V(ne,me){return G||(G=A()),G(ne,me)}function H(){return G||(G=A()),G.getInitialState()}function Q(ne,me=!1){function fe(ye){let Oe=ye[ne];return typeof Oe>"u"&&me&&(Oe=P_(j,fe,H)),Oe}function _e(ye=D){const Oe=P_(R,me,()=>new WeakMap);return P_(Oe,ye,()=>{const nt={};for(const[ft,rt]of Object.entries(a.selectors??{}))nt[ft]=TB(rt,ye,()=>P_(j,ye,H),me);return nt})}return{reducerPath:ne,getSelectors:_e,get selectors(){return _e(fe)},selectSlice:fe}}const te={name:d,reducer:V,actions:M.actionCreators,caseReducers:M.sliceCaseReducersByName,getInitialState:H,...Q(p),injectInto(ne,{reducerPath:me,...fe}={}){const _e=me??p;return ne.inject({reducerPath:_e,reducer:V},fe),{...te,...Q(_e,!0)}}};return te}}function TB(e,t,r,a){function d(p,...m){let s=t(p);return typeof s>"u"&&a&&(s=r()),e(s,...m)}return d.unwrapped=e,d}var il=SB();function MB(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function CB({type:e,reducerName:t,createNotation:r},a,d){let p,m;if("reducer"in a){if(r&&!AB(a))throw new Error(el(17));p=a.reducer,m=a.prepare}else p=a;d.addCase(e,p).exposeCaseReducer(t,p).exposeAction(t,m?Yl(e,m):Yl(e))}function EB(e){return e._reducerDefinitionType==="asyncThunk"}function AB(e){return e._reducerDefinitionType==="reducerWithPrepare"}function PB({type:e,reducerName:t},r,a,d){if(!d)throw new Error(el(18));const{payloadCreator:p,fulfilled:m,pending:s,rejected:M,settled:C,options:A}=r,D=d(e,p,A);a.exposeAction(t,D),m&&a.addCase(D.fulfilled,m),s&&a.addCase(D.pending,s),M&&a.addCase(D.rejected,M),C&&a.addMatcher(D.settled,C),a.exposeCaseReducer(t,{fulfilled:m||D_,pending:s||D_,rejected:M||D_,settled:C||D_})}function D_(){}var DB="task",ek="listener",tk="completed",NS="cancelled",kB=`task-${NS}`,OB=`task-${tk}`,vw=`${ek}-${NS}`,IB=`${ek}-${tk}`,ib=class{constructor(e){this.code=e,this.message=`${DB} ${NS} (reason: ${e})`}name="TaskAbortError";message},BS=(e,t)=>{if(typeof e!="function")throw new TypeError(el(32))},g0=()=>{},nk=(e,t=g0)=>(e.catch(t),e),rk=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Dp=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},kp=e=>{if(e.aborted){const{reason:t}=e;throw new ib(t)}};function ik(e,t){let r=g0;return new Promise((a,d)=>{const p=()=>d(new ib(e.reason));if(e.aborted){p();return}r=rk(e,p),t.finally(()=>r()).then(a,d)}).finally(()=>{r=g0})}var zB=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof ib?"cancelled":"rejected",error:r}}finally{t?.()}},y0=e=>t=>nk(ik(e,t).then(r=>(kp(e),r))),ak=e=>{const t=y0(e);return r=>t(new Promise(a=>setTimeout(a,r)))},{assign:Km}=Object,eC={},ab="listenerMiddleware",RB=(e,t)=>{const r=a=>rk(e,()=>Dp(a,e.reason));return(a,d)=>{BS(a);const p=new AbortController;r(p);const m=zB(async()=>{kp(e),kp(p.signal);const s=await a({pause:y0(p.signal),delay:ak(p.signal),signal:p.signal});return kp(p.signal),s},()=>Dp(p,OB));return d?.autoJoin&&t.push(m.catch(g0)),{result:y0(e)(m),cancel(){Dp(p,kB)}}}},jB=(e,t)=>{const r=async(a,d)=>{kp(t);let p=()=>{};const s=[new Promise((M,C)=>{let A=e({predicate:a,effect:(D,R)=>{R.unsubscribe(),M([D,R.getState(),R.getOriginalState()])}});p=()=>{A(),C()}})];d!=null&&s.push(new Promise(M=>setTimeout(M,d,null)));try{const M=await ik(t,Promise.race(s));return kp(t),M}finally{p()}};return(a,d)=>nk(r(a,d))},ok=e=>{let{type:t,actionCreator:r,matcher:a,predicate:d,effect:p}=e;if(t)d=Yl(t).match;else if(r)t=r.type,d=r.match;else if(a)d=a;else if(!d)throw new Error(el(21));return BS(p),{predicate:d,type:t,effect:p}},sk=Km(e=>{const{type:t,predicate:r,effect:a}=ok(e);return{id:bB(),effect:a,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(el(22))}}},{withTypes:()=>sk}),tC=(e,t)=>{const{type:r,effect:a,predicate:d}=ok(t);return Array.from(e.values()).find(p=>(typeof r=="string"?p.type===r:p.predicate===d)&&p.effect===a)},_w=e=>{e.pending.forEach(t=>{Dp(t,vw)})},LB=e=>()=>{e.forEach(_w),e.clear()},nC=(e,t,r)=>{try{e(t,r)}catch(a){setTimeout(()=>{throw a},0)}},lk=Km(Yl(`${ab}/add`),{withTypes:()=>lk}),NB=Yl(`${ab}/removeAll`),ck=Km(Yl(`${ab}/remove`),{withTypes:()=>ck}),BB=(...e)=>{console.error(`${ab}/error`,...e)},vv=(e={})=>{const t=new Map,{extra:r,onError:a=BB}=e;BS(a);const d=A=>(A.unsubscribe=()=>t.delete(A.id),t.set(A.id,A),D=>{A.unsubscribe(),D?.cancelActive&&_w(A)}),p=A=>{const D=tC(t,A)??sk(A);return d(D)};Km(p,{withTypes:()=>p});const m=A=>{const D=tC(t,A);return D&&(D.unsubscribe(),A.cancelActive&&_w(D)),!!D};Km(m,{withTypes:()=>m});const s=async(A,D,R,j)=>{const G=new AbortController,V=jB(p,G.signal),H=[];try{A.pending.add(G),await Promise.resolve(A.effect(D,Km({},R,{getOriginalState:j,condition:(Q,te)=>V(Q,te).then(Boolean),take:V,delay:ak(G.signal),pause:y0(G.signal),extra:r,signal:G.signal,fork:RB(G.signal,H),unsubscribe:A.unsubscribe,subscribe:()=>{t.set(A.id,A)},cancelActiveListeners:()=>{A.pending.forEach((Q,te,ne)=>{Q!==G&&(Dp(Q,vw),ne.delete(Q))})},cancel:()=>{Dp(G,vw),A.pending.delete(G)},throwIfCancelled:()=>{kp(G.signal)}})))}catch(Q){Q instanceof ib||nC(a,Q,{raisedBy:"effect"})}finally{await Promise.all(H),Dp(G,IB),A.pending.delete(G)}},M=LB(t);return{middleware:A=>D=>R=>{if(!VD(R))return D(R);if(lk.match(R))return p(R.payload);if(NB.match(R)){M();return}if(ck.match(R))return m(R.payload);let j=A.getState();const G=()=>{if(j===eC)throw new Error(el(23));return j};let V;try{if(V=D(R),t.size>0){const H=A.getState(),Q=Array.from(t.values());for(const te of Q){let ne=!1;try{ne=te.predicate(R,H,j)}catch(me){ne=!1,nC(a,me,{raisedBy:"predicate"})}ne&&s(te,R,A,G)}}}finally{j=eC}return V},startListening:p,stopListening:m,clearListeners:M}};function el(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var FB={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},uk=il({name:"chartLayout",initialState:FB,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,a,d,p;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(a=t.payload.right)!==null&&a!==void 0?a:0,e.margin.bottom=(d=t.payload.bottom)!==null&&d!==void 0?d:0,e.margin.left=(p=t.payload.left)!==null&&p!==void 0?p:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:UB,setLayout:$B,setChartSize:VB,setScale:qB}=uk.actions,GB=uk.reducer;function rC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function iC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rC(Object(r),!0).forEach(function(a){HB(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function HB(e,t,r){return(t=ZB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZB(e){var t=WB(e,"string");return typeof t=="symbol"?t:t+""}function WB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var v0=Math.PI/180,YB=e=>e*180/Math.PI,Qa=(e,t,r,a)=>({x:e+Math.cos(-v0*a)*r,y:t+Math.sin(-v0*a)*r}),XB=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(r-(a.top||0)-(a.bottom||0)))/2},KB=(e,t)=>{var{x:r,y:a}=e,{x:d,y:p}=t;return Math.sqrt((r-d)**2+(a-p)**2)},QB=(e,t)=>{var{x:r,y:a}=e,{cx:d,cy:p}=t,m=KB({x:r,y:a},{x:d,y:p});if(m<=0)return{radius:m,angle:0};var s=(r-d)/m,M=Math.acos(s);return a>p&&(M=2*Math.PI-M),{radius:m,angle:YB(M),angleInRadian:M}},JB=e=>{var{startAngle:t,endAngle:r}=e,a=Math.floor(t/360),d=Math.floor(r/360),p=Math.min(a,d);return{startAngle:t-p*360,endAngle:r-p*360}},e6=(e,t)=>{var{startAngle:r,endAngle:a}=t,d=Math.floor(r/360),p=Math.floor(a/360),m=Math.min(d,p);return e+m*360},t6=(e,t)=>{var{x:r,y:a}=e,{radius:d,angle:p}=QB({x:r,y:a},t),{innerRadius:m,outerRadius:s}=t;if(d<m||d>s||d===0)return null;var{startAngle:M,endAngle:C}=JB(t),A=p,D;if(M<=C){for(;A>C;)A-=360;for(;A<M;)A+=360;D=A>=M&&A<=C}else{for(;A>M;)A-=360;for(;A<C;)A+=360;D=A>=C&&A<=M}return D?iC(iC({},t),{},{radius:d,angle:e6(A,t)}):null};function hk(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function aC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function Gl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aC(Object(r),!0).forEach(function(a){n6(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function n6(e,t,r){return(t=r6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r6(e){var t=i6(e,"string");return typeof t=="symbol"?t:t+""}function i6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vo(e,t,r){return Ma(e)||Ma(t)?r:Lu(t)?X0(e,t,r):typeof t=="function"?t(e):r}var a6=(e,t,r,a,d)=>{var p,m=-1,s=(p=t?.length)!==null&&p!==void 0?p:0;if(s<=1||e==null)return 0;if(a==="angleAxis"&&d!=null&&Math.abs(Math.abs(d[1]-d[0])-360)<=1e-6)for(var M=0;M<s;M++){var C=M>0?r[M-1].coordinate:r[s-1].coordinate,A=r[M].coordinate,D=M>=s-1?r[0].coordinate:r[M+1].coordinate,R=void 0;if(Hl(A-C)!==Hl(D-A)){var j=[];if(Hl(D-A)===Hl(d[1]-d[0])){R=D;var G=A+d[1]-d[0];j[0]=Math.min(G,(G+C)/2),j[1]=Math.max(G,(G+C)/2)}else{R=C;var V=D+d[1]-d[0];j[0]=Math.min(A,(V+A)/2),j[1]=Math.max(A,(V+A)/2)}var H=[Math.min(A,(R+A)/2),Math.max(A,(R+A)/2)];if(e>H[0]&&e<=H[1]||e>=j[0]&&e<=j[1]){({index:m}=r[M]);break}}else{var Q=Math.min(C,D),te=Math.max(C,D);if(e>(Q+A)/2&&e<=(te+A)/2){({index:m}=r[M]);break}}}else if(t){for(var ne=0;ne<s;ne++)if(ne===0&&e<=(t[ne].coordinate+t[ne+1].coordinate)/2||ne>0&&ne<s-1&&e>(t[ne].coordinate+t[ne-1].coordinate)/2&&e<=(t[ne].coordinate+t[ne+1].coordinate)/2||ne===s-1&&e>(t[ne].coordinate+t[ne-1].coordinate)/2){({index:m}=t[ne]);break}}return m},o6=(e,t,r)=>{if(t&&r){var{width:a,height:d}=r,{align:p,verticalAlign:m,layout:s}=t;if((s==="vertical"||s==="horizontal"&&m==="middle")&&p!=="center"&&bn(e[p]))return Gl(Gl({},e),{},{[p]:e[p]+(a||0)});if((s==="horizontal"||s==="vertical"&&p==="center")&&m!=="middle"&&bn(e[m]))return Gl(Gl({},e),{},{[m]:e[m]+(d||0)})}return e},lf=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",dk=(e,t,r,a)=>{if(a)return e.map(s=>s.coordinate);var d,p,m=e.map(s=>(s.coordinate===t&&(d=!0),s.coordinate===r&&(p=!0),s.coordinate));return d||m.push(t),p||m.push(r),m},fk=(e,t,r)=>{if(!e)return null;var{duplicateDomain:a,type:d,range:p,scale:m,realScaleType:s,isCategorical:M,categoricalDomain:C,tickCount:A,ticks:D,niceTicks:R,axisType:j}=e;if(!m)return null;var G=s==="scaleBand"&&m.bandwidth?m.bandwidth()/2:2,V=d==="category"&&m.bandwidth?m.bandwidth()/G:0;if(V=j==="angleAxis"&&p&&p.length>=2?Hl(p[0]-p[1])*2*V:V,D||R){var H=(D||R||[]).map((Q,te)=>{var ne=a?a.indexOf(Q):Q;return{coordinate:m(ne)+V,value:Q,offset:V,index:te}});return H.filter(Q=>!Wl(Q.coordinate))}return M&&C?C.map((Q,te)=>({coordinate:m(Q)+V,value:Q,index:te,offset:V})):m.ticks&&A!=null?m.ticks(A).map((Q,te)=>({coordinate:m(Q)+V,value:Q,offset:V,index:te})):m.domain().map((Q,te)=>({coordinate:m(Q)+V,value:a?a[Q]:Q,index:te,offset:V}))},oC=1e-4,s6=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,a=e.range(),d=Math.min(a[0],a[1])-oC,p=Math.max(a[0],a[1])+oC,m=e(t[0]),s=e(t[r-1]);(m<d||m>p||s<d||s>p)&&e.domain([t[0],t[r-1]])}},l6=e=>{var t=e.length;if(!(t<=0))for(var r=0,a=e[0].length;r<a;++r)for(var d=0,p=0,m=0;m<t;++m){var s=Wl(e[m][r][1])?e[m][r][0]:e[m][r][1];s>=0?(e[m][r][0]=d,e[m][r][1]=d+s,d=e[m][r][1]):(e[m][r][0]=p,e[m][r][1]=p+s,p=e[m][r][1])}},c6=e=>{var t=e.length;if(!(t<=0))for(var r=0,a=e[0].length;r<a;++r)for(var d=0,p=0;p<t;++p){var m=Wl(e[p][r][1])?e[p][r][0]:e[p][r][1];m>=0?(e[p][r][0]=d,e[p][r][1]=d+m,d=e[p][r][1]):(e[p][r][0]=0,e[p][r][1]=0)}},u6={sign:l6,expand:B5,none:ng,silhouette:F5,wiggle:U5,positive:c6},h6=(e,t,r)=>{var a=u6[r],d=N5().keys(t).value((p,m)=>+Vo(p,m,0)).order(cw).offset(a);return d(e)};function sC(e){var{axis:t,ticks:r,bandSize:a,entry:d,index:p,dataKey:m}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Ma(d[t.dataKey])){var s=iD(r,"value",d[t.dataKey]);if(s)return s.coordinate+a/2}return r[p]?r[p].coordinate+a/2:null}var M=Vo(d,Ma(m)?t.dataKey:m);return Ma(M)?null:t.scale(M)}var d6=e=>{var t=e.flat(2).filter(bn);return[Math.min(...t),Math.max(...t)]},f6=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],p6=(e,t,r)=>{if(e!=null)return f6(Object.keys(e).reduce((a,d)=>{var p=e[d],{stackedData:m}=p,s=m.reduce((M,C)=>{var A=hk(C,t,r),D=d6(A);return[Math.min(M[0],D[0]),Math.max(M[1],D[1])]},[1/0,-1/0]);return[Math.min(s[0],a[0]),Math.max(s[1],a[1])]},[1/0,-1/0]))},lC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,cC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,bw=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!r||a>0)return a}if(e&&t&&t.length>=2){for(var d=eb(t,A=>A.coordinate),p=1/0,m=1,s=d.length;m<s;m++){var M=d[m],C=d[m-1];p=Math.min((M.coordinate||0)-(C.coordinate||0),p)}return p===1/0?0:p}return r?void 0:0};function uC(e){var{tooltipEntrySettings:t,dataKey:r,payload:a,value:d,name:p}=e;return Gl(Gl({},t),{},{dataKey:r,payload:a,value:d,name:p})}function pk(e,t){if(e)return String(e);if(typeof t=="string")return t}function m6(e,t,r,a,d){if(r==="horizontal"||r==="vertical"){var p=e>=d.left&&e<=d.left+d.width&&t>=d.top&&t<=d.top+d.height;return p?{x:e,y:t}:null}return a?t6({x:e,y:t},a):null}var g6=(e,t,r,a)=>{var d=t.find(C=>C&&C.index===r);if(d){if(e==="horizontal")return{x:d.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:d.coordinate};if(e==="centric"){var p=d.coordinate,{radius:m}=a;return Gl(Gl(Gl({},a),Qa(a.cx,a.cy,m,p)),{},{angle:p,radius:m})}var s=d.coordinate,{angle:M}=a;return Gl(Gl(Gl({},a),Qa(a.cx,a.cy,s,M)),{},{angle:M,radius:s})}return{x:0,y:0}},y6=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,id=e=>e.layout.width,ad=e=>e.layout.height,v6=e=>e.layout.scale,mk=e=>e.layout.margin,ob=ut(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),sb=ut(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),_6="data-recharts-item-index",b6="data-recharts-item-data-key",_v=60;function hC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function k_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hC(Object(r),!0).forEach(function(a){x6(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function x6(e,t,r){return(t=w6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w6(e){var t=S6(e,"string");return typeof t=="symbol"?t:t+""}function S6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var T6=e=>e.brush.height;function M6(e){var t=sb(e);return t.reduce((r,a)=>{if(a.orientation==="left"&&!a.mirror&&!a.hide){var d=typeof a.width=="number"?a.width:_v;return r+d}return r},0)}function C6(e){var t=sb(e);return t.reduce((r,a)=>{if(a.orientation==="right"&&!a.mirror&&!a.hide){var d=typeof a.width=="number"?a.width:_v;return r+d}return r},0)}function E6(e){var t=ob(e);return t.reduce((r,a)=>a.orientation==="top"&&!a.mirror&&!a.hide?r+a.height:r,0)}function A6(e){var t=ob(e);return t.reduce((r,a)=>a.orientation==="bottom"&&!a.mirror&&!a.hide?r+a.height:r,0)}var eo=ut([id,ad,mk,T6,M6,C6,E6,A6,BD,G4],(e,t,r,a,d,p,m,s,M,C)=>{var A={left:(r.left||0)+d,right:(r.right||0)+p},D={top:(r.top||0)+m,bottom:(r.bottom||0)+s},R=k_(k_({},D),A),j=R.bottom;R.bottom+=a,R=o6(R,M,C);var G=e-R.left-R.right,V=t-R.top-R.bottom;return k_(k_({brushBottom:j},R),{},{width:Math.max(G,0),height:Math.max(V,0)})}),P6=ut(eo,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),gk=ut(id,ad,(e,t)=>({x:0,y:0,width:e,height:t})),D6=F.createContext(null),Kl=()=>F.useContext(D6)!=null,lb=e=>e.brush,cb=ut([lb,eo,mk],(e,t,r)=>({height:e.height,x:bn(e.x)?e.x:t.left,y:bn(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:bn(e.width)?e.width:t.width})),FS=()=>{var e,t=Kl(),r=hn(P6),a=hn(cb),d=(e=hn(lb))===null||e===void 0?void 0:e.padding;return!t||!a||!d?r:{width:a.width-d.left-d.right,height:a.height-d.top-d.bottom,x:d.left,y:d.top}},k6={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},yk=()=>{var e;return(e=hn(eo))!==null&&e!==void 0?e:k6},US=()=>hn(id),$S=()=>hn(ad),O6=()=>hn(e=>e.layout.margin),ei=e=>e.layout.layoutType,VS=()=>hn(ei),I6={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},vk=il({name:"legend",initialState:I6,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=Zh(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:dC,setLegendSettings:z6,addLegendPayload:R6,removeLegendPayload:j6}=vk.actions,L6=vk.reducer,N6=["contextPayload"];function xw(){return xw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},xw.apply(null,arguments)}function fC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function ig(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fC(Object(r),!0).forEach(function(a){qS(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qS(e,t,r){return(t=B6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B6(e){var t=F6(e,"string");return typeof t=="symbol"?t:t+""}function F6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function U6(e,t){if(e==null)return{};var r,a,d=$6(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)r=p[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(d[r]=e[r])}return d}function $6(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function V6(e){return e.value}function q6(e){var{contextPayload:t}=e,r=U6(e,N6),a=RD(t,e.payloadUniqBy,V6),d=ig(ig({},r),{},{payload:a});return F.isValidElement(e.content)?F.cloneElement(e.content,d):typeof e.content=="function"?F.createElement(e.content,d):F.createElement(kS,d)}function G6(e,t,r,a,d,p){var{layout:m,align:s,verticalAlign:M}=t,C,A;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(s==="center"&&m==="vertical"?C={left:((a||0)-p.width)/2}:C=s==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(M==="middle"?A={top:((d||0)-p.height)/2}:A=M==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),ig(ig({},C),A)}function H6(e){var t=Ja();return F.useEffect(()=>{t(z6(e))},[t,e]),null}function Z6(e){var t=Ja();return F.useEffect(()=>(t(dC(e)),()=>{t(dC({width:0,height:0}))}),[t,e]),null}function W6(e){var t=W4(),r=l5(),a=O6(),{width:d,height:p,wrapperStyle:m,portal:s}=e,[M,C]=FD([t]),A=US(),D=$S();if(A==null||D==null)return null;var R=A-(a.left||0)-(a.right||0),j=ub.getWidthOrHeight(e.layout,p,d,R),G=s?m:ig(ig({position:"absolute",width:j?.width||d||"auto",height:j?.height||p||"auto"},G6(m,e,a,A,D,M)),m),V=s??r;if(V==null)return null;var H=F.createElement("div",{className:"recharts-legend-wrapper",style:G,ref:C},F.createElement(H6,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),F.createElement(Z6,{width:M.width,height:M.height}),F.createElement(q6,xw({},e,j,{margin:a,chartWidth:A,chartHeight:D,contextPayload:t})));return Vp.createPortal(H,V)}class ub extends F.PureComponent{static getWidthOrHeight(t,r,a,d){return t==="vertical"&&bn(r)?{height:r}:t==="horizontal"?{width:a||d}:null}render(){return F.createElement(W6,this.props)}}qS(ub,"displayName","Legend");qS(ub,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function ww(){return ww=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ww.apply(null,arguments)}function pC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function d1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pC(Object(r),!0).forEach(function(a){Y6(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Y6(e,t,r){return(t=X6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X6(e){var t=K6(e,"string");return typeof t=="symbol"?t:t+""}function K6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q6(e){return Array.isArray(e)&&Lu(e[0])&&Lu(e[1])?e.join(" ~ "):e}var J6=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:a={},labelStyle:d={},payload:p,formatter:m,itemSorter:s,wrapperClassName:M,labelClassName:C,label:A,labelFormatter:D,accessibilityLayer:R=!1}=e,j=()=>{if(p&&p.length){var fe={padding:0,margin:0},_e=(s?eb(p,s):p).map((ye,Oe)=>{if(ye.type==="none")return null;var nt=ye.formatter||m||Q6,{value:ft,name:rt}=ye,at=ft,Et=rt;if(nt){var At=nt(ft,rt,ye,Oe,p);if(Array.isArray(At))[at,Et]=At;else if(At!=null)at=At;else return null}var zt=d1({display:"block",paddingTop:4,paddingBottom:4,color:ye.color||"#000"},a);return F.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Oe),style:zt},Lu(Et)?F.createElement("span",{className:"recharts-tooltip-item-name"},Et):null,Lu(Et)?F.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,F.createElement("span",{className:"recharts-tooltip-item-value"},at),F.createElement("span",{className:"recharts-tooltip-item-unit"},ye.unit||""))});return F.createElement("ul",{className:"recharts-tooltip-item-list",style:fe},_e)}return null},G=d1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),V=d1({margin:0},d),H=!Ma(A),Q=H?A:"",te=Er("recharts-default-tooltip",M),ne=Er("recharts-tooltip-label",C);H&&D&&p!==void 0&&p!==null&&(Q=D(A,p));var me=R?{role:"status","aria-live":"assertive"}:{};return F.createElement("div",ww({className:te,style:G},me),F.createElement("p",{className:ne,style:V},F.isValidElement(Q)?Q:"".concat(Q)),j())},Ly="recharts-tooltip-wrapper",eF={visibility:"hidden"};function tF(e){var{coordinate:t,translateX:r,translateY:a}=e;return Er(Ly,{["".concat(Ly,"-right")]:bn(r)&&t&&bn(t.x)&&r>=t.x,["".concat(Ly,"-left")]:bn(r)&&t&&bn(t.x)&&r<t.x,["".concat(Ly,"-bottom")]:bn(a)&&t&&bn(t.y)&&a>=t.y,["".concat(Ly,"-top")]:bn(a)&&t&&bn(t.y)&&a<t.y})}function mC(e){var{allowEscapeViewBox:t,coordinate:r,key:a,offsetTopLeft:d,position:p,reverseDirection:m,tooltipDimension:s,viewBox:M,viewBoxDimension:C}=e;if(p&&bn(p[a]))return p[a];var A=r[a]-s-(d>0?d:0),D=r[a]+d;if(t[a])return m[a]?A:D;var R=M[a];if(R==null)return 0;if(m[a]){var j=A,G=R;return j<G?Math.max(D,R):Math.max(A,R)}if(C==null)return 0;var V=D+s,H=R+C;return V>H?Math.max(A,R):Math.max(D,R)}function nF(e){var{translateX:t,translateY:r,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function rF(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:a,position:d,reverseDirection:p,tooltipBox:m,useTranslate3d:s,viewBox:M}=e,C,A,D;return m.height>0&&m.width>0&&r?(A=mC({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:a,position:d,reverseDirection:p,tooltipDimension:m.width,viewBox:M,viewBoxDimension:M.width}),D=mC({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:a,position:d,reverseDirection:p,tooltipDimension:m.height,viewBox:M,viewBoxDimension:M.height}),C=nF({translateX:A,translateY:D,useTranslate3d:s})):C=eF,{cssProperties:C,cssClasses:tF({translateX:A,translateY:D,coordinate:r})}}function gC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function O_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gC(Object(r),!0).forEach(function(a){Sw(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Sw(e,t,r){return(t=iF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iF(e){var t=aF(e,"string");return typeof t=="symbol"?t:t+""}function aF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class oF extends F.PureComponent{constructor(){super(...arguments),Sw(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Sw(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,a,d,p;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&r!==void 0?r:0,y:(d=(p=this.props.coordinate)===null||p===void 0?void 0:p.y)!==null&&d!==void 0?d:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:a,animationEasing:d,children:p,coordinate:m,hasPayload:s,isAnimationActive:M,offset:C,position:A,reverseDirection:D,useTranslate3d:R,viewBox:j,wrapperStyle:G,lastBoundingBox:V,innerRef:H,hasPortalFromProps:Q}=this.props,{cssClasses:te,cssProperties:ne}=rF({allowEscapeViewBox:r,coordinate:m,offsetTopLeft:C,position:A,reverseDirection:D,tooltipBox:{height:V.height,width:V.width},useTranslate3d:R,viewBox:j}),me=Q?{}:O_(O_({transition:M&&t?"transform ".concat(a,"ms ").concat(d):void 0},ne),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&s?"visible":"hidden",position:"absolute",top:0,left:0}),fe=O_(O_({},me),{},{visibility:!this.state.dismissed&&t&&s?"visible":"hidden"},G);return F.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:te,style:fe,ref:H},p)}}var sF=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),bg={devToolsEnabled:!1,isSsr:sF()},_k=()=>hn(e=>e.rootProps.accessibilityLayer);function Uc(e){return Number.isFinite(e)}function _0(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Tw(){return Tw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Tw.apply(null,arguments)}function yC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function vC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yC(Object(r),!0).forEach(function(a){lF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function lF(e,t,r){return(t=cF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cF(e){var t=uF(e,"string");return typeof t=="symbol"?t:t+""}function uF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _C={curveBasisClosed:E5,curveBasisOpen:A5,curveBasis:C5,curveBumpX:d5,curveBumpY:f5,curveLinearClosed:P5,curveLinear:Q0,curveMonotoneX:D5,curveMonotoneY:k5,curveNatural:O5,curveStep:I5,curveStepAfter:R5,curveStepBefore:z5},I_=e=>Uc(e.x)&&Uc(e.y),Ny=e=>e.x,By=e=>e.y,hF=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(gv(e));return(r==="curveMonotone"||r==="curveBump")&&t?_C["".concat(r).concat(t==="vertical"?"Y":"X")]:_C[r]||Q0},dF=e=>{var{type:t="linear",points:r=[],baseLine:a,layout:d,connectNulls:p=!1}=e,m=hF(t,d),s=p?r.filter(I_):r,M;if(Array.isArray(a)){var C=p?a.filter(D=>I_(D)):a,A=s.map((D,R)=>vC(vC({},D),{},{base:C[R]}));return d==="vertical"?M=M_().y(By).x1(Ny).x0(D=>D.base.x):M=M_().x(Ny).y1(By).y0(D=>D.base.y),M.defined(I_).curve(m),M(A)}return d==="vertical"&&bn(a)?M=M_().y(By).x1(Ny).x0(a):bn(a)?M=M_().x(Ny).y1(By).y0(a):M=pD().x(Ny).y(By),M.defined(I_).curve(m),M(s)},bk=e=>{var{className:t,points:r,path:a,pathRef:d}=e;if((!r||!r.length)&&!a)return null;var p=r&&r.length?dF(e):a;return F.createElement("path",Tw({},qp(e),MS(e),{className:Er("recharts-curve",t),d:p===null?void 0:p,ref:d}))},fF=["x","y","top","left","width","height","className"];function Mw(){return Mw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Mw.apply(null,arguments)}function bC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function pF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bC(Object(r),!0).forEach(function(a){mF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function mF(e,t,r){return(t=gF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gF(e){var t=yF(e,"string");return typeof t=="symbol"?t:t+""}function yF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vF(e,t){if(e==null)return{};var r,a,d=_F(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)r=p[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(d[r]=e[r])}return d}function _F(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var bF=(e,t,r,a,d,p)=>"M".concat(e,",").concat(d,"v").concat(a,"M").concat(p,",").concat(t,"h").concat(r),xF=e=>{var{x:t=0,y:r=0,top:a=0,left:d=0,width:p=0,height:m=0,className:s}=e,M=vF(e,fF),C=pF({x:t,y:r,top:a,left:d,width:p,height:m},M);return!bn(t)||!bn(r)||!bn(p)||!bn(m)||!bn(a)||!bn(d)?null:F.createElement("path",Mw({},Ca(C,!0),{className:Er("recharts-cross",s),d:bF(t,r,p,m,a,d)}))};function wF(e,t,r,a){var d=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-d:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-d,width:e==="horizontal"?a:r.width-1,height:e==="horizontal"?r.height-1:a}}function xC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function SF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xC(Object(r),!0).forEach(function(a){TF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function TF(e,t,r){return(t=MF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MF(e){var t=CF(e,"string");return typeof t=="symbol"?t:t+""}function CF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ql(e,t){var r=SF({},e),a=t,d=Object.keys(t),p=d.reduce((m,s)=>(m[s]===void 0&&a[s]!==void 0&&(m[s]=a[s]),m),r);return p}function EF(){}function wC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function SC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wC(Object(r),!0).forEach(function(a){AF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function AF(e,t,r){return(t=PF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PF(e){var t=DF(e,"string");return typeof t=="symbol"?t:t+""}function DF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kF=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),OF=(e,t,r)=>e.map(a=>"".concat(kF(a)," ").concat(t,"ms ").concat(r)).join(","),IF=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,a)=>r.filter(d=>a.includes(d))),tv=(e,t)=>Object.keys(t).reduce((r,a)=>SC(SC({},r),{},{[a]:e(a,t[a])}),{});function TC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function Ka(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TC(Object(r),!0).forEach(function(a){zF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function zF(e,t,r){return(t=RF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RF(e){var t=jF(e,"string");return typeof t=="symbol"?t:t+""}function jF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var b0=(e,t,r)=>e+(t-e)*r,Cw=e=>{var{from:t,to:r}=e;return t!==r},xk=(e,t,r)=>{var a=tv((d,p)=>{if(Cw(p)){var[m,s]=e(p.from,p.to,p.velocity);return Ka(Ka({},p),{},{from:m,velocity:s})}return p},t);return r<1?tv((d,p)=>Cw(p)?Ka(Ka({},p),{},{velocity:b0(p.velocity,a[d].velocity,r),from:b0(p.from,a[d].from,r)}):p,t):xk(e,a,r-1)};function LF(e,t,r,a,d,p){var m,s=a.reduce((R,j)=>Ka(Ka({},R),{},{[j]:{from:e[j],velocity:0,to:t[j]}}),{}),M=()=>tv((R,j)=>j.from,s),C=()=>!Object.values(s).filter(Cw).length,A=null,D=R=>{m||(m=R);var j=R-m,G=j/r.dt;s=xk(r,s,G),d(Ka(Ka(Ka({},e),t),M())),m=R,C()||(A=p.setTimeout(D))};return()=>(A=p.setTimeout(D),()=>{A()})}function NF(e,t,r,a,d,p,m){var s=null,M=d.reduce((D,R)=>Ka(Ka({},D),{},{[R]:[e[R],t[R]]}),{}),C,A=D=>{C||(C=D);var R=(D-C)/a,j=tv((V,H)=>b0(...H,r(R)),M);if(p(Ka(Ka(Ka({},e),t),j)),R<1)s=m.setTimeout(A);else{var G=tv((V,H)=>b0(...H,r(1)),M);p(Ka(Ka(Ka({},e),t),G))}};return()=>(s=m.setTimeout(A),()=>{s()})}const BF=(e,t,r,a,d,p)=>{var m=IF(e,t);return r.isStepper===!0?LF(e,t,r,m,d,p):NF(e,t,r,a,m,d,p)};var x0=1e-4,wk=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Sk=(e,t)=>e.map((r,a)=>r*t**a).reduce((r,a)=>r+a),MC=(e,t)=>r=>{var a=wk(e,t);return Sk(a,r)},FF=(e,t)=>r=>{var a=wk(e,t),d=[...a.map((p,m)=>p*m).slice(1),0];return Sk(d,r)},CC=function(){for(var t,r,a,d,p=arguments.length,m=new Array(p),s=0;s<p;s++)m[s]=arguments[s];if(m.length===1)switch(m[0]){case"linear":[t,a,r,d]=[0,0,1,1];break;case"ease":[t,a,r,d]=[.25,.1,.25,1];break;case"ease-in":[t,a,r,d]=[.42,0,1,1];break;case"ease-out":[t,a,r,d]=[.42,0,.58,1];break;case"ease-in-out":[t,a,r,d]=[0,0,.58,1];break;default:{var M=m[0].split("(");M[0]==="cubic-bezier"&&M[1].split(")")[0].split(",").length===4&&([t,a,r,d]=M[1].split(")")[0].split(",").map(G=>parseFloat(G)))}}else m.length===4&&([t,a,r,d]=m);var C=MC(t,r),A=MC(a,d),D=FF(t,r),R=G=>G>1?1:G<0?0:G,j=G=>{for(var V=G>1?1:G,H=V,Q=0;Q<8;++Q){var te=C(H)-V,ne=D(H);if(Math.abs(te-V)<x0||ne<x0)return A(H);H=R(H-te/ne)}return A(H)};return j.isStepper=!1,j},UF=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:a=8,dt:d=17}=t,p=(m,s,M)=>{var C=-(m-s)*r,A=M*a,D=M+(C-A)*d/1e3,R=M*d/1e3+m;return Math.abs(R-s)<x0&&Math.abs(D)<x0?[s,0]:[R,D]};return p.isStepper=!0,p.dt=d,p},$F=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return CC(e);case"spring":return UF();default:if(e.split("(")[0]==="cubic-bezier")return CC(e)}return typeof e=="function"?e:null};function VF(e){var t,r=()=>null,a=!1,d=null,p=m=>{if(!a){if(Array.isArray(m)){if(!m.length)return;var s=m,[M,...C]=s;if(typeof M=="number"){d=e.setTimeout(p.bind(null,C),M);return}p(M),d=e.setTimeout(p.bind(null,C));return}typeof m=="string"&&(t=m,r(t)),typeof m=="object"&&(t=m,r(t)),typeof m=="function"&&m()}};return{stop:()=>{a=!0},start:m=>{a=!1,d&&(d(),d=null),p(m)},subscribe:m=>(r=m,()=>{r=()=>null}),getTimeoutController:()=>e}}class qF{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),d=null,p=m=>{m-a>=r?t(m):typeof requestAnimationFrame=="function"&&(d=requestAnimationFrame(p))};return d=requestAnimationFrame(p),()=>{cancelAnimationFrame(d)}}}function GF(){return VF(new qF)}var HF=F.createContext(GF);function ZF(e,t){var r=F.useContext(HF);return F.useMemo(()=>t??r(e),[e,t,r])}var WF={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},EC={t:0},f1={t:1};function Tk(e){var t=Ql(e,WF),{isActive:r,canBegin:a,duration:d,easing:p,begin:m,onAnimationEnd:s,onAnimationStart:M,children:C}=t,A=ZF(t.animationId,t.animationManager),[D,R]=F.useState(r?EC:f1),j=F.useRef(null);return F.useEffect(()=>{r||R(f1)},[r]),F.useEffect(()=>{if(!r||!a)return EF;var G=BF(EC,f1,$F(p),d,R,A.getTimeoutController()),V=()=>{j.current=G()};return A.start([M,m,V,d,s]),()=>{A.stop(),j.current&&j.current(),s()}},[r,a,d,p,m,M,s,A]),C(D.t)}function Mk(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=F.useRef(Qy(t)),a=F.useRef(e);return a.current!==e&&(r.current=Qy(t),a.current=e),r.current}function AC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function PC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AC(Object(r),!0).forEach(function(a){YF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function YF(e,t,r){return(t=XF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XF(e){var t=KF(e,"string");return typeof t=="symbol"?t:t+""}function KF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function w0(){return w0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},w0.apply(null,arguments)}var DC=(e,t,r,a,d)=>{var p=Math.min(Math.abs(r)/2,Math.abs(a)/2),m=a>=0?1:-1,s=r>=0?1:-1,M=a>=0&&r>=0||a<0&&r<0?1:0,C;if(p>0&&d instanceof Array){for(var A=[0,0,0,0],D=0,R=4;D<R;D++)A[D]=d[D]>p?p:d[D];C="M".concat(e,",").concat(t+m*A[0]),A[0]>0&&(C+="A ".concat(A[0],",").concat(A[0],",0,0,").concat(M,",").concat(e+s*A[0],",").concat(t)),C+="L ".concat(e+r-s*A[1],",").concat(t),A[1]>0&&(C+="A ".concat(A[1],",").concat(A[1],",0,0,").concat(M,`,
        `).concat(e+r,",").concat(t+m*A[1])),C+="L ".concat(e+r,",").concat(t+a-m*A[2]),A[2]>0&&(C+="A ".concat(A[2],",").concat(A[2],",0,0,").concat(M,`,
        `).concat(e+r-s*A[2],",").concat(t+a)),C+="L ".concat(e+s*A[3],",").concat(t+a),A[3]>0&&(C+="A ".concat(A[3],",").concat(A[3],",0,0,").concat(M,`,
        `).concat(e,",").concat(t+a-m*A[3])),C+="Z"}else if(p>0&&d===+d&&d>0){var j=Math.min(p,d);C="M ".concat(e,",").concat(t+m*j,`
            A `).concat(j,",").concat(j,",0,0,").concat(M,",").concat(e+s*j,",").concat(t,`
            L `).concat(e+r-s*j,",").concat(t,`
            A `).concat(j,",").concat(j,",0,0,").concat(M,",").concat(e+r,",").concat(t+m*j,`
            L `).concat(e+r,",").concat(t+a-m*j,`
            A `).concat(j,",").concat(j,",0,0,").concat(M,",").concat(e+r-s*j,",").concat(t+a,`
            L `).concat(e+s*j,",").concat(t+a,`
            A `).concat(j,",").concat(j,",0,0,").concat(M,",").concat(e,",").concat(t+a-m*j," Z")}else C="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return C},QF={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},JF=e=>{var t=Ql(e,QF),r=F.useRef(null),[a,d]=F.useState(-1);F.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var At=r.current.getTotalLength();At&&d(At)}catch{}},[]);var{x:p,y:m,width:s,height:M,radius:C,className:A}=t,{animationEasing:D,animationDuration:R,animationBegin:j,isAnimationActive:G,isUpdateAnimationActive:V}=t,H=F.useRef(s),Q=F.useRef(M),te=F.useRef(p),ne=F.useRef(m),me=F.useMemo(()=>({x:p,y:m,width:s,height:M,radius:C}),[p,m,s,M,C]),fe=Mk(me,"rectangle-");if(p!==+p||m!==+m||s!==+s||M!==+M||s===0||M===0)return null;var _e=Er("recharts-rectangle",A);if(!V)return F.createElement("path",w0({},Ca(t,!0),{className:_e,d:DC(p,m,s,M,C)}));var ye=H.current,Oe=Q.current,nt=te.current,ft=ne.current,rt="0px ".concat(a===-1?1:a,"px"),at="".concat(a,"px 0px"),Et=OF(["strokeDasharray"],R,typeof D=="string"?D:void 0);return F.createElement(Tk,{animationId:fe,key:fe,canBegin:a>0,duration:R,easing:D,isActive:V,begin:j},At=>{var zt=Bh(ye,s,At),Le=Bh(Oe,M,At),Qe=Bh(nt,p,At),Ve=Bh(ft,m,At);r.current&&(H.current=zt,Q.current=Le,te.current=Qe,ne.current=Ve);var ht;return G?At>0?ht={transition:Et,strokeDasharray:at}:ht={strokeDasharray:rt}:ht={strokeDasharray:at},F.createElement("path",w0({},Ca(t,!0),{className:_e,d:DC(Qe,Ve,zt,Le,C),ref:r,style:PC(PC({},ht),t.style)}))})};function Ck(e){var{cx:t,cy:r,radius:a,startAngle:d,endAngle:p}=e,m=Qa(t,r,a,d),s=Qa(t,r,a,p);return{points:[m,s],cx:t,cy:r,radius:a,startAngle:d,endAngle:p}}function Ew(){return Ew=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ew.apply(null,arguments)}var e8=(e,t)=>{var r=Hl(t-e),a=Math.min(Math.abs(t-e),359.999);return r*a},z_=e=>{var{cx:t,cy:r,radius:a,angle:d,sign:p,isExternal:m,cornerRadius:s,cornerIsExternal:M}=e,C=s*(m?1:-1)+a,A=Math.asin(s/C)/v0,D=M?d:d+p*A,R=Qa(t,r,C,D),j=Qa(t,r,a,D),G=M?d-p*A:d,V=Qa(t,r,C*Math.cos(A*v0),G);return{center:R,circleTangency:j,lineTangency:V,theta:A}},Ek=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:d,startAngle:p,endAngle:m}=e,s=e8(p,m),M=p+s,C=Qa(t,r,d,p),A=Qa(t,r,d,M),D="M ".concat(C.x,",").concat(C.y,`
    A `).concat(d,",").concat(d,`,0,
    `).concat(+(Math.abs(s)>180),",").concat(+(p>M),`,
    `).concat(A.x,",").concat(A.y,`
  `);if(a>0){var R=Qa(t,r,a,p),j=Qa(t,r,a,M);D+="L ".concat(j.x,",").concat(j.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(s)>180),",").concat(+(p<=M),`,
            `).concat(R.x,",").concat(R.y," Z")}else D+="L ".concat(t,",").concat(r," Z");return D},t8=e=>{var{cx:t,cy:r,innerRadius:a,outerRadius:d,cornerRadius:p,forceCornerRadius:m,cornerIsExternal:s,startAngle:M,endAngle:C}=e,A=Hl(C-M),{circleTangency:D,lineTangency:R,theta:j}=z_({cx:t,cy:r,radius:d,angle:M,sign:A,cornerRadius:p,cornerIsExternal:s}),{circleTangency:G,lineTangency:V,theta:H}=z_({cx:t,cy:r,radius:d,angle:C,sign:-A,cornerRadius:p,cornerIsExternal:s}),Q=s?Math.abs(M-C):Math.abs(M-C)-j-H;if(Q<0)return m?"M ".concat(R.x,",").concat(R.y,`
        a`).concat(p,",").concat(p,",0,0,1,").concat(p*2,`,0
        a`).concat(p,",").concat(p,",0,0,1,").concat(-p*2,`,0
      `):Ek({cx:t,cy:r,innerRadius:a,outerRadius:d,startAngle:M,endAngle:C});var te="M ".concat(R.x,",").concat(R.y,`
    A`).concat(p,",").concat(p,",0,0,").concat(+(A<0),",").concat(D.x,",").concat(D.y,`
    A`).concat(d,",").concat(d,",0,").concat(+(Q>180),",").concat(+(A<0),",").concat(G.x,",").concat(G.y,`
    A`).concat(p,",").concat(p,",0,0,").concat(+(A<0),",").concat(V.x,",").concat(V.y,`
  `);if(a>0){var{circleTangency:ne,lineTangency:me,theta:fe}=z_({cx:t,cy:r,radius:a,angle:M,sign:A,isExternal:!0,cornerRadius:p,cornerIsExternal:s}),{circleTangency:_e,lineTangency:ye,theta:Oe}=z_({cx:t,cy:r,radius:a,angle:C,sign:-A,isExternal:!0,cornerRadius:p,cornerIsExternal:s}),nt=s?Math.abs(M-C):Math.abs(M-C)-fe-Oe;if(nt<0&&p===0)return"".concat(te,"L").concat(t,",").concat(r,"Z");te+="L".concat(ye.x,",").concat(ye.y,`
      A`).concat(p,",").concat(p,",0,0,").concat(+(A<0),",").concat(_e.x,",").concat(_e.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(nt>180),",").concat(+(A>0),",").concat(ne.x,",").concat(ne.y,`
      A`).concat(p,",").concat(p,",0,0,").concat(+(A<0),",").concat(me.x,",").concat(me.y,"Z")}else te+="L".concat(t,",").concat(r,"Z");return te},n8={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},r8=e=>{var t=Ql(e,n8),{cx:r,cy:a,innerRadius:d,outerRadius:p,cornerRadius:m,forceCornerRadius:s,cornerIsExternal:M,startAngle:C,endAngle:A,className:D}=t;if(p<d||C===A)return null;var R=Er("recharts-sector",D),j=p-d,G=af(m,j,0,!0),V;return G>0&&Math.abs(C-A)<360?V=t8({cx:r,cy:a,innerRadius:d,outerRadius:p,cornerRadius:Math.min(G,j/2),forceCornerRadius:s,cornerIsExternal:M,startAngle:C,endAngle:A}):V=Ek({cx:r,cy:a,innerRadius:d,outerRadius:p,startAngle:C,endAngle:A}),F.createElement("path",Ew({},Ca(t,!0),{className:R,d:V}))};function i8(e,t,r){var a,d,p,m;if(e==="horizontal")a=t.x,p=a,d=r.top,m=r.top+r.height;else if(e==="vertical")d=t.y,m=d,a=r.left,p=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:s,cy:M,innerRadius:C,outerRadius:A,angle:D}=t,R=Qa(s,M,C,D),j=Qa(s,M,A,D);a=R.x,d=R.y,p=j.x,m=j.y}else return Ck(t);return[{x:a,y:d},{x:p,y:m}]}var p1={},m1={},g1={},kC;function a8(){return kC||(kC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LD();function r(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=r})(g1)),g1}var OC;function o8(){return OC||(OC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=a8();function r(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=r})(m1)),m1}var IC;function s8(){return IC||(IC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ND(),r=o8();function a(d,p,m){m&&typeof m!="number"&&t.isIterateeCall(d,p,m)&&(p=m=void 0),d=r.toFinite(d),p===void 0?(p=d,d=0):p=r.toFinite(p),m=m===void 0?d<p?1:-1:r.toFinite(m);const s=Math.max(Math.ceil((p-d)/(m||1)),0),M=new Array(s);for(let C=0;C<s;C++)M[C]=d,d+=m;return M}e.range=a})(p1)),p1}var y1,zC;function l8(){return zC||(zC=1,y1=s8().range),y1}var c8=l8();const Ak=Fu(c8);function rf(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function u8(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function GS(e){let t,r,a;e.length!==2?(t=rf,r=(s,M)=>rf(e(s),M),a=(s,M)=>e(s)-M):(t=e===rf||e===u8?e:h8,r=e,a=e);function d(s,M,C=0,A=s.length){if(C<A){if(t(M,M)!==0)return A;do{const D=C+A>>>1;r(s[D],M)<0?C=D+1:A=D}while(C<A)}return C}function p(s,M,C=0,A=s.length){if(C<A){if(t(M,M)!==0)return A;do{const D=C+A>>>1;r(s[D],M)<=0?C=D+1:A=D}while(C<A)}return C}function m(s,M,C=0,A=s.length){const D=d(s,M,C,A-1);return D>C&&a(s[D-1],M)>-a(s[D],M)?D-1:D}return{left:d,center:m,right:p}}function h8(){return 0}function Pk(e){return e===null?NaN:+e}function*d8(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const f8=GS(rf),bv=f8.right;GS(Pk).center;class RC extends Map{constructor(t,r=g8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[a,d]of t)this.set(a,d)}get(t){return super.get(jC(this,t))}has(t){return super.has(jC(this,t))}set(t,r){return super.set(p8(this,t),r)}delete(t){return super.delete(m8(this,t))}}function jC({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):r}function p8({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):(e.set(a,r),r)}function m8({_intern:e,_key:t},r){const a=t(r);return e.has(a)&&(r=e.get(a),e.delete(a)),r}function g8(e){return e!==null&&typeof e=="object"?e.valueOf():e}function y8(e=rf){if(e===rf)return Dk;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const a=e(t,r);return a||a===0?a:(e(r,r)===0)-(e(t,t)===0)}}function Dk(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const v8=Math.sqrt(50),_8=Math.sqrt(10),b8=Math.sqrt(2);function S0(e,t,r){const a=(t-e)/Math.max(0,r),d=Math.floor(Math.log10(a)),p=a/Math.pow(10,d),m=p>=v8?10:p>=_8?5:p>=b8?2:1;let s,M,C;return d<0?(C=Math.pow(10,-d)/m,s=Math.round(e*C),M=Math.round(t*C),s/C<e&&++s,M/C>t&&--M,C=-C):(C=Math.pow(10,d)*m,s=Math.round(e/C),M=Math.round(t/C),s*C<e&&++s,M*C>t&&--M),M<s&&.5<=r&&r<2?S0(e,t,r*2):[s,M,C]}function Aw(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const a=t<e,[d,p,m]=a?S0(t,e,r):S0(e,t,r);if(!(p>=d))return[];const s=p-d+1,M=new Array(s);if(a)if(m<0)for(let C=0;C<s;++C)M[C]=(p-C)/-m;else for(let C=0;C<s;++C)M[C]=(p-C)*m;else if(m<0)for(let C=0;C<s;++C)M[C]=(d+C)/-m;else for(let C=0;C<s;++C)M[C]=(d+C)*m;return M}function Pw(e,t,r){return t=+t,e=+e,r=+r,S0(e,t,r)[2]}function Dw(e,t,r){t=+t,e=+e,r=+r;const a=t<e,d=a?Pw(t,e,r):Pw(e,t,r);return(a?-1:1)*(d<0?1/-d:d)}function LC(e,t){let r;for(const a of e)a!=null&&(r<a||r===void 0&&a>=a)&&(r=a);return r}function NC(e,t){let r;for(const a of e)a!=null&&(r>a||r===void 0&&a>=a)&&(r=a);return r}function kk(e,t,r=0,a=1/0,d){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(e.length-1,a)),!(r<=t&&t<=a))return e;for(d=d===void 0?Dk:y8(d);a>r;){if(a-r>600){const M=a-r+1,C=t-r+1,A=Math.log(M),D=.5*Math.exp(2*A/3),R=.5*Math.sqrt(A*D*(M-D)/M)*(C-M/2<0?-1:1),j=Math.max(r,Math.floor(t-C*D/M+R)),G=Math.min(a,Math.floor(t+(M-C)*D/M+R));kk(e,t,j,G,d)}const p=e[t];let m=r,s=a;for(Fy(e,r,t),d(e[a],p)>0&&Fy(e,r,a);m<s;){for(Fy(e,m,s),++m,--s;d(e[m],p)<0;)++m;for(;d(e[s],p)>0;)--s}d(e[r],p)===0?Fy(e,r,s):(++s,Fy(e,s,a)),s<=t&&(r=s+1),t<=s&&(a=s-1)}return e}function Fy(e,t,r){const a=e[t];e[t]=e[r],e[r]=a}function x8(e,t,r){if(e=Float64Array.from(d8(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return NC(e);if(t>=1)return LC(e);var a,d=(a-1)*t,p=Math.floor(d),m=LC(kk(e,p).subarray(0,p+1)),s=NC(e.subarray(p+1));return m+(s-m)*(d-p)}}function w8(e,t,r=Pk){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+r(e[0],0,e);if(t>=1)return+r(e[a-1],a-1,e);var a,d=(a-1)*t,p=Math.floor(d),m=+r(e[p],p,e),s=+r(e[p+1],p+1,e);return m+(s-m)*(d-p)}}function S8(e,t,r){e=+e,t=+t,r=(d=arguments.length)<2?(t=e,e=0,1):d<3?1:+r;for(var a=-1,d=Math.max(0,Math.ceil((t-e)/r))|0,p=new Array(d);++a<d;)p[a]=e+a*r;return p}function Jl(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function od(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const kw=Symbol("implicit");function HS(){var e=new RC,t=[],r=[],a=kw;function d(p){let m=e.get(p);if(m===void 0){if(a!==kw)return a;e.set(p,m=t.push(p)-1)}return r[m%r.length]}return d.domain=function(p){if(!arguments.length)return t.slice();t=[],e=new RC;for(const m of p)e.has(m)||e.set(m,t.push(m)-1);return d},d.range=function(p){return arguments.length?(r=Array.from(p),d):r.slice()},d.unknown=function(p){return arguments.length?(a=p,d):a},d.copy=function(){return HS(t,r).unknown(a)},Jl.apply(d,arguments),d}function ZS(){var e=HS().unknown(void 0),t=e.domain,r=e.range,a=0,d=1,p,m,s=!1,M=0,C=0,A=.5;delete e.unknown;function D(){var R=t().length,j=d<a,G=j?d:a,V=j?a:d;p=(V-G)/Math.max(1,R-M+C*2),s&&(p=Math.floor(p)),G+=(V-G-p*(R-M))*A,m=p*(1-M),s&&(G=Math.round(G),m=Math.round(m));var H=S8(R).map(function(Q){return G+p*Q});return r(j?H.reverse():H)}return e.domain=function(R){return arguments.length?(t(R),D()):t()},e.range=function(R){return arguments.length?([a,d]=R,a=+a,d=+d,D()):[a,d]},e.rangeRound=function(R){return[a,d]=R,a=+a,d=+d,s=!0,D()},e.bandwidth=function(){return m},e.step=function(){return p},e.round=function(R){return arguments.length?(s=!!R,D()):s},e.padding=function(R){return arguments.length?(M=Math.min(1,C=+R),D()):M},e.paddingInner=function(R){return arguments.length?(M=Math.min(1,R),D()):M},e.paddingOuter=function(R){return arguments.length?(C=+R,D()):C},e.align=function(R){return arguments.length?(A=Math.max(0,Math.min(1,R)),D()):A},e.copy=function(){return ZS(t(),[a,d]).round(s).paddingInner(M).paddingOuter(C).align(A)},Jl.apply(D(),arguments)}function Ok(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Ok(t())},e}function T8(){return Ok(ZS.apply(null,arguments).paddingInner(1))}function WS(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Ik(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function xv(){}var nv=.7,T0=1/nv,Qm="\\s*([+-]?\\d+)\\s*",rv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",M8=/^#([0-9a-f]{3,8})$/,C8=new RegExp(`^rgb\\(${Qm},${Qm},${Qm}\\)$`),E8=new RegExp(`^rgb\\(${zu},${zu},${zu}\\)$`),A8=new RegExp(`^rgba\\(${Qm},${Qm},${Qm},${rv}\\)$`),P8=new RegExp(`^rgba\\(${zu},${zu},${zu},${rv}\\)$`),D8=new RegExp(`^hsl\\(${rv},${zu},${zu}\\)$`),k8=new RegExp(`^hsla\\(${rv},${zu},${zu},${rv}\\)$`),BC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};WS(xv,iv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:FC,formatHex:FC,formatHex8:O8,formatHsl:I8,formatRgb:UC,toString:UC});function FC(){return this.rgb().formatHex()}function O8(){return this.rgb().formatHex8()}function I8(){return zk(this).formatHsl()}function UC(){return this.rgb().formatRgb()}function iv(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=M8.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?$C(t):r===3?new hs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?R_(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?R_(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=C8.exec(e))?new hs(t[1],t[2],t[3],1):(t=E8.exec(e))?new hs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=A8.exec(e))?R_(t[1],t[2],t[3],t[4]):(t=P8.exec(e))?R_(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=D8.exec(e))?GC(t[1],t[2]/100,t[3]/100,1):(t=k8.exec(e))?GC(t[1],t[2]/100,t[3]/100,t[4]):BC.hasOwnProperty(e)?$C(BC[e]):e==="transparent"?new hs(NaN,NaN,NaN,0):null}function $C(e){return new hs(e>>16&255,e>>8&255,e&255,1)}function R_(e,t,r,a){return a<=0&&(e=t=r=NaN),new hs(e,t,r,a)}function z8(e){return e instanceof xv||(e=iv(e)),e?(e=e.rgb(),new hs(e.r,e.g,e.b,e.opacity)):new hs}function Ow(e,t,r,a){return arguments.length===1?z8(e):new hs(e,t,r,a??1)}function hs(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}WS(hs,Ow,Ik(xv,{brighter(e){return e=e==null?T0:Math.pow(T0,e),new hs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?nv:Math.pow(nv,e),new hs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new hs(Op(this.r),Op(this.g),Op(this.b),M0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:VC,formatHex:VC,formatHex8:R8,formatRgb:qC,toString:qC}));function VC(){return`#${Cp(this.r)}${Cp(this.g)}${Cp(this.b)}`}function R8(){return`#${Cp(this.r)}${Cp(this.g)}${Cp(this.b)}${Cp((isNaN(this.opacity)?1:this.opacity)*255)}`}function qC(){const e=M0(this.opacity);return`${e===1?"rgb(":"rgba("}${Op(this.r)}, ${Op(this.g)}, ${Op(this.b)}${e===1?")":`, ${e})`}`}function M0(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Op(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Cp(e){return e=Op(e),(e<16?"0":"")+e.toString(16)}function GC(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Bc(e,t,r,a)}function zk(e){if(e instanceof Bc)return new Bc(e.h,e.s,e.l,e.opacity);if(e instanceof xv||(e=iv(e)),!e)return new Bc;if(e instanceof Bc)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,d=Math.min(t,r,a),p=Math.max(t,r,a),m=NaN,s=p-d,M=(p+d)/2;return s?(t===p?m=(r-a)/s+(r<a)*6:r===p?m=(a-t)/s+2:m=(t-r)/s+4,s/=M<.5?p+d:2-p-d,m*=60):s=M>0&&M<1?0:m,new Bc(m,s,M,e.opacity)}function j8(e,t,r,a){return arguments.length===1?zk(e):new Bc(e,t,r,a??1)}function Bc(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}WS(Bc,j8,Ik(xv,{brighter(e){return e=e==null?T0:Math.pow(T0,e),new Bc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?nv:Math.pow(nv,e),new Bc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,d=2*r-a;return new hs(v1(e>=240?e-240:e+120,d,a),v1(e,d,a),v1(e<120?e+240:e-120,d,a),this.opacity)},clamp(){return new Bc(HC(this.h),j_(this.s),j_(this.l),M0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=M0(this.opacity);return`${e===1?"hsl(":"hsla("}${HC(this.h)}, ${j_(this.s)*100}%, ${j_(this.l)*100}%${e===1?")":`, ${e})`}`}}));function HC(e){return e=(e||0)%360,e<0?e+360:e}function j_(e){return Math.max(0,Math.min(1,e||0))}function v1(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const YS=e=>()=>e;function L8(e,t){return function(r){return e+r*t}}function N8(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function B8(e){return(e=+e)==1?Rk:function(t,r){return r-t?N8(t,r,e):YS(isNaN(t)?r:t)}}function Rk(e,t){var r=t-e;return r?L8(e,r):YS(isNaN(e)?t:e)}const ZC=(function e(t){var r=B8(t);function a(d,p){var m=r((d=Ow(d)).r,(p=Ow(p)).r),s=r(d.g,p.g),M=r(d.b,p.b),C=Rk(d.opacity,p.opacity);return function(A){return d.r=m(A),d.g=s(A),d.b=M(A),d.opacity=C(A),d+""}}return a.gamma=e,a})(1);function F8(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),d;return function(p){for(d=0;d<r;++d)a[d]=e[d]*(1-p)+t[d]*p;return a}}function U8(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function $8(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,d=new Array(a),p=new Array(r),m;for(m=0;m<a;++m)d[m]=xg(e[m],t[m]);for(;m<r;++m)p[m]=t[m];return function(s){for(m=0;m<a;++m)p[m]=d[m](s);return p}}function V8(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function C0(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function q8(e,t){var r={},a={},d;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(d in t)d in e?r[d]=xg(e[d],t[d]):a[d]=t[d];return function(p){for(d in r)a[d]=r[d](p);return a}}var Iw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_1=new RegExp(Iw.source,"g");function G8(e){return function(){return e}}function H8(e){return function(t){return e(t)+""}}function Z8(e,t){var r=Iw.lastIndex=_1.lastIndex=0,a,d,p,m=-1,s=[],M=[];for(e=e+"",t=t+"";(a=Iw.exec(e))&&(d=_1.exec(t));)(p=d.index)>r&&(p=t.slice(r,p),s[m]?s[m]+=p:s[++m]=p),(a=a[0])===(d=d[0])?s[m]?s[m]+=d:s[++m]=d:(s[++m]=null,M.push({i:m,x:C0(a,d)})),r=_1.lastIndex;return r<t.length&&(p=t.slice(r),s[m]?s[m]+=p:s[++m]=p),s.length<2?M[0]?H8(M[0].x):G8(t):(t=M.length,function(C){for(var A=0,D;A<t;++A)s[(D=M[A]).i]=D.x(C);return s.join("")})}function xg(e,t){var r=typeof t,a;return t==null||r==="boolean"?YS(t):(r==="number"?C0:r==="string"?(a=iv(t))?(t=a,ZC):Z8:t instanceof iv?ZC:t instanceof Date?V8:U8(t)?F8:Array.isArray(t)?$8:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?q8:C0)(e,t)}function XS(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function W8(e,t){t===void 0&&(t=e,e=xg);for(var r=0,a=t.length-1,d=t[0],p=new Array(a<0?0:a);r<a;)p[r]=e(d,d=t[++r]);return function(m){var s=Math.max(0,Math.min(a-1,Math.floor(m*=a)));return p[s](m-s)}}function Y8(e){return function(){return e}}function E0(e){return+e}var WC=[0,1];function $o(e){return e}function zw(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Y8(isNaN(t)?NaN:.5)}function X8(e,t){var r;return e>t&&(r=e,e=t,t=r),function(a){return Math.max(e,Math.min(t,a))}}function K8(e,t,r){var a=e[0],d=e[1],p=t[0],m=t[1];return d<a?(a=zw(d,a),p=r(m,p)):(a=zw(a,d),p=r(p,m)),function(s){return p(a(s))}}function Q8(e,t,r){var a=Math.min(e.length,t.length)-1,d=new Array(a),p=new Array(a),m=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++m<a;)d[m]=zw(e[m],e[m+1]),p[m]=r(t[m],t[m+1]);return function(s){var M=bv(e,s,1,a)-1;return p[M](d[M](s))}}function wv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function hb(){var e=WC,t=WC,r=xg,a,d,p,m=$o,s,M,C;function A(){var R=Math.min(e.length,t.length);return m!==$o&&(m=X8(e[0],e[R-1])),s=R>2?Q8:K8,M=C=null,D}function D(R){return R==null||isNaN(R=+R)?p:(M||(M=s(e.map(a),t,r)))(a(m(R)))}return D.invert=function(R){return m(d((C||(C=s(t,e.map(a),C0)))(R)))},D.domain=function(R){return arguments.length?(e=Array.from(R,E0),A()):e.slice()},D.range=function(R){return arguments.length?(t=Array.from(R),A()):t.slice()},D.rangeRound=function(R){return t=Array.from(R),r=XS,A()},D.clamp=function(R){return arguments.length?(m=R?!0:$o,A()):m!==$o},D.interpolate=function(R){return arguments.length?(r=R,A()):r},D.unknown=function(R){return arguments.length?(p=R,D):p},function(R,j){return a=R,d=j,A()}}function KS(){return hb()($o,$o)}function J8(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function A0(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function ag(e){return e=A0(Math.abs(e)),e?e[1]:NaN}function eU(e,t){return function(r,a){for(var d=r.length,p=[],m=0,s=e[0],M=0;d>0&&s>0&&(M+s+1>a&&(s=Math.max(1,a-M)),p.push(r.substring(d-=s,d+s)),!((M+=s+1)>a));)s=e[m=(m+1)%e.length];return p.reverse().join(t)}}function tU(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var nU=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function av(e){if(!(t=nU.exec(e)))throw new Error("invalid format: "+e);var t;return new QS({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}av.prototype=QS.prototype;function QS(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}QS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function rU(e){e:for(var t=e.length,r=1,a=-1,d;r<t;++r)switch(e[r]){case".":a=d=r;break;case"0":a===0&&(a=r),d=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(d+1):e}var jk;function iU(e,t){var r=A0(e,t);if(!r)return e+"";var a=r[0],d=r[1],p=d-(jk=Math.max(-8,Math.min(8,Math.floor(d/3)))*3)+1,m=a.length;return p===m?a:p>m?a+new Array(p-m+1).join("0"):p>0?a.slice(0,p)+"."+a.slice(p):"0."+new Array(1-p).join("0")+A0(e,Math.max(0,t+p-1))[0]}function YC(e,t){var r=A0(e,t);if(!r)return e+"";var a=r[0],d=r[1];return d<0?"0."+new Array(-d).join("0")+a:a.length>d+1?a.slice(0,d+1)+"."+a.slice(d+1):a+new Array(d-a.length+2).join("0")}const XC={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:J8,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>YC(e*100,t),r:YC,s:iU,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function KC(e){return e}var QC=Array.prototype.map,JC=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function aU(e){var t=e.grouping===void 0||e.thousands===void 0?KC:eU(QC.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",d=e.decimal===void 0?".":e.decimal+"",p=e.numerals===void 0?KC:tU(QC.call(e.numerals,String)),m=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"−":e.minus+"",M=e.nan===void 0?"NaN":e.nan+"";function C(D){D=av(D);var R=D.fill,j=D.align,G=D.sign,V=D.symbol,H=D.zero,Q=D.width,te=D.comma,ne=D.precision,me=D.trim,fe=D.type;fe==="n"?(te=!0,fe="g"):XC[fe]||(ne===void 0&&(ne=12),me=!0,fe="g"),(H||R==="0"&&j==="=")&&(H=!0,R="0",j="=");var _e=V==="$"?r:V==="#"&&/[boxX]/.test(fe)?"0"+fe.toLowerCase():"",ye=V==="$"?a:/[%p]/.test(fe)?m:"",Oe=XC[fe],nt=/[defgprs%]/.test(fe);ne=ne===void 0?6:/[gprs]/.test(fe)?Math.max(1,Math.min(21,ne)):Math.max(0,Math.min(20,ne));function ft(rt){var at=_e,Et=ye,At,zt,Le;if(fe==="c")Et=Oe(rt)+Et,rt="";else{rt=+rt;var Qe=rt<0||1/rt<0;if(rt=isNaN(rt)?M:Oe(Math.abs(rt),ne),me&&(rt=rU(rt)),Qe&&+rt==0&&G!=="+"&&(Qe=!1),at=(Qe?G==="("?G:s:G==="-"||G==="("?"":G)+at,Et=(fe==="s"?JC[8+jk/3]:"")+Et+(Qe&&G==="("?")":""),nt){for(At=-1,zt=rt.length;++At<zt;)if(Le=rt.charCodeAt(At),48>Le||Le>57){Et=(Le===46?d+rt.slice(At+1):rt.slice(At))+Et,rt=rt.slice(0,At);break}}}te&&!H&&(rt=t(rt,1/0));var Ve=at.length+rt.length+Et.length,ht=Ve<Q?new Array(Q-Ve+1).join(R):"";switch(te&&H&&(rt=t(ht+rt,ht.length?Q-Et.length:1/0),ht=""),j){case"<":rt=at+rt+Et+ht;break;case"=":rt=at+ht+rt+Et;break;case"^":rt=ht.slice(0,Ve=ht.length>>1)+at+rt+Et+ht.slice(Ve);break;default:rt=ht+at+rt+Et;break}return p(rt)}return ft.toString=function(){return D+""},ft}function A(D,R){var j=C((D=av(D),D.type="f",D)),G=Math.max(-8,Math.min(8,Math.floor(ag(R)/3)))*3,V=Math.pow(10,-G),H=JC[8+G/3];return function(Q){return j(V*Q)+H}}return{format:C,formatPrefix:A}}var L_,JS,Lk;oU({thousands:",",grouping:[3],currency:["$",""]});function oU(e){return L_=aU(e),JS=L_.format,Lk=L_.formatPrefix,L_}function sU(e){return Math.max(0,-ag(Math.abs(e)))}function lU(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ag(t)/3)))*3-ag(Math.abs(e)))}function cU(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ag(t)-ag(e))+1}function Nk(e,t,r,a){var d=Dw(e,t,r),p;switch(a=av(a??",f"),a.type){case"s":{var m=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(p=lU(d,m))&&(a.precision=p),Lk(a,m)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(p=cU(d,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=p-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(p=sU(d))&&(a.precision=p-(a.type==="%")*2);break}}return JS(a)}function cf(e){var t=e.domain;return e.ticks=function(r){var a=t();return Aw(a[0],a[a.length-1],r??10)},e.tickFormat=function(r,a){var d=t();return Nk(d[0],d[d.length-1],r??10,a)},e.nice=function(r){r==null&&(r=10);var a=t(),d=0,p=a.length-1,m=a[d],s=a[p],M,C,A=10;for(s<m&&(C=m,m=s,s=C,C=d,d=p,p=C);A-- >0;){if(C=Pw(m,s,r),C===M)return a[d]=m,a[p]=s,t(a);if(C>0)m=Math.floor(m/C)*C,s=Math.ceil(s/C)*C;else if(C<0)m=Math.ceil(m*C)/C,s=Math.floor(s*C)/C;else break;M=C}return e},e}function Bk(){var e=KS();return e.copy=function(){return wv(e,Bk())},Jl.apply(e,arguments),cf(e)}function Fk(e){var t;function r(a){return a==null||isNaN(a=+a)?t:a}return r.invert=r,r.domain=r.range=function(a){return arguments.length?(e=Array.from(a,E0),r):e.slice()},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return Fk(e).unknown(t)},e=arguments.length?Array.from(e,E0):[0,1],cf(r)}function Uk(e,t){e=e.slice();var r=0,a=e.length-1,d=e[r],p=e[a],m;return p<d&&(m=r,r=a,a=m,m=d,d=p,p=m),e[r]=t.floor(d),e[a]=t.ceil(p),e}function eE(e){return Math.log(e)}function tE(e){return Math.exp(e)}function uU(e){return-Math.log(-e)}function hU(e){return-Math.exp(-e)}function dU(e){return isFinite(e)?+("1e"+e):e<0?0:e}function fU(e){return e===10?dU:e===Math.E?Math.exp:t=>Math.pow(e,t)}function pU(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function nE(e){return(t,r)=>-e(-t,r)}function e2(e){const t=e(eE,tE),r=t.domain;let a=10,d,p;function m(){return d=pU(a),p=fU(a),r()[0]<0?(d=nE(d),p=nE(p),e(uU,hU)):e(eE,tE),t}return t.base=function(s){return arguments.length?(a=+s,m()):a},t.domain=function(s){return arguments.length?(r(s),m()):r()},t.ticks=s=>{const M=r();let C=M[0],A=M[M.length-1];const D=A<C;D&&([C,A]=[A,C]);let R=d(C),j=d(A),G,V;const H=s==null?10:+s;let Q=[];if(!(a%1)&&j-R<H){if(R=Math.floor(R),j=Math.ceil(j),C>0){for(;R<=j;++R)for(G=1;G<a;++G)if(V=R<0?G/p(-R):G*p(R),!(V<C)){if(V>A)break;Q.push(V)}}else for(;R<=j;++R)for(G=a-1;G>=1;--G)if(V=R>0?G/p(-R):G*p(R),!(V<C)){if(V>A)break;Q.push(V)}Q.length*2<H&&(Q=Aw(C,A,H))}else Q=Aw(R,j,Math.min(j-R,H)).map(p);return D?Q.reverse():Q},t.tickFormat=(s,M)=>{if(s==null&&(s=10),M==null&&(M=a===10?"s":","),typeof M!="function"&&(!(a%1)&&(M=av(M)).precision==null&&(M.trim=!0),M=JS(M)),s===1/0)return M;const C=Math.max(1,a*s/t.ticks().length);return A=>{let D=A/p(Math.round(d(A)));return D*a<a-.5&&(D*=a),D<=C?M(A):""}},t.nice=()=>r(Uk(r(),{floor:s=>p(Math.floor(d(s))),ceil:s=>p(Math.ceil(d(s)))})),t}function $k(){const e=e2(hb()).domain([1,10]);return e.copy=()=>wv(e,$k()).base(e.base()),Jl.apply(e,arguments),e}function rE(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function iE(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function t2(e){var t=1,r=e(rE(t),iE(t));return r.constant=function(a){return arguments.length?e(rE(t=+a),iE(t)):t},cf(r)}function Vk(){var e=t2(hb());return e.copy=function(){return wv(e,Vk()).constant(e.constant())},Jl.apply(e,arguments)}function aE(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function mU(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function gU(e){return e<0?-e*e:e*e}function n2(e){var t=e($o,$o),r=1;function a(){return r===1?e($o,$o):r===.5?e(mU,gU):e(aE(r),aE(1/r))}return t.exponent=function(d){return arguments.length?(r=+d,a()):r},cf(t)}function r2(){var e=n2(hb());return e.copy=function(){return wv(e,r2()).exponent(e.exponent())},Jl.apply(e,arguments),e}function yU(){return r2.apply(null,arguments).exponent(.5)}function oE(e){return Math.sign(e)*e*e}function vU(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function qk(){var e=KS(),t=[0,1],r=!1,a;function d(p){var m=vU(e(p));return isNaN(m)?a:r?Math.round(m):m}return d.invert=function(p){return e.invert(oE(p))},d.domain=function(p){return arguments.length?(e.domain(p),d):e.domain()},d.range=function(p){return arguments.length?(e.range((t=Array.from(p,E0)).map(oE)),d):t.slice()},d.rangeRound=function(p){return d.range(p).round(!0)},d.round=function(p){return arguments.length?(r=!!p,d):r},d.clamp=function(p){return arguments.length?(e.clamp(p),d):e.clamp()},d.unknown=function(p){return arguments.length?(a=p,d):a},d.copy=function(){return qk(e.domain(),t).round(r).clamp(e.clamp()).unknown(a)},Jl.apply(d,arguments),cf(d)}function Gk(){var e=[],t=[],r=[],a;function d(){var m=0,s=Math.max(1,t.length);for(r=new Array(s-1);++m<s;)r[m-1]=w8(e,m/s);return p}function p(m){return m==null||isNaN(m=+m)?a:t[bv(r,m)]}return p.invertExtent=function(m){var s=t.indexOf(m);return s<0?[NaN,NaN]:[s>0?r[s-1]:e[0],s<r.length?r[s]:e[e.length-1]]},p.domain=function(m){if(!arguments.length)return e.slice();e=[];for(let s of m)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(rf),d()},p.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},p.unknown=function(m){return arguments.length?(a=m,p):a},p.quantiles=function(){return r.slice()},p.copy=function(){return Gk().domain(e).range(t).unknown(a)},Jl.apply(p,arguments)}function Hk(){var e=0,t=1,r=1,a=[.5],d=[0,1],p;function m(M){return M!=null&&M<=M?d[bv(a,M,0,r)]:p}function s(){var M=-1;for(a=new Array(r);++M<r;)a[M]=((M+1)*t-(M-r)*e)/(r+1);return m}return m.domain=function(M){return arguments.length?([e,t]=M,e=+e,t=+t,s()):[e,t]},m.range=function(M){return arguments.length?(r=(d=Array.from(M)).length-1,s()):d.slice()},m.invertExtent=function(M){var C=d.indexOf(M);return C<0?[NaN,NaN]:C<1?[e,a[0]]:C>=r?[a[r-1],t]:[a[C-1],a[C]]},m.unknown=function(M){return arguments.length&&(p=M),m},m.thresholds=function(){return a.slice()},m.copy=function(){return Hk().domain([e,t]).range(d).unknown(p)},Jl.apply(cf(m),arguments)}function Zk(){var e=[.5],t=[0,1],r,a=1;function d(p){return p!=null&&p<=p?t[bv(e,p,0,a)]:r}return d.domain=function(p){return arguments.length?(e=Array.from(p),a=Math.min(e.length,t.length-1),d):e.slice()},d.range=function(p){return arguments.length?(t=Array.from(p),a=Math.min(e.length,t.length-1),d):t.slice()},d.invertExtent=function(p){var m=t.indexOf(p);return[e[m-1],e[m]]},d.unknown=function(p){return arguments.length?(r=p,d):r},d.copy=function(){return Zk().domain(e).range(t).unknown(r)},Jl.apply(d,arguments)}const b1=new Date,x1=new Date;function ca(e,t,r,a){function d(p){return e(p=arguments.length===0?new Date:new Date(+p)),p}return d.floor=p=>(e(p=new Date(+p)),p),d.ceil=p=>(e(p=new Date(p-1)),t(p,1),e(p),p),d.round=p=>{const m=d(p),s=d.ceil(p);return p-m<s-p?m:s},d.offset=(p,m)=>(t(p=new Date(+p),m==null?1:Math.floor(m)),p),d.range=(p,m,s)=>{const M=[];if(p=d.ceil(p),s=s==null?1:Math.floor(s),!(p<m)||!(s>0))return M;let C;do M.push(C=new Date(+p)),t(p,s),e(p);while(C<p&&p<m);return M},d.filter=p=>ca(m=>{if(m>=m)for(;e(m),!p(m);)m.setTime(m-1)},(m,s)=>{if(m>=m)if(s<0)for(;++s<=0;)for(;t(m,-1),!p(m););else for(;--s>=0;)for(;t(m,1),!p(m););}),r&&(d.count=(p,m)=>(b1.setTime(+p),x1.setTime(+m),e(b1),e(x1),Math.floor(r(b1,x1))),d.every=p=>(p=Math.floor(p),!isFinite(p)||!(p>0)?null:p>1?d.filter(a?m=>a(m)%p===0:m=>d.count(0,m)%p===0):d)),d}const P0=ca(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);P0.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ca(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):P0);P0.range;const $h=1e3,Zl=$h*60,Vh=Zl*60,Kh=Vh*24,i2=Kh*7,sE=Kh*30,w1=Kh*365,Ep=ca(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*$h)},(e,t)=>(t-e)/$h,e=>e.getUTCSeconds());Ep.range;const a2=ca(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*$h)},(e,t)=>{e.setTime(+e+t*Zl)},(e,t)=>(t-e)/Zl,e=>e.getMinutes());a2.range;const o2=ca(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Zl)},(e,t)=>(t-e)/Zl,e=>e.getUTCMinutes());o2.range;const s2=ca(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*$h-e.getMinutes()*Zl)},(e,t)=>{e.setTime(+e+t*Vh)},(e,t)=>(t-e)/Vh,e=>e.getHours());s2.range;const l2=ca(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Vh)},(e,t)=>(t-e)/Vh,e=>e.getUTCHours());l2.range;const Sv=ca(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Zl)/Kh,e=>e.getDate()-1);Sv.range;const db=ca(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Kh,e=>e.getUTCDate()-1);db.range;const Wk=ca(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Kh,e=>Math.floor(e/Kh));Wk.range;function Gp(e){return ca(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Zl)/i2)}const fb=Gp(0),D0=Gp(1),_U=Gp(2),bU=Gp(3),og=Gp(4),xU=Gp(5),wU=Gp(6);fb.range;D0.range;_U.range;bU.range;og.range;xU.range;wU.range;function Hp(e){return ca(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/i2)}const pb=Hp(0),k0=Hp(1),SU=Hp(2),TU=Hp(3),sg=Hp(4),MU=Hp(5),CU=Hp(6);pb.range;k0.range;SU.range;TU.range;sg.range;MU.range;CU.range;const c2=ca(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());c2.range;const u2=ca(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());u2.range;const Qh=ca(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Qh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ca(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Qh.range;const Jh=ca(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Jh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ca(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Jh.range;function Yk(e,t,r,a,d,p){const m=[[Ep,1,$h],[Ep,5,5*$h],[Ep,15,15*$h],[Ep,30,30*$h],[p,1,Zl],[p,5,5*Zl],[p,15,15*Zl],[p,30,30*Zl],[d,1,Vh],[d,3,3*Vh],[d,6,6*Vh],[d,12,12*Vh],[a,1,Kh],[a,2,2*Kh],[r,1,i2],[t,1,sE],[t,3,3*sE],[e,1,w1]];function s(C,A,D){const R=A<C;R&&([C,A]=[A,C]);const j=D&&typeof D.range=="function"?D:M(C,A,D),G=j?j.range(C,+A+1):[];return R?G.reverse():G}function M(C,A,D){const R=Math.abs(A-C)/D,j=GS(([,,H])=>H).right(m,R);if(j===m.length)return e.every(Dw(C/w1,A/w1,D));if(j===0)return P0.every(Math.max(Dw(C,A,D),1));const[G,V]=m[R/m[j-1][2]<m[j][2]/R?j-1:j];return G.every(V)}return[s,M]}const[EU,AU]=Yk(Jh,u2,pb,Wk,l2,o2),[PU,DU]=Yk(Qh,c2,fb,Sv,s2,a2);function S1(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function T1(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Uy(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function kU(e){var t=e.dateTime,r=e.date,a=e.time,d=e.periods,p=e.days,m=e.shortDays,s=e.months,M=e.shortMonths,C=$y(d),A=Vy(d),D=$y(p),R=Vy(p),j=$y(m),G=Vy(m),V=$y(s),H=Vy(s),Q=$y(M),te=Vy(M),ne={a:Qe,A:Ve,b:ht,B:qt,c:null,d:fE,e:fE,f:e$,g:u$,G:d$,H:KU,I:QU,j:JU,L:Xk,m:t$,M:n$,p:Ae,q:qe,Q:gE,s:yE,S:r$,u:i$,U:a$,V:o$,w:s$,W:l$,x:null,X:null,y:c$,Y:h$,Z:f$,"%":mE},me={a:_t,A:Tt,b:jt,B:Ht,c:null,d:pE,e:pE,f:y$,g:E$,G:P$,H:p$,I:m$,j:g$,L:Qk,m:v$,M:_$,p:bt,q:nn,Q:gE,s:yE,S:b$,u:x$,U:w$,V:S$,w:T$,W:M$,x:null,X:null,y:C$,Y:A$,Z:D$,"%":mE},fe={a:ft,A:rt,b:at,B:Et,c:At,d:hE,e:hE,f:ZU,g:uE,G:cE,H:dE,I:dE,j:VU,L:HU,m:$U,M:qU,p:nt,q:UU,Q:YU,s:XU,S:GU,u:jU,U:LU,V:NU,w:RU,W:BU,x:zt,X:Le,y:uE,Y:cE,Z:FU,"%":WU};ne.x=_e(r,ne),ne.X=_e(a,ne),ne.c=_e(t,ne),me.x=_e(r,me),me.X=_e(a,me),me.c=_e(t,me);function _e(pt,Rt){return function(Ft){var ot=[],rn=-1,Wt=0,Vn=pt.length,Zn,Wr,Pa;for(Ft instanceof Date||(Ft=new Date(+Ft));++rn<Vn;)pt.charCodeAt(rn)===37&&(ot.push(pt.slice(Wt,rn)),(Wr=lE[Zn=pt.charAt(++rn)])!=null?Zn=pt.charAt(++rn):Wr=Zn==="e"?" ":"0",(Pa=Rt[Zn])&&(Zn=Pa(Ft,Wr)),ot.push(Zn),Wt=rn+1);return ot.push(pt.slice(Wt,rn)),ot.join("")}}function ye(pt,Rt){return function(Ft){var ot=Uy(1900,void 0,1),rn=Oe(ot,pt,Ft+="",0),Wt,Vn;if(rn!=Ft.length)return null;if("Q"in ot)return new Date(ot.Q);if("s"in ot)return new Date(ot.s*1e3+("L"in ot?ot.L:0));if(Rt&&!("Z"in ot)&&(ot.Z=0),"p"in ot&&(ot.H=ot.H%12+ot.p*12),ot.m===void 0&&(ot.m="q"in ot?ot.q:0),"V"in ot){if(ot.V<1||ot.V>53)return null;"w"in ot||(ot.w=1),"Z"in ot?(Wt=T1(Uy(ot.y,0,1)),Vn=Wt.getUTCDay(),Wt=Vn>4||Vn===0?k0.ceil(Wt):k0(Wt),Wt=db.offset(Wt,(ot.V-1)*7),ot.y=Wt.getUTCFullYear(),ot.m=Wt.getUTCMonth(),ot.d=Wt.getUTCDate()+(ot.w+6)%7):(Wt=S1(Uy(ot.y,0,1)),Vn=Wt.getDay(),Wt=Vn>4||Vn===0?D0.ceil(Wt):D0(Wt),Wt=Sv.offset(Wt,(ot.V-1)*7),ot.y=Wt.getFullYear(),ot.m=Wt.getMonth(),ot.d=Wt.getDate()+(ot.w+6)%7)}else("W"in ot||"U"in ot)&&("w"in ot||(ot.w="u"in ot?ot.u%7:"W"in ot?1:0),Vn="Z"in ot?T1(Uy(ot.y,0,1)).getUTCDay():S1(Uy(ot.y,0,1)).getDay(),ot.m=0,ot.d="W"in ot?(ot.w+6)%7+ot.W*7-(Vn+5)%7:ot.w+ot.U*7-(Vn+6)%7);return"Z"in ot?(ot.H+=ot.Z/100|0,ot.M+=ot.Z%100,T1(ot)):S1(ot)}}function Oe(pt,Rt,Ft,ot){for(var rn=0,Wt=Rt.length,Vn=Ft.length,Zn,Wr;rn<Wt;){if(ot>=Vn)return-1;if(Zn=Rt.charCodeAt(rn++),Zn===37){if(Zn=Rt.charAt(rn++),Wr=fe[Zn in lE?Rt.charAt(rn++):Zn],!Wr||(ot=Wr(pt,Ft,ot))<0)return-1}else if(Zn!=Ft.charCodeAt(ot++))return-1}return ot}function nt(pt,Rt,Ft){var ot=C.exec(Rt.slice(Ft));return ot?(pt.p=A.get(ot[0].toLowerCase()),Ft+ot[0].length):-1}function ft(pt,Rt,Ft){var ot=j.exec(Rt.slice(Ft));return ot?(pt.w=G.get(ot[0].toLowerCase()),Ft+ot[0].length):-1}function rt(pt,Rt,Ft){var ot=D.exec(Rt.slice(Ft));return ot?(pt.w=R.get(ot[0].toLowerCase()),Ft+ot[0].length):-1}function at(pt,Rt,Ft){var ot=Q.exec(Rt.slice(Ft));return ot?(pt.m=te.get(ot[0].toLowerCase()),Ft+ot[0].length):-1}function Et(pt,Rt,Ft){var ot=V.exec(Rt.slice(Ft));return ot?(pt.m=H.get(ot[0].toLowerCase()),Ft+ot[0].length):-1}function At(pt,Rt,Ft){return Oe(pt,t,Rt,Ft)}function zt(pt,Rt,Ft){return Oe(pt,r,Rt,Ft)}function Le(pt,Rt,Ft){return Oe(pt,a,Rt,Ft)}function Qe(pt){return m[pt.getDay()]}function Ve(pt){return p[pt.getDay()]}function ht(pt){return M[pt.getMonth()]}function qt(pt){return s[pt.getMonth()]}function Ae(pt){return d[+(pt.getHours()>=12)]}function qe(pt){return 1+~~(pt.getMonth()/3)}function _t(pt){return m[pt.getUTCDay()]}function Tt(pt){return p[pt.getUTCDay()]}function jt(pt){return M[pt.getUTCMonth()]}function Ht(pt){return s[pt.getUTCMonth()]}function bt(pt){return d[+(pt.getUTCHours()>=12)]}function nn(pt){return 1+~~(pt.getUTCMonth()/3)}return{format:function(pt){var Rt=_e(pt+="",ne);return Rt.toString=function(){return pt},Rt},parse:function(pt){var Rt=ye(pt+="",!1);return Rt.toString=function(){return pt},Rt},utcFormat:function(pt){var Rt=_e(pt+="",me);return Rt.toString=function(){return pt},Rt},utcParse:function(pt){var Rt=ye(pt+="",!0);return Rt.toString=function(){return pt},Rt}}}var lE={"-":"",_:" ",0:"0"},Ea=/^\s*\d+/,OU=/^%/,IU=/[\\^$*+?|[\]().{}]/g;function ur(e,t,r){var a=e<0?"-":"",d=(a?-e:e)+"",p=d.length;return a+(p<r?new Array(r-p+1).join(t)+d:d)}function zU(e){return e.replace(IU,"\\$&")}function $y(e){return new RegExp("^(?:"+e.map(zU).join("|")+")","i")}function Vy(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function RU(e,t,r){var a=Ea.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function jU(e,t,r){var a=Ea.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function LU(e,t,r){var a=Ea.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function NU(e,t,r){var a=Ea.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function BU(e,t,r){var a=Ea.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function cE(e,t,r){var a=Ea.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function uE(e,t,r){var a=Ea.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function FU(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function UU(e,t,r){var a=Ea.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function $U(e,t,r){var a=Ea.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function hE(e,t,r){var a=Ea.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function VU(e,t,r){var a=Ea.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function dE(e,t,r){var a=Ea.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function qU(e,t,r){var a=Ea.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function GU(e,t,r){var a=Ea.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function HU(e,t,r){var a=Ea.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function ZU(e,t,r){var a=Ea.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function WU(e,t,r){var a=OU.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function YU(e,t,r){var a=Ea.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function XU(e,t,r){var a=Ea.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function fE(e,t){return ur(e.getDate(),t,2)}function KU(e,t){return ur(e.getHours(),t,2)}function QU(e,t){return ur(e.getHours()%12||12,t,2)}function JU(e,t){return ur(1+Sv.count(Qh(e),e),t,3)}function Xk(e,t){return ur(e.getMilliseconds(),t,3)}function e$(e,t){return Xk(e,t)+"000"}function t$(e,t){return ur(e.getMonth()+1,t,2)}function n$(e,t){return ur(e.getMinutes(),t,2)}function r$(e,t){return ur(e.getSeconds(),t,2)}function i$(e){var t=e.getDay();return t===0?7:t}function a$(e,t){return ur(fb.count(Qh(e)-1,e),t,2)}function Kk(e){var t=e.getDay();return t>=4||t===0?og(e):og.ceil(e)}function o$(e,t){return e=Kk(e),ur(og.count(Qh(e),e)+(Qh(e).getDay()===4),t,2)}function s$(e){return e.getDay()}function l$(e,t){return ur(D0.count(Qh(e)-1,e),t,2)}function c$(e,t){return ur(e.getFullYear()%100,t,2)}function u$(e,t){return e=Kk(e),ur(e.getFullYear()%100,t,2)}function h$(e,t){return ur(e.getFullYear()%1e4,t,4)}function d$(e,t){var r=e.getDay();return e=r>=4||r===0?og(e):og.ceil(e),ur(e.getFullYear()%1e4,t,4)}function f$(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ur(t/60|0,"0",2)+ur(t%60,"0",2)}function pE(e,t){return ur(e.getUTCDate(),t,2)}function p$(e,t){return ur(e.getUTCHours(),t,2)}function m$(e,t){return ur(e.getUTCHours()%12||12,t,2)}function g$(e,t){return ur(1+db.count(Jh(e),e),t,3)}function Qk(e,t){return ur(e.getUTCMilliseconds(),t,3)}function y$(e,t){return Qk(e,t)+"000"}function v$(e,t){return ur(e.getUTCMonth()+1,t,2)}function _$(e,t){return ur(e.getUTCMinutes(),t,2)}function b$(e,t){return ur(e.getUTCSeconds(),t,2)}function x$(e){var t=e.getUTCDay();return t===0?7:t}function w$(e,t){return ur(pb.count(Jh(e)-1,e),t,2)}function Jk(e){var t=e.getUTCDay();return t>=4||t===0?sg(e):sg.ceil(e)}function S$(e,t){return e=Jk(e),ur(sg.count(Jh(e),e)+(Jh(e).getUTCDay()===4),t,2)}function T$(e){return e.getUTCDay()}function M$(e,t){return ur(k0.count(Jh(e)-1,e),t,2)}function C$(e,t){return ur(e.getUTCFullYear()%100,t,2)}function E$(e,t){return e=Jk(e),ur(e.getUTCFullYear()%100,t,2)}function A$(e,t){return ur(e.getUTCFullYear()%1e4,t,4)}function P$(e,t){var r=e.getUTCDay();return e=r>=4||r===0?sg(e):sg.ceil(e),ur(e.getUTCFullYear()%1e4,t,4)}function D$(){return"+0000"}function mE(){return"%"}function gE(e){return+e}function yE(e){return Math.floor(+e/1e3)}var Gm,eO,tO;k$({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function k$(e){return Gm=kU(e),eO=Gm.format,Gm.parse,tO=Gm.utcFormat,Gm.utcParse,Gm}function O$(e){return new Date(e)}function I$(e){return e instanceof Date?+e:+new Date(+e)}function h2(e,t,r,a,d,p,m,s,M,C){var A=KS(),D=A.invert,R=A.domain,j=C(".%L"),G=C(":%S"),V=C("%I:%M"),H=C("%I %p"),Q=C("%a %d"),te=C("%b %d"),ne=C("%B"),me=C("%Y");function fe(_e){return(M(_e)<_e?j:s(_e)<_e?G:m(_e)<_e?V:p(_e)<_e?H:a(_e)<_e?d(_e)<_e?Q:te:r(_e)<_e?ne:me)(_e)}return A.invert=function(_e){return new Date(D(_e))},A.domain=function(_e){return arguments.length?R(Array.from(_e,I$)):R().map(O$)},A.ticks=function(_e){var ye=R();return e(ye[0],ye[ye.length-1],_e??10)},A.tickFormat=function(_e,ye){return ye==null?fe:C(ye)},A.nice=function(_e){var ye=R();return(!_e||typeof _e.range!="function")&&(_e=t(ye[0],ye[ye.length-1],_e??10)),_e?R(Uk(ye,_e)):A},A.copy=function(){return wv(A,h2(e,t,r,a,d,p,m,s,M,C))},A}function z$(){return Jl.apply(h2(PU,DU,Qh,c2,fb,Sv,s2,a2,Ep,eO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function R$(){return Jl.apply(h2(EU,AU,Jh,u2,pb,db,l2,o2,Ep,tO).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function mb(){var e=0,t=1,r,a,d,p,m=$o,s=!1,M;function C(D){return D==null||isNaN(D=+D)?M:m(d===0?.5:(D=(p(D)-r)*d,s?Math.max(0,Math.min(1,D)):D))}C.domain=function(D){return arguments.length?([e,t]=D,r=p(e=+e),a=p(t=+t),d=r===a?0:1/(a-r),C):[e,t]},C.clamp=function(D){return arguments.length?(s=!!D,C):s},C.interpolator=function(D){return arguments.length?(m=D,C):m};function A(D){return function(R){var j,G;return arguments.length?([j,G]=R,m=D(j,G),C):[m(0),m(1)]}}return C.range=A(xg),C.rangeRound=A(XS),C.unknown=function(D){return arguments.length?(M=D,C):M},function(D){return p=D,r=D(e),a=D(t),d=r===a?0:1/(a-r),C}}function uf(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function nO(){var e=cf(mb()($o));return e.copy=function(){return uf(e,nO())},od.apply(e,arguments)}function rO(){var e=e2(mb()).domain([1,10]);return e.copy=function(){return uf(e,rO()).base(e.base())},od.apply(e,arguments)}function iO(){var e=t2(mb());return e.copy=function(){return uf(e,iO()).constant(e.constant())},od.apply(e,arguments)}function d2(){var e=n2(mb());return e.copy=function(){return uf(e,d2()).exponent(e.exponent())},od.apply(e,arguments)}function j$(){return d2.apply(null,arguments).exponent(.5)}function aO(){var e=[],t=$o;function r(a){if(a!=null&&!isNaN(a=+a))return t((bv(e,a,1)-1)/(e.length-1))}return r.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let d of a)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(rf),r},r.interpolator=function(a){return arguments.length?(t=a,r):t},r.range=function(){return e.map((a,d)=>t(d/(e.length-1)))},r.quantiles=function(a){return Array.from({length:a+1},(d,p)=>x8(e,p/a))},r.copy=function(){return aO(t).domain(e)},od.apply(r,arguments)}function gb(){var e=0,t=.5,r=1,a=1,d,p,m,s,M,C=$o,A,D=!1,R;function j(V){return isNaN(V=+V)?R:(V=.5+((V=+A(V))-p)*(a*V<a*p?s:M),C(D?Math.max(0,Math.min(1,V)):V))}j.domain=function(V){return arguments.length?([e,t,r]=V,d=A(e=+e),p=A(t=+t),m=A(r=+r),s=d===p?0:.5/(p-d),M=p===m?0:.5/(m-p),a=p<d?-1:1,j):[e,t,r]},j.clamp=function(V){return arguments.length?(D=!!V,j):D},j.interpolator=function(V){return arguments.length?(C=V,j):C};function G(V){return function(H){var Q,te,ne;return arguments.length?([Q,te,ne]=H,C=W8(V,[Q,te,ne]),j):[C(0),C(.5),C(1)]}}return j.range=G(xg),j.rangeRound=G(XS),j.unknown=function(V){return arguments.length?(R=V,j):R},function(V){return A=V,d=V(e),p=V(t),m=V(r),s=d===p?0:.5/(p-d),M=p===m?0:.5/(m-p),a=p<d?-1:1,j}}function oO(){var e=cf(gb()($o));return e.copy=function(){return uf(e,oO())},od.apply(e,arguments)}function sO(){var e=e2(gb()).domain([.1,1,10]);return e.copy=function(){return uf(e,sO()).base(e.base())},od.apply(e,arguments)}function lO(){var e=t2(gb());return e.copy=function(){return uf(e,lO()).constant(e.constant())},od.apply(e,arguments)}function f2(){var e=n2(gb());return e.copy=function(){return uf(e,f2()).exponent(e.exponent())},od.apply(e,arguments)}function L$(){return f2.apply(null,arguments).exponent(.5)}const Gy=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:ZS,scaleDiverging:oO,scaleDivergingLog:sO,scaleDivergingPow:f2,scaleDivergingSqrt:L$,scaleDivergingSymlog:lO,scaleIdentity:Fk,scaleImplicit:kw,scaleLinear:Bk,scaleLog:$k,scaleOrdinal:HS,scalePoint:T8,scalePow:r2,scaleQuantile:Gk,scaleQuantize:Hk,scaleRadial:qk,scaleSequential:nO,scaleSequentialLog:rO,scaleSequentialPow:d2,scaleSequentialQuantile:aO,scaleSequentialSqrt:j$,scaleSequentialSymlog:iO,scaleSqrt:yU,scaleSymlog:Vk,scaleThreshold:Zk,scaleTime:z$,scaleUtc:R$,tickFormat:Nk},Symbol.toStringTag,{value:"Module"}));var hf=e=>e.chartData,N$=ut([hf],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),p2=(e,t,r,a)=>a?N$(e):hf(e);function lg(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Uc(t)&&Uc(r))return!0}return!1}function vE(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function B$(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,a]=e,d,p;if(Uc(r))d=r;else if(typeof r=="function")return;if(Uc(a))p=a;else if(typeof a=="function")return;var m=[d,p];if(lg(m))return m}}function F$(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,r);if(lg(a))return vE(a,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[d,p]=e,m,s;if(d==="auto")t!=null&&(m=Math.min(...t));else if(bn(d))m=d;else if(typeof d=="function")try{t!=null&&(m=d(t?.[0]))}catch{}else if(typeof d=="string"&&lC.test(d)){var M=lC.exec(d);if(M==null||t==null)m=void 0;else{var C=+M[1];m=t[0]-C}}else m=t?.[0];if(p==="auto")t!=null&&(s=Math.max(...t));else if(bn(p))s=p;else if(typeof p=="function")try{t!=null&&(s=p(t?.[1]))}catch{}else if(typeof p=="string"&&cC.test(p)){var A=cC.exec(p);if(A==null||t==null)s=void 0;else{var D=+A[1];s=t[1]+D}}else s=t?.[1];var R=[m,s];if(lg(R))return t==null?R:vE(R,t,r)}}}var wg=1e9,U$={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},g2,ui=!0,Xl="[DecimalError] ",Ip=Xl+"Invalid argument: ",m2=Xl+"Exponent out of range: ",Sg=Math.floor,Sp=Math.pow,$$=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Js,Ta=1e7,Qr=7,cO=9007199254740991,O0=Sg(cO/Qr),Xt={};Xt.absoluteValue=Xt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Xt.comparedTo=Xt.cmp=function(e){var t,r,a,d,p=this;if(e=new p.constructor(e),p.s!==e.s)return p.s||-e.s;if(p.e!==e.e)return p.e>e.e^p.s<0?1:-1;for(a=p.d.length,d=e.d.length,t=0,r=a<d?a:d;t<r;++t)if(p.d[t]!==e.d[t])return p.d[t]>e.d[t]^p.s<0?1:-1;return a===d?0:a>d^p.s<0?1:-1};Xt.decimalPlaces=Xt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Qr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Xt.dividedBy=Xt.div=function(e){return Wh(this,new this.constructor(e))};Xt.dividedToIntegerBy=Xt.idiv=function(e){var t=this,r=t.constructor;return Nr(Wh(t,new r(e),0,1),r.precision)};Xt.equals=Xt.eq=function(e){return!this.cmp(e)};Xt.exponent=function(){return Yi(this)};Xt.greaterThan=Xt.gt=function(e){return this.cmp(e)>0};Xt.greaterThanOrEqualTo=Xt.gte=function(e){return this.cmp(e)>=0};Xt.isInteger=Xt.isint=function(){return this.e>this.d.length-2};Xt.isNegative=Xt.isneg=function(){return this.s<0};Xt.isPositive=Xt.ispos=function(){return this.s>0};Xt.isZero=function(){return this.s===0};Xt.lessThan=Xt.lt=function(e){return this.cmp(e)<0};Xt.lessThanOrEqualTo=Xt.lte=function(e){return this.cmp(e)<1};Xt.logarithm=Xt.log=function(e){var t,r=this,a=r.constructor,d=a.precision,p=d+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(Js))throw Error(Xl+"NaN");if(r.s<1)throw Error(Xl+(r.s?"NaN":"-Infinity"));return r.eq(Js)?new a(0):(ui=!1,t=Wh(ov(r,p),ov(e,p),p),ui=!0,Nr(t,d))};Xt.minus=Xt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?dO(t,e):uO(t,(e.s=-e.s,e))};Xt.modulo=Xt.mod=function(e){var t,r=this,a=r.constructor,d=a.precision;if(e=new a(e),!e.s)throw Error(Xl+"NaN");return r.s?(ui=!1,t=Wh(r,e,0,1).times(e),ui=!0,r.minus(t)):Nr(new a(r),d)};Xt.naturalExponential=Xt.exp=function(){return hO(this)};Xt.naturalLogarithm=Xt.ln=function(){return ov(this)};Xt.negated=Xt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Xt.plus=Xt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?uO(t,e):dO(t,(e.s=-e.s,e))};Xt.precision=Xt.sd=function(e){var t,r,a,d=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ip+e);if(t=Yi(d)+1,a=d.d.length-1,r=a*Qr+1,a=d.d[a],a){for(;a%10==0;a/=10)r--;for(a=d.d[0];a>=10;a/=10)r++}return e&&t>r?t:r};Xt.squareRoot=Xt.sqrt=function(){var e,t,r,a,d,p,m,s=this,M=s.constructor;if(s.s<1){if(!s.s)return new M(0);throw Error(Xl+"NaN")}for(e=Yi(s),ui=!1,d=Math.sqrt(+s),d==0||d==1/0?(t=ku(s.d),(t.length+e)%2==0&&(t+="0"),d=Math.sqrt(t),e=Sg((e+1)/2)-(e<0||e%2),d==1/0?t="5e"+e:(t=d.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new M(t)):a=new M(d.toString()),r=M.precision,d=m=r+3;;)if(p=a,a=p.plus(Wh(s,p,m+2)).times(.5),ku(p.d).slice(0,m)===(t=ku(a.d)).slice(0,m)){if(t=t.slice(m-3,m+1),d==m&&t=="4999"){if(Nr(p,r+1,0),p.times(p).eq(s)){a=p;break}}else if(t!="9999")break;m+=4}return ui=!0,Nr(a,r)};Xt.times=Xt.mul=function(e){var t,r,a,d,p,m,s,M,C,A=this,D=A.constructor,R=A.d,j=(e=new D(e)).d;if(!A.s||!e.s)return new D(0);for(e.s*=A.s,r=A.e+e.e,M=R.length,C=j.length,M<C&&(p=R,R=j,j=p,m=M,M=C,C=m),p=[],m=M+C,a=m;a--;)p.push(0);for(a=C;--a>=0;){for(t=0,d=M+a;d>a;)s=p[d]+j[a]*R[d-a-1]+t,p[d--]=s%Ta|0,t=s/Ta|0;p[d]=(p[d]+t)%Ta|0}for(;!p[--m];)p.pop();return t?++r:p.shift(),e.d=p,e.e=r,ui?Nr(e,D.precision):e};Xt.toDecimalPlaces=Xt.todp=function(e,t){var r=this,a=r.constructor;return r=new a(r),e===void 0?r:(Nu(e,0,wg),t===void 0?t=a.rounding:Nu(t,0,8),Nr(r,e+Yi(r)+1,t))};Xt.toExponential=function(e,t){var r,a=this,d=a.constructor;return e===void 0?r=jp(a,!0):(Nu(e,0,wg),t===void 0?t=d.rounding:Nu(t,0,8),a=Nr(new d(a),e+1,t),r=jp(a,!0,e+1)),r};Xt.toFixed=function(e,t){var r,a,d=this,p=d.constructor;return e===void 0?jp(d):(Nu(e,0,wg),t===void 0?t=p.rounding:Nu(t,0,8),a=Nr(new p(d),e+Yi(d)+1,t),r=jp(a.abs(),!1,e+Yi(a)+1),d.isneg()&&!d.isZero()?"-"+r:r)};Xt.toInteger=Xt.toint=function(){var e=this,t=e.constructor;return Nr(new t(e),Yi(e)+1,t.rounding)};Xt.toNumber=function(){return+this};Xt.toPower=Xt.pow=function(e){var t,r,a,d,p,m,s=this,M=s.constructor,C=12,A=+(e=new M(e));if(!e.s)return new M(Js);if(s=new M(s),!s.s){if(e.s<1)throw Error(Xl+"Infinity");return s}if(s.eq(Js))return s;if(a=M.precision,e.eq(Js))return Nr(s,a);if(t=e.e,r=e.d.length-1,m=t>=r,p=s.s,m){if((r=A<0?-A:A)<=cO){for(d=new M(Js),t=Math.ceil(a/Qr+4),ui=!1;r%2&&(d=d.times(s),bE(d.d,t)),r=Sg(r/2),r!==0;)s=s.times(s),bE(s.d,t);return ui=!0,e.s<0?new M(Js).div(d):Nr(d,a)}}else if(p<0)throw Error(Xl+"NaN");return p=p<0&&e.d[Math.max(t,r)]&1?-1:1,s.s=1,ui=!1,d=e.times(ov(s,a+C)),ui=!0,d=hO(d),d.s=p,d};Xt.toPrecision=function(e,t){var r,a,d=this,p=d.constructor;return e===void 0?(r=Yi(d),a=jp(d,r<=p.toExpNeg||r>=p.toExpPos)):(Nu(e,1,wg),t===void 0?t=p.rounding:Nu(t,0,8),d=Nr(new p(d),e,t),r=Yi(d),a=jp(d,e<=r||r<=p.toExpNeg,e)),a};Xt.toSignificantDigits=Xt.tosd=function(e,t){var r=this,a=r.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Nu(e,1,wg),t===void 0?t=a.rounding:Nu(t,0,8)),Nr(new a(r),e,t)};Xt.toString=Xt.valueOf=Xt.val=Xt.toJSON=Xt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Yi(e),r=e.constructor;return jp(e,t<=r.toExpNeg||t>=r.toExpPos)};function uO(e,t){var r,a,d,p,m,s,M,C,A=e.constructor,D=A.precision;if(!e.s||!t.s)return t.s||(t=new A(e)),ui?Nr(t,D):t;if(M=e.d,C=t.d,m=e.e,d=t.e,M=M.slice(),p=m-d,p){for(p<0?(a=M,p=-p,s=C.length):(a=C,d=m,s=M.length),m=Math.ceil(D/Qr),s=m>s?m+1:s+1,p>s&&(p=s,a.length=1),a.reverse();p--;)a.push(0);a.reverse()}for(s=M.length,p=C.length,s-p<0&&(p=s,a=C,C=M,M=a),r=0;p;)r=(M[--p]=M[p]+C[p]+r)/Ta|0,M[p]%=Ta;for(r&&(M.unshift(r),++d),s=M.length;M[--s]==0;)M.pop();return t.d=M,t.e=d,ui?Nr(t,D):t}function Nu(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Ip+e)}function ku(e){var t,r,a,d=e.length-1,p="",m=e[0];if(d>0){for(p+=m,t=1;t<d;t++)a=e[t]+"",r=Qr-a.length,r&&(p+=ef(r)),p+=a;m=e[t],a=m+"",r=Qr-a.length,r&&(p+=ef(r))}else if(m===0)return"0";for(;m%10===0;)m/=10;return p+m}var Wh=(function(){function e(a,d){var p,m=0,s=a.length;for(a=a.slice();s--;)p=a[s]*d+m,a[s]=p%Ta|0,m=p/Ta|0;return m&&a.unshift(m),a}function t(a,d,p,m){var s,M;if(p!=m)M=p>m?1:-1;else for(s=M=0;s<p;s++)if(a[s]!=d[s]){M=a[s]>d[s]?1:-1;break}return M}function r(a,d,p){for(var m=0;p--;)a[p]-=m,m=a[p]<d[p]?1:0,a[p]=m*Ta+a[p]-d[p];for(;!a[0]&&a.length>1;)a.shift()}return function(a,d,p,m){var s,M,C,A,D,R,j,G,V,H,Q,te,ne,me,fe,_e,ye,Oe,nt=a.constructor,ft=a.s==d.s?1:-1,rt=a.d,at=d.d;if(!a.s)return new nt(a);if(!d.s)throw Error(Xl+"Division by zero");for(M=a.e-d.e,ye=at.length,fe=rt.length,j=new nt(ft),G=j.d=[],C=0;at[C]==(rt[C]||0);)++C;if(at[C]>(rt[C]||0)&&--M,p==null?te=p=nt.precision:m?te=p+(Yi(a)-Yi(d))+1:te=p,te<0)return new nt(0);if(te=te/Qr+2|0,C=0,ye==1)for(A=0,at=at[0],te++;(C<fe||A)&&te--;C++)ne=A*Ta+(rt[C]||0),G[C]=ne/at|0,A=ne%at|0;else{for(A=Ta/(at[0]+1)|0,A>1&&(at=e(at,A),rt=e(rt,A),ye=at.length,fe=rt.length),me=ye,V=rt.slice(0,ye),H=V.length;H<ye;)V[H++]=0;Oe=at.slice(),Oe.unshift(0),_e=at[0],at[1]>=Ta/2&&++_e;do A=0,s=t(at,V,ye,H),s<0?(Q=V[0],ye!=H&&(Q=Q*Ta+(V[1]||0)),A=Q/_e|0,A>1?(A>=Ta&&(A=Ta-1),D=e(at,A),R=D.length,H=V.length,s=t(D,V,R,H),s==1&&(A--,r(D,ye<R?Oe:at,R))):(A==0&&(s=A=1),D=at.slice()),R=D.length,R<H&&D.unshift(0),r(V,D,H),s==-1&&(H=V.length,s=t(at,V,ye,H),s<1&&(A++,r(V,ye<H?Oe:at,H))),H=V.length):s===0&&(A++,V=[0]),G[C++]=A,s&&V[0]?V[H++]=rt[me]||0:(V=[rt[me]],H=1);while((me++<fe||V[0]!==void 0)&&te--)}return G[0]||G.shift(),j.e=M,Nr(j,m?p+Yi(j)+1:p)}})();function hO(e,t){var r,a,d,p,m,s,M=0,C=0,A=e.constructor,D=A.precision;if(Yi(e)>16)throw Error(m2+Yi(e));if(!e.s)return new A(Js);for(ui=!1,s=D,m=new A(.03125);e.abs().gte(.1);)e=e.times(m),C+=5;for(a=Math.log(Sp(2,C))/Math.LN10*2+5|0,s+=a,r=d=p=new A(Js),A.precision=s;;){if(d=Nr(d.times(e),s),r=r.times(++M),m=p.plus(Wh(d,r,s)),ku(m.d).slice(0,s)===ku(p.d).slice(0,s)){for(;C--;)p=Nr(p.times(p),s);return A.precision=D,t==null?(ui=!0,Nr(p,D)):p}p=m}}function Yi(e){for(var t=e.e*Qr,r=e.d[0];r>=10;r/=10)t++;return t}function M1(e,t,r){if(t>e.LN10.sd())throw ui=!0,r&&(e.precision=r),Error(Xl+"LN10 precision limit exceeded");return Nr(new e(e.LN10),t)}function ef(e){for(var t="";e--;)t+="0";return t}function ov(e,t){var r,a,d,p,m,s,M,C,A,D=1,R=10,j=e,G=j.d,V=j.constructor,H=V.precision;if(j.s<1)throw Error(Xl+(j.s?"NaN":"-Infinity"));if(j.eq(Js))return new V(0);if(t==null?(ui=!1,C=H):C=t,j.eq(10))return t==null&&(ui=!0),M1(V,C);if(C+=R,V.precision=C,r=ku(G),a=r.charAt(0),p=Yi(j),Math.abs(p)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)j=j.times(e),r=ku(j.d),a=r.charAt(0),D++;p=Yi(j),a>1?(j=new V("0."+r),p++):j=new V(a+"."+r.slice(1))}else return M=M1(V,C+2,H).times(p+""),j=ov(new V(a+"."+r.slice(1)),C-R).plus(M),V.precision=H,t==null?(ui=!0,Nr(j,H)):j;for(s=m=j=Wh(j.minus(Js),j.plus(Js),C),A=Nr(j.times(j),C),d=3;;){if(m=Nr(m.times(A),C),M=s.plus(Wh(m,new V(d),C)),ku(M.d).slice(0,C)===ku(s.d).slice(0,C))return s=s.times(2),p!==0&&(s=s.plus(M1(V,C+2,H).times(p+""))),s=Wh(s,new V(D),C),V.precision=H,t==null?(ui=!0,Nr(s,H)):s;s=M,d+=2}}function _E(e,t){var r,a,d;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charCodeAt(a)===48;)++a;for(d=t.length;t.charCodeAt(d-1)===48;)--d;if(t=t.slice(a,d),t){if(d-=a,r=r-a-1,e.e=Sg(r/Qr),e.d=[],a=(r+1)%Qr,r<0&&(a+=Qr),a<d){for(a&&e.d.push(+t.slice(0,a)),d-=Qr;a<d;)e.d.push(+t.slice(a,a+=Qr));t=t.slice(a),a=Qr-t.length}else a-=d;for(;a--;)t+="0";if(e.d.push(+t),ui&&(e.e>O0||e.e<-O0))throw Error(m2+r)}else e.s=0,e.e=0,e.d=[0];return e}function Nr(e,t,r){var a,d,p,m,s,M,C,A,D=e.d;for(m=1,p=D[0];p>=10;p/=10)m++;if(a=t-m,a<0)a+=Qr,d=t,C=D[A=0];else{if(A=Math.ceil((a+1)/Qr),p=D.length,A>=p)return e;for(C=p=D[A],m=1;p>=10;p/=10)m++;a%=Qr,d=a-Qr+m}if(r!==void 0&&(p=Sp(10,m-d-1),s=C/p%10|0,M=t<0||D[A+1]!==void 0||C%p,M=r<4?(s||M)&&(r==0||r==(e.s<0?3:2)):s>5||s==5&&(r==4||M||r==6&&(a>0?d>0?C/Sp(10,m-d):0:D[A-1])%10&1||r==(e.s<0?8:7))),t<1||!D[0])return M?(p=Yi(e),D.length=1,t=t-p-1,D[0]=Sp(10,(Qr-t%Qr)%Qr),e.e=Sg(-t/Qr)||0):(D.length=1,D[0]=e.e=e.s=0),e;if(a==0?(D.length=A,p=1,A--):(D.length=A+1,p=Sp(10,Qr-a),D[A]=d>0?(C/Sp(10,m-d)%Sp(10,d)|0)*p:0),M)for(;;)if(A==0){(D[0]+=p)==Ta&&(D[0]=1,++e.e);break}else{if(D[A]+=p,D[A]!=Ta)break;D[A--]=0,p=1}for(a=D.length;D[--a]===0;)D.pop();if(ui&&(e.e>O0||e.e<-O0))throw Error(m2+Yi(e));return e}function dO(e,t){var r,a,d,p,m,s,M,C,A,D,R=e.constructor,j=R.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new R(e),ui?Nr(t,j):t;if(M=e.d,D=t.d,a=t.e,C=e.e,M=M.slice(),m=C-a,m){for(A=m<0,A?(r=M,m=-m,s=D.length):(r=D,a=C,s=M.length),d=Math.max(Math.ceil(j/Qr),s)+2,m>d&&(m=d,r.length=1),r.reverse(),d=m;d--;)r.push(0);r.reverse()}else{for(d=M.length,s=D.length,A=d<s,A&&(s=d),d=0;d<s;d++)if(M[d]!=D[d]){A=M[d]<D[d];break}m=0}for(A&&(r=M,M=D,D=r,t.s=-t.s),s=M.length,d=D.length-s;d>0;--d)M[s++]=0;for(d=D.length;d>m;){if(M[--d]<D[d]){for(p=d;p&&M[--p]===0;)M[p]=Ta-1;--M[p],M[d]+=Ta}M[d]-=D[d]}for(;M[--s]===0;)M.pop();for(;M[0]===0;M.shift())--a;return M[0]?(t.d=M,t.e=a,ui?Nr(t,j):t):new R(0)}function jp(e,t,r){var a,d=Yi(e),p=ku(e.d),m=p.length;return t?(r&&(a=r-m)>0?p=p.charAt(0)+"."+p.slice(1)+ef(a):m>1&&(p=p.charAt(0)+"."+p.slice(1)),p=p+(d<0?"e":"e+")+d):d<0?(p="0."+ef(-d-1)+p,r&&(a=r-m)>0&&(p+=ef(a))):d>=m?(p+=ef(d+1-m),r&&(a=r-d-1)>0&&(p=p+"."+ef(a))):((a=d+1)<m&&(p=p.slice(0,a)+"."+p.slice(a)),r&&(a=r-m)>0&&(d+1===m&&(p+="."),p+=ef(a))),e.s<0?"-"+p:p}function bE(e,t){if(e.length>t)return e.length=t,!0}function fO(e){var t,r,a;function d(p){var m=this;if(!(m instanceof d))return new d(p);if(m.constructor=d,p instanceof d){m.s=p.s,m.e=p.e,m.d=(p=p.d)?p.slice():p;return}if(typeof p=="number"){if(p*0!==0)throw Error(Ip+p);if(p>0)m.s=1;else if(p<0)p=-p,m.s=-1;else{m.s=0,m.e=0,m.d=[0];return}if(p===~~p&&p<1e7){m.e=0,m.d=[p];return}return _E(m,p.toString())}else if(typeof p!="string")throw Error(Ip+p);if(p.charCodeAt(0)===45?(p=p.slice(1),m.s=-1):m.s=1,$$.test(p))_E(m,p);else throw Error(Ip+p)}if(d.prototype=Xt,d.ROUND_UP=0,d.ROUND_DOWN=1,d.ROUND_CEIL=2,d.ROUND_FLOOR=3,d.ROUND_HALF_UP=4,d.ROUND_HALF_DOWN=5,d.ROUND_HALF_EVEN=6,d.ROUND_HALF_CEIL=7,d.ROUND_HALF_FLOOR=8,d.clone=fO,d.config=d.set=V$,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(r=a[t++])||(e[r]=this[r]);return d.config(e),d}function V$(e){if(!e||typeof e!="object")throw Error(Xl+"Object expected");var t,r,a,d=["precision",1,wg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<d.length;t+=3)if((a=e[r=d[t]])!==void 0)if(Sg(a)===a&&a>=d[t+1]&&a<=d[t+2])this[r]=a;else throw Error(Ip+r+": "+a);if((a=e[r="LN10"])!==void 0)if(a==Math.LN10)this[r]=new this(a);else throw Error(Ip+r+": "+a);return this}var g2=fO(U$);Js=new g2(1);const Cr=g2;var q$=e=>e,pO={},mO=e=>e===pO,xE=e=>function t(){return arguments.length===0||arguments.length===1&&mO(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},gO=(e,t)=>e===1?t:xE(function(){for(var r=arguments.length,a=new Array(r),d=0;d<r;d++)a[d]=arguments[d];var p=a.filter(m=>m!==pO).length;return p>=e?t(...a):gO(e-p,xE(function(){for(var m=arguments.length,s=new Array(m),M=0;M<m;M++)s[M]=arguments[M];var C=a.map(A=>mO(A)?s.shift():A);return t(...C,...s)}))}),yb=e=>gO(e.length,e),Rw=(e,t)=>{for(var r=[],a=e;a<t;++a)r[a-e]=a;return r},G$=yb((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),H$=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(!r.length)return q$;var d=r.reverse(),p=d[0],m=d.slice(1);return function(){return m.reduce((s,M)=>M(s),p(...arguments))}},jw=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),yO=e=>{var t=null,r=null;return function(){for(var a=arguments.length,d=new Array(a),p=0;p<a;p++)d[p]=arguments[p];return t&&d.every((m,s)=>{var M;return m===((M=t)===null||M===void 0?void 0:M[s])})||(t=d,r=e(...d)),r}};function vO(e){var t;return e===0?t=1:t=Math.floor(new Cr(e).abs().log(10).toNumber())+1,t}function _O(e,t,r){for(var a=new Cr(e),d=0,p=[];a.lt(t)&&d<1e5;)p.push(a.toNumber()),a=a.add(r),d++;return p}yb((e,t,r)=>{var a=+e,d=+t;return a+r*(d-a)});yb((e,t,r)=>{var a=t-+e;return a=a||1/0,(r-e)/a});yb((e,t,r)=>{var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(r-e)/a))});var bO=e=>{var[t,r]=e,[a,d]=[t,r];return t>r&&([a,d]=[r,t]),[a,d]},xO=(e,t,r)=>{if(e.lte(0))return new Cr(0);var a=vO(e.toNumber()),d=new Cr(10).pow(a),p=e.div(d),m=a!==1?.05:.1,s=new Cr(Math.ceil(p.div(m).toNumber())).add(r).mul(m),M=s.mul(d);return t?new Cr(M.toNumber()):new Cr(Math.ceil(M.toNumber()))},Z$=(e,t,r)=>{var a=new Cr(1),d=new Cr(e);if(!d.isint()&&r){var p=Math.abs(e);p<1?(a=new Cr(10).pow(vO(e)-1),d=new Cr(Math.floor(d.div(a).toNumber())).mul(a)):p>1&&(d=new Cr(Math.floor(e)))}else e===0?d=new Cr(Math.floor((t-1)/2)):r||(d=new Cr(Math.floor(e)));var m=Math.floor((t-1)/2),s=H$(G$(M=>d.add(new Cr(M-m).mul(a)).toNumber()),Rw);return s(0,t)},wO=function(t,r,a,d){var p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(a-1)))return{step:new Cr(0),tickMin:new Cr(0),tickMax:new Cr(0)};var m=xO(new Cr(r).sub(t).div(a-1),d,p),s;t<=0&&r>=0?s=new Cr(0):(s=new Cr(t).add(r).div(2),s=s.sub(new Cr(s).mod(m)));var M=Math.ceil(s.sub(t).div(m).toNumber()),C=Math.ceil(new Cr(r).sub(s).div(m).toNumber()),A=M+C+1;return A>a?wO(t,r,a,d,p+1):(A<a&&(C=r>0?C+(a-A):C,M=r>0?M:M+(a-A)),{step:m,tickMin:s.sub(new Cr(M).mul(m)),tickMax:s.add(new Cr(C).mul(m))})};function W$(e){var[t,r]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,p=Math.max(a,2),[m,s]=bO([t,r]);if(m===-1/0||s===1/0){var M=s===1/0?[m,...Rw(0,a-1).map(()=>1/0)]:[...Rw(0,a-1).map(()=>-1/0),s];return t>r?jw(M):M}if(m===s)return Z$(m,a,d);var{step:C,tickMin:A,tickMax:D}=wO(m,s,p,d,0),R=_O(A,D.add(new Cr(.1).mul(C)),C);return t>r?jw(R):R}function Y$(e,t){var[r,a]=e,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[p,m]=bO([r,a]);if(p===-1/0||m===1/0)return[r,a];if(p===m)return[p];var s=Math.max(t,2),M=xO(new Cr(m).sub(p).div(s-1),d,0),C=[..._O(new Cr(p),new Cr(m),M),m];return d===!1&&(C=C.map(A=>Math.round(A))),r>a?jw(C):C}var X$=yO(W$),K$=yO(Y$),Q$=e=>e.rootProps.barCategoryGap,vb=e=>e.rootProps.stackOffset,y2=e=>e.options.chartName,v2=e=>e.rootProps.syncId,SO=e=>e.rootProps.syncMethod,_2=e=>e.options.eventEmitter,Fh={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Hs={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},_b=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},J$={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Fh.angleAxisId,includeHidden:!1,name:void 0,reversed:Fh.reversed,scale:Fh.scale,tick:Fh.tick,tickCount:void 0,ticks:void 0,type:Fh.type,unit:void 0},eV={allowDataOverflow:Hs.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Hs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Hs.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Hs.scale,tick:Hs.tick,tickCount:Hs.tickCount,ticks:void 0,type:Hs.type,unit:void 0},tV={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Fh.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Fh.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Fh.scale,tick:Fh.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},nV={allowDataOverflow:Hs.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Hs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Hs.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Hs.scale,tick:Hs.tick,tickCount:Hs.tickCount,ticks:void 0,type:"category",unit:void 0},b2=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?tV:J$,x2=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?nV:eV,bb=e=>e.polarOptions,w2=ut([id,ad,eo],XB),TO=ut([bb,w2],(e,t)=>{if(e!=null)return af(e.innerRadius,t,0)}),MO=ut([bb,w2],(e,t)=>{if(e!=null)return af(e.outerRadius,t,t*.8)}),rV=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},CO=ut([bb],rV);ut([b2,CO],_b);var EO=ut([w2,TO,MO],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});ut([x2,EO],_b);var AO=ut([ei,bb,TO,MO,id,ad],(e,t,r,a,d,p)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||a==null)){var{cx:m,cy:s,startAngle:M,endAngle:C}=t;return{cx:af(m,d,d/2),cy:af(s,p,p/2),innerRadius:r,outerRadius:a,startAngle:M,endAngle:C,clockWise:!1}}}),Qi=(e,t)=>t,xb=(e,t,r)=>r;function PO(e){return e?.id}var ua=e=>{var t=ei(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Tg=e=>e.tooltip.settings.axisId,Aa=e=>{var t=ua(e),r=Tg(e);return Tv(e,t,r)},DO=ut([Aa],e=>e?.dataKey);function kO(e,t,r){var{chartData:a=[]}=t,{allowDuplicatedCategory:d,dataKey:p}=r,m=new Map;return e.forEach(s=>{var M,C=(M=s.data)!==null&&M!==void 0?M:a;if(!(C==null||C.length===0)){var A=PO(s);C.forEach((D,R)=>{var j=p==null||d?R:String(Vo(D,p,null)),G=Vo(D,s.dataKey,0),V;m.has(j)?V=m.get(j):V={},Object.assign(V,{[A]:G}),m.set(j,V)})}}),Array.from(m.values())}function S2(e){return e.stackId!=null&&e.dataKey!=null}function wE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function I0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wE(Object(r),!0).forEach(function(a){iV(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function iV(e,t,r){return(t=aV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aV(e){var t=oV(e,"string");return typeof t=="symbol"?t:t+""}function oV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lw=[0,"auto"],Vs={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},OO=(e,t)=>e.cartesianAxis.xAxis[t],sd=(e,t)=>{var r=OO(e,t);return r??Vs},qs={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Lw,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:_v},IO=(e,t)=>e.cartesianAxis.yAxis[t],ld=(e,t)=>{var r=IO(e,t);return r??qs},sV={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},T2=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??sV},ds=(e,t,r)=>{switch(t){case"xAxis":return sd(e,r);case"yAxis":return ld(e,r);case"zAxis":return T2(e,r);case"angleAxis":return b2(e,r);case"radiusAxis":return x2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},lV=(e,t,r)=>{switch(t){case"xAxis":return sd(e,r);case"yAxis":return ld(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Tv=(e,t,r)=>{switch(t){case"xAxis":return sd(e,r);case"yAxis":return ld(e,r);case"angleAxis":return b2(e,r);case"radiusAxis":return x2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},zO=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function RO(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var jO=e=>e.graphicalItems.cartesianItems,cV=ut([Qi,xb],RO),LO=(e,t,r)=>e.filter(r).filter(a=>t?.includeHidden===!0?!0:!a.hide),Mv=ut([jO,ds,cV],LO),NO=ut([Mv],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(S2)),BO=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),FO=ut([Mv],BO),UO=e=>e.map(t=>t.data).filter(Boolean).flat(1),uV=ut([Mv],UO),$O=(e,t)=>{var{chartData:r=[],dataStartIndex:a,dataEndIndex:d}=t;return e.length>0?e:r.slice(a,d+1)},M2=ut([uV,p2],$O),VO=(e,t,r)=>t?.dataKey!=null?e.map(a=>({value:Vo(a,t.dataKey)})):r.length>0?r.map(a=>a.dataKey).flatMap(a=>e.map(d=>({value:Vo(d,a)}))):e.map(a=>({value:a})),wb=ut([M2,ds,Mv],VO);function qO(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Zp(e){return e.filter(t=>Lu(t)||t instanceof Date).map(Number).filter(t=>Wl(t)===!1)}function hV(e,t,r){return!r||typeof t!="number"||Wl(t)?[]:r.length?Zp(r.flatMap(a=>{var d=Vo(e,a.dataKey),p,m;if(Array.isArray(d)?[p,m]=d:p=m=d,!(!Uc(p)||!Uc(m)))return[t-p,t+m]})):[]}var dV=ut([NO,p2,Aa],kO),GO=(e,t,r)=>{var a={},d=t.reduce((p,m)=>(m.stackId==null||(p[m.stackId]==null&&(p[m.stackId]=[]),p[m.stackId].push(m)),p),a);return Object.fromEntries(Object.entries(d).map(p=>{var[m,s]=p,M=s.map(PO);return[m,{stackedData:h6(e,M,r),graphicalItems:s}]}))},fV=ut([dV,NO,vb],GO),HO=(e,t,r)=>{var{dataStartIndex:a,dataEndIndex:d}=t;if(r!=="zAxis"){var p=p6(e,a,d);if(!(p!=null&&p[0]===0&&p[1]===0))return p}},pV=ut([fV,hf,Qi],HO),ZO=(e,t,r,a,d)=>r.length>0?e.flatMap(p=>r.flatMap(m=>{var s,M,C=(s=a[m.id])===null||s===void 0?void 0:s.filter(D=>qO(d,D)),A=Vo(p,(M=t.dataKey)!==null&&M!==void 0?M:m.dataKey);return{value:A,errorDomain:hV(p,A,C)}})).filter(Boolean):t?.dataKey!=null?e.map(p=>({value:Vo(p,t.dataKey),errorDomain:[]})):e.map(p=>({value:p,errorDomain:[]})),Sb=e=>e.errorBars,WO=(e,t,r)=>e.flatMap(a=>t[a.id]).filter(Boolean).filter(a=>qO(r,a));ut([FO,Sb,Qi],WO);var mV=ut([M2,ds,FO,Sb,Qi],ZO);function gV(e){var{value:t}=e;if(Lu(t)||t instanceof Date)return t}var SE=e=>{var t=e.flatMap(a=>[a.value,a.errorDomain]).flat(1),r=Zp(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},yV=(e,t,r)=>{var a=e.map(gV).filter(d=>d!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&rD(a))?Ak(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},C2=e=>{var t;if(e==null||!("domain"in e))return Lw;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Zp(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:Lw},z0=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var d=r.filter(Boolean);if(d.length!==0){var p=d.flat(),m=Math.min(...p),s=Math.max(...p);return[m,s]}},YO=e=>e.referenceElements.dots,Mg=(e,t,r)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===r:a.yAxisId===r),vV=ut([YO,Qi,xb],Mg),XO=e=>e.referenceElements.areas,_V=ut([XO,Qi,xb],Mg),KO=e=>e.referenceElements.lines,bV=ut([KO,Qi,xb],Mg),QO=(e,t)=>{var r=Zp(e.map(a=>t==="xAxis"?a.x:a.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},xV=ut(vV,Qi,QO),JO=(e,t)=>{var r=Zp(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},wV=ut([_V,Qi],JO),eI=(e,t)=>{var r=Zp(e.map(a=>t==="xAxis"?a.x:a.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},SV=ut(bV,Qi,eI),TV=ut(xV,SV,wV,(e,t,r)=>z0(e,r,t)),MV=ut([ds],C2),tI=(e,t,r,a,d,p,m)=>{var s=B$(t,e.allowDataOverflow);if(s!=null)return s;var M=p==="vertical"&&m==="xAxis"||p==="horizontal"&&m==="yAxis",C=M?z0(r,d,SE(a)):z0(d,SE(a));return F$(t,C,e.allowDataOverflow)},CV=ut([ds,MV,pV,mV,TV,ei,Qi],tI),EV=[0,1],nI=(e,t,r,a,d,p,m)=>{if(!((e==null||r==null||r.length===0)&&m===void 0)){var{dataKey:s,type:M}=e,C=lf(t,p);return C&&s==null?Ak(0,r.length):M==="category"?yV(a,e,C):d==="expand"?EV:m}},E2=ut([ds,ei,M2,wb,vb,Qi,CV],nI),rI=(e,t,r,a,d)=>{if(e!=null){var{scale:p,type:m}=e;if(p==="auto")return t==="radial"&&d==="radiusAxis"?"band":t==="radial"&&d==="angleAxis"?"linear":m==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!r)?"point":m==="category"?"band":"linear";if(typeof p=="string"){var s="scale".concat(gv(p));return s in Gy?s:"point"}}},Cv=ut([ds,ei,zO,y2,Qi],rI);function AV(e){if(e!=null){if(e in Gy)return Gy[e]();var t="scale".concat(gv(e));if(t in Gy)return Gy[t]()}}function A2(e,t,r,a){if(!(r==null||a==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(a);var d=AV(t);if(d!=null){var p=d.domain(r).range(a);return s6(p),p}}}var iI=(e,t,r)=>{var a=C2(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&lg(e))return X$(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&lg(e))return K$(e,t.tickCount,t.allowDecimals)}},P2=ut([E2,Tv,Cv],iI),aI=(e,t,r,a)=>{if(a!=="angleAxis"&&e?.type==="number"&&lg(t)&&Array.isArray(r)&&r.length>0){var d=t[0],p=r[0],m=t[1],s=r[r.length-1];return[Math.min(d,p),Math.max(m,s)]}return t},PV=ut([ds,E2,P2,Qi],aI),DV=ut(wb,ds,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,a=Array.from(Zp(e.map(s=>s.value))).sort((s,M)=>s-M);if(a.length<2)return 1/0;var d=a[a.length-1]-a[0];if(d===0)return 1/0;for(var p=0;p<a.length-1;p++){var m=a[p+1]-a[p];r=Math.min(r,m)}return r/d}}),oI=ut(DV,ei,Q$,eo,(e,t,r,a)=>a,(e,t,r,a,d)=>{if(!Uc(e))return 0;var p=t==="vertical"?a.height:a.width;if(d==="gap")return e*p/2;if(d==="no-gap"){var m=af(r,e*p),s=e*p/2;return s-m-(s-m)/p*m}return 0}),kV=(e,t)=>{var r=sd(e,t);return r==null||typeof r.padding!="string"?0:oI(e,"xAxis",t,r.padding)},OV=(e,t)=>{var r=ld(e,t);return r==null||typeof r.padding!="string"?0:oI(e,"yAxis",t,r.padding)},IV=ut(sd,kV,(e,t)=>{var r,a;if(e==null)return{left:0,right:0};var{padding:d}=e;return typeof d=="string"?{left:t,right:t}:{left:((r=d.left)!==null&&r!==void 0?r:0)+t,right:((a=d.right)!==null&&a!==void 0?a:0)+t}}),zV=ut(ld,OV,(e,t)=>{var r,a;if(e==null)return{top:0,bottom:0};var{padding:d}=e;return typeof d=="string"?{top:t,bottom:t}:{top:((r=d.top)!==null&&r!==void 0?r:0)+t,bottom:((a=d.bottom)!==null&&a!==void 0?a:0)+t}}),RV=ut([eo,IV,cb,lb,(e,t,r)=>r],(e,t,r,a,d)=>{var{padding:p}=a;return d?[p.left,r.width-p.right]:[e.left+t.left,e.left+e.width-t.right]}),jV=ut([eo,ei,zV,cb,lb,(e,t,r)=>r],(e,t,r,a,d,p)=>{var{padding:m}=d;return p?[a.height-m.bottom,m.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Ev=(e,t,r,a)=>{var d;switch(t){case"xAxis":return RV(e,r,a);case"yAxis":return jV(e,r,a);case"zAxis":return(d=T2(e,r))===null||d===void 0?void 0:d.range;case"angleAxis":return CO(e);case"radiusAxis":return EO(e,r);default:return}},sI=ut([ds,Ev],_b),Cg=ut([ds,Cv,PV,sI],A2);ut([Mv,Sb,Qi],WO);function lI(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Tb=(e,t)=>t,Mb=(e,t,r)=>r,LV=ut(ob,Tb,Mb,(e,t,r)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===r).sort(lI)),NV=ut(sb,Tb,Mb,(e,t,r)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===r).sort(lI)),cI=(e,t)=>({width:e.width,height:t.height}),BV=(e,t)=>{var r=typeof t.width=="number"?t.width:_v;return{width:r,height:e.height}},FV=ut(eo,sd,cI),UV=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},$V=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},VV=ut(ad,eo,LV,Tb,Mb,(e,t,r,a,d)=>{var p={},m;return r.forEach(s=>{var M=cI(t,s);m==null&&(m=UV(t,a,e));var C=a==="top"&&!d||a==="bottom"&&d;p[s.id]=m-Number(C)*M.height,m+=(C?-1:1)*M.height}),p}),qV=ut(id,eo,NV,Tb,Mb,(e,t,r,a,d)=>{var p={},m;return r.forEach(s=>{var M=BV(t,s);m==null&&(m=$V(t,a,e));var C=a==="left"&&!d||a==="right"&&d;p[s.id]=m-Number(C)*M.width,m+=(C?-1:1)*M.width}),p}),GV=(e,t)=>{var r=sd(e,t);if(r!=null)return VV(e,r.orientation,r.mirror)},HV=ut([eo,sd,GV,(e,t)=>t],(e,t,r,a)=>{if(t!=null){var d=r?.[a];return d==null?{x:e.left,y:0}:{x:e.left,y:d}}}),ZV=(e,t)=>{var r=ld(e,t);if(r!=null)return qV(e,r.orientation,r.mirror)},WV=ut([eo,ld,ZV,(e,t)=>t],(e,t,r,a)=>{if(t!=null){var d=r?.[a];return d==null?{x:0,y:e.top}:{x:d,y:e.top}}}),YV=ut(eo,ld,(e,t)=>{var r=typeof t.width=="number"?t.width:_v;return{width:r,height:e.height}}),uI=(e,t,r,a)=>{if(r!=null){var{allowDuplicatedCategory:d,type:p,dataKey:m}=r,s=lf(e,a),M=t.map(C=>C.value);if(m&&s&&p==="category"&&d&&rD(M))return M}},D2=ut([ei,wb,ds,Qi],uI),hI=(e,t,r,a)=>{if(!(r==null||r.dataKey==null)){var{type:d,scale:p}=r,m=lf(e,a);if(m&&(d==="number"||p!=="auto"))return t.map(s=>s.value)}},k2=ut([ei,wb,Tv,Qi],hI),TE=ut([ei,lV,Cv,Cg,D2,k2,Ev,P2,Qi],(e,t,r,a,d,p,m,s,M)=>{if(t==null)return null;var C=lf(e,M);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:M,categoricalDomain:p,duplicateDomain:d,isCategorical:C,niceTicks:s,range:m,realScaleType:r,scale:a}}),XV=(e,t,r,a,d,p,m,s,M)=>{if(!(t==null||a==null)){var C=lf(e,M),{type:A,ticks:D,tickCount:R}=t,j=r==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,G=A==="category"&&a.bandwidth?a.bandwidth()/j:0;G=M==="angleAxis"&&p!=null&&p.length>=2?Hl(p[0]-p[1])*2*G:G;var V=D||d;if(V){var H=V.map((Q,te)=>{var ne=m?m.indexOf(Q):Q;return{index:te,coordinate:a(ne)+G,value:Q,offset:G}});return H.filter(Q=>!Wl(Q.coordinate))}return C&&s?s.map((Q,te)=>({coordinate:a(Q)+G,value:Q,index:te,offset:G})):a.ticks?a.ticks(R).map(Q=>({coordinate:a(Q)+G,value:Q,offset:G})):a.domain().map((Q,te)=>({coordinate:a(Q)+G,value:m?m[Q]:Q,index:te,offset:G}))}},dI=ut([ei,Tv,Cv,Cg,P2,Ev,D2,k2,Qi],XV),KV=(e,t,r,a,d,p,m)=>{if(!(t==null||r==null||a==null||a[0]===a[1])){var s=lf(e,m),{tickCount:M}=t,C=0;return C=m==="angleAxis"&&a?.length>=2?Hl(a[0]-a[1])*2*C:C,s&&p?p.map((A,D)=>({coordinate:r(A)+C,value:A,index:D,offset:C})):r.ticks?r.ticks(M).map(A=>({coordinate:r(A)+C,value:A,offset:C})):r.domain().map((A,D)=>({coordinate:r(A)+C,value:d?d[A]:A,index:D,offset:C}))}},fI=ut([ei,Tv,Cg,Ev,D2,k2,Qi],KV),pI=ut(ds,Cg,(e,t)=>{if(!(e==null||t==null))return I0(I0({},e),{},{scale:t})}),QV=ut([ds,Cv,E2,sI],A2);ut((e,t,r)=>T2(e,r),QV,(e,t)=>{if(!(e==null||t==null))return I0(I0({},e),{},{scale:t})});var JV=ut([ei,ob,sb],(e,t,r)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),mI=e=>e.options.defaultTooltipEventType,gI=e=>e.options.validateTooltipEventTypes;function yI(e,t,r){if(e==null)return t;var a=e?"axis":"item";return r==null?t:r.includes(a)?a:t}function O2(e,t){var r=mI(e),a=gI(e);return yI(t,r,a)}function eq(e){return hn(t=>O2(t,e))}var vI=(e,t)=>{var r,a=Number(t);if(!(Wl(a)||t==null))return a>=0?e==null||(r=e[a])===null||r===void 0?void 0:r.value:void 0},tq=e=>e.tooltip.settings,nf={active:!1,index:null,dataKey:void 0,coordinate:void 0},nq={itemInteraction:{click:nf,hover:nf},axisInteraction:{click:nf,hover:nf},keyboardInteraction:nf,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},_I=il({name:"tooltip",initialState:nq,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=Zh(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:rq,removeTooltipEntrySettings:iq,setTooltipSettingsState:aq,setActiveMouseOverItemIndex:oq,mouseLeaveItem:une,mouseLeaveChart:bI,setActiveClickItemIndex:hne,setMouseOverAxisIndex:xI,setMouseClickAxisIndex:sq,setSyncInteraction:Nw,setKeyboardInteraction:Bw}=_I.actions,lq=_I.reducer;function ME(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function N_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ME(Object(r),!0).forEach(function(a){cq(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ME(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function cq(e,t,r){return(t=uq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uq(e){var t=hq(e,"string");return typeof t=="symbol"?t:t+""}function hq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dq(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function fq(e){return e.index!=null}var wI=(e,t,r,a)=>{if(t==null)return nf;var d=dq(e,t,r);if(d==null)return nf;if(d.active)return d;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var p=e.settings.active===!0;if(fq(d)){if(p)return N_(N_({},d),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a};return N_(N_({},nf),{},{coordinate:d.coordinate})},I2=(e,t)=>{var r=e?.index;if(r==null)return null;var a=Number(r);if(!Uc(a))return r;var d=0,p=1/0;return t.length>0&&(p=t.length-1),String(Math.max(d,Math.min(a,p)))},SI=(e,t,r,a,d,p,m,s)=>{if(!(p==null||s==null)){var M=m[0],C=M==null?void 0:s(M.positions,p);if(C!=null)return C;var A=d?.[Number(p)];if(A)switch(r){case"horizontal":return{x:A.coordinate,y:(a.top+t)/2};default:return{x:(a.left+e)/2,y:A.coordinate}}}},TI=(e,t,r,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var d;return r==="hover"?d=e.itemInteraction.hover.dataKey:d=e.itemInteraction.click.dataKey,d==null&&a!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(p=>{var m;return((m=p.settings)===null||m===void 0?void 0:m.dataKey)===d})},Av=e=>e.options.tooltipPayloadSearcher,Eg=e=>e.tooltip;function CE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function EE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CE(Object(r),!0).forEach(function(a){pq(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function pq(e,t,r){return(t=mq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mq(e){var t=gq(e,"string");return typeof t=="symbol"?t:t+""}function gq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yq(e,t){return e??t}var MI=(e,t,r,a,d,p,m)=>{if(!(t==null||p==null)){var{chartData:s,computedData:M,dataStartIndex:C,dataEndIndex:A}=r,D=[];return e.reduce((R,j)=>{var G,{dataDefinedOnItem:V,settings:H}=j,Q=yq(V,s),te=Array.isArray(Q)?hk(Q,C,A):Q,ne=(G=H?.dataKey)!==null&&G!==void 0?G:a,me=H?.nameKey,fe;if(a&&Array.isArray(te)&&!Array.isArray(te[0])&&m==="axis"?fe=iD(te,a,d):fe=p(te,t,M,me),Array.isArray(fe))fe.forEach(ye=>{var Oe=EE(EE({},H),{},{name:ye.name,unit:ye.unit,color:void 0,fill:void 0});R.push(uC({tooltipEntrySettings:Oe,dataKey:ye.dataKey,payload:ye.payload,value:Vo(ye.payload,ye.dataKey),name:ye.name}))});else{var _e;R.push(uC({tooltipEntrySettings:H,dataKey:ne,payload:fe,value:Vo(fe,ne),name:(_e=Vo(fe,me))!==null&&_e!==void 0?_e:H?.name}))}return R},D)}},z2=ut([Aa,ei,zO,y2,ua],rI),vq=ut([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),_q=ut([ua,Tg],RO),Pv=ut([vq,Aa,_q],LO),bq=ut([Pv],e=>e.filter(S2)),xq=ut([Pv],UO),Ag=ut([xq,hf],$O),wq=ut([bq,hf,Aa],kO),R2=ut([Ag,Aa,Pv],VO),Sq=ut([Aa],C2),Tq=ut([Pv],e=>e.filter(S2)),Mq=ut([wq,Tq,vb],GO),Cq=ut([Mq,hf,ua],HO),Eq=ut([Pv],BO),Aq=ut([Ag,Aa,Eq,Sb,ua],ZO),Pq=ut([YO,ua,Tg],Mg),Dq=ut([Pq,ua],QO),kq=ut([XO,ua,Tg],Mg),Oq=ut([kq,ua],JO),Iq=ut([KO,ua,Tg],Mg),zq=ut([Iq,ua],eI),Rq=ut([Dq,zq,Oq],z0),jq=ut([Aa,Sq,Cq,Aq,Rq,ei,ua],tI),CI=ut([Aa,ei,Ag,R2,vb,ua,jq],nI),Lq=ut([CI,Aa,z2],iI),Nq=ut([Aa,CI,Lq,ua],aI),EI=e=>{var t=ua(e),r=Tg(e),a=!1;return Ev(e,t,r,a)},AI=ut([Aa,EI],_b),PI=ut([Aa,z2,Nq,AI],A2),Bq=ut([ei,R2,Aa,ua],uI),Fq=ut([ei,R2,Aa,ua],hI),Uq=(e,t,r,a,d,p,m,s)=>{if(t){var{type:M}=t,C=lf(e,s);if(a){var A=r==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,D=M==="category"&&a.bandwidth?a.bandwidth()/A:0;return D=s==="angleAxis"&&d!=null&&d?.length>=2?Hl(d[0]-d[1])*2*D:D,C&&m?m.map((R,j)=>({coordinate:a(R)+D,value:R,index:j,offset:D})):a.domain().map((R,j)=>({coordinate:a(R)+D,value:p?p[R]:R,index:j,offset:D}))}}},cd=ut([ei,Aa,z2,PI,EI,Bq,Fq,ua],Uq),j2=ut([mI,gI,tq],(e,t,r)=>yI(r.shared,e,t)),DI=e=>e.tooltip.settings.trigger,L2=e=>e.tooltip.settings.defaultIndex,Cb=ut([Eg,j2,DI,L2],wI),sv=ut([Cb,Ag],I2),kI=ut([cd,sv],vI),$q=ut([Cb],e=>{if(e)return e.dataKey}),OI=ut([Eg,j2,DI,L2],TI),Vq=ut([id,ad,ei,eo,cd,L2,OI,Av],SI),qq=ut([Cb,Vq],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),Gq=ut([Cb],e=>e.active),Hq=ut([OI,sv,hf,DO,kI,Av,j2],MI),Zq=ut([Hq],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function AE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function PE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AE(Object(r),!0).forEach(function(a){Wq(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Wq(e,t,r){return(t=Yq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yq(e){var t=Xq(e,"string");return typeof t=="symbol"?t:t+""}function Xq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kq=()=>hn(Aa),Qq=()=>{var e=Kq(),t=hn(cd),r=hn(PI);return bw(PE(PE({},e),{},{scale:r}),t)},Jq=()=>hn(y2),N2=(e,t)=>t,II=(e,t,r)=>r,B2=(e,t,r,a)=>a,eG=ut(cd,e=>eb(e,t=>t.coordinate)),F2=ut([Eg,N2,II,B2],wI),zI=ut([F2,Ag],I2),tG=(e,t,r)=>{if(t!=null){var a=Eg(e);return t==="axis"?r==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:r==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},RI=ut([Eg,N2,II,B2],TI),R0=ut([id,ad,ei,eo,cd,B2,RI,Av],SI),nG=ut([F2,R0],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),jI=ut(cd,zI,vI),rG=ut([RI,zI,hf,DO,jI,Av,N2],MI),iG=ut([F2],e=>({isActive:e.active,activeIndex:e.index})),aG=(e,t,r,a,d,p,m,s)=>{if(!(!e||!t||!a||!d||!p)){var M=m6(e.chartX,e.chartY,t,r,s);if(M){var C=y6(M,t),A=a6(C,m,p,a,d),D=g6(t,p,A,M);return{activeIndex:String(A),activeCoordinate:D}}}};function Fw(){return Fw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Fw.apply(null,arguments)}function DE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function B_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DE(Object(r),!0).forEach(function(a){oG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function oG(e,t,r){return(t=sG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sG(e){var t=lG(e,"string");return typeof t=="symbol"?t:t+""}function lG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cG(e){var{coordinate:t,payload:r,index:a,offset:d,tooltipAxisBandSize:p,layout:m,cursor:s,tooltipEventType:M,chartName:C}=e,A=t,D=r,R=a;if(!s||!A||C!=="ScatterChart"&&M!=="axis")return null;var j,G;if(C==="ScatterChart")j=A,G=xF;else if(C==="BarChart")j=wF(m,A,d,p),G=JF;else if(m==="radial"){var{cx:V,cy:H,radius:Q,startAngle:te,endAngle:ne}=Ck(A);j={cx:V,cy:H,startAngle:te,endAngle:ne,innerRadius:Q,outerRadius:Q},G=r8}else j={points:i8(m,A,d)},G=bk;var me=typeof s=="object"&&"className"in s?s.className:void 0,fe=B_(B_(B_(B_({stroke:"#ccc",pointerEvents:"none"},d),j),Ca(s,!1)),{},{payload:D,payloadIndex:R,className:Er("recharts-tooltip-cursor",me)});return F.isValidElement(s)?F.cloneElement(s,fe):F.createElement(G,fe)}function uG(e){var t=Qq(),r=yk(),a=VS(),d=Jq();return F.createElement(cG,Fw({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:a,tooltipAxisBandSize:t,chartName:d}))}var LI=F.createContext(null),hG=()=>F.useContext(LI),C1={exports:{}},kE;function dG(){return kE||(kE=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function d(M,C,A){this.fn=M,this.context=C,this.once=A||!1}function p(M,C,A,D,R){if(typeof A!="function")throw new TypeError("The listener must be a function");var j=new d(A,D||M,R),G=r?r+C:C;return M._events[G]?M._events[G].fn?M._events[G]=[M._events[G],j]:M._events[G].push(j):(M._events[G]=j,M._eventsCount++),M}function m(M,C){--M._eventsCount===0?M._events=new a:delete M._events[C]}function s(){this._events=new a,this._eventsCount=0}s.prototype.eventNames=function(){var C=[],A,D;if(this._eventsCount===0)return C;for(D in A=this._events)t.call(A,D)&&C.push(r?D.slice(1):D);return Object.getOwnPropertySymbols?C.concat(Object.getOwnPropertySymbols(A)):C},s.prototype.listeners=function(C){var A=r?r+C:C,D=this._events[A];if(!D)return[];if(D.fn)return[D.fn];for(var R=0,j=D.length,G=new Array(j);R<j;R++)G[R]=D[R].fn;return G},s.prototype.listenerCount=function(C){var A=r?r+C:C,D=this._events[A];return D?D.fn?1:D.length:0},s.prototype.emit=function(C,A,D,R,j,G){var V=r?r+C:C;if(!this._events[V])return!1;var H=this._events[V],Q=arguments.length,te,ne;if(H.fn){switch(H.once&&this.removeListener(C,H.fn,void 0,!0),Q){case 1:return H.fn.call(H.context),!0;case 2:return H.fn.call(H.context,A),!0;case 3:return H.fn.call(H.context,A,D),!0;case 4:return H.fn.call(H.context,A,D,R),!0;case 5:return H.fn.call(H.context,A,D,R,j),!0;case 6:return H.fn.call(H.context,A,D,R,j,G),!0}for(ne=1,te=new Array(Q-1);ne<Q;ne++)te[ne-1]=arguments[ne];H.fn.apply(H.context,te)}else{var me=H.length,fe;for(ne=0;ne<me;ne++)switch(H[ne].once&&this.removeListener(C,H[ne].fn,void 0,!0),Q){case 1:H[ne].fn.call(H[ne].context);break;case 2:H[ne].fn.call(H[ne].context,A);break;case 3:H[ne].fn.call(H[ne].context,A,D);break;case 4:H[ne].fn.call(H[ne].context,A,D,R);break;default:if(!te)for(fe=1,te=new Array(Q-1);fe<Q;fe++)te[fe-1]=arguments[fe];H[ne].fn.apply(H[ne].context,te)}}return!0},s.prototype.on=function(C,A,D){return p(this,C,A,D,!1)},s.prototype.once=function(C,A,D){return p(this,C,A,D,!0)},s.prototype.removeListener=function(C,A,D,R){var j=r?r+C:C;if(!this._events[j])return this;if(!A)return m(this,j),this;var G=this._events[j];if(G.fn)G.fn===A&&(!R||G.once)&&(!D||G.context===D)&&m(this,j);else{for(var V=0,H=[],Q=G.length;V<Q;V++)(G[V].fn!==A||R&&!G[V].once||D&&G[V].context!==D)&&H.push(G[V]);H.length?this._events[j]=H.length===1?H[0]:H:m(this,j)}return this},s.prototype.removeAllListeners=function(C){var A;return C?(A=r?r+C:C,this._events[A]&&m(this,A)):(this._events=new a,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s})(C1)),C1.exports}var fG=dG();const pG=Fu(fG);var lv=new pG,Uw="recharts.syncEvent.tooltip",OE="recharts.syncEvent.brush";function mG(e,t){if(t){var r=Number.parseInt(t,10);if(!Wl(r))return e?.[r]}}var gG={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},NI=il({name:"options",initialState:gG,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),yG=NI.reducer,{createEventEmitter:vG}=NI.actions;function _G(e){return e.tooltip.syncInteraction}var bG={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},BI=il({name:"chartData",initialState:bG,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:a}=t.payload;r!=null&&(e.dataStartIndex=r),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:IE,setDataStartEndIndexes:xG,setComputedData:dne}=BI.actions,wG=BI.reducer,SG=["x","y"];function zE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function _p(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zE(Object(r),!0).forEach(function(a){TG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function TG(e,t,r){return(t=MG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MG(e){var t=CG(e,"string");return typeof t=="symbol"?t:t+""}function CG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EG(e,t){if(e==null)return{};var r,a,d=AG(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)r=p[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(d[r]=e[r])}return d}function AG(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var FI=()=>{};function PG(){var e=hn(v2),t=hn(_2),r=Ja(),a=hn(SO),d=hn(cd),p=VS(),m=FS(),s=hn(M=>M.rootProps.className);F.useEffect(()=>{if(e==null)return FI;var M=(C,A,D)=>{if(t!==D&&e===C){if(a==="index"){var R;if(m&&A!==null&&A!==void 0&&(R=A.payload)!==null&&R!==void 0&&R.coordinate){var j=A.payload.coordinate,{x:G,y:V}=j,H=EG(j,SG),Q=_p(_p(_p({},H),typeof G=="number"&&{x:Math.max(m.x,Math.min(G,m.x+m.width))}),typeof V=="number"&&{y:Math.max(m.y,Math.min(V,m.y+m.height))}),te=_p(_p({},A),{},{payload:_p(_p({},A.payload),{},{coordinate:Q})});r(te)}else r(A);return}if(d!=null){var ne;if(typeof a=="function"){var me={activeTooltipIndex:A.payload.index==null?void 0:Number(A.payload.index),isTooltipActive:A.payload.active,activeIndex:A.payload.index==null?void 0:Number(A.payload.index),activeLabel:A.payload.label,activeDataKey:A.payload.dataKey,activeCoordinate:A.payload.coordinate},fe=a(d,me);ne=d[fe]}else a==="value"&&(ne=d.find(Et=>String(Et.value)===A.payload.label));var{coordinate:_e}=A.payload;if(ne==null||A.payload.active===!1||_e==null||m==null){r(Nw({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:ye,y:Oe}=_e,nt=Math.min(ye,m.x+m.width),ft=Math.min(Oe,m.y+m.height),rt={x:p==="horizontal"?ne.coordinate:nt,y:p==="horizontal"?ft:ne.coordinate},at=Nw({active:A.payload.active,coordinate:rt,dataKey:A.payload.dataKey,index:String(ne.index),label:A.payload.label});r(at)}}};return lv.on(Uw,M),()=>{lv.off(Uw,M)}},[s,r,t,e,a,d,p,m])}function DG(){var e=hn(v2),t=hn(_2),r=Ja();F.useEffect(()=>{if(e==null)return FI;var a=(d,p,m)=>{t!==m&&e===d&&r(xG(p))};return lv.on(OE,a),()=>{lv.off(OE,a)}},[r,t,e])}function kG(){var e=Ja();F.useEffect(()=>{e(vG())},[e]),PG(),DG()}function OG(e,t,r,a,d,p){var m=hn(R=>tG(R,e,t)),s=hn(_2),M=hn(v2),C=hn(SO),A=hn(_G),D=A?.active;F.useEffect(()=>{if(!D&&M!=null&&s!=null){var R=Nw({active:p,coordinate:r,dataKey:m,index:d,label:typeof a=="number"?String(a):a});lv.emit(Uw,M,R,s)}},[D,r,m,d,a,s,M,C,p])}function RE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function jE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RE(Object(r),!0).forEach(function(a){IG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function IG(e,t,r){return(t=zG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zG(e){var t=RG(e,"string");return typeof t=="symbol"?t:t+""}function RG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jG(e){return e.dataKey}function LG(e,t){return F.isValidElement(e)?F.cloneElement(e,t):typeof e=="function"?F.createElement(e,t):F.createElement(J6,t)}var LE=[],NG={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!bg.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function BG(e){var t=Ql(e,NG),{active:r,allowEscapeViewBox:a,animationDuration:d,animationEasing:p,content:m,filterNull:s,isAnimationActive:M,offset:C,payloadUniqBy:A,position:D,reverseDirection:R,useTranslate3d:j,wrapperStyle:G,cursor:V,shared:H,trigger:Q,defaultIndex:te,portal:ne,axisId:me}=t,fe=Ja(),_e=typeof te=="number"?String(te):te;F.useEffect(()=>{fe(aq({shared:H,trigger:Q,axisId:me,active:r,defaultIndex:_e}))},[fe,H,Q,me,r,_e]);var ye=FS(),Oe=_k(),nt=eq(H),{activeIndex:ft,isActive:rt}=hn(jt=>iG(jt,nt,Q,_e)),at=hn(jt=>rG(jt,nt,Q,_e)),Et=hn(jt=>jI(jt,nt,Q,_e)),At=hn(jt=>nG(jt,nt,Q,_e)),zt=at,Le=hG(),Qe=r??rt,[Ve,ht]=FD([zt,Qe]),qt=nt==="axis"?Et:void 0;OG(nt,Q,At,qt,ft,Qe);var Ae=ne??Le;if(Ae==null)return null;var qe=zt??LE;Qe||(qe=LE),s&&qe.length&&(qe=RD(zt.filter(jt=>jt.value!=null&&(jt.hide!==!0||t.includeHidden)),A,jG));var _t=qe.length>0,Tt=F.createElement(oF,{allowEscapeViewBox:a,animationDuration:d,animationEasing:p,isAnimationActive:M,active:Qe,coordinate:At,hasPayload:_t,offset:C,position:D,reverseDirection:R,useTranslate3d:j,viewBox:ye,wrapperStyle:G,lastBoundingBox:Ve,innerRef:ht,hasPortalFromProps:!!ne},LG(m,jE(jE({},t),{},{payload:qe,label:qt,active:Qe,coordinate:At,accessibilityLayer:Oe})));return F.createElement(F.Fragment,null,Vp.createPortal(Tt,Ae),Qe&&F.createElement(uG,{cursor:V,tooltipEventType:nt,coordinate:At,payload:zt,index:ft}))}var E1={},A1={},P1={},NE;function FG(){return NE||(NE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,a,{signal:d,edges:p}={}){let m,s=null;const M=p!=null&&p.includes("leading"),C=p==null||p.includes("trailing"),A=()=>{s!==null&&(r.apply(m,s),m=void 0,s=null)},D=()=>{C&&A(),V()};let R=null;const j=()=>{R!=null&&clearTimeout(R),R=setTimeout(()=>{R=null,D()},a)},G=()=>{R!==null&&(clearTimeout(R),R=null)},V=()=>{G(),m=void 0,s=null},H=()=>{A()},Q=function(...te){if(d?.aborted)return;m=this,s=te;const ne=R==null;j(),M&&ne&&A()};return Q.schedule=j,Q.cancel=V,Q.flush=H,d?.addEventListener("abort",V,{once:!0}),Q}e.debounce=t})(P1)),P1}var BE;function UG(){return BE||(BE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FG();function r(a,d=0,p={}){typeof p!="object"&&(p={});const{leading:m=!1,trailing:s=!0,maxWait:M}=p,C=Array(2);m&&(C[0]="leading"),s&&(C[1]="trailing");let A,D=null;const R=t.debounce(function(...V){A=a.apply(this,V),D=null},d,{edges:C}),j=function(...V){return M!=null&&(D===null&&(D=Date.now()),Date.now()-D>=M)?(A=a.apply(this,V),D=Date.now(),R.cancel(),R.schedule(),A):(R.apply(this,V),A)},G=()=>(R.flush(),A);return j.cancel=R.cancel,j.flush=G,j}e.debounce=r})(A1)),A1}var FE;function $G(){return FE||(FE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UG();function r(a,d=0,p={}){const{leading:m=!0,trailing:s=!0}=p;return t.debounce(a,d,{leading:m,maxWait:d,trailing:s})}e.throttle=r})(E1)),E1}var D1,UE;function VG(){return UE||(UE=1,D1=$G().throttle),D1}var qG=VG();const GG=Fu(qG);var Yy=function(t,r){for(var a=arguments.length,d=new Array(a>2?a-2:0),p=2;p<a;p++)d[p-2]=arguments[p]};function $E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function k1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$E(Object(r),!0).forEach(function(a){HG(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$E(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function HG(e,t,r){return(t=ZG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZG(e){var t=WG(e,"string");return typeof t=="symbol"?t:t+""}function WG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YG=F.forwardRef((e,t)=>{var{aspect:r,initialDimension:a={width:-1,height:-1},width:d="100%",height:p="100%",minWidth:m=0,minHeight:s,maxHeight:M,children:C,debounce:A=0,id:D,className:R,onResize:j,style:G={}}=e,V=F.useRef(null),H=F.useRef();H.current=j,F.useImperativeHandle(t,()=>V.current);var[Q,te]=F.useState({containerWidth:a.width,containerHeight:a.height}),ne=F.useCallback((fe,_e)=>{te(ye=>{var Oe=Math.round(fe),nt=Math.round(_e);return ye.containerWidth===Oe&&ye.containerHeight===nt?ye:{containerWidth:Oe,containerHeight:nt}})},[]);F.useEffect(()=>{var fe=nt=>{var ft,{width:rt,height:at}=nt[0].contentRect;ne(rt,at),(ft=H.current)===null||ft===void 0||ft.call(H,rt,at)};A>0&&(fe=GG(fe,A,{trailing:!0,leading:!1}));var _e=new ResizeObserver(fe),{width:ye,height:Oe}=V.current.getBoundingClientRect();return ne(ye,Oe),_e.observe(V.current),()=>{_e.disconnect()}},[ne,A]);var me=F.useMemo(()=>{var{containerWidth:fe,containerHeight:_e}=Q;if(fe<0||_e<0)return null;Yy(Mp(d)||Mp(p),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,d,p),Yy(!r||r>0,"The aspect(%s) must be greater than zero.",r);var ye=Mp(d)?fe:d,Oe=Mp(p)?_e:p;return r&&r>0&&(ye?Oe=ye/r:Oe&&(ye=Oe*r),M&&Oe>M&&(Oe=M)),Yy(ye>0||Oe>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,ye,Oe,d,p,m,s,r),F.Children.map(C,nt=>F.cloneElement(nt,{width:ye,height:Oe,style:k1({width:ye,height:Oe},nt.props.style)}))},[r,C,p,M,s,m,Q,d]);return F.createElement("div",{id:D?"".concat(D):void 0,className:Er("recharts-responsive-container",R),style:k1(k1({},G),{},{width:d,height:p,minWidth:m,minHeight:s,maxHeight:M}),ref:V},F.createElement("div",{style:{width:0,height:0,overflow:"visible"}},me))});function XG(e,t,r){return(t=KG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KG(e){var t=QG(e,"string");return typeof t=="symbol"?t:t+""}function QG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class JG{constructor(t){XG(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var a=this.cache.keys().next().value;this.cache.delete(a)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function VE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function e9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VE(Object(r),!0).forEach(function(a){t9(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function t9(e,t,r){return(t=n9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n9(e){var t=r9(e,"string");return typeof t=="symbol"?t:t+""}function r9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var i9={cacheSize:2e3,enableCache:!0},UI=e9({},i9),qE=new JG(UI.cacheSize),a9={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},GE="recharts_measurement_span";function o9(e,t){var r=t.fontSize||"",a=t.fontFamily||"",d=t.fontWeight||"",p=t.fontStyle||"",m=t.letterSpacing||"",s=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(a,"|").concat(d,"|").concat(p,"|").concat(m,"|").concat(s)}var HE=(e,t)=>{try{var r=document.getElementById(GE);r||(r=document.createElement("span"),r.setAttribute("id",GE),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,a9,t),r.textContent="".concat(e);var a=r.getBoundingClientRect();return{width:a.width,height:a.height}}catch{return{width:0,height:0}}},Xy=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||bg.isSsr)return{width:0,height:0};if(!UI.enableCache)return HE(t,r);var a=o9(t,r),d=qE.get(a);if(d)return d;var p=HE(t,r);return qE.set(a,p),p},ZE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,WE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,s9=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,l9=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,$I={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},c9=Object.keys($I),Xm="NaN";function u9(e,t){return e*$I[t]}class us{static parse(t){var r,[,a,d]=(r=l9.exec(t))!==null&&r!==void 0?r:[];return new us(parseFloat(a),d??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Wl(t)&&(this.unit=""),r!==""&&!s9.test(r)&&(this.num=NaN,this.unit=""),c9.includes(r)&&(this.num=u9(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new us(NaN,""):new us(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new us(NaN,""):new us(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new us(NaN,""):new us(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new us(NaN,""):new us(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Wl(this.num)}}function VI(e){if(e.includes(Xm))return Xm;for(var t=e;t.includes("*")||t.includes("/");){var r,[,a,d,p]=(r=ZE.exec(t))!==null&&r!==void 0?r:[],m=us.parse(a??""),s=us.parse(p??""),M=d==="*"?m.multiply(s):m.divide(s);if(M.isNaN())return Xm;t=t.replace(ZE,M.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var C,[,A,D,R]=(C=WE.exec(t))!==null&&C!==void 0?C:[],j=us.parse(A??""),G=us.parse(R??""),V=D==="+"?j.add(G):j.subtract(G);if(V.isNaN())return Xm;t=t.replace(WE,V.toString())}return t}var YE=/\(([^()]*)\)/;function h9(e){for(var t=e,r;(r=YE.exec(t))!=null;){var[,a]=r;t=t.replace(YE,VI(a))}return t}function d9(e){var t=e.replace(/\s+/g,"");return t=h9(t),t=VI(t),t}function f9(e){try{return d9(e)}catch{return Xm}}function O1(e){var t=f9(e.slice(5,-1));return t===Xm?"":t}var p9=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],m9=["dx","dy","angle","className","breakAll"];function $w(){return $w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},$w.apply(null,arguments)}function XE(e,t){if(e==null)return{};var r,a,d=g9(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)r=p[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(d[r]=e[r])}return d}function g9(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var qI=/[ \f\n\r\t\v\u2028\u2029]+/,GI=e=>{var{children:t,breakAll:r,style:a}=e;try{var d=[];Ma(t)||(r?d=t.toString().split(""):d=t.toString().split(qI));var p=d.map(s=>({word:s,width:Xy(s,a).width})),m=r?0:Xy(" ",a).width;return{wordsWithComputedWidth:p,spaceWidth:m}}catch{return null}},y9=(e,t,r,a,d)=>{var{maxLines:p,children:m,style:s,breakAll:M}=e,C=bn(p),A=m,D=function(){var rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return rt.reduce((at,Et)=>{var{word:At,width:zt}=Et,Le=at[at.length-1];if(Le&&(a==null||d||Le.width+zt+r<Number(a)))Le.words.push(At),Le.width+=zt+r;else{var Qe={words:[At],width:zt};at.push(Qe)}return at},[])},R=D(t),j=ft=>ft.reduce((rt,at)=>rt.width>at.width?rt:at);if(!C||d)return R;var G=R.length>p||j(R).width>Number(a);if(!G)return R;for(var V="…",H=ft=>{var rt=A.slice(0,ft),at=GI({breakAll:M,style:s,children:rt+V}).wordsWithComputedWidth,Et=D(at),At=Et.length>p||j(Et).width>Number(a);return[At,Et]},Q=0,te=A.length-1,ne=0,me;Q<=te&&ne<=A.length-1;){var fe=Math.floor((Q+te)/2),_e=fe-1,[ye,Oe]=H(_e),[nt]=H(fe);if(!ye&&!nt&&(Q=fe+1),ye&&nt&&(te=fe-1),!ye&&nt){me=Oe;break}ne++}return me||R},KE=e=>{var t=Ma(e)?[]:e.toString().split(qI);return[{words:t}]},v9=e=>{var{width:t,scaleToFit:r,children:a,style:d,breakAll:p,maxLines:m}=e;if((t||r)&&!bg.isSsr){var s,M,C=GI({breakAll:p,children:a,style:d});if(C){var{wordsWithComputedWidth:A,spaceWidth:D}=C;s=A,M=D}else return KE(a);return y9({breakAll:p,children:a,maxLines:m,style:d},s,M,t,r)}return KE(a)},QE="#808080",U2=F.forwardRef((e,t)=>{var{x:r=0,y:a=0,lineHeight:d="1em",capHeight:p="0.71em",scaleToFit:m=!1,textAnchor:s="start",verticalAnchor:M="end",fill:C=QE}=e,A=XE(e,p9),D=F.useMemo(()=>v9({breakAll:A.breakAll,children:A.children,maxLines:A.maxLines,scaleToFit:m,style:A.style,width:A.width}),[A.breakAll,A.children,A.maxLines,m,A.style,A.width]),{dx:R,dy:j,angle:G,className:V,breakAll:H}=A,Q=XE(A,m9);if(!Lu(r)||!Lu(a)||D.length===0)return null;var te=r+(bn(R)?R:0),ne=a+(bn(j)?j:0),me;switch(M){case"start":me=O1("calc(".concat(p,")"));break;case"middle":me=O1("calc(".concat((D.length-1)/2," * -").concat(d," + (").concat(p," / 2))"));break;default:me=O1("calc(".concat(D.length-1," * -").concat(d,")"));break}var fe=[];if(m){var _e=D[0].width,{width:ye}=A;fe.push("scale(".concat(bn(ye)?ye/_e:1,")"))}return G&&fe.push("rotate(".concat(G,", ").concat(te,", ").concat(ne,")")),fe.length&&(Q.transform=fe.join(" ")),F.createElement("text",$w({},Ca(Q,!0),{ref:t,x:te,y:ne,className:Er("recharts-text",V),textAnchor:s,fill:C.includes("url")?QE:C}),D.map((Oe,nt)=>{var ft=Oe.words.join(H?"":" ");return F.createElement("tspan",{x:te,dy:nt===0?me:d,key:"".concat(ft,"-").concat(nt)},ft)}))});U2.displayName="Text";var _9=["labelRef"];function b9(e,t){if(e==null)return{};var r,a,d=x9(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)r=p[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(d[r]=e[r])}return d}function x9(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function JE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function Fi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JE(Object(r),!0).forEach(function(a){w9(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function w9(e,t,r){return(t=S9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S9(e){var t=T9(e,"string");return typeof t=="symbol"?t:t+""}function T9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uh(){return Uh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Uh.apply(null,arguments)}var HI=F.createContext(null),M9=e=>{var{x:t,y:r,width:a,height:d,children:p}=e,m=F.useMemo(()=>({x:t,y:r,width:a,height:d}),[t,r,a,d]);return F.createElement(HI.Provider,{value:m},p)},ZI=()=>{var e=F.useContext(HI),t=FS();return e||t},C9=F.createContext(null),E9=()=>{var e=F.useContext(C9),t=hn(AO);return e||t},A9=e=>{var{value:t,formatter:r}=e,a=Ma(e.children)?t:e.children;return typeof r=="function"?r(a):a},$2=e=>e!=null&&typeof e=="function",P9=(e,t)=>{var r=Hl(t-e),a=Math.min(Math.abs(t-e),360);return r*a},D9=(e,t,r,a,d)=>{var{offset:p,className:m}=e,{cx:s,cy:M,innerRadius:C,outerRadius:A,startAngle:D,endAngle:R,clockWise:j}=d,G=(C+A)/2,V=P9(D,R),H=V>=0?1:-1,Q,te;switch(t){case"insideStart":Q=D+H*p,te=j;break;case"insideEnd":Q=R-H*p,te=!j;break;case"end":Q=R+H*p,te=j;break;default:throw new Error("Unsupported position ".concat(t))}te=V<=0?te:!te;var ne=Qa(s,M,G,Q),me=Qa(s,M,G,Q+(te?1:-1)*359),fe="M".concat(ne.x,",").concat(ne.y,`
    A`).concat(G,",").concat(G,",0,1,").concat(te?0:1,`,
    `).concat(me.x,",").concat(me.y),_e=Ma(e.id)?Qy("recharts-radial-line-"):e.id;return F.createElement("text",Uh({},a,{dominantBaseline:"central",className:Er("recharts-radial-bar-label",m)}),F.createElement("defs",null,F.createElement("path",{id:_e,d:fe})),F.createElement("textPath",{xlinkHref:"#".concat(_e)},r))},k9=(e,t,r)=>{var{cx:a,cy:d,innerRadius:p,outerRadius:m,startAngle:s,endAngle:M}=e,C=(s+M)/2;if(r==="outside"){var{x:A,y:D}=Qa(a,d,m+t,C);return{x:A,y:D,textAnchor:A>=a?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:a,y:d,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:a,y:d,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:a,y:d,textAnchor:"middle",verticalAnchor:"end"};var R=(p+m)/2,{x:j,y:G}=Qa(a,d,R,C);return{x:j,y:G,textAnchor:"middle",verticalAnchor:"middle"}},WI=e=>"cx"in e&&bn(e.cx),O9=(e,t)=>{var{parentViewBox:r,offset:a,position:d}=e,p;r!=null&&!WI(r)&&(p=r);var{x:m,y:s,width:M,height:C}=t,A=C>=0?1:-1,D=A*a,R=A>0?"end":"start",j=A>0?"start":"end",G=M>=0?1:-1,V=G*a,H=G>0?"end":"start",Q=G>0?"start":"end";if(d==="top"){var te={x:m+M/2,y:s-A*a,textAnchor:"middle",verticalAnchor:R};return Fi(Fi({},te),p?{height:Math.max(s-p.y,0),width:M}:{})}if(d==="bottom"){var ne={x:m+M/2,y:s+C+D,textAnchor:"middle",verticalAnchor:j};return Fi(Fi({},ne),p?{height:Math.max(p.y+p.height-(s+C),0),width:M}:{})}if(d==="left"){var me={x:m-V,y:s+C/2,textAnchor:H,verticalAnchor:"middle"};return Fi(Fi({},me),p?{width:Math.max(me.x-p.x,0),height:C}:{})}if(d==="right"){var fe={x:m+M+V,y:s+C/2,textAnchor:Q,verticalAnchor:"middle"};return Fi(Fi({},fe),p?{width:Math.max(p.x+p.width-fe.x,0),height:C}:{})}var _e=p?{width:M,height:C}:{};return d==="insideLeft"?Fi({x:m+V,y:s+C/2,textAnchor:Q,verticalAnchor:"middle"},_e):d==="insideRight"?Fi({x:m+M-V,y:s+C/2,textAnchor:H,verticalAnchor:"middle"},_e):d==="insideTop"?Fi({x:m+M/2,y:s+D,textAnchor:"middle",verticalAnchor:j},_e):d==="insideBottom"?Fi({x:m+M/2,y:s+C-D,textAnchor:"middle",verticalAnchor:R},_e):d==="insideTopLeft"?Fi({x:m+V,y:s+D,textAnchor:Q,verticalAnchor:j},_e):d==="insideTopRight"?Fi({x:m+M-V,y:s+D,textAnchor:H,verticalAnchor:j},_e):d==="insideBottomLeft"?Fi({x:m+V,y:s+C-D,textAnchor:Q,verticalAnchor:R},_e):d==="insideBottomRight"?Fi({x:m+M-V,y:s+C-D,textAnchor:H,verticalAnchor:R},_e):d&&typeof d=="object"&&(bn(d.x)||Mp(d.x))&&(bn(d.y)||Mp(d.y))?Fi({x:m+af(d.x,M),y:s+af(d.y,C),textAnchor:"end",verticalAnchor:"end"},_e):Fi({x:m+M/2,y:s+C/2,textAnchor:"middle",verticalAnchor:"middle"},_e)},I9={offset:5};function tf(e){var t=Ql(e,I9),{viewBox:r,position:a,value:d,children:p,content:m,className:s="",textBreakAll:M,labelRef:C}=t,A=E9(),D=ZI(),R=a==="center"?D:A??D,j=r||R;if(!j||Ma(d)&&Ma(p)&&!F.isValidElement(m)&&typeof m!="function")return null;var G=Fi(Fi({},t),{},{viewBox:j});if(F.isValidElement(m)){var{labelRef:V}=G,H=b9(G,_9);return F.cloneElement(m,H)}var Q;if(typeof m=="function"){if(Q=F.createElement(m,G),F.isValidElement(Q))return Q}else Q=A9(t);var te=WI(j),ne=Ca(t,!0);if(te&&(a==="insideStart"||a==="insideEnd"||a==="end"))return D9(t,a,Q,ne,j);var me=te?k9(j,t.offset,t.position):O9(t,j);return F.createElement(U2,Uh({ref:C,className:Er("recharts-label",s)},ne,me,{breakAll:M}),Q)}tf.displayName="Label";var z9=(e,t,r)=>{if(!e)return null;var a={viewBox:t,labelRef:r};return e===!0?F.createElement(tf,Uh({key:"label-implicit"},a)):Lu(e)?F.createElement(tf,Uh({key:"label-implicit",value:e},a)):F.isValidElement(e)?e.type===tf?F.cloneElement(e,Fi({key:"label-implicit"},a)):F.createElement(tf,Uh({key:"label-implicit",content:e},a)):$2(e)?F.createElement(tf,Uh({key:"label-implicit",content:e},a)):e&&typeof e=="object"?F.createElement(tf,Uh({},e,{key:"label-implicit"},a)):null};function R9(e){var{label:t}=e,r=ZI();return z9(t,r)||null}var I1={},z1={},eA;function j9(){return eA||(eA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(z1)),z1}var R1={},tA;function L9(){return tA||(tA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(R1)),R1}var nA;function N9(){return nA||(nA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=j9(),r=L9(),a=OS();function d(p){if(a.isArrayLike(p))return t.last(r.toArray(p))}e.last=d})(I1)),I1}var j1,rA;function B9(){return rA||(rA=1,j1=N9().last),j1}var F9=B9();const U9=Fu(F9);var $9=["valueAccessor"],V9=["dataKey","clockWise","id","textBreakAll"];function j0(){return j0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},j0.apply(null,arguments)}function iA(e,t){if(e==null)return{};var r,a,d=q9(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)r=p[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(d[r]=e[r])}return d}function q9(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var G9=e=>Array.isArray(e.value)?U9(e.value):e.value,YI=F.createContext(void 0),H9=YI.Provider,XI=F.createContext(void 0);XI.Provider;function Z9(){return F.useContext(YI)}function W9(){return F.useContext(XI)}function J_(e){var{valueAccessor:t=G9}=e,r=iA(e,$9),{dataKey:a,clockWise:d,id:p,textBreakAll:m}=r,s=iA(r,V9),M=Z9(),C=W9(),A=M||C;return!A||!A.length?null:F.createElement(_g,{className:"recharts-label-list"},A.map((D,R)=>{var j,G=Ma(a)?t(D,R):Vo(D&&D.payload,a),V=Ma(p)?{}:{id:"".concat(p,"-").concat(R)};return F.createElement(tf,j0({},Ca(D,!0),s,V,{fill:(j=r.fill)!==null&&j!==void 0?j:D.fill,parentViewBox:D.parentViewBox,value:G,textBreakAll:m,viewBox:D.viewBox,key:"label-".concat(R),index:R}))}))}J_.displayName="LabelList";function Y9(e){var{label:t}=e;return t?t===!0?F.createElement(J_,{key:"labelList-implicit"}):F.isValidElement(t)||$2(t)?F.createElement(J_,{key:"labelList-implicit",content:t}):typeof t=="object"?F.createElement(J_,j0({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function Vw(){return Vw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Vw.apply(null,arguments)}var KI=e=>{var{cx:t,cy:r,r:a,className:d}=e,p=Er("recharts-dot",d);return t===+t&&r===+r&&a===+a?F.createElement("circle",Vw({},qp(e),MS(e),{className:p,cx:t,cy:r,r:a})):null},X9={radiusAxis:{},angleAxis:{}},QI=il({name:"polarAxis",initialState:X9,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:fne,removeRadiusAxis:pne,addAngleAxis:mne,removeAngleAxis:gne}=QI.actions,K9=QI.reducer;function Q9(e){var{fn:t,args:r}=e,a=Ja(),d=Kl();return F.useEffect(()=>{if(!d){var p=t(r);return a(rq(p)),()=>{a(iq(p))}}},[t,r,a,d]),null}var J9=()=>{};function e7(e){var{legendPayload:t}=e,r=Ja(),a=Kl();return F.useEffect(()=>a?J9:(r(R6(t)),()=>{r(j6(t))}),[r,a,t]),null}var L1,t7=()=>{var[e]=F.useState(()=>Qy("uid-"));return e},n7=(L1=dS.useId)!==null&&L1!==void 0?L1:t7;function r7(e,t){var r=n7();return t||(e?"".concat(e,"-").concat(r):r)}var i7=F.createContext(void 0),a7=e=>{var{id:t,type:r,children:a}=e,d=r7("recharts-".concat(r),t);return F.createElement(i7.Provider,{value:d},a(d))},o7={cartesianItems:[],polarItems:[]},JI=il({name:"graphicalItems",initialState:o7,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:a}=t.payload,d=Zh(e).cartesianItems.indexOf(r);d>-1&&(e.cartesianItems[d]=a)},removeCartesianGraphicalItem(e,t){var r=Zh(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=Zh(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:s7,replaceCartesianGraphicalItem:l7,removeCartesianGraphicalItem:c7,addPolarGraphicalItem:yne,removePolarGraphicalItem:vne}=JI.actions,u7=JI.reducer;function h7(e){var t=Ja(),r=F.useRef(null);return F.useEffect(()=>{r.current===null?t(s7(e)):r.current!==e&&t(l7({prev:r.current,next:e})),r.current=e},[t,e]),F.useEffect(()=>()=>{r.current&&(t(c7(r.current)),r.current=null)},[t]),null}function aA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function oA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aA(Object(r),!0).forEach(function(a){d7(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function d7(e,t,r){return(t=f7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f7(e){var t=p7(e,"string");return typeof t=="symbol"?t:t+""}function p7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var m7={xAxis:{},yAxis:{},zAxis:{}},ez=il({name:"cartesianAxis",initialState:m7,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:a}=t.payload;e.yAxis[r]&&(e.yAxis[r]=oA(oA({},e.yAxis[r]),{},{width:a}))}}}),{addXAxis:g7,removeXAxis:y7,addYAxis:v7,removeYAxis:_7,addZAxis:_ne,removeZAxis:bne,updateYAxisWidth:b7}=ez.actions,x7=ez.reducer,w7=ut([eo],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),S7=ut([w7,id,ad],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),V2=()=>hn(S7),T7=()=>hn(Zq);function sA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function lA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sA(Object(r),!0).forEach(function(a){M7(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function M7(e,t,r){return(t=C7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C7(e){var t=E7(e,"string");return typeof t=="symbol"?t:t+""}function E7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var A7=e=>{var{point:t,childIndex:r,mainColor:a,activeDot:d,dataKey:p}=e;if(d===!1||t.x==null||t.y==null)return null;var m=lA(lA({index:r,dataKey:p,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Ca(d,!1)),MS(d)),s;return F.isValidElement(d)?s=F.cloneElement(d,m):typeof d=="function"?s=d(m):s=F.createElement(KI,m),F.createElement(_g,{className:"recharts-active-dot"},s)};function P7(e){var{points:t,mainColor:r,activeDot:a,itemDataKey:d}=e,p=hn(sv),m=T7();if(t==null||m==null)return null;var s=t.find(M=>m.includes(M.payload));return Ma(s)?null:A7({point:s,childIndex:Number(p),mainColor:r,dataKey:d,activeDot:a})}var D7={},tz=il({name:"errorBars",initialState:D7,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:a}=t.payload;e[r]||(e[r]=[]),e[r].push(a)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:a,next:d}=t.payload;e[r]&&(e[r]=e[r].map(p=>p.dataKey===a.dataKey&&p.direction===a.direction?d:p))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:a}=t.payload;e[r]&&(e[r]=e[r].filter(d=>d.dataKey!==a.dataKey||d.direction!==a.direction))}}}),{addErrorBar:xne,replaceErrorBar:wne,removeErrorBar:Sne}=tz.actions,k7=tz.reducer,O7=["children"];function I7(e,t){if(e==null)return{};var r,a,d=z7(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)r=p[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(d[r]=e[r])}return d}function z7(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var R7={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},j7=F.createContext(R7);function L7(e){var{children:t}=e,r=I7(e,O7);return F.createElement(j7.Provider,{value:r},t)}function nz(e,t){var r,a,d=hn(C=>sd(C,e)),p=hn(C=>ld(C,t)),m=(r=d?.allowDataOverflow)!==null&&r!==void 0?r:Vs.allowDataOverflow,s=(a=p?.allowDataOverflow)!==null&&a!==void 0?a:qs.allowDataOverflow,M=m||s;return{needClip:M,needClipX:m,needClipY:s}}function N7(e){var{xAxisId:t,yAxisId:r,clipPathId:a}=e,d=V2(),{needClipX:p,needClipY:m,needClip:s}=nz(t,r);if(!s)return null;var{x:M,y:C,width:A,height:D}=d;return F.createElement("clipPath",{id:"clipPath-".concat(a)},F.createElement("rect",{x:p?M:M-A/2,y:m?C:C-D/2,width:p?A:A*2,height:m?D:D*2}))}var B7=e=>{var{chartData:t}=e,r=Ja(),a=Kl();return F.useEffect(()=>a?()=>{}:(r(IE(t)),()=>{r(IE(void 0))}),[t,r,a]),null},cA={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},rz=il({name:"brush",initialState:cA,reducers:{setBrushSettings(e,t){return t.payload==null?cA:t.payload}}}),{setBrushSettings:Tne}=rz.actions,F7=rz.reducer;function U7(e,t,r){return(t=$7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $7(e){var t=V7(e,"string");return typeof t=="symbol"?t:t+""}function V7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class q2{static create(t){return new q2(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(a)switch(a){case"start":return this.scale(t);case"middle":{var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+d}case"end":{var p=this.bandwidth?this.bandwidth():0;return this.scale(t)+p}default:return this.scale(t)}if(r){var m=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+m}return this.scale(t)}}isInRange(t){var r=this.range(),a=r[0],d=r[r.length-1];return a<=d?t>=a&&t<=d:t>=d&&t<=a}}U7(q2,"EPS",1e-4);function q7(e){return(e%180+180)%180}var G7=function(t){var{width:r,height:a}=t,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,p=q7(d),m=p*Math.PI/180,s=Math.atan(a/r),M=m>s&&m<Math.PI-s?a/Math.sin(m):r/Math.cos(m);return Math.abs(M)},H7={dots:[],areas:[],lines:[]},iz=il({name:"referenceElements",initialState:H7,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Zh(e).dots.findIndex(a=>a===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Zh(e).areas.findIndex(a=>a===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Zh(e).lines.findIndex(a=>a===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Mne,removeDot:Cne,addArea:Ene,removeArea:Ane,addLine:Pne,removeLine:Dne}=iz.actions,Z7=iz.reducer,W7=F.createContext(void 0),Y7=e=>{var{children:t}=e,[r]=F.useState("".concat(Qy("recharts"),"-clip")),a=V2();if(a==null)return null;var{x:d,y:p,width:m,height:s}=a;return F.createElement(W7.Provider,{value:r},F.createElement("defs",null,F.createElement("clipPath",{id:r},F.createElement("rect",{x:d,y:p,height:s,width:m}))),t)};function cg(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function az(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var a=[],d=0;d<e.length;d+=t)a.push(e[d]);return a}function X7(e,t,r){var a={width:e.width+t.width,height:e.height+t.height};return G7(a,r)}function K7(e,t,r){var a=r==="width",{x:d,y:p,width:m,height:s}=e;return t===1?{start:a?d:p,end:a?d+m:p+s}:{start:a?d+m:p+s,end:a?d:p}}function L0(e,t,r,a,d){if(e*t<e*a||e*t>e*d)return!1;var p=r();return e*(t-e*p/2-a)>=0&&e*(t+e*p/2-d)<=0}function Q7(e,t){return az(e,t+1)}function J7(e,t,r,a,d){for(var p=(a||[]).slice(),{start:m,end:s}=t,M=0,C=1,A=m,D=function(){var G=a?.[M];if(G===void 0)return{v:az(a,C)};var V=M,H,Q=()=>(H===void 0&&(H=r(G,V)),H),te=G.coordinate,ne=M===0||L0(e,te,Q,A,s);ne||(M=0,A=m,C+=1),ne&&(A=te+e*(Q()/2+d),M+=C)},R;C<=p.length;)if(R=D(),R)return R.v;return[]}function uA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function vo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uA(Object(r),!0).forEach(function(a){eH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function eH(e,t,r){return(t=tH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tH(e){var t=nH(e,"string");return typeof t=="symbol"?t:t+""}function nH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rH(e,t,r,a,d){for(var p=(a||[]).slice(),m=p.length,{start:s}=t,{end:M}=t,C=function(R){var j=p[R],G,V=()=>(G===void 0&&(G=r(j,R)),G);if(R===m-1){var H=e*(j.coordinate+e*V()/2-M);p[R]=j=vo(vo({},j),{},{tickCoord:H>0?j.coordinate-H*e:j.coordinate})}else p[R]=j=vo(vo({},j),{},{tickCoord:j.coordinate});var Q=L0(e,j.tickCoord,V,s,M);Q&&(M=j.tickCoord-e*(V()/2+d),p[R]=vo(vo({},j),{},{isShow:!0}))},A=m-1;A>=0;A--)C(A);return p}function iH(e,t,r,a,d,p){var m=(a||[]).slice(),s=m.length,{start:M,end:C}=t;if(p){var A=a[s-1],D=r(A,s-1),R=e*(A.coordinate+e*D/2-C);m[s-1]=A=vo(vo({},A),{},{tickCoord:R>0?A.coordinate-R*e:A.coordinate});var j=L0(e,A.tickCoord,()=>D,M,C);j&&(C=A.tickCoord-e*(D/2+d),m[s-1]=vo(vo({},A),{},{isShow:!0}))}for(var G=p?s-1:s,V=function(te){var ne=m[te],me,fe=()=>(me===void 0&&(me=r(ne,te)),me);if(te===0){var _e=e*(ne.coordinate-e*fe()/2-M);m[te]=ne=vo(vo({},ne),{},{tickCoord:_e<0?ne.coordinate-_e*e:ne.coordinate})}else m[te]=ne=vo(vo({},ne),{},{tickCoord:ne.coordinate});var ye=L0(e,ne.tickCoord,fe,M,C);ye&&(M=ne.tickCoord+e*(fe()/2+d),m[te]=vo(vo({},ne),{},{isShow:!0}))},H=0;H<G;H++)V(H);return m}function G2(e,t,r){var{tick:a,ticks:d,viewBox:p,minTickGap:m,orientation:s,interval:M,tickFormatter:C,unit:A,angle:D}=e;if(!d||!d.length||!a)return[];if(bn(M)||bg.isSsr){var R;return(R=Q7(d,bn(M)?M:0))!==null&&R!==void 0?R:[]}var j=[],G=s==="top"||s==="bottom"?"width":"height",V=A&&G==="width"?Xy(A,{fontSize:t,letterSpacing:r}):{width:0,height:0},H=(ne,me)=>{var fe=typeof C=="function"?C(ne.value,me):ne.value;return G==="width"?X7(Xy(fe,{fontSize:t,letterSpacing:r}),V,D):Xy(fe,{fontSize:t,letterSpacing:r})[G]},Q=d.length>=2?Hl(d[1].coordinate-d[0].coordinate):1,te=K7(p,Q,G);return M==="equidistantPreserveStart"?J7(Q,te,H,d,m):(M==="preserveStart"||M==="preserveStartEnd"?j=iH(Q,te,H,d,m,M==="preserveStartEnd"):j=rH(Q,te,H,d,m),j.filter(ne=>ne.isShow))}var aH=e=>{var{ticks:t,label:r,labelGapWithTick:a=5,tickSize:d=0,tickMargin:p=0}=e,m=0;if(t){t.forEach(A=>{if(A){var D=A.getBoundingClientRect();D.width>m&&(m=D.width)}});var s=r?r.getBoundingClientRect().width:0,M=d+p,C=m+M+s+(r?a:0);return Math.round(C)}return 0},oH=["axisLine","width","height","className","hide","ticks"],sH=["viewBox"],lH=["viewBox"];function qw(e,t){if(e==null)return{};var r,a,d=cH(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)r=p[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(d[r]=e[r])}return d}function cH(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Lp(){return Lp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Lp.apply(null,arguments)}function hA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function la(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hA(Object(r),!0).forEach(function(a){uH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function uH(e,t,r){return(t=hH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hH(e){var t=dH(e,"string");return typeof t=="symbol"?t:t+""}function dH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var H2={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function fH(e){var{x:t,y:r,width:a,height:d,orientation:p,mirror:m,axisLine:s,otherSvgProps:M}=e;if(!s)return null;var C=la(la(la({},M),Ca(s,!1)),{},{fill:"none"});if(p==="top"||p==="bottom"){var A=+(p==="top"&&!m||p==="bottom"&&m);C=la(la({},C),{},{x1:t,y1:r+A*d,x2:t+a,y2:r+A*d})}else{var D=+(p==="left"&&!m||p==="right"&&m);C=la(la({},C),{},{x1:t+D*a,y1:r,x2:t+D*a,y2:r+d})}return F.createElement("line",Lp({},C,{className:Er("recharts-cartesian-axis-line",X0(s,"className"))}))}function pH(e,t,r,a,d,p,m,s,M){var C,A,D,R,j,G,V=s?-1:1,H=e.tickSize||m,Q=bn(e.tickCoord)?e.tickCoord:e.coordinate;switch(p){case"top":C=A=e.coordinate,R=r+ +!s*d,D=R-V*H,G=D-V*M,j=Q;break;case"left":D=R=e.coordinate,A=t+ +!s*a,C=A-V*H,j=C-V*M,G=Q;break;case"right":D=R=e.coordinate,A=t+ +s*a,C=A+V*H,j=C+V*M,G=Q;break;default:C=A=e.coordinate,R=r+ +s*d,D=R+V*H,G=D+V*M,j=Q;break}return{line:{x1:C,y1:D,x2:A,y2:R},tick:{x:j,y:G}}}function mH(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function gH(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function yH(e){var{option:t,tickProps:r,value:a}=e,d,p=Er(r.className,"recharts-cartesian-axis-tick-value");if(F.isValidElement(t))d=F.cloneElement(t,la(la({},r),{},{className:p}));else if(typeof t=="function")d=t(la(la({},r),{},{className:p}));else{var m="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(m=Er(m,t?.className)),d=F.createElement(U2,Lp({},r,{className:m}),a)}return d}function vH(e){var{ticks:t=[],tick:r,tickLine:a,stroke:d,tickFormatter:p,unit:m,padding:s,tickTextProps:M,orientation:C,mirror:A,x:D,y:R,width:j,height:G,tickSize:V,tickMargin:H,fontSize:Q,letterSpacing:te,getTicksConfig:ne,events:me}=e,fe=G2(la(la({},ne),{},{ticks:t}),Q,te),_e=mH(C,A),ye=gH(C,A),Oe=qp(ne),nt=Ca(r,!1),ft=la(la({},Oe),{},{fill:"none"},Ca(a,!1)),rt=fe.map((at,Et)=>{var{line:At,tick:zt}=pH(at,D,R,j,G,C,V,A,H),Le=la(la(la(la({textAnchor:_e,verticalAnchor:ye},Oe),{},{stroke:"none",fill:d},nt),zt),{},{index:Et,payload:at,visibleTicksCount:fe.length,tickFormatter:p,padding:s},M);return F.createElement(_g,Lp({className:"recharts-cartesian-axis-tick",key:"tick-".concat(at.value,"-").concat(at.coordinate,"-").concat(at.tickCoord)},aD(me,at,Et)),a&&F.createElement("line",Lp({},ft,At,{className:Er("recharts-cartesian-axis-tick-line",X0(a,"className"))})),r&&F.createElement(yH,{option:r,tickProps:Le,value:"".concat(typeof p=="function"?p(at.value,Et):at.value).concat(m||"")}))});return rt.length>0?F.createElement("g",{className:"recharts-cartesian-axis-ticks"},rt):null}var _H=F.forwardRef((e,t)=>{var{axisLine:r,width:a,height:d,className:p,hide:m,ticks:s}=e,M=qw(e,oH),[C,A]=F.useState(""),[D,R]=F.useState(""),j=F.useRef([]);F.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var V;return aH({ticks:j.current,label:(V=e.labelRef)===null||V===void 0?void 0:V.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var G=F.useCallback(V=>{if(V){var H=V.getElementsByClassName("recharts-cartesian-axis-tick-value");j.current=Array.from(H);var Q=H[0];if(Q){var te=window.getComputedStyle(Q),ne=te.fontSize,me=te.letterSpacing;(ne!==C||me!==D)&&(A(ne),R(me))}}},[C,D]);return m||a!=null&&a<=0||d!=null&&d<=0?null:F.createElement(_g,{className:Er("recharts-cartesian-axis",p),ref:G},F.createElement(fH,{x:e.x,y:e.y,width:a,height:d,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:qp(e)}),F.createElement(vH,{ticks:s,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:C,letterSpacing:D,getTicksConfig:e,events:M}),F.createElement(M9,{x:e.x,y:e.y,width:e.width,height:e.height},F.createElement(R9,{label:e.label}),e.children))}),bH=F.memo(_H,(e,t)=>{var{viewBox:r}=e,a=qw(e,sH),{viewBox:d}=t,p=qw(t,lH);return cg(r,d)&&cg(a,p)}),Z2=F.forwardRef((e,t)=>{var r=Ql(e,H2);return F.createElement(bH,Lp({},r,{ref:t}))});Z2.displayName="CartesianAxis";var xH=["x1","y1","x2","y2","key"],wH=["offset"],SH=["xAxisId","yAxisId"],TH=["xAxisId","yAxisId"];function dA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function bo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dA(Object(r),!0).forEach(function(a){MH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function MH(e,t,r){return(t=CH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CH(e){var t=EH(e,"string");return typeof t=="symbol"?t:t+""}function EH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ap(){return Ap=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ap.apply(null,arguments)}function N0(e,t){if(e==null)return{};var r,a,d=AH(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)r=p[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(d[r]=e[r])}return d}function AH(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var PH=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:a,y:d,width:p,height:m,ry:s}=e;return F.createElement("rect",{x:a,y:d,ry:s,width:p,height:m,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function oz(e,t){var r;if(F.isValidElement(e))r=F.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:a,y1:d,x2:p,y2:m,key:s}=t,M=N0(t,xH),C=qp(M),{offset:A}=C,D=N0(C,wH);r=F.createElement("line",Ap({},D,{x1:a,y1:d,x2:p,y2:m,fill:"none",key:s}))}return r}function DH(e){var{x:t,width:r,horizontal:a=!0,horizontalPoints:d}=e;if(!a||!d||!d.length)return null;var{xAxisId:p,yAxisId:m}=e,s=N0(e,SH),M=d.map((C,A)=>{var D=bo(bo({},s),{},{x1:t,y1:C,x2:t+r,y2:C,key:"line-".concat(A),index:A});return oz(a,D)});return F.createElement("g",{className:"recharts-cartesian-grid-horizontal"},M)}function kH(e){var{y:t,height:r,vertical:a=!0,verticalPoints:d}=e;if(!a||!d||!d.length)return null;var{xAxisId:p,yAxisId:m}=e,s=N0(e,TH),M=d.map((C,A)=>{var D=bo(bo({},s),{},{x1:C,y1:t,x2:C,y2:t+r,key:"line-".concat(A),index:A});return oz(a,D)});return F.createElement("g",{className:"recharts-cartesian-grid-vertical"},M)}function OH(e){var{horizontalFill:t,fillOpacity:r,x:a,y:d,width:p,height:m,horizontalPoints:s,horizontal:M=!0}=e;if(!M||!t||!t.length)return null;var C=s.map(D=>Math.round(D+d-d)).sort((D,R)=>D-R);d!==C[0]&&C.unshift(0);var A=C.map((D,R)=>{var j=!C[R+1],G=j?d+m-D:C[R+1]-D;if(G<=0)return null;var V=R%t.length;return F.createElement("rect",{key:"react-".concat(R),y:D,x:a,height:G,width:p,stroke:"none",fill:t[V],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return F.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},A)}function IH(e){var{vertical:t=!0,verticalFill:r,fillOpacity:a,x:d,y:p,width:m,height:s,verticalPoints:M}=e;if(!t||!r||!r.length)return null;var C=M.map(D=>Math.round(D+d-d)).sort((D,R)=>D-R);d!==C[0]&&C.unshift(0);var A=C.map((D,R)=>{var j=!C[R+1],G=j?d+m-D:C[R+1]-D;if(G<=0)return null;var V=R%r.length;return F.createElement("rect",{key:"react-".concat(R),x:D,y:p,width:G,height:s,stroke:"none",fill:r[V],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return F.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},A)}var zH=(e,t)=>{var{xAxis:r,width:a,height:d,offset:p}=e;return dk(G2(bo(bo(bo({},H2),r),{},{ticks:fk(r),viewBox:{x:0,y:0,width:a,height:d}})),p.left,p.left+p.width,t)},RH=(e,t)=>{var{yAxis:r,width:a,height:d,offset:p}=e;return dk(G2(bo(bo(bo({},H2),r),{},{ticks:fk(r),viewBox:{x:0,y:0,width:a,height:d}})),p.top,p.top+p.height,t)},jH={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function sz(e){var t=US(),r=$S(),a=yk(),d=bo(bo({},Ql(e,jH)),{},{x:bn(e.x)?e.x:a.left,y:bn(e.y)?e.y:a.top,width:bn(e.width)?e.width:a.width,height:bn(e.height)?e.height:a.height}),{xAxisId:p,yAxisId:m,x:s,y:M,width:C,height:A,syncWithTicks:D,horizontalValues:R,verticalValues:j}=d,G=Kl(),V=hn(nt=>TE(nt,"xAxis",p,G)),H=hn(nt=>TE(nt,"yAxis",m,G));if(!bn(C)||C<=0||!bn(A)||A<=0||!bn(s)||s!==+s||!bn(M)||M!==+M)return null;var Q=d.verticalCoordinatesGenerator||zH,te=d.horizontalCoordinatesGenerator||RH,{horizontalPoints:ne,verticalPoints:me}=d;if((!ne||!ne.length)&&typeof te=="function"){var fe=R&&R.length,_e=te({yAxis:H?bo(bo({},H),{},{ticks:fe?R:H.ticks}):void 0,width:t,height:r,offset:a},fe?!0:D);Yy(Array.isArray(_e),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof _e,"]")),Array.isArray(_e)&&(ne=_e)}if((!me||!me.length)&&typeof Q=="function"){var ye=j&&j.length,Oe=Q({xAxis:V?bo(bo({},V),{},{ticks:ye?j:V.ticks}):void 0,width:t,height:r,offset:a},ye?!0:D);Yy(Array.isArray(Oe),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof Oe,"]")),Array.isArray(Oe)&&(me=Oe)}return F.createElement("g",{className:"recharts-cartesian-grid"},F.createElement(PH,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),F.createElement(OH,Ap({},d,{horizontalPoints:ne})),F.createElement(IH,Ap({},d,{verticalPoints:me})),F.createElement(DH,Ap({},d,{offset:a,horizontalPoints:ne,xAxis:V,yAxis:H})),F.createElement(kH,Ap({},d,{offset:a,verticalPoints:me,xAxis:V,yAxis:H})))}sz.displayName="CartesianGrid";var lz=(e,t,r,a)=>pI(e,"xAxis",t,a),cz=(e,t,r,a)=>fI(e,"xAxis",t,a),uz=(e,t,r,a)=>pI(e,"yAxis",r,a),hz=(e,t,r,a)=>fI(e,"yAxis",r,a),LH=ut([ei,lz,uz,cz,hz],(e,t,r,a,d)=>lf(e,"xAxis")?bw(t,a,!1):bw(r,d,!1)),NH=(e,t,r,a,d)=>d;function BH(e){return e.type==="line"}var FH=ut([jO,NH],(e,t)=>e.filter(BH).find(r=>r.id===t)),UH=ut([ei,lz,uz,cz,hz,FH,LH,p2],(e,t,r,a,d,p,m,s)=>{var{chartData:M,dataStartIndex:C,dataEndIndex:A}=s;if(!(p==null||t==null||r==null||a==null||d==null||a.length===0||d.length===0||m==null)){var{dataKey:D,data:R}=p,j;if(R!=null&&R.length>0?j=R:j=M?.slice(C,A+1),j!=null)return cZ({layout:e,xAxis:t,yAxis:r,xAxisTicks:a,yAxisTicks:d,dataKey:D,bandSize:m,displayedData:j})}}),$H=["id"],VH=["type","layout","connectNulls","needClip"],qH=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function fA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function Ks(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fA(Object(r),!0).forEach(function(a){GH(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function GH(e,t,r){return(t=HH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HH(e){var t=ZH(e,"string");return typeof t=="symbol"?t:t+""}function ZH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W2(e,t){if(e==null)return{};var r,a,d=WH(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)r=p[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(d[r]=e[r])}return d}function WH(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Np(){return Np=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Np.apply(null,arguments)}var YH=e=>{var{dataKey:t,name:r,stroke:a,legendType:d,hide:p}=e;return[{inactive:p,dataKey:t,type:d,color:a,value:pk(r,t),payload:e}]};function XH(e){var{dataKey:t,data:r,stroke:a,strokeWidth:d,fill:p,name:m,hide:s,unit:M}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:a,strokeWidth:d,fill:p,dataKey:t,nameKey:void 0,name:pk(m,t),hide:s,type:e.tooltipType,color:e.stroke,unit:M}}}var dz=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function KH(e,t){for(var r=e.length%2!==0?[...e,0]:e,a=[],d=0;d<t;++d)a=[...a,...r];return a}var QH=(e,t,r)=>{var a=r.reduce((D,R)=>D+R);if(!a)return dz(t,e);for(var d=Math.floor(e/a),p=e%a,m=t-e,s=[],M=0,C=0;M<r.length;C+=r[M],++M)if(C+r[M]>p){s=[...r.slice(0,M),p-C];break}var A=s.length%2===0?[0,m]:[m];return[...KH(r,d),...s,...A].map(D=>"".concat(D,"px")).join(", ")};function JH(e,t){var r;if(F.isValidElement(e))r=F.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var a=Er("recharts-line-dot",typeof e!="boolean"?e.className:"");r=F.createElement(KI,Np({},t,{className:a}))}return r}function eZ(e,t){return e==null?!1:t?!0:e.length===1}function tZ(e){var{clipPathId:t,points:r,props:a}=e,{dot:d,dataKey:p,needClip:m}=a;if(!eZ(r,d))return null;var{id:s}=a,M=W2(a,$H),C=sD(d),A=qp(M),D=Ca(d,!0),R=r.map((G,V)=>{var H=Ks(Ks(Ks({key:"dot-".concat(V),r:3},A),D),{},{index:V,cx:G.x,cy:G.y,dataKey:p,value:G.value,payload:G.payload,points:r});return JH(d,H)}),j={clipPath:m?"url(#clipPath-".concat(C?"":"dots-").concat(t,")"):void 0};return F.createElement(_g,Np({className:"recharts-line-dots",key:"dots"},j),R)}function nZ(e){var{showLabels:t,children:r,points:a}=e,d=F.useMemo(()=>a?.map(p=>{var m={x:p.x,y:p.y,width:0,height:0};return Ks(Ks({},m),{},{value:p.value,payload:p.payload,viewBox:m,parentViewBox:void 0,fill:void 0})}),[a]);return F.createElement(H9,{value:t?d:null},r)}function pA(e){var{clipPathId:t,pathRef:r,points:a,strokeDasharray:d,props:p}=e,{type:m,layout:s,connectNulls:M,needClip:C}=p,A=W2(p,VH),D=Ks(Ks({},Ca(A,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:C?"url(#clipPath-".concat(t,")"):void 0,points:a,type:m,layout:s,connectNulls:M,strokeDasharray:d??p.strokeDasharray});return F.createElement(F.Fragment,null,a?.length>1&&F.createElement(bk,Np({},D,{pathRef:r})),F.createElement(tZ,{points:a,clipPathId:t,props:p}))}function rZ(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function iZ(e){var{clipPathId:t,props:r,pathRef:a,previousPointsRef:d,longestAnimatedLengthRef:p}=e,{points:m,strokeDasharray:s,isAnimationActive:M,animationBegin:C,animationDuration:A,animationEasing:D,animateNewValues:R,width:j,height:G,onAnimationEnd:V,onAnimationStart:H}=r,Q=d.current,te=Mk(r,"recharts-line-"),[ne,me]=F.useState(!1),fe=!ne,_e=F.useCallback(()=>{typeof V=="function"&&V(),me(!1)},[V]),ye=F.useCallback(()=>{typeof H=="function"&&H(),me(!0)},[H]),Oe=rZ(a.current),nt=p.current;return F.createElement(nZ,{points:m,showLabels:fe},r.children,F.createElement(Tk,{animationId:te,begin:C,duration:A,isActive:M,easing:D,onAnimationEnd:_e,onAnimationStart:ye,key:te},ft=>{var rt=Bh(nt,Oe+nt,ft),at=Math.min(rt,Oe),Et;if(M)if(s){var At="".concat(s).split(/[,\s]+/gim).map(Qe=>parseFloat(Qe));Et=QH(at,Oe,At)}else Et=dz(Oe,at);else Et=s==null?void 0:String(s);if(Q){var zt=Q.length/m.length,Le=ft===1?m:m.map((Qe,Ve)=>{var ht=Math.floor(Ve*zt);if(Q[ht]){var qt=Q[ht];return Ks(Ks({},Qe),{},{x:Bh(qt.x,Qe.x,ft),y:Bh(qt.y,Qe.y,ft)})}return R?Ks(Ks({},Qe),{},{x:Bh(j*2,Qe.x,ft),y:Bh(G/2,Qe.y,ft)}):Ks(Ks({},Qe),{},{x:Qe.x,y:Qe.y})});return d.current=Le,F.createElement(pA,{props:r,points:Le,clipPathId:t,pathRef:a,strokeDasharray:Et})}return ft>0&&Oe>0&&(d.current=m,p.current=at),F.createElement(pA,{props:r,points:m,clipPathId:t,pathRef:a,strokeDasharray:Et})}),F.createElement(Y9,{label:r.label}))}function aZ(e){var{clipPathId:t,props:r}=e,a=F.useRef(null),d=F.useRef(0),p=F.useRef(null);return F.createElement(iZ,{props:r,clipPathId:t,previousPointsRef:a,longestAnimatedLengthRef:d,pathRef:p})}var oZ=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Vo(e.payload,t)});class sZ extends F.Component{render(){var t,{hide:r,dot:a,points:d,className:p,xAxisId:m,yAxisId:s,top:M,left:C,width:A,height:D,id:R,needClip:j}=this.props;if(r)return null;var G=Er("recharts-line",p),V=R,{r:H=3,strokeWidth:Q=2}=(t=Ca(a,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},te=sD(a),ne=H*2+Q;return F.createElement(F.Fragment,null,F.createElement(_g,{className:G},j&&F.createElement("defs",null,F.createElement(N7,{clipPathId:V,xAxisId:m,yAxisId:s}),!te&&F.createElement("clipPath",{id:"clipPath-dots-".concat(V)},F.createElement("rect",{x:C-ne/2,y:M-ne/2,width:A+ne,height:D+ne}))),F.createElement(L7,{xAxisId:m,yAxisId:s,data:d,dataPointFormatter:oZ,errorBarOffset:0},F.createElement(aZ,{props:this.props,clipPathId:V}))),F.createElement(P7,{activeDot:this.props.activeDot,points:d,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var fz={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!bg.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function lZ(e){var t=Ql(e,fz),{activeDot:r,animateNewValues:a,animationBegin:d,animationDuration:p,animationEasing:m,connectNulls:s,dot:M,hide:C,isAnimationActive:A,label:D,legendType:R,xAxisId:j,yAxisId:G,id:V}=t,H=W2(t,qH),{needClip:Q}=nz(j,G),te=V2(),ne=VS(),me=Kl(),fe=hn(ft=>UH(ft,j,G,me,V));if(ne!=="horizontal"&&ne!=="vertical"||fe==null||te==null)return null;var{height:_e,width:ye,x:Oe,y:nt}=te;return F.createElement(sZ,Np({},H,{id:V,connectNulls:s,dot:M,activeDot:r,animateNewValues:a,animationBegin:d,animationDuration:p,animationEasing:m,isAnimationActive:A,hide:C,label:D,legendType:R,xAxisId:j,yAxisId:G,points:fe,layout:ne,height:_e,width:ye,left:Oe,top:nt,needClip:Q}))}function cZ(e){var{layout:t,xAxis:r,yAxis:a,xAxisTicks:d,yAxisTicks:p,dataKey:m,bandSize:s,displayedData:M}=e;return M.map((C,A)=>{var D=Vo(C,m);if(t==="horizontal"){var R=sC({axis:r,ticks:d,bandSize:s,entry:C,index:A}),j=Ma(D)?null:a.scale(D);return{x:R,y:j,value:D,payload:C}}var G=Ma(D)?null:r.scale(D),V=sC({axis:a,ticks:p,bandSize:s,entry:C,index:A});return G==null||V==null?null:{x:G,y:V,value:D,payload:C}}).filter(Boolean)}function uZ(e){var t=Ql(e,fz),r=Kl();return F.createElement(a7,{id:t.id,type:"line"},a=>F.createElement(F.Fragment,null,F.createElement(e7,{legendPayload:YH(t)}),F.createElement(Q9,{fn:XH,args:t}),F.createElement(h7,{type:"line",id:a,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),F.createElement(lZ,Np({},t,{id:a}))))}var Gw=F.memo(uZ);Gw.displayName="Line";var hZ=["dangerouslySetInnerHTML","ticks"],dZ=["id"],fZ=["domain"],pZ=["domain"];function Hw(){return Hw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Hw.apply(null,arguments)}function B0(e,t){if(e==null)return{};var r,a,d=mZ(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)r=p[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(d[r]=e[r])}return d}function mZ(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function gZ(e){var t=Ja();return F.useEffect(()=>(t(g7(e)),()=>{t(y7(e))}),[e,t]),null}var yZ=e=>{var{xAxisId:t,className:r}=e,a=hn(gk),d=Kl(),p="xAxis",m=hn(H=>Cg(H,p,t,d)),s=hn(H=>dI(H,p,t,d)),M=hn(H=>FV(H,t)),C=hn(H=>HV(H,t)),A=hn(H=>OO(H,t));if(M==null||C==null||A==null)return null;var{dangerouslySetInnerHTML:D,ticks:R}=e,j=B0(e,hZ),{id:G}=A,V=B0(A,dZ);return F.createElement(Z2,Hw({},j,V,{scale:m,x:C.x,y:C.y,width:M.width,height:M.height,className:Er("recharts-".concat(p," ").concat(p),r),viewBox:a,ticks:s}))},vZ={allowDataOverflow:Vs.allowDataOverflow,allowDecimals:Vs.allowDecimals,allowDuplicatedCategory:Vs.allowDuplicatedCategory,height:Vs.height,hide:!1,mirror:Vs.mirror,orientation:Vs.orientation,padding:Vs.padding,reversed:Vs.reversed,scale:Vs.scale,tickCount:Vs.tickCount,type:Vs.type,xAxisId:0},_Z=e=>{var t,r,a,d,p,m=Ql(e,vZ);return F.createElement(F.Fragment,null,F.createElement(gZ,{interval:(t=m.interval)!==null&&t!==void 0?t:"preserveEnd",id:m.xAxisId,scale:m.scale,type:m.type,padding:m.padding,allowDataOverflow:m.allowDataOverflow,domain:m.domain,dataKey:m.dataKey,allowDuplicatedCategory:m.allowDuplicatedCategory,allowDecimals:m.allowDecimals,tickCount:m.tickCount,includeHidden:(r=m.includeHidden)!==null&&r!==void 0?r:!1,reversed:m.reversed,ticks:m.ticks,height:m.height,orientation:m.orientation,mirror:m.mirror,hide:m.hide,unit:m.unit,name:m.name,angle:(a=m.angle)!==null&&a!==void 0?a:0,minTickGap:(d=m.minTickGap)!==null&&d!==void 0?d:5,tick:(p=m.tick)!==null&&p!==void 0?p:!0,tickFormatter:m.tickFormatter}),F.createElement(yZ,m))},bZ=(e,t)=>{var{domain:r}=e,a=B0(e,fZ),{domain:d}=t,p=B0(t,pZ);return cg(a,p)?Array.isArray(r)&&r.length===2&&Array.isArray(d)&&d.length===2?r[0]===d[0]&&r[1]===d[1]:cg({domain:r},{domain:d}):!1},pz=F.memo(_Z,bZ);pz.displayName="XAxis";var xZ=["dangerouslySetInnerHTML","ticks"],wZ=["id"],SZ=["domain"],TZ=["domain"];function Zw(){return Zw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Zw.apply(null,arguments)}function F0(e,t){if(e==null)return{};var r,a,d=MZ(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)r=p[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(d[r]=e[r])}return d}function MZ(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function CZ(e){var t=Ja();return F.useEffect(()=>(t(v7(e)),()=>{t(_7(e))}),[e,t]),null}var EZ=e=>{var{yAxisId:t,className:r,width:a,label:d}=e,p=F.useRef(null),m=F.useRef(null),s=hn(gk),M=Kl(),C=Ja(),A="yAxis",D=hn(fe=>Cg(fe,A,t,M)),R=hn(fe=>YV(fe,t)),j=hn(fe=>WV(fe,t)),G=hn(fe=>dI(fe,A,t,M)),V=hn(fe=>IO(fe,t));if(F.useLayoutEffect(()=>{if(!(a!=="auto"||!R||$2(d)||F.isValidElement(d)||V==null)){var fe=p.current;if(fe){var _e=fe.getCalculatedWidth();Math.round(R.width)!==Math.round(_e)&&C(b7({id:t,width:_e}))}}},[G,R,C,d,t,a,V]),R==null||j==null||V==null)return null;var{dangerouslySetInnerHTML:H,ticks:Q}=e,te=F0(e,xZ),{id:ne}=V,me=F0(V,wZ);return F.createElement(Z2,Zw({},te,me,{ref:p,labelRef:m,scale:D,x:j.x,y:j.y,tickTextProps:a==="auto"?{width:void 0}:{width:a},width:R.width,height:R.height,className:Er("recharts-".concat(A," ").concat(A),r),viewBox:s,ticks:G}))},AZ={allowDataOverflow:qs.allowDataOverflow,allowDecimals:qs.allowDecimals,allowDuplicatedCategory:qs.allowDuplicatedCategory,hide:!1,mirror:qs.mirror,orientation:qs.orientation,padding:qs.padding,reversed:qs.reversed,scale:qs.scale,tickCount:qs.tickCount,type:qs.type,width:qs.width,yAxisId:0},PZ=e=>{var t,r,a,d,p,m=Ql(e,AZ);return F.createElement(F.Fragment,null,F.createElement(CZ,{interval:(t=m.interval)!==null&&t!==void 0?t:"preserveEnd",id:m.yAxisId,scale:m.scale,type:m.type,domain:m.domain,allowDataOverflow:m.allowDataOverflow,dataKey:m.dataKey,allowDuplicatedCategory:m.allowDuplicatedCategory,allowDecimals:m.allowDecimals,tickCount:m.tickCount,padding:m.padding,includeHidden:(r=m.includeHidden)!==null&&r!==void 0?r:!1,reversed:m.reversed,ticks:m.ticks,width:m.width,orientation:m.orientation,mirror:m.mirror,hide:m.hide,unit:m.unit,name:m.name,angle:(a=m.angle)!==null&&a!==void 0?a:0,minTickGap:(d=m.minTickGap)!==null&&d!==void 0?d:5,tick:(p=m.tick)!==null&&p!==void 0?p:!0,tickFormatter:m.tickFormatter}),F.createElement(EZ,m))},DZ=(e,t)=>{var{domain:r}=e,a=F0(e,SZ),{domain:d}=t,p=F0(t,TZ);return cg(a,p)?Array.isArray(r)&&r.length===2&&Array.isArray(d)&&d.length===2?r[0]===d[0]&&r[1]===d[1]:cg({domain:r},{domain:d}):!1},Ww=F.memo(PZ,DZ);Ww.displayName="YAxis";var N1={exports:{}},B1={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mA;function kZ(){if(mA)return B1;mA=1;var e=pg();function t(M,C){return M===C&&(M!==0||1/M===1/C)||M!==M&&C!==C}var r=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,d=e.useRef,p=e.useEffect,m=e.useMemo,s=e.useDebugValue;return B1.useSyncExternalStoreWithSelector=function(M,C,A,D,R){var j=d(null);if(j.current===null){var G={hasValue:!1,value:null};j.current=G}else G=j.current;j=m(function(){function H(fe){if(!Q){if(Q=!0,te=fe,fe=D(fe),R!==void 0&&G.hasValue){var _e=G.value;if(R(_e,fe))return ne=_e}return ne=fe}if(_e=ne,r(te,fe))return _e;var ye=D(fe);return R!==void 0&&R(_e,ye)?(te=fe,_e):(te=fe,ne=ye)}var Q=!1,te,ne,me=A===void 0?null:A;return[function(){return H(C())},me===null?void 0:function(){return H(me())}]},[C,A,D,R]);var V=a(M,j[0],j[1]);return p(function(){G.hasValue=!0,G.value=V},[V]),s(V),V},B1}var gA;function OZ(){return gA||(gA=1,N1.exports=kZ()),N1.exports}OZ();function IZ(e){e()}function zZ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){IZ(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let a=e;for(;a;)r.push(a),a=a.next;return r},subscribe(r){let a=!0;const d=t={callback:r,next:null,prev:t};return d.prev?d.prev.next=d:e=d,function(){!a||e===null||(a=!1,d.next?d.next.prev=d.prev:t=d.prev,d.prev?d.prev.next=d.next:e=d.next)}}}}var yA={notify(){},get:()=>[]};function RZ(e,t){let r,a=yA,d=0,p=!1;function m(V){A();const H=a.subscribe(V);let Q=!1;return()=>{Q||(Q=!0,H(),D())}}function s(){a.notify()}function M(){G.onStateChange&&G.onStateChange()}function C(){return p}function A(){d++,r||(r=e.subscribe(M),a=zZ())}function D(){d--,r&&d===0&&(r(),r=void 0,a.clear(),a=yA)}function R(){p||(p=!0,A())}function j(){p&&(p=!1,D())}const G={addNestedSub:m,notifyNestedSubs:s,handleChangeWrapper:M,isSubscribed:C,trySubscribe:R,tryUnsubscribe:j,getListeners:()=>a};return G}var jZ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",LZ=jZ(),NZ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",BZ=NZ(),FZ=()=>LZ||BZ?F.useLayoutEffect:F.useEffect,UZ=FZ(),$Z=Symbol.for("react-redux-context"),VZ=typeof globalThis<"u"?globalThis:{};function qZ(){if(!F.createContext)return{};const e=VZ[$Z]??=new Map;let t=e.get(F.createContext);return t||(t=F.createContext(null),e.set(F.createContext,t)),t}var GZ=qZ();function HZ(e){const{children:t,context:r,serverState:a,store:d}=e,p=F.useMemo(()=>{const M=RZ(d);return{store:d,subscription:M,getServerState:a?()=>a:void 0}},[d,a]),m=F.useMemo(()=>d.getState(),[d]);UZ(()=>{const{subscription:M}=p;return M.onStateChange=M.notifyNestedSubs,M.trySubscribe(),m!==d.getState()&&M.notifyNestedSubs(),()=>{M.tryUnsubscribe(),M.onStateChange=void 0}},[p,m]);const s=r||GZ;return F.createElement(s.Provider,{value:p},t)}var ZZ=HZ,WZ=(e,t)=>t,Y2=ut([WZ,ei,AO,ua,AI,cd,eG,eo],aG),X2=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/a)}},mz=Yl("mouseClick"),gz=vv();gz.startListening({actionCreator:mz,effect:(e,t)=>{var r=e.payload,a=Y2(t.getState(),X2(r));a?.activeIndex!=null&&t.dispatch(sq({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var Yw=Yl("mouseMove"),yz=vv();yz.startListening({actionCreator:Yw,effect:(e,t)=>{var r=e.payload,a=t.getState(),d=O2(a,a.tooltip.settings.shared),p=Y2(a,X2(r));d==="axis"&&(p?.activeIndex!=null?t.dispatch(xI({activeIndex:p.activeIndex,activeDataKey:void 0,activeCoordinate:p.activeCoordinate})):t.dispatch(bI()))}});var vA={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},vz=il({name:"rootProps",initialState:vA,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:vA.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),YZ=vz.reducer,{updateOptions:XZ}=vz.actions,_z=il({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:kne}=_z.actions,KZ=_z.reducer,bz=Yl("keyDown"),xz=Yl("focus"),K2=vv();K2.startListening({actionCreator:bz,effect:(e,t)=>{var r=t.getState(),a=r.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:d}=r.tooltip,p=e.payload;if(!(p!=="ArrowRight"&&p!=="ArrowLeft"&&p!=="Enter")){var m=Number(I2(d,Ag(r))),s=cd(r);if(p==="Enter"){var M=R0(r,"axis","hover",String(d.index));t.dispatch(Bw({active:!d.active,activeIndex:d.index,activeDataKey:d.dataKey,activeCoordinate:M}));return}var C=JV(r),A=C==="left-to-right"?1:-1,D=p==="ArrowRight"?1:-1,R=m+D*A;if(!(s==null||R>=s.length||R<0)){var j=R0(r,"axis","hover",String(R));t.dispatch(Bw({active:!0,activeIndex:R.toString(),activeDataKey:void 0,activeCoordinate:j}))}}}}});K2.startListening({actionCreator:xz,effect:(e,t)=>{var r=t.getState(),a=r.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:d}=r.tooltip;if(!d.active&&d.index==null){var p="0",m=R0(r,"axis","hover",String(p));t.dispatch(Bw({activeDataKey:void 0,active:!0,activeIndex:p,activeCoordinate:m}))}}}});var ql=Yl("externalEvent"),wz=vv();wz.startListening({actionCreator:ql,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),a={activeCoordinate:qq(r),activeDataKey:$q(r),activeIndex:sv(r),activeLabel:kI(r),activeTooltipIndex:sv(r),isTooltipActive:Gq(r)};e.payload.handler(a,e.payload.reactEvent)}}});var QZ=ut([Eg],e=>e.tooltipItemPayloads),JZ=ut([QZ,Av,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,a)=>{var d=e.find(s=>s.settings.dataKey===a);if(d!=null){var{positions:p}=d;if(p!=null){var m=t(p,r);return m}}}),Sz=Yl("touchMove"),Tz=vv();Tz.startListening({actionCreator:Sz,effect:(e,t)=>{var r=e.payload,a=t.getState(),d=O2(a,a.tooltip.settings.shared);if(d==="axis"){var p=Y2(a,X2({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));p?.activeIndex!=null&&t.dispatch(xI({activeIndex:p.activeIndex,activeDataKey:void 0,activeCoordinate:p.activeCoordinate}))}else if(d==="item"){var m,s=r.touches[0],M=document.elementFromPoint(s.clientX,s.clientY);if(!M||!M.getAttribute)return;var C=M.getAttribute(_6),A=(m=M.getAttribute(b6))!==null&&m!==void 0?m:void 0,D=JZ(t.getState(),C,A);t.dispatch(oq({activeDataKey:A,activeIndex:C,activeCoordinate:D}))}}});var eW=$D({brush:F7,cartesianAxis:x7,chartData:wG,errorBars:k7,graphicalItems:u7,layout:GB,legend:L6,options:yG,polarAxis:K9,polarOptions:KZ,referenceElements:Z7,rootProps:YZ,tooltip:lq}),tW=function(t){return gB({reducer:eW,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([gz.middleware,yz.middleware,K2.middleware,wz.middleware,Tz.middleware]),devTools:bg.devToolsEnabled})};function nW(e){var{preloadedState:t,children:r,reduxStoreName:a}=e,d=Kl(),p=F.useRef(null);if(d)return r;p.current==null&&(p.current=tW(t));var m=zS;return F.createElement(ZZ,{context:m,store:p.current},r)}function rW(e){var{layout:t,width:r,height:a,margin:d}=e,p=Ja(),m=Kl();return F.useEffect(()=>{m||(p($B(t)),p(VB({width:r,height:a})),p(UB(d)))},[p,m,t,r,a,d]),null}function iW(e){var t=Ja();return F.useEffect(()=>{t(XZ(e))},[t,e]),null}var aW=["children"];function oW(e,t){if(e==null)return{};var r,a,d=sW(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)r=p[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(d[r]=e[r])}return d}function sW(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function U0(){return U0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},U0.apply(null,arguments)}var lW={width:"100%",height:"100%"},cW=F.forwardRef((e,t)=>{var r=US(),a=$S(),d=_k();if(!_0(r)||!_0(a))return null;var{children:p,otherAttributes:m,title:s,desc:M}=e,C,A;return typeof m.tabIndex=="number"?C=m.tabIndex:C=d?0:void 0,typeof m.role=="string"?A=m.role:A=d?"application":void 0,F.createElement(CS,U0({},m,{title:s,desc:M,role:A,tabIndex:C,width:r,height:a,style:lW,ref:t}),p)}),uW=e=>{var{children:t}=e,r=hn(cb);if(!r)return null;var{width:a,height:d,y:p,x:m}=r;return F.createElement(CS,{width:a,height:d,x:m,y:p},t)},_A=F.forwardRef((e,t)=>{var{children:r}=e,a=oW(e,aW),d=Kl();return d?F.createElement(uW,null,r):F.createElement(cW,U0({ref:t},a),r)});function hW(){var e=Ja(),[t,r]=F.useState(null),a=hn(v6);return F.useEffect(()=>{if(t!=null){var d=t.getBoundingClientRect(),p=d.width/t.offsetWidth;Uc(p)&&p!==a&&e(qB(p))}},[t,e,a]),r}function bA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,a)}return r}function dW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bA(Object(r),!0).forEach(function(a){fW(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bA(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function fW(e,t,r){return(t=pW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pW(e){var t=mW(e,"string");return typeof t=="symbol"?t:t+""}function mW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gW=F.forwardRef((e,t)=>{var{children:r,className:a,height:d,onClick:p,onContextMenu:m,onDoubleClick:s,onMouseDown:M,onMouseEnter:C,onMouseLeave:A,onMouseMove:D,onMouseUp:R,onTouchEnd:j,onTouchMove:G,onTouchStart:V,style:H,width:Q}=e,te=Ja(),[ne,me]=F.useState(null),[fe,_e]=F.useState(null);kG();var ye=hW(),Oe=F.useCallback(qe=>{ye(qe),typeof t=="function"&&t(qe),me(qe),_e(qe)},[ye,t,me,_e]),nt=F.useCallback(qe=>{te(mz(qe)),te(ql({handler:p,reactEvent:qe}))},[te,p]),ft=F.useCallback(qe=>{te(Yw(qe)),te(ql({handler:C,reactEvent:qe}))},[te,C]),rt=F.useCallback(qe=>{te(bI()),te(ql({handler:A,reactEvent:qe}))},[te,A]),at=F.useCallback(qe=>{te(Yw(qe)),te(ql({handler:D,reactEvent:qe}))},[te,D]),Et=F.useCallback(()=>{te(xz())},[te]),At=F.useCallback(qe=>{te(bz(qe.key))},[te]),zt=F.useCallback(qe=>{te(ql({handler:m,reactEvent:qe}))},[te,m]),Le=F.useCallback(qe=>{te(ql({handler:s,reactEvent:qe}))},[te,s]),Qe=F.useCallback(qe=>{te(ql({handler:M,reactEvent:qe}))},[te,M]),Ve=F.useCallback(qe=>{te(ql({handler:R,reactEvent:qe}))},[te,R]),ht=F.useCallback(qe=>{te(ql({handler:V,reactEvent:qe}))},[te,V]),qt=F.useCallback(qe=>{te(Sz(qe)),te(ql({handler:G,reactEvent:qe}))},[te,G]),Ae=F.useCallback(qe=>{te(ql({handler:j,reactEvent:qe}))},[te,j]);return F.createElement(LI.Provider,{value:ne},F.createElement(lD.Provider,{value:fe},F.createElement("div",{className:Er("recharts-wrapper",a),style:dW({position:"relative",cursor:"default",width:Q,height:d},H),onClick:nt,onContextMenu:zt,onDoubleClick:Le,onFocus:Et,onKeyDown:At,onMouseDown:Qe,onMouseEnter:ft,onMouseLeave:rt,onMouseMove:at,onMouseUp:Ve,onTouchEnd:Ae,onTouchMove:qt,onTouchStart:ht,ref:Oe},r)))}),yW=["children","className","width","height","style","compact","title","desc"];function vW(e,t){if(e==null)return{};var r,a,d=_W(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)r=p[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(d[r]=e[r])}return d}function _W(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var bW=F.forwardRef((e,t)=>{var{children:r,className:a,width:d,height:p,style:m,compact:s,title:M,desc:C}=e,A=vW(e,yW),D=qp(A);return s?F.createElement(_A,{otherAttributes:D,title:M,desc:C},r):F.createElement(gW,{className:a,style:m,width:d,height:p,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},F.createElement(_A,{otherAttributes:D,title:M,desc:C,ref:t},F.createElement(Y7,null,r)))}),xW=["width","height"];function Xw(){return Xw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Xw.apply(null,arguments)}function wW(e,t){if(e==null)return{};var r,a,d=SW(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(a=0;a<p.length;a++)r=p[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(d[r]=e[r])}return d}function SW(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var TW={top:5,right:5,bottom:5,left:5},MW={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:TW,reverseStackOrder:!1,syncMethod:"index"},CW=F.forwardRef(function(t,r){var a,d=Ql(t.categoricalChartProps,MW),{width:p,height:m}=d,s=wW(d,xW);if(!_0(p)||!_0(m))return null;var{chartName:M,defaultTooltipEventType:C,validateTooltipEventTypes:A,tooltipPayloadSearcher:D,categoricalChartProps:R}=t,j={chartName:M,defaultTooltipEventType:C,validateTooltipEventTypes:A,tooltipPayloadSearcher:D,eventEmitter:void 0};return F.createElement(nW,{preloadedState:{options:j},reduxStoreName:(a=R.id)!==null&&a!==void 0?a:M},F.createElement(B7,{chartData:R.data}),F.createElement(rW,{width:p,height:m,layout:d.layout,margin:d.margin}),F.createElement(iW,{accessibilityLayer:d.accessibilityLayer,barCategoryGap:d.barCategoryGap,maxBarSize:d.maxBarSize,stackOffset:d.stackOffset,barGap:d.barGap,barSize:d.barSize,syncId:d.syncId,syncMethod:d.syncMethod,className:d.className}),F.createElement(bW,Xw({},s,{width:p,height:m,ref:r})))}),EW=["axis"],AW=F.forwardRef((e,t)=>F.createElement(CW,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:EW,tooltipPayloadSearcher:mG,categoricalChartProps:e,ref:t}));function xA(e,[t,r]){return Math.min(r,Math.max(t,e))}function Jr(e,t,{checkForDefaultPrevented:r=!0}={}){return function(d){if(e?.(d),r===!1||!d.defaultPrevented)return t?.(d)}}function Eb(e,t=[]){let r=[];function a(p,m){const s=F.createContext(m),M=r.length;r=[...r,m];const C=D=>{const{scope:R,children:j,...G}=D,V=R?.[e]?.[M]||s,H=F.useMemo(()=>G,Object.values(G));return X.jsx(V.Provider,{value:H,children:j})};C.displayName=p+"Provider";function A(D,R){const j=R?.[e]?.[M]||s,G=F.useContext(j);if(G)return G;if(m!==void 0)return m;throw new Error(`\`${D}\` must be used within \`${p}\``)}return[C,A]}const d=()=>{const p=r.map(m=>F.createContext(m));return function(s){const M=s?.[e]||p;return F.useMemo(()=>({[`__scope${e}`]:{...s,[e]:M}}),[s,M])}};return d.scopeName=e,[a,PW(d,...t)]}function PW(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const a=e.map(d=>({useScope:d(),scopeName:d.scopeName}));return function(p){const m=a.reduce((s,{useScope:M,scopeName:C})=>{const D=M(p)[`__scope${C}`];return{...s,...D}},{});return F.useMemo(()=>({[`__scope${t.scopeName}`]:m}),[m])}};return r.scopeName=t.scopeName,r}function wA(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Mz(...e){return t=>{let r=!1;const a=e.map(d=>{const p=wA(d,t);return!r&&typeof p=="function"&&(r=!0),p});if(r)return()=>{for(let d=0;d<a.length;d++){const p=a[d];typeof p=="function"?p():wA(e[d],null)}}}}function Xi(...e){return F.useCallback(Mz(...e),e)}function ug(e){const t=kW(e),r=F.forwardRef((a,d)=>{const{children:p,...m}=a,s=F.Children.toArray(p),M=s.find(IW);if(M){const C=M.props.children,A=s.map(D=>D===M?F.Children.count(C)>1?F.Children.only(null):F.isValidElement(C)?C.props.children:null:D);return X.jsx(t,{...m,ref:d,children:F.isValidElement(C)?F.cloneElement(C,void 0,A):null})}return X.jsx(t,{...m,ref:d,children:p})});return r.displayName=`${e}.Slot`,r}var DW=ug("Slot");function kW(e){const t=F.forwardRef((r,a)=>{const{children:d,...p}=r;if(F.isValidElement(d)){const m=RW(d),s=zW(p,d.props);return d.type!==F.Fragment&&(s.ref=a?Mz(a,m):m),F.cloneElement(d,s)}return F.Children.count(d)>1?F.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var OW=Symbol("radix.slottable");function IW(e){return F.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===OW}function zW(e,t){const r={...t};for(const a in t){const d=e[a],p=t[a];/^on[A-Z]/.test(a)?d&&p?r[a]=(...s)=>{const M=p(...s);return d(...s),M}:d&&(r[a]=d):a==="style"?r[a]={...d,...p}:a==="className"&&(r[a]=[d,p].filter(Boolean).join(" "))}return{...e,...r}}function RW(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function jW(e){const t=e+"CollectionProvider",[r,a]=Eb(t),[d,p]=r(t,{collectionRef:{current:null},itemMap:new Map}),m=V=>{const{scope:H,children:Q}=V,te=Ut.useRef(null),ne=Ut.useRef(new Map).current;return X.jsx(d,{scope:H,itemMap:ne,collectionRef:te,children:Q})};m.displayName=t;const s=e+"CollectionSlot",M=ug(s),C=Ut.forwardRef((V,H)=>{const{scope:Q,children:te}=V,ne=p(s,Q),me=Xi(H,ne.collectionRef);return X.jsx(M,{ref:me,children:te})});C.displayName=s;const A=e+"CollectionItemSlot",D="data-radix-collection-item",R=ug(A),j=Ut.forwardRef((V,H)=>{const{scope:Q,children:te,...ne}=V,me=Ut.useRef(null),fe=Xi(H,me),_e=p(A,Q);return Ut.useEffect(()=>(_e.itemMap.set(me,{ref:me,...ne}),()=>void _e.itemMap.delete(me))),X.jsx(R,{[D]:"",ref:fe,children:te})});j.displayName=A;function G(V){const H=p(e+"CollectionConsumer",V);return Ut.useCallback(()=>{const te=H.collectionRef.current;if(!te)return[];const ne=Array.from(te.querySelectorAll(`[${D}]`));return Array.from(H.itemMap.values()).sort((_e,ye)=>ne.indexOf(_e.ref.current)-ne.indexOf(ye.ref.current))},[H.collectionRef,H.itemMap])}return[{Provider:m,Slot:C,ItemSlot:j},G,a]}var LW=F.createContext(void 0);function NW(e){const t=F.useContext(LW);return e||t||"ltr"}var BW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xi=BW.reduce((e,t)=>{const r=ug(`Primitive.${t}`),a=F.forwardRef((d,p)=>{const{asChild:m,...s}=d,M=m?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),X.jsx(M,{...s,ref:p})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function FW(e,t){e&&Vp.flushSync(()=>e.dispatchEvent(t))}function Bp(e){const t=F.useRef(e);return F.useEffect(()=>{t.current=e}),F.useMemo(()=>(...r)=>t.current?.(...r),[])}function UW(e,t=globalThis?.document){const r=Bp(e);F.useEffect(()=>{const a=d=>{d.key==="Escape"&&r(d)};return t.addEventListener("keydown",a,{capture:!0}),()=>t.removeEventListener("keydown",a,{capture:!0})},[r,t])}var $W="DismissableLayer",Kw="dismissableLayer.update",VW="dismissableLayer.pointerDownOutside",qW="dismissableLayer.focusOutside",SA,Cz=F.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Q2=F.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:a,onPointerDownOutside:d,onFocusOutside:p,onInteractOutside:m,onDismiss:s,...M}=e,C=F.useContext(Cz),[A,D]=F.useState(null),R=A?.ownerDocument??globalThis?.document,[,j]=F.useState({}),G=Xi(t,ye=>D(ye)),V=Array.from(C.layers),[H]=[...C.layersWithOutsidePointerEventsDisabled].slice(-1),Q=V.indexOf(H),te=A?V.indexOf(A):-1,ne=C.layersWithOutsidePointerEventsDisabled.size>0,me=te>=Q,fe=ZW(ye=>{const Oe=ye.target,nt=[...C.branches].some(ft=>ft.contains(Oe));!me||nt||(d?.(ye),m?.(ye),ye.defaultPrevented||s?.())},R),_e=WW(ye=>{const Oe=ye.target;[...C.branches].some(ft=>ft.contains(Oe))||(p?.(ye),m?.(ye),ye.defaultPrevented||s?.())},R);return UW(ye=>{te===C.layers.size-1&&(a?.(ye),!ye.defaultPrevented&&s&&(ye.preventDefault(),s()))},R),F.useEffect(()=>{if(A)return r&&(C.layersWithOutsidePointerEventsDisabled.size===0&&(SA=R.body.style.pointerEvents,R.body.style.pointerEvents="none"),C.layersWithOutsidePointerEventsDisabled.add(A)),C.layers.add(A),TA(),()=>{r&&C.layersWithOutsidePointerEventsDisabled.size===1&&(R.body.style.pointerEvents=SA)}},[A,R,r,C]),F.useEffect(()=>()=>{A&&(C.layers.delete(A),C.layersWithOutsidePointerEventsDisabled.delete(A),TA())},[A,C]),F.useEffect(()=>{const ye=()=>j({});return document.addEventListener(Kw,ye),()=>document.removeEventListener(Kw,ye)},[]),X.jsx(xi.div,{...M,ref:G,style:{pointerEvents:ne?me?"auto":"none":void 0,...e.style},onFocusCapture:Jr(e.onFocusCapture,_e.onFocusCapture),onBlurCapture:Jr(e.onBlurCapture,_e.onBlurCapture),onPointerDownCapture:Jr(e.onPointerDownCapture,fe.onPointerDownCapture)})});Q2.displayName=$W;var GW="DismissableLayerBranch",HW=F.forwardRef((e,t)=>{const r=F.useContext(Cz),a=F.useRef(null),d=Xi(t,a);return F.useEffect(()=>{const p=a.current;if(p)return r.branches.add(p),()=>{r.branches.delete(p)}},[r.branches]),X.jsx(xi.div,{...e,ref:d})});HW.displayName=GW;function ZW(e,t=globalThis?.document){const r=Bp(e),a=F.useRef(!1),d=F.useRef(()=>{});return F.useEffect(()=>{const p=s=>{if(s.target&&!a.current){let M=function(){Ez(VW,r,C,{discrete:!0})};const C={originalEvent:s};s.pointerType==="touch"?(t.removeEventListener("click",d.current),d.current=M,t.addEventListener("click",d.current,{once:!0})):M()}else t.removeEventListener("click",d.current);a.current=!1},m=window.setTimeout(()=>{t.addEventListener("pointerdown",p)},0);return()=>{window.clearTimeout(m),t.removeEventListener("pointerdown",p),t.removeEventListener("click",d.current)}},[t,r]),{onPointerDownCapture:()=>a.current=!0}}function WW(e,t=globalThis?.document){const r=Bp(e),a=F.useRef(!1);return F.useEffect(()=>{const d=p=>{p.target&&!a.current&&Ez(qW,r,{originalEvent:p},{discrete:!1})};return t.addEventListener("focusin",d),()=>t.removeEventListener("focusin",d)},[t,r]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function TA(){const e=new CustomEvent(Kw);document.dispatchEvent(e)}function Ez(e,t,r,{discrete:a}){const d=r.originalEvent.target,p=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&d.addEventListener(e,t,{once:!0}),a?FW(d,p):d.dispatchEvent(p)}var F1=0;function Az(){F.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??MA()),document.body.insertAdjacentElement("beforeend",e[1]??MA()),F1++,()=>{F1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),F1--}},[])}function MA(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var U1="focusScope.autoFocusOnMount",$1="focusScope.autoFocusOnUnmount",CA={bubbles:!1,cancelable:!0},YW="FocusScope",J2=F.forwardRef((e,t)=>{const{loop:r=!1,trapped:a=!1,onMountAutoFocus:d,onUnmountAutoFocus:p,...m}=e,[s,M]=F.useState(null),C=Bp(d),A=Bp(p),D=F.useRef(null),R=Xi(t,V=>M(V)),j=F.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;F.useEffect(()=>{if(a){let V=function(ne){if(j.paused||!s)return;const me=ne.target;s.contains(me)?D.current=me:Jd(D.current,{select:!0})},H=function(ne){if(j.paused||!s)return;const me=ne.relatedTarget;me!==null&&(s.contains(me)||Jd(D.current,{select:!0}))},Q=function(ne){if(document.activeElement===document.body)for(const fe of ne)fe.removedNodes.length>0&&Jd(s)};document.addEventListener("focusin",V),document.addEventListener("focusout",H);const te=new MutationObserver(Q);return s&&te.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",V),document.removeEventListener("focusout",H),te.disconnect()}}},[a,s,j.paused]),F.useEffect(()=>{if(s){AA.add(j);const V=document.activeElement;if(!s.contains(V)){const Q=new CustomEvent(U1,CA);s.addEventListener(U1,C),s.dispatchEvent(Q),Q.defaultPrevented||(XW(tY(Pz(s)),{select:!0}),document.activeElement===V&&Jd(s))}return()=>{s.removeEventListener(U1,C),setTimeout(()=>{const Q=new CustomEvent($1,CA);s.addEventListener($1,A),s.dispatchEvent(Q),Q.defaultPrevented||Jd(V??document.body,{select:!0}),s.removeEventListener($1,A),AA.remove(j)},0)}}},[s,C,A,j]);const G=F.useCallback(V=>{if(!r&&!a||j.paused)return;const H=V.key==="Tab"&&!V.altKey&&!V.ctrlKey&&!V.metaKey,Q=document.activeElement;if(H&&Q){const te=V.currentTarget,[ne,me]=KW(te);ne&&me?!V.shiftKey&&Q===me?(V.preventDefault(),r&&Jd(ne,{select:!0})):V.shiftKey&&Q===ne&&(V.preventDefault(),r&&Jd(me,{select:!0})):Q===te&&V.preventDefault()}},[r,a,j.paused]);return X.jsx(xi.div,{tabIndex:-1,...m,ref:R,onKeyDown:G})});J2.displayName=YW;function XW(e,{select:t=!1}={}){const r=document.activeElement;for(const a of e)if(Jd(a,{select:t}),document.activeElement!==r)return}function KW(e){const t=Pz(e),r=EA(t,e),a=EA(t.reverse(),e);return[r,a]}function Pz(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const d=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||d?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function EA(e,t){for(const r of e)if(!QW(r,{upTo:t}))return r}function QW(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function JW(e){return e instanceof HTMLInputElement&&"select"in e}function Jd(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&JW(e)&&t&&e.select()}}var AA=eY();function eY(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=PA(e,t),e.unshift(t)},remove(t){e=PA(e,t),e[0]?.resume()}}}function PA(e,t){const r=[...e],a=r.indexOf(t);return a!==-1&&r.splice(a,1),r}function tY(e){return e.filter(t=>t.tagName!=="A")}var xo=globalThis?.document?F.useLayoutEffect:()=>{},nY=dS[" useId ".trim().toString()]||(()=>{}),rY=0;function Ab(e){const[t,r]=F.useState(nY());return xo(()=>{r(a=>a??String(rY++))},[e]),e||(t?`radix-${t}`:"")}const iY=["top","right","bottom","left"],of=Math.min,Qs=Math.max,$0=Math.round,F_=Math.floor,Ru=e=>({x:e,y:e}),aY={left:"right",right:"left",bottom:"top",top:"bottom"},oY={start:"end",end:"start"};function Qw(e,t,r){return Qs(e,of(t,r))}function ed(e,t){return typeof e=="function"?e(t):e}function td(e){return e.split("-")[0]}function Pg(e){return e.split("-")[1]}function eT(e){return e==="x"?"y":"x"}function tT(e){return e==="y"?"height":"width"}const sY=new Set(["top","bottom"]);function Ou(e){return sY.has(td(e))?"y":"x"}function nT(e){return eT(Ou(e))}function lY(e,t,r){r===void 0&&(r=!1);const a=Pg(e),d=nT(e),p=tT(d);let m=d==="x"?a===(r?"end":"start")?"right":"left":a==="start"?"bottom":"top";return t.reference[p]>t.floating[p]&&(m=V0(m)),[m,V0(m)]}function cY(e){const t=V0(e);return[Jw(e),t,Jw(t)]}function Jw(e){return e.replace(/start|end/g,t=>oY[t])}const DA=["left","right"],kA=["right","left"],uY=["top","bottom"],hY=["bottom","top"];function dY(e,t,r){switch(e){case"top":case"bottom":return r?t?kA:DA:t?DA:kA;case"left":case"right":return t?uY:hY;default:return[]}}function fY(e,t,r,a){const d=Pg(e);let p=dY(td(e),r==="start",a);return d&&(p=p.map(m=>m+"-"+d),t&&(p=p.concat(p.map(Jw)))),p}function V0(e){return e.replace(/left|right|bottom|top/g,t=>aY[t])}function pY(e){return{top:0,right:0,bottom:0,left:0,...e}}function Dz(e){return typeof e!="number"?pY(e):{top:e,right:e,bottom:e,left:e}}function q0(e){const{x:t,y:r,width:a,height:d}=e;return{width:a,height:d,top:r,left:t,right:t+a,bottom:r+d,x:t,y:r}}function OA(e,t,r){let{reference:a,floating:d}=e;const p=Ou(t),m=nT(t),s=tT(m),M=td(t),C=p==="y",A=a.x+a.width/2-d.width/2,D=a.y+a.height/2-d.height/2,R=a[s]/2-d[s]/2;let j;switch(M){case"top":j={x:A,y:a.y-d.height};break;case"bottom":j={x:A,y:a.y+a.height};break;case"right":j={x:a.x+a.width,y:D};break;case"left":j={x:a.x-d.width,y:D};break;default:j={x:a.x,y:a.y}}switch(Pg(t)){case"start":j[m]-=R*(r&&C?-1:1);break;case"end":j[m]+=R*(r&&C?-1:1);break}return j}const mY=async(e,t,r)=>{const{placement:a="bottom",strategy:d="absolute",middleware:p=[],platform:m}=r,s=p.filter(Boolean),M=await(m.isRTL==null?void 0:m.isRTL(t));let C=await m.getElementRects({reference:e,floating:t,strategy:d}),{x:A,y:D}=OA(C,a,M),R=a,j={},G=0;for(let V=0;V<s.length;V++){const{name:H,fn:Q}=s[V],{x:te,y:ne,data:me,reset:fe}=await Q({x:A,y:D,initialPlacement:a,placement:R,strategy:d,middlewareData:j,rects:C,platform:m,elements:{reference:e,floating:t}});A=te??A,D=ne??D,j={...j,[H]:{...j[H],...me}},fe&&G<=50&&(G++,typeof fe=="object"&&(fe.placement&&(R=fe.placement),fe.rects&&(C=fe.rects===!0?await m.getElementRects({reference:e,floating:t,strategy:d}):fe.rects),{x:A,y:D}=OA(C,R,M)),V=-1)}return{x:A,y:D,placement:R,strategy:d,middlewareData:j}};async function cv(e,t){var r;t===void 0&&(t={});const{x:a,y:d,platform:p,rects:m,elements:s,strategy:M}=e,{boundary:C="clippingAncestors",rootBoundary:A="viewport",elementContext:D="floating",altBoundary:R=!1,padding:j=0}=ed(t,e),G=Dz(j),H=s[R?D==="floating"?"reference":"floating":D],Q=q0(await p.getClippingRect({element:(r=await(p.isElement==null?void 0:p.isElement(H)))==null||r?H:H.contextElement||await(p.getDocumentElement==null?void 0:p.getDocumentElement(s.floating)),boundary:C,rootBoundary:A,strategy:M})),te=D==="floating"?{x:a,y:d,width:m.floating.width,height:m.floating.height}:m.reference,ne=await(p.getOffsetParent==null?void 0:p.getOffsetParent(s.floating)),me=await(p.isElement==null?void 0:p.isElement(ne))?await(p.getScale==null?void 0:p.getScale(ne))||{x:1,y:1}:{x:1,y:1},fe=q0(p.convertOffsetParentRelativeRectToViewportRelativeRect?await p.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:te,offsetParent:ne,strategy:M}):te);return{top:(Q.top-fe.top+G.top)/me.y,bottom:(fe.bottom-Q.bottom+G.bottom)/me.y,left:(Q.left-fe.left+G.left)/me.x,right:(fe.right-Q.right+G.right)/me.x}}const gY=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:a,placement:d,rects:p,platform:m,elements:s,middlewareData:M}=t,{element:C,padding:A=0}=ed(e,t)||{};if(C==null)return{};const D=Dz(A),R={x:r,y:a},j=nT(d),G=tT(j),V=await m.getDimensions(C),H=j==="y",Q=H?"top":"left",te=H?"bottom":"right",ne=H?"clientHeight":"clientWidth",me=p.reference[G]+p.reference[j]-R[j]-p.floating[G],fe=R[j]-p.reference[j],_e=await(m.getOffsetParent==null?void 0:m.getOffsetParent(C));let ye=_e?_e[ne]:0;(!ye||!await(m.isElement==null?void 0:m.isElement(_e)))&&(ye=s.floating[ne]||p.floating[G]);const Oe=me/2-fe/2,nt=ye/2-V[G]/2-1,ft=of(D[Q],nt),rt=of(D[te],nt),at=ft,Et=ye-V[G]-rt,At=ye/2-V[G]/2+Oe,zt=Qw(at,At,Et),Le=!M.arrow&&Pg(d)!=null&&At!==zt&&p.reference[G]/2-(At<at?ft:rt)-V[G]/2<0,Qe=Le?At<at?At-at:At-Et:0;return{[j]:R[j]+Qe,data:{[j]:zt,centerOffset:At-zt-Qe,...Le&&{alignmentOffset:Qe}},reset:Le}}}),yY=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,a;const{placement:d,middlewareData:p,rects:m,initialPlacement:s,platform:M,elements:C}=t,{mainAxis:A=!0,crossAxis:D=!0,fallbackPlacements:R,fallbackStrategy:j="bestFit",fallbackAxisSideDirection:G="none",flipAlignment:V=!0,...H}=ed(e,t);if((r=p.arrow)!=null&&r.alignmentOffset)return{};const Q=td(d),te=Ou(s),ne=td(s)===s,me=await(M.isRTL==null?void 0:M.isRTL(C.floating)),fe=R||(ne||!V?[V0(s)]:cY(s)),_e=G!=="none";!R&&_e&&fe.push(...fY(s,V,G,me));const ye=[s,...fe],Oe=await cv(t,H),nt=[];let ft=((a=p.flip)==null?void 0:a.overflows)||[];if(A&&nt.push(Oe[Q]),D){const At=lY(d,m,me);nt.push(Oe[At[0]],Oe[At[1]])}if(ft=[...ft,{placement:d,overflows:nt}],!nt.every(At=>At<=0)){var rt,at;const At=(((rt=p.flip)==null?void 0:rt.index)||0)+1,zt=ye[At];if(zt&&(!(D==="alignment"?te!==Ou(zt):!1)||ft.every(Ve=>Ou(Ve.placement)===te?Ve.overflows[0]>0:!0)))return{data:{index:At,overflows:ft},reset:{placement:zt}};let Le=(at=ft.filter(Qe=>Qe.overflows[0]<=0).sort((Qe,Ve)=>Qe.overflows[1]-Ve.overflows[1])[0])==null?void 0:at.placement;if(!Le)switch(j){case"bestFit":{var Et;const Qe=(Et=ft.filter(Ve=>{if(_e){const ht=Ou(Ve.placement);return ht===te||ht==="y"}return!0}).map(Ve=>[Ve.placement,Ve.overflows.filter(ht=>ht>0).reduce((ht,qt)=>ht+qt,0)]).sort((Ve,ht)=>Ve[1]-ht[1])[0])==null?void 0:Et[0];Qe&&(Le=Qe);break}case"initialPlacement":Le=s;break}if(d!==Le)return{reset:{placement:Le}}}return{}}}};function IA(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function zA(e){return iY.some(t=>e[t]>=0)}const vY=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:a="referenceHidden",...d}=ed(e,t);switch(a){case"referenceHidden":{const p=await cv(t,{...d,elementContext:"reference"}),m=IA(p,r.reference);return{data:{referenceHiddenOffsets:m,referenceHidden:zA(m)}}}case"escaped":{const p=await cv(t,{...d,altBoundary:!0}),m=IA(p,r.floating);return{data:{escapedOffsets:m,escaped:zA(m)}}}default:return{}}}}},kz=new Set(["left","top"]);async function _Y(e,t){const{placement:r,platform:a,elements:d}=e,p=await(a.isRTL==null?void 0:a.isRTL(d.floating)),m=td(r),s=Pg(r),M=Ou(r)==="y",C=kz.has(m)?-1:1,A=p&&M?-1:1,D=ed(t,e);let{mainAxis:R,crossAxis:j,alignmentAxis:G}=typeof D=="number"?{mainAxis:D,crossAxis:0,alignmentAxis:null}:{mainAxis:D.mainAxis||0,crossAxis:D.crossAxis||0,alignmentAxis:D.alignmentAxis};return s&&typeof G=="number"&&(j=s==="end"?G*-1:G),M?{x:j*A,y:R*C}:{x:R*C,y:j*A}}const bY=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,a;const{x:d,y:p,placement:m,middlewareData:s}=t,M=await _Y(t,e);return m===((r=s.offset)==null?void 0:r.placement)&&(a=s.arrow)!=null&&a.alignmentOffset?{}:{x:d+M.x,y:p+M.y,data:{...M,placement:m}}}}},xY=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:a,placement:d}=t,{mainAxis:p=!0,crossAxis:m=!1,limiter:s={fn:H=>{let{x:Q,y:te}=H;return{x:Q,y:te}}},...M}=ed(e,t),C={x:r,y:a},A=await cv(t,M),D=Ou(td(d)),R=eT(D);let j=C[R],G=C[D];if(p){const H=R==="y"?"top":"left",Q=R==="y"?"bottom":"right",te=j+A[H],ne=j-A[Q];j=Qw(te,j,ne)}if(m){const H=D==="y"?"top":"left",Q=D==="y"?"bottom":"right",te=G+A[H],ne=G-A[Q];G=Qw(te,G,ne)}const V=s.fn({...t,[R]:j,[D]:G});return{...V,data:{x:V.x-r,y:V.y-a,enabled:{[R]:p,[D]:m}}}}}},wY=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:a,placement:d,rects:p,middlewareData:m}=t,{offset:s=0,mainAxis:M=!0,crossAxis:C=!0}=ed(e,t),A={x:r,y:a},D=Ou(d),R=eT(D);let j=A[R],G=A[D];const V=ed(s,t),H=typeof V=="number"?{mainAxis:V,crossAxis:0}:{mainAxis:0,crossAxis:0,...V};if(M){const ne=R==="y"?"height":"width",me=p.reference[R]-p.floating[ne]+H.mainAxis,fe=p.reference[R]+p.reference[ne]-H.mainAxis;j<me?j=me:j>fe&&(j=fe)}if(C){var Q,te;const ne=R==="y"?"width":"height",me=kz.has(td(d)),fe=p.reference[D]-p.floating[ne]+(me&&((Q=m.offset)==null?void 0:Q[D])||0)+(me?0:H.crossAxis),_e=p.reference[D]+p.reference[ne]+(me?0:((te=m.offset)==null?void 0:te[D])||0)-(me?H.crossAxis:0);G<fe?G=fe:G>_e&&(G=_e)}return{[R]:j,[D]:G}}}},SY=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,a;const{placement:d,rects:p,platform:m,elements:s}=t,{apply:M=()=>{},...C}=ed(e,t),A=await cv(t,C),D=td(d),R=Pg(d),j=Ou(d)==="y",{width:G,height:V}=p.floating;let H,Q;D==="top"||D==="bottom"?(H=D,Q=R===(await(m.isRTL==null?void 0:m.isRTL(s.floating))?"start":"end")?"left":"right"):(Q=D,H=R==="end"?"top":"bottom");const te=V-A.top-A.bottom,ne=G-A.left-A.right,me=of(V-A[H],te),fe=of(G-A[Q],ne),_e=!t.middlewareData.shift;let ye=me,Oe=fe;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(Oe=ne),(a=t.middlewareData.shift)!=null&&a.enabled.y&&(ye=te),_e&&!R){const ft=Qs(A.left,0),rt=Qs(A.right,0),at=Qs(A.top,0),Et=Qs(A.bottom,0);j?Oe=G-2*(ft!==0||rt!==0?ft+rt:Qs(A.left,A.right)):ye=V-2*(at!==0||Et!==0?at+Et:Qs(A.top,A.bottom))}await M({...t,availableWidth:Oe,availableHeight:ye});const nt=await m.getDimensions(s.floating);return G!==nt.width||V!==nt.height?{reset:{rects:!0}}:{}}}};function Pb(){return typeof window<"u"}function Dg(e){return Oz(e)?(e.nodeName||"").toLowerCase():"#document"}function tl(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function $u(e){var t;return(t=(Oz(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Oz(e){return Pb()?e instanceof Node||e instanceof tl(e).Node:!1}function $c(e){return Pb()?e instanceof Element||e instanceof tl(e).Element:!1}function Bu(e){return Pb()?e instanceof HTMLElement||e instanceof tl(e).HTMLElement:!1}function RA(e){return!Pb()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof tl(e).ShadowRoot}const TY=new Set(["inline","contents"]);function Dv(e){const{overflow:t,overflowX:r,overflowY:a,display:d}=Vc(e);return/auto|scroll|overlay|hidden|clip/.test(t+a+r)&&!TY.has(d)}const MY=new Set(["table","td","th"]);function CY(e){return MY.has(Dg(e))}const EY=[":popover-open",":modal"];function Db(e){return EY.some(t=>{try{return e.matches(t)}catch{return!1}})}const AY=["transform","translate","scale","rotate","perspective"],PY=["transform","translate","scale","rotate","perspective","filter"],DY=["paint","layout","strict","content"];function rT(e){const t=iT(),r=$c(e)?Vc(e):e;return AY.some(a=>r[a]?r[a]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||PY.some(a=>(r.willChange||"").includes(a))||DY.some(a=>(r.contain||"").includes(a))}function kY(e){let t=sf(e);for(;Bu(t)&&!hg(t);){if(rT(t))return t;if(Db(t))return null;t=sf(t)}return null}function iT(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const OY=new Set(["html","body","#document"]);function hg(e){return OY.has(Dg(e))}function Vc(e){return tl(e).getComputedStyle(e)}function kb(e){return $c(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function sf(e){if(Dg(e)==="html")return e;const t=e.assignedSlot||e.parentNode||RA(e)&&e.host||$u(e);return RA(t)?t.host:t}function Iz(e){const t=sf(e);return hg(t)?e.ownerDocument?e.ownerDocument.body:e.body:Bu(t)&&Dv(t)?t:Iz(t)}function uv(e,t,r){var a;t===void 0&&(t=[]),r===void 0&&(r=!0);const d=Iz(e),p=d===((a=e.ownerDocument)==null?void 0:a.body),m=tl(d);if(p){const s=eS(m);return t.concat(m,m.visualViewport||[],Dv(d)?d:[],s&&r?uv(s):[])}return t.concat(d,uv(d,[],r))}function eS(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function zz(e){const t=Vc(e);let r=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const d=Bu(e),p=d?e.offsetWidth:r,m=d?e.offsetHeight:a,s=$0(r)!==p||$0(a)!==m;return s&&(r=p,a=m),{width:r,height:a,$:s}}function aT(e){return $c(e)?e:e.contextElement}function Jm(e){const t=aT(e);if(!Bu(t))return Ru(1);const r=t.getBoundingClientRect(),{width:a,height:d,$:p}=zz(t);let m=(p?$0(r.width):r.width)/a,s=(p?$0(r.height):r.height)/d;return(!m||!Number.isFinite(m))&&(m=1),(!s||!Number.isFinite(s))&&(s=1),{x:m,y:s}}const IY=Ru(0);function Rz(e){const t=tl(e);return!iT()||!t.visualViewport?IY:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function zY(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==tl(e)?!1:t}function Fp(e,t,r,a){t===void 0&&(t=!1),r===void 0&&(r=!1);const d=e.getBoundingClientRect(),p=aT(e);let m=Ru(1);t&&(a?$c(a)&&(m=Jm(a)):m=Jm(e));const s=zY(p,r,a)?Rz(p):Ru(0);let M=(d.left+s.x)/m.x,C=(d.top+s.y)/m.y,A=d.width/m.x,D=d.height/m.y;if(p){const R=tl(p),j=a&&$c(a)?tl(a):a;let G=R,V=eS(G);for(;V&&a&&j!==G;){const H=Jm(V),Q=V.getBoundingClientRect(),te=Vc(V),ne=Q.left+(V.clientLeft+parseFloat(te.paddingLeft))*H.x,me=Q.top+(V.clientTop+parseFloat(te.paddingTop))*H.y;M*=H.x,C*=H.y,A*=H.x,D*=H.y,M+=ne,C+=me,G=tl(V),V=eS(G)}}return q0({width:A,height:D,x:M,y:C})}function Ob(e,t){const r=kb(e).scrollLeft;return t?t.left+r:Fp($u(e)).left+r}function jz(e,t){const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-Ob(e,r),d=r.top+t.scrollTop;return{x:a,y:d}}function RY(e){let{elements:t,rect:r,offsetParent:a,strategy:d}=e;const p=d==="fixed",m=$u(a),s=t?Db(t.floating):!1;if(a===m||s&&p)return r;let M={scrollLeft:0,scrollTop:0},C=Ru(1);const A=Ru(0),D=Bu(a);if((D||!D&&!p)&&((Dg(a)!=="body"||Dv(m))&&(M=kb(a)),Bu(a))){const j=Fp(a);C=Jm(a),A.x=j.x+a.clientLeft,A.y=j.y+a.clientTop}const R=m&&!D&&!p?jz(m,M):Ru(0);return{width:r.width*C.x,height:r.height*C.y,x:r.x*C.x-M.scrollLeft*C.x+A.x+R.x,y:r.y*C.y-M.scrollTop*C.y+A.y+R.y}}function jY(e){return Array.from(e.getClientRects())}function LY(e){const t=$u(e),r=kb(e),a=e.ownerDocument.body,d=Qs(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),p=Qs(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight);let m=-r.scrollLeft+Ob(e);const s=-r.scrollTop;return Vc(a).direction==="rtl"&&(m+=Qs(t.clientWidth,a.clientWidth)-d),{width:d,height:p,x:m,y:s}}const jA=25;function NY(e,t){const r=tl(e),a=$u(e),d=r.visualViewport;let p=a.clientWidth,m=a.clientHeight,s=0,M=0;if(d){p=d.width,m=d.height;const A=iT();(!A||A&&t==="fixed")&&(s=d.offsetLeft,M=d.offsetTop)}const C=Ob(a);if(C<=0){const A=a.ownerDocument,D=A.body,R=getComputedStyle(D),j=A.compatMode==="CSS1Compat"&&parseFloat(R.marginLeft)+parseFloat(R.marginRight)||0,G=Math.abs(a.clientWidth-D.clientWidth-j);G<=jA&&(p-=G)}else C<=jA&&(p+=C);return{width:p,height:m,x:s,y:M}}const BY=new Set(["absolute","fixed"]);function FY(e,t){const r=Fp(e,!0,t==="fixed"),a=r.top+e.clientTop,d=r.left+e.clientLeft,p=Bu(e)?Jm(e):Ru(1),m=e.clientWidth*p.x,s=e.clientHeight*p.y,M=d*p.x,C=a*p.y;return{width:m,height:s,x:M,y:C}}function LA(e,t,r){let a;if(t==="viewport")a=NY(e,r);else if(t==="document")a=LY($u(e));else if($c(t))a=FY(t,r);else{const d=Rz(e);a={x:t.x-d.x,y:t.y-d.y,width:t.width,height:t.height}}return q0(a)}function Lz(e,t){const r=sf(e);return r===t||!$c(r)||hg(r)?!1:Vc(r).position==="fixed"||Lz(r,t)}function UY(e,t){const r=t.get(e);if(r)return r;let a=uv(e,[],!1).filter(s=>$c(s)&&Dg(s)!=="body"),d=null;const p=Vc(e).position==="fixed";let m=p?sf(e):e;for(;$c(m)&&!hg(m);){const s=Vc(m),M=rT(m);!M&&s.position==="fixed"&&(d=null),(p?!M&&!d:!M&&s.position==="static"&&!!d&&BY.has(d.position)||Dv(m)&&!M&&Lz(e,m))?a=a.filter(A=>A!==m):d=s,m=sf(m)}return t.set(e,a),a}function $Y(e){let{element:t,boundary:r,rootBoundary:a,strategy:d}=e;const m=[...r==="clippingAncestors"?Db(t)?[]:UY(t,this._c):[].concat(r),a],s=m[0],M=m.reduce((C,A)=>{const D=LA(t,A,d);return C.top=Qs(D.top,C.top),C.right=of(D.right,C.right),C.bottom=of(D.bottom,C.bottom),C.left=Qs(D.left,C.left),C},LA(t,s,d));return{width:M.right-M.left,height:M.bottom-M.top,x:M.left,y:M.top}}function VY(e){const{width:t,height:r}=zz(e);return{width:t,height:r}}function qY(e,t,r){const a=Bu(t),d=$u(t),p=r==="fixed",m=Fp(e,!0,p,t);let s={scrollLeft:0,scrollTop:0};const M=Ru(0);function C(){M.x=Ob(d)}if(a||!a&&!p)if((Dg(t)!=="body"||Dv(d))&&(s=kb(t)),a){const j=Fp(t,!0,p,t);M.x=j.x+t.clientLeft,M.y=j.y+t.clientTop}else d&&C();p&&!a&&d&&C();const A=d&&!a&&!p?jz(d,s):Ru(0),D=m.left+s.scrollLeft-M.x-A.x,R=m.top+s.scrollTop-M.y-A.y;return{x:D,y:R,width:m.width,height:m.height}}function V1(e){return Vc(e).position==="static"}function NA(e,t){if(!Bu(e)||Vc(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return $u(e)===r&&(r=r.ownerDocument.body),r}function Nz(e,t){const r=tl(e);if(Db(e))return r;if(!Bu(e)){let d=sf(e);for(;d&&!hg(d);){if($c(d)&&!V1(d))return d;d=sf(d)}return r}let a=NA(e,t);for(;a&&CY(a)&&V1(a);)a=NA(a,t);return a&&hg(a)&&V1(a)&&!rT(a)?r:a||kY(e)||r}const GY=async function(e){const t=this.getOffsetParent||Nz,r=this.getDimensions,a=await r(e.floating);return{reference:qY(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function HY(e){return Vc(e).direction==="rtl"}const ZY={convertOffsetParentRelativeRectToViewportRelativeRect:RY,getDocumentElement:$u,getClippingRect:$Y,getOffsetParent:Nz,getElementRects:GY,getClientRects:jY,getDimensions:VY,getScale:Jm,isElement:$c,isRTL:HY};function Bz(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function WY(e,t){let r=null,a;const d=$u(e);function p(){var s;clearTimeout(a),(s=r)==null||s.disconnect(),r=null}function m(s,M){s===void 0&&(s=!1),M===void 0&&(M=1),p();const C=e.getBoundingClientRect(),{left:A,top:D,width:R,height:j}=C;if(s||t(),!R||!j)return;const G=F_(D),V=F_(d.clientWidth-(A+R)),H=F_(d.clientHeight-(D+j)),Q=F_(A),ne={rootMargin:-G+"px "+-V+"px "+-H+"px "+-Q+"px",threshold:Qs(0,of(1,M))||1};let me=!0;function fe(_e){const ye=_e[0].intersectionRatio;if(ye!==M){if(!me)return m();ye?m(!1,ye):a=setTimeout(()=>{m(!1,1e-7)},1e3)}ye===1&&!Bz(C,e.getBoundingClientRect())&&m(),me=!1}try{r=new IntersectionObserver(fe,{...ne,root:d.ownerDocument})}catch{r=new IntersectionObserver(fe,ne)}r.observe(e)}return m(!0),p}function YY(e,t,r,a){a===void 0&&(a={});const{ancestorScroll:d=!0,ancestorResize:p=!0,elementResize:m=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:M=!1}=a,C=aT(e),A=d||p?[...C?uv(C):[],...uv(t)]:[];A.forEach(Q=>{d&&Q.addEventListener("scroll",r,{passive:!0}),p&&Q.addEventListener("resize",r)});const D=C&&s?WY(C,r):null;let R=-1,j=null;m&&(j=new ResizeObserver(Q=>{let[te]=Q;te&&te.target===C&&j&&(j.unobserve(t),cancelAnimationFrame(R),R=requestAnimationFrame(()=>{var ne;(ne=j)==null||ne.observe(t)})),r()}),C&&!M&&j.observe(C),j.observe(t));let G,V=M?Fp(e):null;M&&H();function H(){const Q=Fp(e);V&&!Bz(V,Q)&&r(),V=Q,G=requestAnimationFrame(H)}return r(),()=>{var Q;A.forEach(te=>{d&&te.removeEventListener("scroll",r),p&&te.removeEventListener("resize",r)}),D?.(),(Q=j)==null||Q.disconnect(),j=null,M&&cancelAnimationFrame(G)}}const XY=bY,KY=xY,QY=yY,JY=SY,eX=vY,BA=gY,tX=wY,nX=(e,t,r)=>{const a=new Map,d={platform:ZY,...r},p={...d.platform,_c:a};return mY(e,t,{...d,platform:p})};var rX=typeof document<"u",iX=function(){},e0=rX?F.useLayoutEffect:iX;function G0(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,a,d;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(a=r;a--!==0;)if(!G0(e[a],t[a]))return!1;return!0}if(d=Object.keys(e),r=d.length,r!==Object.keys(t).length)return!1;for(a=r;a--!==0;)if(!{}.hasOwnProperty.call(t,d[a]))return!1;for(a=r;a--!==0;){const p=d[a];if(!(p==="_owner"&&e.$$typeof)&&!G0(e[p],t[p]))return!1}return!0}return e!==e&&t!==t}function Fz(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function FA(e,t){const r=Fz(e);return Math.round(t*r)/r}function q1(e){const t=F.useRef(e);return e0(()=>{t.current=e}),t}function aX(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:a=[],platform:d,elements:{reference:p,floating:m}={},transform:s=!0,whileElementsMounted:M,open:C}=e,[A,D]=F.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[R,j]=F.useState(a);G0(R,a)||j(a);const[G,V]=F.useState(null),[H,Q]=F.useState(null),te=F.useCallback(Ve=>{Ve!==_e.current&&(_e.current=Ve,V(Ve))},[]),ne=F.useCallback(Ve=>{Ve!==ye.current&&(ye.current=Ve,Q(Ve))},[]),me=p||G,fe=m||H,_e=F.useRef(null),ye=F.useRef(null),Oe=F.useRef(A),nt=M!=null,ft=q1(M),rt=q1(d),at=q1(C),Et=F.useCallback(()=>{if(!_e.current||!ye.current)return;const Ve={placement:t,strategy:r,middleware:R};rt.current&&(Ve.platform=rt.current),nX(_e.current,ye.current,Ve).then(ht=>{const qt={...ht,isPositioned:at.current!==!1};At.current&&!G0(Oe.current,qt)&&(Oe.current=qt,Vp.flushSync(()=>{D(qt)}))})},[R,t,r,rt,at]);e0(()=>{C===!1&&Oe.current.isPositioned&&(Oe.current.isPositioned=!1,D(Ve=>({...Ve,isPositioned:!1})))},[C]);const At=F.useRef(!1);e0(()=>(At.current=!0,()=>{At.current=!1}),[]),e0(()=>{if(me&&(_e.current=me),fe&&(ye.current=fe),me&&fe){if(ft.current)return ft.current(me,fe,Et);Et()}},[me,fe,Et,ft,nt]);const zt=F.useMemo(()=>({reference:_e,floating:ye,setReference:te,setFloating:ne}),[te,ne]),Le=F.useMemo(()=>({reference:me,floating:fe}),[me,fe]),Qe=F.useMemo(()=>{const Ve={position:r,left:0,top:0};if(!Le.floating)return Ve;const ht=FA(Le.floating,A.x),qt=FA(Le.floating,A.y);return s?{...Ve,transform:"translate("+ht+"px, "+qt+"px)",...Fz(Le.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:ht,top:qt}},[r,s,Le.floating,A.x,A.y]);return F.useMemo(()=>({...A,update:Et,refs:zt,elements:Le,floatingStyles:Qe}),[A,Et,zt,Le,Qe])}const oX=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:a,padding:d}=typeof e=="function"?e(r):e;return a&&t(a)?a.current!=null?BA({element:a.current,padding:d}).fn(r):{}:a?BA({element:a,padding:d}).fn(r):{}}}},sX=(e,t)=>({...XY(e),options:[e,t]}),lX=(e,t)=>({...KY(e),options:[e,t]}),cX=(e,t)=>({...tX(e),options:[e,t]}),uX=(e,t)=>({...QY(e),options:[e,t]}),hX=(e,t)=>({...JY(e),options:[e,t]}),dX=(e,t)=>({...eX(e),options:[e,t]}),fX=(e,t)=>({...oX(e),options:[e,t]});var pX="Arrow",Uz=F.forwardRef((e,t)=>{const{children:r,width:a=10,height:d=5,...p}=e;return X.jsx(xi.svg,{...p,ref:t,width:a,height:d,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:X.jsx("polygon",{points:"0,0 30,0 15,10"})})});Uz.displayName=pX;var mX=Uz;function gX(e){const[t,r]=F.useState(void 0);return xo(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const a=new ResizeObserver(d=>{if(!Array.isArray(d)||!d.length)return;const p=d[0];let m,s;if("borderBoxSize"in p){const M=p.borderBoxSize,C=Array.isArray(M)?M[0]:M;m=C.inlineSize,s=C.blockSize}else m=e.offsetWidth,s=e.offsetHeight;r({width:m,height:s})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}else r(void 0)},[e]),t}var oT="Popper",[$z,Ib]=Eb(oT),[yX,Vz]=$z(oT),qz=e=>{const{__scopePopper:t,children:r}=e,[a,d]=F.useState(null);return X.jsx(yX,{scope:t,anchor:a,onAnchorChange:d,children:r})};qz.displayName=oT;var Gz="PopperAnchor",Hz=F.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:a,...d}=e,p=Vz(Gz,r),m=F.useRef(null),s=Xi(t,m),M=F.useRef(null);return F.useEffect(()=>{const C=M.current;M.current=a?.current||m.current,C!==M.current&&p.onAnchorChange(M.current)}),a?null:X.jsx(xi.div,{...d,ref:s})});Hz.displayName=Gz;var sT="PopperContent",[vX,_X]=$z(sT),Zz=F.forwardRef((e,t)=>{const{__scopePopper:r,side:a="bottom",sideOffset:d=0,align:p="center",alignOffset:m=0,arrowPadding:s=0,avoidCollisions:M=!0,collisionBoundary:C=[],collisionPadding:A=0,sticky:D="partial",hideWhenDetached:R=!1,updatePositionStrategy:j="optimized",onPlaced:G,...V}=e,H=Vz(sT,r),[Q,te]=F.useState(null),ne=Xi(t,bt=>te(bt)),[me,fe]=F.useState(null),_e=gX(me),ye=_e?.width??0,Oe=_e?.height??0,nt=a+(p!=="center"?"-"+p:""),ft=typeof A=="number"?A:{top:0,right:0,bottom:0,left:0,...A},rt=Array.isArray(C)?C:[C],at=rt.length>0,Et={padding:ft,boundary:rt.filter(xX),altBoundary:at},{refs:At,floatingStyles:zt,placement:Le,isPositioned:Qe,middlewareData:Ve}=aX({strategy:"fixed",placement:nt,whileElementsMounted:(...bt)=>YY(...bt,{animationFrame:j==="always"}),elements:{reference:H.anchor},middleware:[sX({mainAxis:d+Oe,alignmentAxis:m}),M&&lX({mainAxis:!0,crossAxis:!1,limiter:D==="partial"?cX():void 0,...Et}),M&&uX({...Et}),hX({...Et,apply:({elements:bt,rects:nn,availableWidth:pt,availableHeight:Rt})=>{const{width:Ft,height:ot}=nn.reference,rn=bt.floating.style;rn.setProperty("--radix-popper-available-width",`${pt}px`),rn.setProperty("--radix-popper-available-height",`${Rt}px`),rn.setProperty("--radix-popper-anchor-width",`${Ft}px`),rn.setProperty("--radix-popper-anchor-height",`${ot}px`)}}),me&&fX({element:me,padding:s}),wX({arrowWidth:ye,arrowHeight:Oe}),R&&dX({strategy:"referenceHidden",...Et})]}),[ht,qt]=Xz(Le),Ae=Bp(G);xo(()=>{Qe&&Ae?.()},[Qe,Ae]);const qe=Ve.arrow?.x,_t=Ve.arrow?.y,Tt=Ve.arrow?.centerOffset!==0,[jt,Ht]=F.useState();return xo(()=>{Q&&Ht(window.getComputedStyle(Q).zIndex)},[Q]),X.jsx("div",{ref:At.setFloating,"data-radix-popper-content-wrapper":"",style:{...zt,transform:Qe?zt.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:jt,"--radix-popper-transform-origin":[Ve.transformOrigin?.x,Ve.transformOrigin?.y].join(" "),...Ve.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:X.jsx(vX,{scope:r,placedSide:ht,onArrowChange:fe,arrowX:qe,arrowY:_t,shouldHideArrow:Tt,children:X.jsx(xi.div,{"data-side":ht,"data-align":qt,...V,ref:ne,style:{...V.style,animation:Qe?void 0:"none"}})})})});Zz.displayName=sT;var Wz="PopperArrow",bX={top:"bottom",right:"left",bottom:"top",left:"right"},Yz=F.forwardRef(function(t,r){const{__scopePopper:a,...d}=t,p=_X(Wz,a),m=bX[p.placedSide];return X.jsx("span",{ref:p.onArrowChange,style:{position:"absolute",left:p.arrowX,top:p.arrowY,[m]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[p.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[p.placedSide],visibility:p.shouldHideArrow?"hidden":void 0},children:X.jsx(mX,{...d,ref:r,style:{...d.style,display:"block"}})})});Yz.displayName=Wz;function xX(e){return e!==null}var wX=e=>({name:"transformOrigin",options:e,fn(t){const{placement:r,rects:a,middlewareData:d}=t,m=d.arrow?.centerOffset!==0,s=m?0:e.arrowWidth,M=m?0:e.arrowHeight,[C,A]=Xz(r),D={start:"0%",center:"50%",end:"100%"}[A],R=(d.arrow?.x??0)+s/2,j=(d.arrow?.y??0)+M/2;let G="",V="";return C==="bottom"?(G=m?D:`${R}px`,V=`${-M}px`):C==="top"?(G=m?D:`${R}px`,V=`${a.floating.height+M}px`):C==="right"?(G=`${-M}px`,V=m?D:`${j}px`):C==="left"&&(G=`${a.floating.width+M}px`,V=m?D:`${j}px`),{data:{x:G,y:V}}}});function Xz(e){const[t,r="center"]=e.split("-");return[t,r]}var Kz=qz,lT=Hz,Qz=Zz,Jz=Yz,SX="Portal",cT=F.forwardRef((e,t)=>{const{container:r,...a}=e,[d,p]=F.useState(!1);xo(()=>p(!0),[]);const m=r||d&&globalThis?.document?.body;return m?QL.createPortal(X.jsx(xi.div,{...a,ref:t}),m):null});cT.displayName=SX;var TX=dS[" useInsertionEffect ".trim().toString()]||xo;function tS({prop:e,defaultProp:t,onChange:r=()=>{},caller:a}){const[d,p,m]=MX({defaultProp:t,onChange:r}),s=e!==void 0,M=s?e:d;{const A=F.useRef(e!==void 0);F.useEffect(()=>{const D=A.current;D!==s&&console.warn(`${a} is changing from ${D?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),A.current=s},[s,a])}const C=F.useCallback(A=>{if(s){const D=CX(A)?A(e):A;D!==e&&m.current?.(D)}else p(A)},[s,e,p,m]);return[M,C]}function MX({defaultProp:e,onChange:t}){const[r,a]=F.useState(e),d=F.useRef(r),p=F.useRef(t);return TX(()=>{p.current=t},[t]),F.useEffect(()=>{d.current!==r&&(p.current?.(r),d.current=r)},[r,d]),[r,a,p]}function CX(e){return typeof e=="function"}function EX(e){const t=F.useRef({value:e,previous:e});return F.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var eR=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),AX="VisuallyHidden",PX=F.forwardRef((e,t)=>X.jsx(xi.span,{...e,ref:t,style:{...eR,...e.style}}));PX.displayName=AX;var DX=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Hm=new WeakMap,U_=new WeakMap,$_={},G1=0,tR=function(e){return e&&(e.host||tR(e.parentNode))},kX=function(e,t){return t.map(function(r){if(e.contains(r))return r;var a=tR(r);return a&&e.contains(a)?a:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},OX=function(e,t,r,a){var d=kX(t,Array.isArray(e)?e:[e]);$_[r]||($_[r]=new WeakMap);var p=$_[r],m=[],s=new Set,M=new Set(d),C=function(D){!D||s.has(D)||(s.add(D),C(D.parentNode))};d.forEach(C);var A=function(D){!D||M.has(D)||Array.prototype.forEach.call(D.children,function(R){if(s.has(R))A(R);else try{var j=R.getAttribute(a),G=j!==null&&j!=="false",V=(Hm.get(R)||0)+1,H=(p.get(R)||0)+1;Hm.set(R,V),p.set(R,H),m.push(R),V===1&&G&&U_.set(R,!0),H===1&&R.setAttribute(r,"true"),G||R.setAttribute(a,"true")}catch(Q){console.error("aria-hidden: cannot operate on ",R,Q)}})};return A(t),s.clear(),G1++,function(){m.forEach(function(D){var R=Hm.get(D)-1,j=p.get(D)-1;Hm.set(D,R),p.set(D,j),R||(U_.has(D)||D.removeAttribute(a),U_.delete(D)),j||D.removeAttribute(r)}),G1--,G1||(Hm=new WeakMap,Hm=new WeakMap,U_=new WeakMap,$_={})}},nR=function(e,t,r){r===void 0&&(r="data-aria-hidden");var a=Array.from(Array.isArray(e)?e:[e]),d=DX(e);return d?(a.push.apply(a,Array.from(d.querySelectorAll("[aria-live], script"))),OX(a,d,r,"aria-hidden")):function(){return null}},Au=function(){return Au=Object.assign||function(t){for(var r,a=1,d=arguments.length;a<d;a++){r=arguments[a];for(var p in r)Object.prototype.hasOwnProperty.call(r,p)&&(t[p]=r[p])}return t},Au.apply(this,arguments)};function rR(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(e);d<a.length;d++)t.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(e,a[d])&&(r[a[d]]=e[a[d]]);return r}function IX(e,t,r){if(r||arguments.length===2)for(var a=0,d=t.length,p;a<d;a++)(p||!(a in t))&&(p||(p=Array.prototype.slice.call(t,0,a)),p[a]=t[a]);return e.concat(p||Array.prototype.slice.call(t))}var t0="right-scroll-bar-position",n0="width-before-scroll-bar",zX="with-scroll-bars-hidden",RX="--removed-body-scroll-bar-size";function H1(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function jX(e,t){var r=F.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(a){var d=r.value;d!==a&&(r.value=a,r.callback(a,d))}}}})[0];return r.callback=t,r.facade}var LX=typeof window<"u"?F.useLayoutEffect:F.useEffect,UA=new WeakMap;function NX(e,t){var r=jX(null,function(a){return e.forEach(function(d){return H1(d,a)})});return LX(function(){var a=UA.get(r);if(a){var d=new Set(a),p=new Set(e),m=r.current;d.forEach(function(s){p.has(s)||H1(s,null)}),p.forEach(function(s){d.has(s)||H1(s,m)})}UA.set(r,e)},[e]),r}function BX(e){return e}function FX(e,t){t===void 0&&(t=BX);var r=[],a=!1,d={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(p){var m=t(p,a);return r.push(m),function(){r=r.filter(function(s){return s!==m})}},assignSyncMedium:function(p){for(a=!0;r.length;){var m=r;r=[],m.forEach(p)}r={push:function(s){return p(s)},filter:function(){return r}}},assignMedium:function(p){a=!0;var m=[];if(r.length){var s=r;r=[],s.forEach(p),m=r}var M=function(){var A=m;m=[],A.forEach(p)},C=function(){return Promise.resolve().then(M)};C(),r={push:function(A){m.push(A),C()},filter:function(A){return m=m.filter(A),r}}}};return d}function UX(e){e===void 0&&(e={});var t=FX(null);return t.options=Au({async:!0,ssr:!1},e),t}var iR=function(e){var t=e.sideCar,r=rR(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=t.read();if(!a)throw new Error("Sidecar medium not found");return F.createElement(a,Au({},r))};iR.isSideCarExport=!0;function $X(e,t){return e.useMedium(t),iR}var aR=UX(),Z1=function(){},zb=F.forwardRef(function(e,t){var r=F.useRef(null),a=F.useState({onScrollCapture:Z1,onWheelCapture:Z1,onTouchMoveCapture:Z1}),d=a[0],p=a[1],m=e.forwardProps,s=e.children,M=e.className,C=e.removeScrollBar,A=e.enabled,D=e.shards,R=e.sideCar,j=e.noRelative,G=e.noIsolation,V=e.inert,H=e.allowPinchZoom,Q=e.as,te=Q===void 0?"div":Q,ne=e.gapMode,me=rR(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),fe=R,_e=NX([r,t]),ye=Au(Au({},me),d);return F.createElement(F.Fragment,null,A&&F.createElement(fe,{sideCar:aR,removeScrollBar:C,shards:D,noRelative:j,noIsolation:G,inert:V,setCallbacks:p,allowPinchZoom:!!H,lockRef:r,gapMode:ne}),m?F.cloneElement(F.Children.only(s),Au(Au({},ye),{ref:_e})):F.createElement(te,Au({},ye,{className:M,ref:_e}),s))});zb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};zb.classNames={fullWidth:n0,zeroRight:t0};var VX=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function qX(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=VX();return t&&e.setAttribute("nonce",t),e}function GX(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function HX(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var ZX=function(){var e=0,t=null;return{add:function(r){e==0&&(t=qX())&&(GX(t,r),HX(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},WX=function(){var e=ZX();return function(t,r){F.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},oR=function(){var e=WX(),t=function(r){var a=r.styles,d=r.dynamic;return e(a,d),null};return t},YX={left:0,top:0,right:0,gap:0},W1=function(e){return parseInt(e||"",10)||0},XX=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],a=t[e==="padding"?"paddingTop":"marginTop"],d=t[e==="padding"?"paddingRight":"marginRight"];return[W1(r),W1(a),W1(d)]},KX=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return YX;var t=XX(e),r=document.documentElement.clientWidth,a=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,a-r+t[2]-t[0])}},QX=oR(),eg="data-scroll-locked",JX=function(e,t,r,a){var d=e.left,p=e.top,m=e.right,s=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(zX,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(s,"px ").concat(a,`;
  }
  body[`).concat(eg,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(a,";"),r==="margin"&&`
    padding-left: `.concat(d,`px;
    padding-top: `).concat(p,`px;
    padding-right: `).concat(m,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(a,`;
    `),r==="padding"&&"padding-right: ".concat(s,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(t0,` {
    right: `).concat(s,"px ").concat(a,`;
  }
  
  .`).concat(n0,` {
    margin-right: `).concat(s,"px ").concat(a,`;
  }
  
  .`).concat(t0," .").concat(t0,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(n0," .").concat(n0,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(eg,`] {
    `).concat(RX,": ").concat(s,`px;
  }
`)},$A=function(){var e=parseInt(document.body.getAttribute(eg)||"0",10);return isFinite(e)?e:0},eK=function(){F.useEffect(function(){return document.body.setAttribute(eg,($A()+1).toString()),function(){var e=$A()-1;e<=0?document.body.removeAttribute(eg):document.body.setAttribute(eg,e.toString())}},[])},tK=function(e){var t=e.noRelative,r=e.noImportant,a=e.gapMode,d=a===void 0?"margin":a;eK();var p=F.useMemo(function(){return KX(d)},[d]);return F.createElement(QX,{styles:JX(p,!t,d,r?"":"!important")})},nS=!1;if(typeof window<"u")try{var V_=Object.defineProperty({},"passive",{get:function(){return nS=!0,!0}});window.addEventListener("test",V_,V_),window.removeEventListener("test",V_,V_)}catch{nS=!1}var Zm=nS?{passive:!1}:!1,nK=function(e){return e.tagName==="TEXTAREA"},sR=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!nK(e)&&r[t]==="visible")},rK=function(e){return sR(e,"overflowY")},iK=function(e){return sR(e,"overflowX")},VA=function(e,t){var r=t.ownerDocument,a=t;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var d=lR(e,a);if(d){var p=cR(e,a),m=p[1],s=p[2];if(m>s)return!0}a=a.parentNode}while(a&&a!==r.body);return!1},aK=function(e){var t=e.scrollTop,r=e.scrollHeight,a=e.clientHeight;return[t,r,a]},oK=function(e){var t=e.scrollLeft,r=e.scrollWidth,a=e.clientWidth;return[t,r,a]},lR=function(e,t){return e==="v"?rK(t):iK(t)},cR=function(e,t){return e==="v"?aK(t):oK(t)},sK=function(e,t){return e==="h"&&t==="rtl"?-1:1},lK=function(e,t,r,a,d){var p=sK(e,window.getComputedStyle(t).direction),m=p*a,s=r.target,M=t.contains(s),C=!1,A=m>0,D=0,R=0;do{if(!s)break;var j=cR(e,s),G=j[0],V=j[1],H=j[2],Q=V-H-p*G;(G||Q)&&lR(e,s)&&(D+=Q,R+=G);var te=s.parentNode;s=te&&te.nodeType===Node.DOCUMENT_FRAGMENT_NODE?te.host:te}while(!M&&s!==document.body||M&&(t.contains(s)||t===s));return(A&&Math.abs(D)<1||!A&&Math.abs(R)<1)&&(C=!0),C},q_=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},qA=function(e){return[e.deltaX,e.deltaY]},GA=function(e){return e&&"current"in e?e.current:e},cK=function(e,t){return e[0]===t[0]&&e[1]===t[1]},uK=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},hK=0,Wm=[];function dK(e){var t=F.useRef([]),r=F.useRef([0,0]),a=F.useRef(),d=F.useState(hK++)[0],p=F.useState(oR)[0],m=F.useRef(e);F.useEffect(function(){m.current=e},[e]),F.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(d));var V=IX([e.lockRef.current],(e.shards||[]).map(GA),!0).filter(Boolean);return V.forEach(function(H){return H.classList.add("allow-interactivity-".concat(d))}),function(){document.body.classList.remove("block-interactivity-".concat(d)),V.forEach(function(H){return H.classList.remove("allow-interactivity-".concat(d))})}}},[e.inert,e.lockRef.current,e.shards]);var s=F.useCallback(function(V,H){if("touches"in V&&V.touches.length===2||V.type==="wheel"&&V.ctrlKey)return!m.current.allowPinchZoom;var Q=q_(V),te=r.current,ne="deltaX"in V?V.deltaX:te[0]-Q[0],me="deltaY"in V?V.deltaY:te[1]-Q[1],fe,_e=V.target,ye=Math.abs(ne)>Math.abs(me)?"h":"v";if("touches"in V&&ye==="h"&&_e.type==="range")return!1;var Oe=VA(ye,_e);if(!Oe)return!0;if(Oe?fe=ye:(fe=ye==="v"?"h":"v",Oe=VA(ye,_e)),!Oe)return!1;if(!a.current&&"changedTouches"in V&&(ne||me)&&(a.current=fe),!fe)return!0;var nt=a.current||fe;return lK(nt,H,V,nt==="h"?ne:me)},[]),M=F.useCallback(function(V){var H=V;if(!(!Wm.length||Wm[Wm.length-1]!==p)){var Q="deltaY"in H?qA(H):q_(H),te=t.current.filter(function(fe){return fe.name===H.type&&(fe.target===H.target||H.target===fe.shadowParent)&&cK(fe.delta,Q)})[0];if(te&&te.should){H.cancelable&&H.preventDefault();return}if(!te){var ne=(m.current.shards||[]).map(GA).filter(Boolean).filter(function(fe){return fe.contains(H.target)}),me=ne.length>0?s(H,ne[0]):!m.current.noIsolation;me&&H.cancelable&&H.preventDefault()}}},[]),C=F.useCallback(function(V,H,Q,te){var ne={name:V,delta:H,target:Q,should:te,shadowParent:fK(Q)};t.current.push(ne),setTimeout(function(){t.current=t.current.filter(function(me){return me!==ne})},1)},[]),A=F.useCallback(function(V){r.current=q_(V),a.current=void 0},[]),D=F.useCallback(function(V){C(V.type,qA(V),V.target,s(V,e.lockRef.current))},[]),R=F.useCallback(function(V){C(V.type,q_(V),V.target,s(V,e.lockRef.current))},[]);F.useEffect(function(){return Wm.push(p),e.setCallbacks({onScrollCapture:D,onWheelCapture:D,onTouchMoveCapture:R}),document.addEventListener("wheel",M,Zm),document.addEventListener("touchmove",M,Zm),document.addEventListener("touchstart",A,Zm),function(){Wm=Wm.filter(function(V){return V!==p}),document.removeEventListener("wheel",M,Zm),document.removeEventListener("touchmove",M,Zm),document.removeEventListener("touchstart",A,Zm)}},[]);var j=e.removeScrollBar,G=e.inert;return F.createElement(F.Fragment,null,G?F.createElement(p,{styles:uK(d)}):null,j?F.createElement(tK,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function fK(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const pK=$X(aR,dK);var uT=F.forwardRef(function(e,t){return F.createElement(zb,Au({},e,{ref:t,sideCar:pK}))});uT.classNames=zb.classNames;var mK=[" ","Enter","ArrowUp","ArrowDown"],gK=[" ","Enter"],Up="Select",[Rb,jb,yK]=jW(Up),[kg]=Eb(Up,[yK,Ib]),Lb=Ib(),[vK,df]=kg(Up),[_K,bK]=kg(Up),uR=e=>{const{__scopeSelect:t,children:r,open:a,defaultOpen:d,onOpenChange:p,value:m,defaultValue:s,onValueChange:M,dir:C,name:A,autoComplete:D,disabled:R,required:j,form:G}=e,V=Lb(t),[H,Q]=F.useState(null),[te,ne]=F.useState(null),[me,fe]=F.useState(!1),_e=NW(C),[ye,Oe]=tS({prop:a,defaultProp:d??!1,onChange:p,caller:Up}),[nt,ft]=tS({prop:m,defaultProp:s,onChange:M,caller:Up}),rt=F.useRef(null),at=H?G||!!H.closest("form"):!0,[Et,At]=F.useState(new Set),zt=Array.from(Et).map(Le=>Le.props.value).join(";");return X.jsx(Kz,{...V,children:X.jsxs(vK,{required:j,scope:t,trigger:H,onTriggerChange:Q,valueNode:te,onValueNodeChange:ne,valueNodeHasChildren:me,onValueNodeHasChildrenChange:fe,contentId:Ab(),value:nt,onValueChange:ft,open:ye,onOpenChange:Oe,dir:_e,triggerPointerDownPosRef:rt,disabled:R,children:[X.jsx(Rb.Provider,{scope:t,children:X.jsx(_K,{scope:e.__scopeSelect,onNativeOptionAdd:F.useCallback(Le=>{At(Qe=>new Set(Qe).add(Le))},[]),onNativeOptionRemove:F.useCallback(Le=>{At(Qe=>{const Ve=new Set(Qe);return Ve.delete(Le),Ve})},[]),children:r})}),at?X.jsxs(OR,{"aria-hidden":!0,required:j,tabIndex:-1,name:A,autoComplete:D,value:nt,onChange:Le=>ft(Le.target.value),disabled:R,form:G,children:[nt===void 0?X.jsx("option",{value:""}):null,Array.from(Et)]},zt):null]})})};uR.displayName=Up;var hR="SelectTrigger",dR=F.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:a=!1,...d}=e,p=Lb(r),m=df(hR,r),s=m.disabled||a,M=Xi(t,m.onTriggerChange),C=jb(r),A=F.useRef("touch"),[D,R,j]=zR(V=>{const H=C().filter(ne=>!ne.disabled),Q=H.find(ne=>ne.value===m.value),te=RR(H,V,Q);te!==void 0&&m.onValueChange(te.value)}),G=V=>{s||(m.onOpenChange(!0),j()),V&&(m.triggerPointerDownPosRef.current={x:Math.round(V.pageX),y:Math.round(V.pageY)})};return X.jsx(lT,{asChild:!0,...p,children:X.jsx(xi.button,{type:"button",role:"combobox","aria-controls":m.contentId,"aria-expanded":m.open,"aria-required":m.required,"aria-autocomplete":"none",dir:m.dir,"data-state":m.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":IR(m.value)?"":void 0,...d,ref:M,onClick:Jr(d.onClick,V=>{V.currentTarget.focus(),A.current!=="mouse"&&G(V)}),onPointerDown:Jr(d.onPointerDown,V=>{A.current=V.pointerType;const H=V.target;H.hasPointerCapture(V.pointerId)&&H.releasePointerCapture(V.pointerId),V.button===0&&V.ctrlKey===!1&&V.pointerType==="mouse"&&(G(V),V.preventDefault())}),onKeyDown:Jr(d.onKeyDown,V=>{const H=D.current!=="";!(V.ctrlKey||V.altKey||V.metaKey)&&V.key.length===1&&R(V.key),!(H&&V.key===" ")&&mK.includes(V.key)&&(G(),V.preventDefault())})})})});dR.displayName=hR;var fR="SelectValue",pR=F.forwardRef((e,t)=>{const{__scopeSelect:r,className:a,style:d,children:p,placeholder:m="",...s}=e,M=df(fR,r),{onValueNodeHasChildrenChange:C}=M,A=p!==void 0,D=Xi(t,M.onValueNodeChange);return xo(()=>{C(A)},[C,A]),X.jsx(xi.span,{...s,ref:D,style:{pointerEvents:"none"},children:IR(M.value)?X.jsx(X.Fragment,{children:m}):p})});pR.displayName=fR;var xK="SelectIcon",mR=F.forwardRef((e,t)=>{const{__scopeSelect:r,children:a,...d}=e;return X.jsx(xi.span,{"aria-hidden":!0,...d,ref:t,children:a||"▼"})});mR.displayName=xK;var wK="SelectPortal",gR=e=>X.jsx(cT,{asChild:!0,...e});gR.displayName=wK;var $p="SelectContent",yR=F.forwardRef((e,t)=>{const r=df($p,e.__scopeSelect),[a,d]=F.useState();if(xo(()=>{d(new DocumentFragment)},[]),!r.open){const p=a;return p?Vp.createPortal(X.jsx(vR,{scope:e.__scopeSelect,children:X.jsx(Rb.Slot,{scope:e.__scopeSelect,children:X.jsx("div",{children:e.children})})}),p):null}return X.jsx(_R,{...e,ref:t})});yR.displayName=$p;var Lc=10,[vR,ff]=kg($p),SK="SelectContentImpl",TK=ug("SelectContent.RemoveScroll"),_R=F.forwardRef((e,t)=>{const{__scopeSelect:r,position:a="item-aligned",onCloseAutoFocus:d,onEscapeKeyDown:p,onPointerDownOutside:m,side:s,sideOffset:M,align:C,alignOffset:A,arrowPadding:D,collisionBoundary:R,collisionPadding:j,sticky:G,hideWhenDetached:V,avoidCollisions:H,...Q}=e,te=df($p,r),[ne,me]=F.useState(null),[fe,_e]=F.useState(null),ye=Xi(t,bt=>me(bt)),[Oe,nt]=F.useState(null),[ft,rt]=F.useState(null),at=jb(r),[Et,At]=F.useState(!1),zt=F.useRef(!1);F.useEffect(()=>{if(ne)return nR(ne)},[ne]),Az();const Le=F.useCallback(bt=>{const[nn,...pt]=at().map(ot=>ot.ref.current),[Rt]=pt.slice(-1),Ft=document.activeElement;for(const ot of bt)if(ot===Ft||(ot?.scrollIntoView({block:"nearest"}),ot===nn&&fe&&(fe.scrollTop=0),ot===Rt&&fe&&(fe.scrollTop=fe.scrollHeight),ot?.focus(),document.activeElement!==Ft))return},[at,fe]),Qe=F.useCallback(()=>Le([Oe,ne]),[Le,Oe,ne]);F.useEffect(()=>{Et&&Qe()},[Et,Qe]);const{onOpenChange:Ve,triggerPointerDownPosRef:ht}=te;F.useEffect(()=>{if(ne){let bt={x:0,y:0};const nn=Rt=>{bt={x:Math.abs(Math.round(Rt.pageX)-(ht.current?.x??0)),y:Math.abs(Math.round(Rt.pageY)-(ht.current?.y??0))}},pt=Rt=>{bt.x<=10&&bt.y<=10?Rt.preventDefault():ne.contains(Rt.target)||Ve(!1),document.removeEventListener("pointermove",nn),ht.current=null};return ht.current!==null&&(document.addEventListener("pointermove",nn),document.addEventListener("pointerup",pt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",nn),document.removeEventListener("pointerup",pt,{capture:!0})}}},[ne,Ve,ht]),F.useEffect(()=>{const bt=()=>Ve(!1);return window.addEventListener("blur",bt),window.addEventListener("resize",bt),()=>{window.removeEventListener("blur",bt),window.removeEventListener("resize",bt)}},[Ve]);const[qt,Ae]=zR(bt=>{const nn=at().filter(Ft=>!Ft.disabled),pt=nn.find(Ft=>Ft.ref.current===document.activeElement),Rt=RR(nn,bt,pt);Rt&&setTimeout(()=>Rt.ref.current.focus())}),qe=F.useCallback((bt,nn,pt)=>{const Rt=!zt.current&&!pt;(te.value!==void 0&&te.value===nn||Rt)&&(nt(bt),Rt&&(zt.current=!0))},[te.value]),_t=F.useCallback(()=>ne?.focus(),[ne]),Tt=F.useCallback((bt,nn,pt)=>{const Rt=!zt.current&&!pt;(te.value!==void 0&&te.value===nn||Rt)&&rt(bt)},[te.value]),jt=a==="popper"?rS:bR,Ht=jt===rS?{side:s,sideOffset:M,align:C,alignOffset:A,arrowPadding:D,collisionBoundary:R,collisionPadding:j,sticky:G,hideWhenDetached:V,avoidCollisions:H}:{};return X.jsx(vR,{scope:r,content:ne,viewport:fe,onViewportChange:_e,itemRefCallback:qe,selectedItem:Oe,onItemLeave:_t,itemTextRefCallback:Tt,focusSelectedItem:Qe,selectedItemText:ft,position:a,isPositioned:Et,searchRef:qt,children:X.jsx(uT,{as:TK,allowPinchZoom:!0,children:X.jsx(J2,{asChild:!0,trapped:te.open,onMountAutoFocus:bt=>{bt.preventDefault()},onUnmountAutoFocus:Jr(d,bt=>{te.trigger?.focus({preventScroll:!0}),bt.preventDefault()}),children:X.jsx(Q2,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:p,onPointerDownOutside:m,onFocusOutside:bt=>bt.preventDefault(),onDismiss:()=>te.onOpenChange(!1),children:X.jsx(jt,{role:"listbox",id:te.contentId,"data-state":te.open?"open":"closed",dir:te.dir,onContextMenu:bt=>bt.preventDefault(),...Q,...Ht,onPlaced:()=>At(!0),ref:ye,style:{display:"flex",flexDirection:"column",outline:"none",...Q.style},onKeyDown:Jr(Q.onKeyDown,bt=>{const nn=bt.ctrlKey||bt.altKey||bt.metaKey;if(bt.key==="Tab"&&bt.preventDefault(),!nn&&bt.key.length===1&&Ae(bt.key),["ArrowUp","ArrowDown","Home","End"].includes(bt.key)){let Rt=at().filter(Ft=>!Ft.disabled).map(Ft=>Ft.ref.current);if(["ArrowUp","End"].includes(bt.key)&&(Rt=Rt.slice().reverse()),["ArrowUp","ArrowDown"].includes(bt.key)){const Ft=bt.target,ot=Rt.indexOf(Ft);Rt=Rt.slice(ot+1)}setTimeout(()=>Le(Rt)),bt.preventDefault()}})})})})})})});_R.displayName=SK;var MK="SelectItemAlignedPosition",bR=F.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:a,...d}=e,p=df($p,r),m=ff($p,r),[s,M]=F.useState(null),[C,A]=F.useState(null),D=Xi(t,ye=>A(ye)),R=jb(r),j=F.useRef(!1),G=F.useRef(!0),{viewport:V,selectedItem:H,selectedItemText:Q,focusSelectedItem:te}=m,ne=F.useCallback(()=>{if(p.trigger&&p.valueNode&&s&&C&&V&&H&&Q){const ye=p.trigger.getBoundingClientRect(),Oe=C.getBoundingClientRect(),nt=p.valueNode.getBoundingClientRect(),ft=Q.getBoundingClientRect();if(p.dir!=="rtl"){const Ft=ft.left-Oe.left,ot=nt.left-Ft,rn=ye.left-ot,Wt=ye.width+rn,Vn=Math.max(Wt,Oe.width),Zn=window.innerWidth-Lc,Wr=xA(ot,[Lc,Math.max(Lc,Zn-Vn)]);s.style.minWidth=Wt+"px",s.style.left=Wr+"px"}else{const Ft=Oe.right-ft.right,ot=window.innerWidth-nt.right-Ft,rn=window.innerWidth-ye.right-ot,Wt=ye.width+rn,Vn=Math.max(Wt,Oe.width),Zn=window.innerWidth-Lc,Wr=xA(ot,[Lc,Math.max(Lc,Zn-Vn)]);s.style.minWidth=Wt+"px",s.style.right=Wr+"px"}const rt=R(),at=window.innerHeight-Lc*2,Et=V.scrollHeight,At=window.getComputedStyle(C),zt=parseInt(At.borderTopWidth,10),Le=parseInt(At.paddingTop,10),Qe=parseInt(At.borderBottomWidth,10),Ve=parseInt(At.paddingBottom,10),ht=zt+Le+Et+Ve+Qe,qt=Math.min(H.offsetHeight*5,ht),Ae=window.getComputedStyle(V),qe=parseInt(Ae.paddingTop,10),_t=parseInt(Ae.paddingBottom,10),Tt=ye.top+ye.height/2-Lc,jt=at-Tt,Ht=H.offsetHeight/2,bt=H.offsetTop+Ht,nn=zt+Le+bt,pt=ht-nn;if(nn<=Tt){const Ft=rt.length>0&&H===rt[rt.length-1].ref.current;s.style.bottom="0px";const ot=C.clientHeight-V.offsetTop-V.offsetHeight,rn=Math.max(jt,Ht+(Ft?_t:0)+ot+Qe),Wt=nn+rn;s.style.height=Wt+"px"}else{const Ft=rt.length>0&&H===rt[0].ref.current;s.style.top="0px";const rn=Math.max(Tt,zt+V.offsetTop+(Ft?qe:0)+Ht)+pt;s.style.height=rn+"px",V.scrollTop=nn-Tt+V.offsetTop}s.style.margin=`${Lc}px 0`,s.style.minHeight=qt+"px",s.style.maxHeight=at+"px",a?.(),requestAnimationFrame(()=>j.current=!0)}},[R,p.trigger,p.valueNode,s,C,V,H,Q,p.dir,a]);xo(()=>ne(),[ne]);const[me,fe]=F.useState();xo(()=>{C&&fe(window.getComputedStyle(C).zIndex)},[C]);const _e=F.useCallback(ye=>{ye&&G.current===!0&&(ne(),te?.(),G.current=!1)},[ne,te]);return X.jsx(EK,{scope:r,contentWrapper:s,shouldExpandOnScrollRef:j,onScrollButtonChange:_e,children:X.jsx("div",{ref:M,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:me},children:X.jsx(xi.div,{...d,ref:D,style:{boxSizing:"border-box",maxHeight:"100%",...d.style}})})})});bR.displayName=MK;var CK="SelectPopperPosition",rS=F.forwardRef((e,t)=>{const{__scopeSelect:r,align:a="start",collisionPadding:d=Lc,...p}=e,m=Lb(r);return X.jsx(Qz,{...m,...p,ref:t,align:a,collisionPadding:d,style:{boxSizing:"border-box",...p.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});rS.displayName=CK;var[EK,hT]=kg($p,{}),iS="SelectViewport",xR=F.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:a,...d}=e,p=ff(iS,r),m=hT(iS,r),s=Xi(t,p.onViewportChange),M=F.useRef(0);return X.jsxs(X.Fragment,{children:[X.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),X.jsx(Rb.Slot,{scope:r,children:X.jsx(xi.div,{"data-radix-select-viewport":"",role:"presentation",...d,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...d.style},onScroll:Jr(d.onScroll,C=>{const A=C.currentTarget,{contentWrapper:D,shouldExpandOnScrollRef:R}=m;if(R?.current&&D){const j=Math.abs(M.current-A.scrollTop);if(j>0){const G=window.innerHeight-Lc*2,V=parseFloat(D.style.minHeight),H=parseFloat(D.style.height),Q=Math.max(V,H);if(Q<G){const te=Q+j,ne=Math.min(G,te),me=te-ne;D.style.height=ne+"px",D.style.bottom==="0px"&&(A.scrollTop=me>0?me:0,D.style.justifyContent="flex-end")}}}M.current=A.scrollTop})})})]})});xR.displayName=iS;var wR="SelectGroup",[AK,PK]=kg(wR),DK=F.forwardRef((e,t)=>{const{__scopeSelect:r,...a}=e,d=Ab();return X.jsx(AK,{scope:r,id:d,children:X.jsx(xi.div,{role:"group","aria-labelledby":d,...a,ref:t})})});DK.displayName=wR;var SR="SelectLabel",kK=F.forwardRef((e,t)=>{const{__scopeSelect:r,...a}=e,d=PK(SR,r);return X.jsx(xi.div,{id:d.id,...a,ref:t})});kK.displayName=SR;var H0="SelectItem",[OK,TR]=kg(H0),MR=F.forwardRef((e,t)=>{const{__scopeSelect:r,value:a,disabled:d=!1,textValue:p,...m}=e,s=df(H0,r),M=ff(H0,r),C=s.value===a,[A,D]=F.useState(p??""),[R,j]=F.useState(!1),G=Xi(t,te=>M.itemRefCallback?.(te,a,d)),V=Ab(),H=F.useRef("touch"),Q=()=>{d||(s.onValueChange(a),s.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return X.jsx(OK,{scope:r,value:a,disabled:d,textId:V,isSelected:C,onItemTextChange:F.useCallback(te=>{D(ne=>ne||(te?.textContent??"").trim())},[]),children:X.jsx(Rb.ItemSlot,{scope:r,value:a,disabled:d,textValue:A,children:X.jsx(xi.div,{role:"option","aria-labelledby":V,"data-highlighted":R?"":void 0,"aria-selected":C&&R,"data-state":C?"checked":"unchecked","aria-disabled":d||void 0,"data-disabled":d?"":void 0,tabIndex:d?void 0:-1,...m,ref:G,onFocus:Jr(m.onFocus,()=>j(!0)),onBlur:Jr(m.onBlur,()=>j(!1)),onClick:Jr(m.onClick,()=>{H.current!=="mouse"&&Q()}),onPointerUp:Jr(m.onPointerUp,()=>{H.current==="mouse"&&Q()}),onPointerDown:Jr(m.onPointerDown,te=>{H.current=te.pointerType}),onPointerMove:Jr(m.onPointerMove,te=>{H.current=te.pointerType,d?M.onItemLeave?.():H.current==="mouse"&&te.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Jr(m.onPointerLeave,te=>{te.currentTarget===document.activeElement&&M.onItemLeave?.()}),onKeyDown:Jr(m.onKeyDown,te=>{M.searchRef?.current!==""&&te.key===" "||(gK.includes(te.key)&&Q(),te.key===" "&&te.preventDefault())})})})})});MR.displayName=H0;var Hy="SelectItemText",CR=F.forwardRef((e,t)=>{const{__scopeSelect:r,className:a,style:d,...p}=e,m=df(Hy,r),s=ff(Hy,r),M=TR(Hy,r),C=bK(Hy,r),[A,D]=F.useState(null),R=Xi(t,Q=>D(Q),M.onItemTextChange,Q=>s.itemTextRefCallback?.(Q,M.value,M.disabled)),j=A?.textContent,G=F.useMemo(()=>X.jsx("option",{value:M.value,disabled:M.disabled,children:j},M.value),[M.disabled,M.value,j]),{onNativeOptionAdd:V,onNativeOptionRemove:H}=C;return xo(()=>(V(G),()=>H(G)),[V,H,G]),X.jsxs(X.Fragment,{children:[X.jsx(xi.span,{id:M.textId,...p,ref:R}),M.isSelected&&m.valueNode&&!m.valueNodeHasChildren?Vp.createPortal(p.children,m.valueNode):null]})});CR.displayName=Hy;var ER="SelectItemIndicator",AR=F.forwardRef((e,t)=>{const{__scopeSelect:r,...a}=e;return TR(ER,r).isSelected?X.jsx(xi.span,{"aria-hidden":!0,...a,ref:t}):null});AR.displayName=ER;var aS="SelectScrollUpButton",PR=F.forwardRef((e,t)=>{const r=ff(aS,e.__scopeSelect),a=hT(aS,e.__scopeSelect),[d,p]=F.useState(!1),m=Xi(t,a.onScrollButtonChange);return xo(()=>{if(r.viewport&&r.isPositioned){let s=function(){const C=M.scrollTop>0;p(C)};const M=r.viewport;return s(),M.addEventListener("scroll",s),()=>M.removeEventListener("scroll",s)}},[r.viewport,r.isPositioned]),d?X.jsx(kR,{...e,ref:m,onAutoScroll:()=>{const{viewport:s,selectedItem:M}=r;s&&M&&(s.scrollTop=s.scrollTop-M.offsetHeight)}}):null});PR.displayName=aS;var oS="SelectScrollDownButton",DR=F.forwardRef((e,t)=>{const r=ff(oS,e.__scopeSelect),a=hT(oS,e.__scopeSelect),[d,p]=F.useState(!1),m=Xi(t,a.onScrollButtonChange);return xo(()=>{if(r.viewport&&r.isPositioned){let s=function(){const C=M.scrollHeight-M.clientHeight,A=Math.ceil(M.scrollTop)<C;p(A)};const M=r.viewport;return s(),M.addEventListener("scroll",s),()=>M.removeEventListener("scroll",s)}},[r.viewport,r.isPositioned]),d?X.jsx(kR,{...e,ref:m,onAutoScroll:()=>{const{viewport:s,selectedItem:M}=r;s&&M&&(s.scrollTop=s.scrollTop+M.offsetHeight)}}):null});DR.displayName=oS;var kR=F.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:a,...d}=e,p=ff("SelectScrollButton",r),m=F.useRef(null),s=jb(r),M=F.useCallback(()=>{m.current!==null&&(window.clearInterval(m.current),m.current=null)},[]);return F.useEffect(()=>()=>M(),[M]),xo(()=>{s().find(A=>A.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[s]),X.jsx(xi.div,{"aria-hidden":!0,...d,ref:t,style:{flexShrink:0,...d.style},onPointerDown:Jr(d.onPointerDown,()=>{m.current===null&&(m.current=window.setInterval(a,50))}),onPointerMove:Jr(d.onPointerMove,()=>{p.onItemLeave?.(),m.current===null&&(m.current=window.setInterval(a,50))}),onPointerLeave:Jr(d.onPointerLeave,()=>{M()})})}),IK="SelectSeparator",zK=F.forwardRef((e,t)=>{const{__scopeSelect:r,...a}=e;return X.jsx(xi.div,{"aria-hidden":!0,...a,ref:t})});zK.displayName=IK;var sS="SelectArrow",RK=F.forwardRef((e,t)=>{const{__scopeSelect:r,...a}=e,d=Lb(r),p=df(sS,r),m=ff(sS,r);return p.open&&m.position==="popper"?X.jsx(Jz,{...d,...a,ref:t}):null});RK.displayName=sS;var jK="SelectBubbleInput",OR=F.forwardRef(({__scopeSelect:e,value:t,...r},a)=>{const d=F.useRef(null),p=Xi(a,d),m=EX(t);return F.useEffect(()=>{const s=d.current;if(!s)return;const M=window.HTMLSelectElement.prototype,A=Object.getOwnPropertyDescriptor(M,"value").set;if(m!==t&&A){const D=new Event("change",{bubbles:!0});A.call(s,t),s.dispatchEvent(D)}},[m,t]),X.jsx(xi.select,{...r,style:{...eR,...r.style},ref:p,defaultValue:t})});OR.displayName=jK;function IR(e){return e===""||e===void 0}function zR(e){const t=Bp(e),r=F.useRef(""),a=F.useRef(0),d=F.useCallback(m=>{const s=r.current+m;t(s),(function M(C){r.current=C,window.clearTimeout(a.current),C!==""&&(a.current=window.setTimeout(()=>M(""),1e3))})(s)},[t]),p=F.useCallback(()=>{r.current="",window.clearTimeout(a.current)},[]);return F.useEffect(()=>()=>window.clearTimeout(a.current),[]),[r,d,p]}function RR(e,t,r){const d=t.length>1&&Array.from(t).every(C=>C===t[0])?t[0]:t,p=r?e.indexOf(r):-1;let m=LK(e,Math.max(p,0));d.length===1&&(m=m.filter(C=>C!==r));const M=m.find(C=>C.textValue.toLowerCase().startsWith(d.toLowerCase()));return M!==r?M:void 0}function LK(e,t){return e.map((r,a)=>e[(t+a)%e.length])}var NK=uR,BK=dR,FK=pR,UK=mR,$K=gR,VK=yR,qK=xR,GK=MR,HK=CR,ZK=AR,WK=PR,YK=DR;function HA({...e}){return X.jsx(NK,{"data-slot":"select",...e})}function ZA({...e}){return X.jsx(FK,{"data-slot":"select-value",...e})}function WA({className:e,size:t="default",children:r,...a}){return X.jsxs(BK,{"data-slot":"select-trigger","data-size":t,className:Rn("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...a,children:[r,X.jsx(UK,{asChild:!0,children:X.jsx(_S,{className:"size-4 opacity-50"})})]})}function YA({className:e,children:t,position:r="popper",align:a="center",...d}){return X.jsx($K,{children:X.jsxs(VK,{"data-slot":"select-content",className:Rn("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,align:a,...d,children:[X.jsx(XK,{}),X.jsx(qK,{className:Rn("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),X.jsx(KK,{})]})})}function XA({className:e,children:t,...r}){return X.jsxs(GK,{"data-slot":"select-item",className:Rn("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...r,children:[X.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:X.jsx(ZK,{children:X.jsx(pN,{className:"size-4"})})}),X.jsx(HK,{children:t})]})}function XK({className:e,...t}){return X.jsx(WK,{"data-slot":"select-scroll-up-button",className:Rn("flex cursor-default items-center justify-center py-1",e),...t,children:X.jsx(bN,{className:"size-4"})})}function KK({className:e,...t}){return X.jsx(YK,{"data-slot":"select-scroll-down-button",className:Rn("flex cursor-default items-center justify-center py-1",e),...t,children:X.jsx(_S,{className:"size-4"})})}function QK(e,t){return F.useReducer((r,a)=>t[r][a]??r,e)}var dT=e=>{const{present:t,children:r}=e,a=JK(t),d=typeof r=="function"?r({present:a.isPresent}):F.Children.only(r),p=Xi(a.ref,eQ(d));return typeof r=="function"||a.isPresent?F.cloneElement(d,{ref:p}):null};dT.displayName="Presence";function JK(e){const[t,r]=F.useState(),a=F.useRef(null),d=F.useRef(e),p=F.useRef("none"),m=e?"mounted":"unmounted",[s,M]=QK(m,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return F.useEffect(()=>{const C=G_(a.current);p.current=s==="mounted"?C:"none"},[s]),xo(()=>{const C=a.current,A=d.current;if(A!==e){const R=p.current,j=G_(C);e?M("MOUNT"):j==="none"||C?.display==="none"?M("UNMOUNT"):M(A&&R!==j?"ANIMATION_OUT":"UNMOUNT"),d.current=e}},[e,M]),xo(()=>{if(t){let C;const A=t.ownerDocument.defaultView??window,D=j=>{const V=G_(a.current).includes(CSS.escape(j.animationName));if(j.target===t&&V&&(M("ANIMATION_END"),!d.current)){const H=t.style.animationFillMode;t.style.animationFillMode="forwards",C=A.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=H)})}},R=j=>{j.target===t&&(p.current=G_(a.current))};return t.addEventListener("animationstart",R),t.addEventListener("animationcancel",D),t.addEventListener("animationend",D),()=>{A.clearTimeout(C),t.removeEventListener("animationstart",R),t.removeEventListener("animationcancel",D),t.removeEventListener("animationend",D)}}else M("ANIMATION_END")},[t,M]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:F.useCallback(C=>{a.current=C?getComputedStyle(C):null,r(C)},[])}}function G_(e){return e?.animationName||"none"}function eQ(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Nb="Popover",[jR]=Eb(Nb,[Ib]),kv=Ib(),[tQ,pf]=jR(Nb),LR=e=>{const{__scopePopover:t,children:r,open:a,defaultOpen:d,onOpenChange:p,modal:m=!1}=e,s=kv(t),M=F.useRef(null),[C,A]=F.useState(!1),[D,R]=tS({prop:a,defaultProp:d??!1,onChange:p,caller:Nb});return X.jsx(Kz,{...s,children:X.jsx(tQ,{scope:t,contentId:Ab(),triggerRef:M,open:D,onOpenChange:R,onOpenToggle:F.useCallback(()=>R(j=>!j),[R]),hasCustomAnchor:C,onCustomAnchorAdd:F.useCallback(()=>A(!0),[]),onCustomAnchorRemove:F.useCallback(()=>A(!1),[]),modal:m,children:r})})};LR.displayName=Nb;var NR="PopoverAnchor",nQ=F.forwardRef((e,t)=>{const{__scopePopover:r,...a}=e,d=pf(NR,r),p=kv(r),{onCustomAnchorAdd:m,onCustomAnchorRemove:s}=d;return F.useEffect(()=>(m(),()=>s()),[m,s]),X.jsx(lT,{...p,...a,ref:t})});nQ.displayName=NR;var BR="PopoverTrigger",FR=F.forwardRef((e,t)=>{const{__scopePopover:r,...a}=e,d=pf(BR,r),p=kv(r),m=Xi(t,d.triggerRef),s=X.jsx(xi.button,{type:"button","aria-haspopup":"dialog","aria-expanded":d.open,"aria-controls":d.contentId,"data-state":GR(d.open),...a,ref:m,onClick:Jr(e.onClick,d.onOpenToggle)});return d.hasCustomAnchor?s:X.jsx(lT,{asChild:!0,...p,children:s})});FR.displayName=BR;var fT="PopoverPortal",[rQ,iQ]=jR(fT,{forceMount:void 0}),UR=e=>{const{__scopePopover:t,forceMount:r,children:a,container:d}=e,p=pf(fT,t);return X.jsx(rQ,{scope:t,forceMount:r,children:X.jsx(dT,{present:r||p.open,children:X.jsx(cT,{asChild:!0,container:d,children:a})})})};UR.displayName=fT;var dg="PopoverContent",$R=F.forwardRef((e,t)=>{const r=iQ(dg,e.__scopePopover),{forceMount:a=r.forceMount,...d}=e,p=pf(dg,e.__scopePopover);return X.jsx(dT,{present:a||p.open,children:p.modal?X.jsx(oQ,{...d,ref:t}):X.jsx(sQ,{...d,ref:t})})});$R.displayName=dg;var aQ=ug("PopoverContent.RemoveScroll"),oQ=F.forwardRef((e,t)=>{const r=pf(dg,e.__scopePopover),a=F.useRef(null),d=Xi(t,a),p=F.useRef(!1);return F.useEffect(()=>{const m=a.current;if(m)return nR(m)},[]),X.jsx(uT,{as:aQ,allowPinchZoom:!0,children:X.jsx(VR,{...e,ref:d,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Jr(e.onCloseAutoFocus,m=>{m.preventDefault(),p.current||r.triggerRef.current?.focus()}),onPointerDownOutside:Jr(e.onPointerDownOutside,m=>{const s=m.detail.originalEvent,M=s.button===0&&s.ctrlKey===!0,C=s.button===2||M;p.current=C},{checkForDefaultPrevented:!1}),onFocusOutside:Jr(e.onFocusOutside,m=>m.preventDefault(),{checkForDefaultPrevented:!1})})})}),sQ=F.forwardRef((e,t)=>{const r=pf(dg,e.__scopePopover),a=F.useRef(!1),d=F.useRef(!1);return X.jsx(VR,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:p=>{e.onCloseAutoFocus?.(p),p.defaultPrevented||(a.current||r.triggerRef.current?.focus(),p.preventDefault()),a.current=!1,d.current=!1},onInteractOutside:p=>{e.onInteractOutside?.(p),p.defaultPrevented||(a.current=!0,p.detail.originalEvent.type==="pointerdown"&&(d.current=!0));const m=p.target;r.triggerRef.current?.contains(m)&&p.preventDefault(),p.detail.originalEvent.type==="focusin"&&d.current&&p.preventDefault()}})}),VR=F.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:a,onOpenAutoFocus:d,onCloseAutoFocus:p,disableOutsidePointerEvents:m,onEscapeKeyDown:s,onPointerDownOutside:M,onFocusOutside:C,onInteractOutside:A,...D}=e,R=pf(dg,r),j=kv(r);return Az(),X.jsx(J2,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:d,onUnmountAutoFocus:p,children:X.jsx(Q2,{asChild:!0,disableOutsidePointerEvents:m,onInteractOutside:A,onEscapeKeyDown:s,onPointerDownOutside:M,onFocusOutside:C,onDismiss:()=>R.onOpenChange(!1),children:X.jsx(Qz,{"data-state":GR(R.open),role:"dialog",id:R.contentId,...j,...D,ref:t,style:{...D.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),qR="PopoverClose",lQ=F.forwardRef((e,t)=>{const{__scopePopover:r,...a}=e,d=pf(qR,r);return X.jsx(xi.button,{type:"button",...a,ref:t,onClick:Jr(e.onClick,()=>d.onOpenChange(!1))})});lQ.displayName=qR;var cQ="PopoverArrow",uQ=F.forwardRef((e,t)=>{const{__scopePopover:r,...a}=e,d=kv(r);return X.jsx(Jz,{...d,...a,ref:t})});uQ.displayName=cQ;function GR(e){return e?"open":"closed"}var hQ=LR,dQ=FR,fQ=UR,pQ=$R;function KA({...e}){return X.jsx(hQ,{"data-slot":"popover",...e})}function QA({...e}){return X.jsx(dQ,{"data-slot":"popover-trigger",...e})}function JA({className:e,align:t="center",sideOffset:r=4,...a}){return X.jsx(fQ,{children:X.jsx(pQ,{"data-slot":"popover-content",align:t,sideOffset:r,className:Rn("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...a})})}function mQ(e,t,r="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:e,timeZoneName:r}).format(t).split(/\s/g).slice(2).join(" ")}const gQ={},Zy={};function Pp(e,t){try{const a=(gQ[e]||=new Intl.DateTimeFormat("en-US",{timeZone:e,timeZoneName:"longOffset"}).format)(t).split("GMT")[1];return a in Zy?Zy[a]:eP(a,a.split(":"))}catch{if(e in Zy)return Zy[e];const r=e?.match(yQ);return r?eP(e,r.slice(1)):NaN}}const yQ=/([+-]\d\d):?(\d\d)?/;function eP(e,t){const r=+(t[0]||0),a=+(t[1]||0),d=+(t[2]||0)/60;return Zy[e]=r*60+a>0?r*60+a+d:r*60-a-d}class Iu extends Date{constructor(...t){super(),t.length>1&&typeof t[t.length-1]=="string"&&(this.timeZone=t.pop()),this.internal=new Date,isNaN(Pp(this.timeZone,this))?this.setTime(NaN):t.length?typeof t[0]=="number"&&(t.length===1||t.length===2&&typeof t[1]!="number")?this.setTime(t[0]):typeof t[0]=="string"?this.setTime(+new Date(t[0])):t[0]instanceof Date?this.setTime(+t[0]):(this.setTime(+new Date(...t)),HR(this),lS(this)):this.setTime(Date.now())}static tz(t,...r){return r.length?new Iu(...r,t):new Iu(Date.now(),t)}withTimeZone(t){return new Iu(+this,t)}getTimezoneOffset(){const t=-Pp(this.timeZone,this);return t>0?Math.floor(t):Math.ceil(t)}setTime(t){return Date.prototype.setTime.apply(this,arguments),lS(this),+this}[Symbol.for("constructDateFrom")](t){return new Iu(+new Date(t),this.timeZone)}}const tP=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(e=>{if(!tP.test(e))return;const t=e.replace(tP,"$1UTC");Iu.prototype[t]&&(e.startsWith("get")?Iu.prototype[e]=function(){return this.internal[t]()}:(Iu.prototype[e]=function(){return Date.prototype[t].apply(this.internal,arguments),vQ(this),+this},Iu.prototype[t]=function(){return Date.prototype[t].apply(this,arguments),lS(this),+this}))});function lS(e){e.internal.setTime(+e),e.internal.setUTCSeconds(e.internal.getUTCSeconds()-Math.round(-Pp(e.timeZone,e)*60))}function vQ(e){Date.prototype.setFullYear.call(e,e.internal.getUTCFullYear(),e.internal.getUTCMonth(),e.internal.getUTCDate()),Date.prototype.setHours.call(e,e.internal.getUTCHours(),e.internal.getUTCMinutes(),e.internal.getUTCSeconds(),e.internal.getUTCMilliseconds()),HR(e)}function HR(e){const t=Pp(e.timeZone,e),r=t>0?Math.floor(t):Math.ceil(t),a=new Date(+e);a.setUTCHours(a.getUTCHours()-1);const d=-new Date(+e).getTimezoneOffset(),p=-new Date(+a).getTimezoneOffset(),m=d-p,s=Date.prototype.getHours.apply(e)!==e.internal.getUTCHours();m&&s&&e.internal.setUTCMinutes(e.internal.getUTCMinutes()+m);const M=d-r;M&&Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+M);const C=new Date(+e);C.setUTCSeconds(0);const A=d>0?C.getSeconds():(C.getSeconds()-60)%60,D=Math.round(-(Pp(e.timeZone,e)*60))%60;(D||A)&&(e.internal.setUTCSeconds(e.internal.getUTCSeconds()+D),Date.prototype.setUTCSeconds.call(e,Date.prototype.getUTCSeconds.call(e)+D+A));const R=Pp(e.timeZone,e),j=R>0?Math.floor(R):Math.ceil(R),V=-new Date(+e).getTimezoneOffset()-j,H=j!==r,Q=V-M;if(H&&Q){Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+Q);const te=Pp(e.timeZone,e),ne=te>0?Math.floor(te):Math.ceil(te),me=j-ne;me&&(e.internal.setUTCMinutes(e.internal.getUTCMinutes()+me),Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+me))}}class _o extends Iu{static tz(t,...r){return r.length?new _o(...r,t):new _o(Date.now(),t)}toISOString(){const[t,r,a]=this.tzComponents(),d=`${t}${r}:${a}`;return this.internal.toISOString().slice(0,-1)+d}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[t,r,a,d]=this.internal.toUTCString().split(" ");return`${t?.slice(0,-1)} ${a} ${r} ${d}`}toTimeString(){const t=this.internal.toUTCString().split(" ")[4],[r,a,d]=this.tzComponents();return`${t} GMT${r}${a}${d} (${mQ(this.timeZone,this)})`}toLocaleString(t,r){return Date.prototype.toLocaleString.call(this,t,{...r,timeZone:r?.timeZone||this.timeZone})}toLocaleDateString(t,r){return Date.prototype.toLocaleDateString.call(this,t,{...r,timeZone:r?.timeZone||this.timeZone})}toLocaleTimeString(t,r){return Date.prototype.toLocaleTimeString.call(this,t,{...r,timeZone:r?.timeZone||this.timeZone})}tzComponents(){const t=this.getTimezoneOffset(),r=t>0?"-":"+",a=String(Math.floor(Math.abs(t)/60)).padStart(2,"0"),d=String(Math.abs(t)%60).padStart(2,"0");return[r,a,d]}withTimeZone(t){return new _o(+this,t)}[Symbol.for("constructDateFrom")](t){return new _o(+new Date(t),this.timeZone)}}const ZR=6048e5,_Q=864e5,nP=Symbol.for("constructDateFrom");function Ki(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&nP in e?e[nP](t):e instanceof Date?new e.constructor(t):new Date(t)}function zr(e,t){return Ki(t||e,e)}function WR(e,t,r){const a=zr(e,r?.in);return isNaN(t)?Ki(e,NaN):(t&&a.setDate(a.getDate()+t),a)}function YR(e,t,r){const a=zr(e,r?.in);if(isNaN(t))return Ki(e,NaN);if(!t)return a;const d=a.getDate(),p=Ki(e,a.getTime());p.setMonth(a.getMonth()+t+1,0);const m=p.getDate();return d>=m?p:(a.setFullYear(p.getFullYear(),p.getMonth(),d),a)}let bQ={};function Ov(){return bQ}function fg(e,t){const r=Ov(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,d=zr(e,t?.in),p=d.getDay(),m=(p<a?7:0)+p-a;return d.setDate(d.getDate()-m),d.setHours(0,0,0,0),d}function hv(e,t){return fg(e,{...t,weekStartsOn:1})}function XR(e,t){const r=zr(e,t?.in),a=r.getFullYear(),d=Ki(r,0);d.setFullYear(a+1,0,4),d.setHours(0,0,0,0);const p=hv(d),m=Ki(r,0);m.setFullYear(a,0,4),m.setHours(0,0,0,0);const s=hv(m);return r.getTime()>=p.getTime()?a+1:r.getTime()>=s.getTime()?a:a-1}function rP(e){const t=zr(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Og(e,...t){const r=Ki.bind(null,t.find(a=>typeof a=="object"));return t.map(r)}function dv(e,t){const r=zr(e,t?.in);return r.setHours(0,0,0,0),r}function KR(e,t,r){const[a,d]=Og(r?.in,e,t),p=dv(a),m=dv(d),s=+p-rP(p),M=+m-rP(m);return Math.round((s-M)/_Q)}function xQ(e,t){const r=XR(e,t),a=Ki(e,0);return a.setFullYear(r,0,4),a.setHours(0,0,0,0),hv(a)}function wQ(e,t,r){return WR(e,t*7,r)}function SQ(e,t,r){return YR(e,t*12,r)}function TQ(e,t){let r,a=t?.in;return e.forEach(d=>{!a&&typeof d=="object"&&(a=Ki.bind(null,d));const p=zr(d,a);(!r||r<p||isNaN(+p))&&(r=p)}),Ki(a,r||NaN)}function MQ(e,t){let r,a=t?.in;return e.forEach(d=>{!a&&typeof d=="object"&&(a=Ki.bind(null,d));const p=zr(d,a);(!r||r>p||isNaN(+p))&&(r=p)}),Ki(a,r||NaN)}function CQ(e,t,r){const[a,d]=Og(r?.in,e,t);return+dv(a)==+dv(d)}function QR(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function EQ(e){return!(!QR(e)&&typeof e!="number"||isNaN(+zr(e)))}function AQ(e,t,r){const[a,d]=Og(r?.in,e,t),p=a.getFullYear()-d.getFullYear(),m=a.getMonth()-d.getMonth();return p*12+m}function PQ(e,t){const r=zr(e,t?.in),a=r.getMonth();return r.setFullYear(r.getFullYear(),a+1,0),r.setHours(23,59,59,999),r}function JR(e,t){const[r,a]=Og(e,t.start,t.end);return{start:r,end:a}}function DQ(e,t){const{start:r,end:a}=JR(t?.in,e);let d=+r>+a;const p=d?+r:+a,m=d?a:r;m.setHours(0,0,0,0),m.setDate(1);let s=1;const M=[];for(;+m<=p;)M.push(Ki(r,m)),m.setMonth(m.getMonth()+s);return d?M.reverse():M}function kQ(e,t){const r=zr(e,t?.in);return r.setDate(1),r.setHours(0,0,0,0),r}function OQ(e,t){const r=zr(e,t?.in),a=r.getFullYear();return r.setFullYear(a+1,0,0),r.setHours(23,59,59,999),r}function ej(e,t){const r=zr(e,t?.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function IQ(e,t){const{start:r,end:a}=JR(t?.in,e);let d=+r>+a;const p=d?+r:+a,m=d?a:r;m.setHours(0,0,0,0),m.setMonth(0,1);let s=1;const M=[];for(;+m<=p;)M.push(Ki(r,m)),m.setFullYear(m.getFullYear()+s);return d?M.reverse():M}function tj(e,t){const r=Ov(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,d=zr(e,t?.in),p=d.getDay(),m=(p<a?-7:0)+6-(p-a);return d.setDate(d.getDate()+m),d.setHours(23,59,59,999),d}function zQ(e,t){return tj(e,{...t,weekStartsOn:1})}const RQ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},jQ=(e,t,r)=>{let a;const d=RQ[e];return typeof d=="string"?a=d:t===1?a=d.one:a=d.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function tg(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const LQ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},NQ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},BQ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},FQ={date:tg({formats:LQ,defaultWidth:"full"}),time:tg({formats:NQ,defaultWidth:"full"}),dateTime:tg({formats:BQ,defaultWidth:"full"})},UQ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},$Q=(e,t,r,a)=>UQ[e];function Pu(e){return(t,r)=>{const a=r?.context?String(r.context):"standalone";let d;if(a==="formatting"&&e.formattingValues){const m=e.defaultFormattingWidth||e.defaultWidth,s=r?.width?String(r.width):m;d=e.formattingValues[s]||e.formattingValues[m]}else{const m=e.defaultWidth,s=r?.width?String(r.width):e.defaultWidth;d=e.values[s]||e.values[m]}const p=e.argumentCallback?e.argumentCallback(t):t;return d[p]}}const VQ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},qQ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},GQ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},HQ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ZQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},WQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},YQ=(e,t)=>{const r=Number(e),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},XQ={ordinalNumber:YQ,era:Pu({values:VQ,defaultWidth:"wide"}),quarter:Pu({values:qQ,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Pu({values:GQ,defaultWidth:"wide"}),day:Pu({values:HQ,defaultWidth:"wide"}),dayPeriod:Pu({values:ZQ,defaultWidth:"wide",formattingValues:WQ,defaultFormattingWidth:"wide"})};function Du(e){return(t,r={})=>{const a=r.width,d=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],p=t.match(d);if(!p)return null;const m=p[0],s=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],M=Array.isArray(s)?QQ(s,D=>D.test(m)):KQ(s,D=>D.test(m));let C;C=e.valueCallback?e.valueCallback(M):M,C=r.valueCallback?r.valueCallback(C):C;const A=t.slice(m.length);return{value:C,rest:A}}}function KQ(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function QQ(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function nj(e){return(t,r={})=>{const a=t.match(e.matchPattern);if(!a)return null;const d=a[0],p=t.match(e.parsePattern);if(!p)return null;let m=e.valueCallback?e.valueCallback(p[0]):p[0];m=r.valueCallback?r.valueCallback(m):m;const s=t.slice(d.length);return{value:m,rest:s}}}const JQ=/^(\d+)(th|st|nd|rd)?/i,eJ=/\d+/i,tJ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},nJ={any:[/^b/i,/^(a|c)/i]},rJ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},iJ={any:[/1/i,/2/i,/3/i,/4/i]},aJ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},oJ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},sJ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},lJ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},cJ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},uJ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},hJ={ordinalNumber:nj({matchPattern:JQ,parsePattern:eJ,valueCallback:e=>parseInt(e,10)}),era:Du({matchPatterns:tJ,defaultMatchWidth:"wide",parsePatterns:nJ,defaultParseWidth:"any"}),quarter:Du({matchPatterns:rJ,defaultMatchWidth:"wide",parsePatterns:iJ,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Du({matchPatterns:aJ,defaultMatchWidth:"wide",parsePatterns:oJ,defaultParseWidth:"any"}),day:Du({matchPatterns:sJ,defaultMatchWidth:"wide",parsePatterns:lJ,defaultParseWidth:"any"}),dayPeriod:Du({matchPatterns:cJ,defaultMatchWidth:"any",parsePatterns:uJ,defaultParseWidth:"any"})},pT={code:"en-US",formatDistance:jQ,formatLong:FQ,formatRelative:$Q,localize:XQ,match:hJ,options:{weekStartsOn:0,firstWeekContainsDate:1}};function dJ(e,t){const r=zr(e,t?.in);return KR(r,ej(r))+1}function rj(e,t){const r=zr(e,t?.in),a=+hv(r)-+xQ(r);return Math.round(a/ZR)+1}function ij(e,t){const r=zr(e,t?.in),a=r.getFullYear(),d=Ov(),p=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??d.firstWeekContainsDate??d.locale?.options?.firstWeekContainsDate??1,m=Ki(t?.in||e,0);m.setFullYear(a+1,0,p),m.setHours(0,0,0,0);const s=fg(m,t),M=Ki(t?.in||e,0);M.setFullYear(a,0,p),M.setHours(0,0,0,0);const C=fg(M,t);return+r>=+s?a+1:+r>=+C?a:a-1}function fJ(e,t){const r=Ov(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,d=ij(e,t),p=Ki(t?.in||e,0);return p.setFullYear(d,0,a),p.setHours(0,0,0,0),fg(p,t)}function aj(e,t){const r=zr(e,t?.in),a=+fg(r,t)-+fJ(r,t);return Math.round(a/ZR)+1}function Mr(e,t){const r=e<0?"-":"",a=Math.abs(e).toString().padStart(t,"0");return r+a}const Qd={y(e,t){const r=e.getFullYear(),a=r>0?r:1-r;return Mr(t==="yy"?a%100:a,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Mr(r+1,2)},d(e,t){return Mr(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Mr(e.getHours()%12||12,t.length)},H(e,t){return Mr(e.getHours(),t.length)},m(e,t){return Mr(e.getMinutes(),t.length)},s(e,t){return Mr(e.getSeconds(),t.length)},S(e,t){const r=t.length,a=e.getMilliseconds(),d=Math.trunc(a*Math.pow(10,r-3));return Mr(d,t.length)}},Ym={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},iP={G:function(e,t,r){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});case"GGGG":default:return r.era(a,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const a=e.getFullYear(),d=a>0?a:1-a;return r.ordinalNumber(d,{unit:"year"})}return Qd.y(e,t)},Y:function(e,t,r,a){const d=ij(e,a),p=d>0?d:1-d;if(t==="YY"){const m=p%100;return Mr(m,2)}return t==="Yo"?r.ordinalNumber(p,{unit:"year"}):Mr(p,t.length)},R:function(e,t){const r=XR(e);return Mr(r,t.length)},u:function(e,t){const r=e.getFullYear();return Mr(r,t.length)},Q:function(e,t,r){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return Mr(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,r){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return Mr(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,r){const a=e.getMonth();switch(t){case"M":case"MM":return Qd.M(e,t);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,r){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return Mr(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,r,a){const d=aj(e,a);return t==="wo"?r.ordinalNumber(d,{unit:"week"}):Mr(d,t.length)},I:function(e,t,r){const a=rj(e);return t==="Io"?r.ordinalNumber(a,{unit:"week"}):Mr(a,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Qd.d(e,t)},D:function(e,t,r){const a=dJ(e);return t==="Do"?r.ordinalNumber(a,{unit:"dayOfYear"}):Mr(a,t.length)},E:function(e,t,r){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});case"EEEE":default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,r,a){const d=e.getDay(),p=(d-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(p);case"ee":return Mr(p,2);case"eo":return r.ordinalNumber(p,{unit:"day"});case"eee":return r.day(d,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(d,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(d,{width:"short",context:"formatting"});case"eeee":default:return r.day(d,{width:"wide",context:"formatting"})}},c:function(e,t,r,a){const d=e.getDay(),p=(d-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(p);case"cc":return Mr(p,t.length);case"co":return r.ordinalNumber(p,{unit:"day"});case"ccc":return r.day(d,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(d,{width:"narrow",context:"standalone"});case"cccccc":return r.day(d,{width:"short",context:"standalone"});case"cccc":default:return r.day(d,{width:"wide",context:"standalone"})}},i:function(e,t,r){const a=e.getDay(),d=a===0?7:a;switch(t){case"i":return String(d);case"ii":return Mr(d,t.length);case"io":return r.ordinalNumber(d,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});case"iiii":default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,r){const d=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(d,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(d,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(d,{width:"wide",context:"formatting"})}},b:function(e,t,r){const a=e.getHours();let d;switch(a===12?d=Ym.noon:a===0?d=Ym.midnight:d=a/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(d,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(d,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(d,{width:"wide",context:"formatting"})}},B:function(e,t,r){const a=e.getHours();let d;switch(a>=17?d=Ym.evening:a>=12?d=Ym.afternoon:a>=4?d=Ym.morning:d=Ym.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(d,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(d,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let a=e.getHours()%12;return a===0&&(a=12),r.ordinalNumber(a,{unit:"hour"})}return Qd.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Qd.H(e,t)},K:function(e,t,r){const a=e.getHours()%12;return t==="Ko"?r.ordinalNumber(a,{unit:"hour"}):Mr(a,t.length)},k:function(e,t,r){let a=e.getHours();return a===0&&(a=24),t==="ko"?r.ordinalNumber(a,{unit:"hour"}):Mr(a,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Qd.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Qd.s(e,t)},S:function(e,t){return Qd.S(e,t)},X:function(e,t,r){const a=e.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return oP(a);case"XXXX":case"XX":return Tp(a);case"XXXXX":case"XXX":default:return Tp(a,":")}},x:function(e,t,r){const a=e.getTimezoneOffset();switch(t){case"x":return oP(a);case"xxxx":case"xx":return Tp(a);case"xxxxx":case"xxx":default:return Tp(a,":")}},O:function(e,t,r){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+aP(a,":");case"OOOO":default:return"GMT"+Tp(a,":")}},z:function(e,t,r){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+aP(a,":");case"zzzz":default:return"GMT"+Tp(a,":")}},t:function(e,t,r){const a=Math.trunc(+e/1e3);return Mr(a,t.length)},T:function(e,t,r){return Mr(+e,t.length)}};function aP(e,t=""){const r=e>0?"-":"+",a=Math.abs(e),d=Math.trunc(a/60),p=a%60;return p===0?r+String(d):r+String(d)+t+Mr(p,2)}function oP(e,t){return e%60===0?(e>0?"-":"+")+Mr(Math.abs(e)/60,2):Tp(e,t)}function Tp(e,t=""){const r=e>0?"-":"+",a=Math.abs(e),d=Mr(Math.trunc(a/60),2),p=Mr(a%60,2);return r+d+t+p}const sP=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},oj=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},pJ=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],a=r[1],d=r[2];if(!d)return sP(e,t);let p;switch(a){case"P":p=t.dateTime({width:"short"});break;case"PP":p=t.dateTime({width:"medium"});break;case"PPP":p=t.dateTime({width:"long"});break;case"PPPP":default:p=t.dateTime({width:"full"});break}return p.replace("{{date}}",sP(a,t)).replace("{{time}}",oj(d,t))},mJ={p:oj,P:pJ},gJ=/^D+$/,yJ=/^Y+$/,vJ=["D","DD","YY","YYYY"];function _J(e){return gJ.test(e)}function bJ(e){return yJ.test(e)}function xJ(e,t,r){const a=wJ(e,t,r);if(console.warn(a),vJ.includes(e))throw new RangeError(a)}function wJ(e,t,r){const a=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const SJ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,TJ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,MJ=/^'([^]*?)'?$/,CJ=/''/g,EJ=/[a-zA-Z]/;function cS(e,t,r){const a=Ov(),d=r?.locale??a.locale??pT,p=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,m=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,s=zr(e,r?.in);if(!EQ(s))throw new RangeError("Invalid time value");let M=t.match(TJ).map(A=>{const D=A[0];if(D==="p"||D==="P"){const R=mJ[D];return R(A,d.formatLong)}return A}).join("").match(SJ).map(A=>{if(A==="''")return{isToken:!1,value:"'"};const D=A[0];if(D==="'")return{isToken:!1,value:AJ(A)};if(iP[D])return{isToken:!0,value:A};if(D.match(EJ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+D+"`");return{isToken:!1,value:A}});d.localize.preprocessor&&(M=d.localize.preprocessor(s,M));const C={firstWeekContainsDate:p,weekStartsOn:m,locale:d};return M.map(A=>{if(!A.isToken)return A.value;const D=A.value;(!r?.useAdditionalWeekYearTokens&&bJ(D)||!r?.useAdditionalDayOfYearTokens&&_J(D))&&xJ(D,t,String(e));const R=iP[D[0]];return R(s,D,d.localize,C)}).join("")}function AJ(e){const t=e.match(MJ);return t?t[1].replace(CJ,"'"):e}function PJ(e,t){const r=zr(e,t?.in),a=r.getFullYear(),d=r.getMonth(),p=Ki(r,0);return p.setFullYear(a,d+1,0),p.setHours(0,0,0,0),p.getDate()}function DJ(e,t){return zr(e,t?.in).getMonth()}function kJ(e,t){return zr(e,t?.in).getFullYear()}function OJ(e,t){return+zr(e)>+zr(t)}function IJ(e,t){return+zr(e)<+zr(t)}function zJ(e,t,r){const[a,d]=Og(r?.in,e,t);return a.getFullYear()===d.getFullYear()&&a.getMonth()===d.getMonth()}function RJ(e,t,r){const[a,d]=Og(r?.in,e,t);return a.getFullYear()===d.getFullYear()}function jJ(e,t,r){const a=zr(e,r?.in),d=a.getFullYear(),p=a.getDate(),m=Ki(e,0);m.setFullYear(d,t,15),m.setHours(0,0,0,0);const s=PJ(m);return a.setMonth(t,Math.min(p,s)),a}function LJ(e,t,r){const a=zr(e,r?.in);return isNaN(+a)?Ki(e,NaN):(a.setFullYear(t),a)}const lP=5,NJ=4;function BJ(e,t){const r=t.startOfMonth(e),a=r.getDay()>0?r.getDay():7,d=t.addDays(e,-a+1),p=t.addDays(d,lP*7-1);return t.getMonth(e)===t.getMonth(p)?lP:NJ}function sj(e,t){const r=t.startOfMonth(e),a=r.getDay();return a===1?r:a===0?t.addDays(r,-6):t.addDays(r,-1*(a-1))}function FJ(e,t){const r=sj(e,t),a=BJ(e,t);return t.addDays(r,a*7-1)}class rl{constructor(t,r){this.Date=Date,this.today=()=>this.overrides?.today?this.overrides.today():this.options.timeZone?_o.tz(this.options.timeZone):new this.Date,this.newDate=(a,d,p)=>this.overrides?.newDate?this.overrides.newDate(a,d,p):this.options.timeZone?new _o(a,d,p,this.options.timeZone):new Date(a,d,p),this.addDays=(a,d)=>this.overrides?.addDays?this.overrides.addDays(a,d):WR(a,d),this.addMonths=(a,d)=>this.overrides?.addMonths?this.overrides.addMonths(a,d):YR(a,d),this.addWeeks=(a,d)=>this.overrides?.addWeeks?this.overrides.addWeeks(a,d):wQ(a,d),this.addYears=(a,d)=>this.overrides?.addYears?this.overrides.addYears(a,d):SQ(a,d),this.differenceInCalendarDays=(a,d)=>this.overrides?.differenceInCalendarDays?this.overrides.differenceInCalendarDays(a,d):KR(a,d),this.differenceInCalendarMonths=(a,d)=>this.overrides?.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(a,d):AQ(a,d),this.eachMonthOfInterval=a=>this.overrides?.eachMonthOfInterval?this.overrides.eachMonthOfInterval(a):DQ(a),this.eachYearOfInterval=a=>{const d=this.overrides?.eachYearOfInterval?this.overrides.eachYearOfInterval(a):IQ(a),p=new Set(d.map(s=>this.getYear(s)));if(p.size===d.length)return d;const m=[];return p.forEach(s=>{m.push(new Date(s,0,1))}),m},this.endOfBroadcastWeek=a=>this.overrides?.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(a):FJ(a,this),this.endOfISOWeek=a=>this.overrides?.endOfISOWeek?this.overrides.endOfISOWeek(a):zQ(a),this.endOfMonth=a=>this.overrides?.endOfMonth?this.overrides.endOfMonth(a):PQ(a),this.endOfWeek=(a,d)=>this.overrides?.endOfWeek?this.overrides.endOfWeek(a,d):tj(a,this.options),this.endOfYear=a=>this.overrides?.endOfYear?this.overrides.endOfYear(a):OQ(a),this.format=(a,d,p)=>{const m=this.overrides?.format?this.overrides.format(a,d,this.options):cS(a,d,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(m):m},this.getISOWeek=a=>this.overrides?.getISOWeek?this.overrides.getISOWeek(a):rj(a),this.getMonth=(a,d)=>this.overrides?.getMonth?this.overrides.getMonth(a,this.options):DJ(a,this.options),this.getYear=(a,d)=>this.overrides?.getYear?this.overrides.getYear(a,this.options):kJ(a,this.options),this.getWeek=(a,d)=>this.overrides?.getWeek?this.overrides.getWeek(a,this.options):aj(a,this.options),this.isAfter=(a,d)=>this.overrides?.isAfter?this.overrides.isAfter(a,d):OJ(a,d),this.isBefore=(a,d)=>this.overrides?.isBefore?this.overrides.isBefore(a,d):IJ(a,d),this.isDate=a=>this.overrides?.isDate?this.overrides.isDate(a):QR(a),this.isSameDay=(a,d)=>this.overrides?.isSameDay?this.overrides.isSameDay(a,d):CQ(a,d),this.isSameMonth=(a,d)=>this.overrides?.isSameMonth?this.overrides.isSameMonth(a,d):zJ(a,d),this.isSameYear=(a,d)=>this.overrides?.isSameYear?this.overrides.isSameYear(a,d):RJ(a,d),this.max=a=>this.overrides?.max?this.overrides.max(a):TQ(a),this.min=a=>this.overrides?.min?this.overrides.min(a):MQ(a),this.setMonth=(a,d)=>this.overrides?.setMonth?this.overrides.setMonth(a,d):jJ(a,d),this.setYear=(a,d)=>this.overrides?.setYear?this.overrides.setYear(a,d):LJ(a,d),this.startOfBroadcastWeek=(a,d)=>this.overrides?.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(a,this):sj(a,this),this.startOfDay=a=>this.overrides?.startOfDay?this.overrides.startOfDay(a):dv(a),this.startOfISOWeek=a=>this.overrides?.startOfISOWeek?this.overrides.startOfISOWeek(a):hv(a),this.startOfMonth=a=>this.overrides?.startOfMonth?this.overrides.startOfMonth(a):kQ(a),this.startOfWeek=(a,d)=>this.overrides?.startOfWeek?this.overrides.startOfWeek(a,this.options):fg(a,this.options),this.startOfYear=a=>this.overrides?.startOfYear?this.overrides.startOfYear(a):ej(a),this.options={locale:pT,...t},this.overrides=r}getDigitMap(){const{numerals:t="latn"}=this.options,r=new Intl.NumberFormat("en-US",{numberingSystem:t}),a={};for(let d=0;d<10;d++)a[d.toString()]=r.format(d);return a}replaceDigits(t){const r=this.getDigitMap();return t.replace(/\d/g,a=>r[a]||a)}formatNumber(t){return this.replaceDigits(t.toString())}getMonthYearOrder(){const t=this.options.locale?.code;return t&&rl.yearFirstLocales.has(t)?"year-first":"month-first"}formatMonthYear(t){const{locale:r,timeZone:a,numerals:d}=this.options,p=r?.code;if(p&&rl.yearFirstLocales.has(p))try{return new Intl.DateTimeFormat(p,{month:"long",year:"numeric",timeZone:a,numberingSystem:d}).format(t)}catch{}const m=this.getMonthYearOrder()==="year-first"?"y LLLL":"LLLL y";return this.format(t,m)}}rl.yearFirstLocales=new Set(["eu","hu","ja","ja-Hira","ja-JP","ko","ko-KR","lt","lt-LT","lv","lv-LV","mn","mn-MN","zh","zh-CN","zh-HK","zh-TW"]);const Vu=new rl;class lj{constructor(t,r,a=Vu){this.date=t,this.displayMonth=r,this.outside=!!(r&&!a.isSameMonth(t,r)),this.dateLib=a}isEqualTo(t){return this.dateLib.isSameDay(t.date,this.date)&&this.dateLib.isSameMonth(t.displayMonth,this.displayMonth)}}class UJ{constructor(t,r){this.date=t,this.weeks=r}}class $J{constructor(t,r){this.days=r,this.weekNumber=t}}function VJ(e){return Ut.createElement("button",{...e})}function qJ(e){return Ut.createElement("span",{...e})}function GJ(e){const{size:t=24,orientation:r="left",className:a}=e;return Ut.createElement("svg",{className:a,width:t,height:t,viewBox:"0 0 24 24"},r==="up"&&Ut.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),r==="down"&&Ut.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),r==="left"&&Ut.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),r==="right"&&Ut.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function HJ(e){const{day:t,modifiers:r,...a}=e;return Ut.createElement("td",{...a})}function ZJ(e){const{day:t,modifiers:r,...a}=e,d=Ut.useRef(null);return Ut.useEffect(()=>{r.focused&&d.current?.focus()},[r.focused]),Ut.createElement("button",{ref:d,...a})}var sn;(function(e){e.Root="root",e.Chevron="chevron",e.Day="day",e.DayButton="day_button",e.CaptionLabel="caption_label",e.Dropdowns="dropdowns",e.Dropdown="dropdown",e.DropdownRoot="dropdown_root",e.Footer="footer",e.MonthGrid="month_grid",e.MonthCaption="month_caption",e.MonthsDropdown="months_dropdown",e.Month="month",e.Months="months",e.Nav="nav",e.NextMonthButton="button_next",e.PreviousMonthButton="button_previous",e.Week="week",e.Weeks="weeks",e.Weekday="weekday",e.Weekdays="weekdays",e.WeekNumber="week_number",e.WeekNumberHeader="week_number_header",e.YearsDropdown="years_dropdown"})(sn||(sn={}));var _i;(function(e){e.disabled="disabled",e.hidden="hidden",e.outside="outside",e.focused="focused",e.today="today"})(_i||(_i={}));var Fc;(function(e){e.range_end="range_end",e.range_middle="range_middle",e.range_start="range_start",e.selected="selected"})(Fc||(Fc={}));var Gs;(function(e){e.weeks_before_enter="weeks_before_enter",e.weeks_before_exit="weeks_before_exit",e.weeks_after_enter="weeks_after_enter",e.weeks_after_exit="weeks_after_exit",e.caption_after_enter="caption_after_enter",e.caption_after_exit="caption_after_exit",e.caption_before_enter="caption_before_enter",e.caption_before_exit="caption_before_exit"})(Gs||(Gs={}));function WJ(e){const{options:t,className:r,components:a,classNames:d,...p}=e,m=[d[sn.Dropdown],r].join(" "),s=t?.find(({value:M})=>M===p.value);return Ut.createElement("span",{"data-disabled":p.disabled,className:d[sn.DropdownRoot]},Ut.createElement(a.Select,{className:m,...p},t?.map(({value:M,label:C,disabled:A})=>Ut.createElement(a.Option,{key:M,value:M,disabled:A},C))),Ut.createElement("span",{className:d[sn.CaptionLabel],"aria-hidden":!0},s?.label,Ut.createElement(a.Chevron,{orientation:"down",size:18,className:d[sn.Chevron]})))}function YJ(e){return Ut.createElement("div",{...e})}function XJ(e){return Ut.createElement("div",{...e})}function KJ(e){const{calendarMonth:t,displayIndex:r,...a}=e;return Ut.createElement("div",{...a},e.children)}function QJ(e){const{calendarMonth:t,displayIndex:r,...a}=e;return Ut.createElement("div",{...a})}function JJ(e){return Ut.createElement("table",{...e})}function eee(e){return Ut.createElement("div",{...e})}const cj=F.createContext(void 0);function Iv(){const e=F.useContext(cj);if(e===void 0)throw new Error("useDayPicker() must be used within a custom component.");return e}function tee(e){const{components:t}=Iv();return Ut.createElement(t.Dropdown,{...e})}function nee(e){const{onPreviousClick:t,onNextClick:r,previousMonth:a,nextMonth:d,...p}=e,{components:m,classNames:s,labels:{labelPrevious:M,labelNext:C}}=Iv(),A=F.useCallback(R=>{d&&r?.(R)},[d,r]),D=F.useCallback(R=>{a&&t?.(R)},[a,t]);return Ut.createElement("nav",{...p},Ut.createElement(m.PreviousMonthButton,{type:"button",className:s[sn.PreviousMonthButton],tabIndex:a?void 0:-1,"aria-disabled":a?void 0:!0,"aria-label":M(a),onClick:D},Ut.createElement(m.Chevron,{disabled:a?void 0:!0,className:s[sn.Chevron],orientation:"left"})),Ut.createElement(m.NextMonthButton,{type:"button",className:s[sn.NextMonthButton],tabIndex:d?void 0:-1,"aria-disabled":d?void 0:!0,"aria-label":C(d),onClick:A},Ut.createElement(m.Chevron,{disabled:d?void 0:!0,orientation:"right",className:s[sn.Chevron]})))}function ree(e){const{components:t}=Iv();return Ut.createElement(t.Button,{...e})}function iee(e){return Ut.createElement("option",{...e})}function aee(e){const{components:t}=Iv();return Ut.createElement(t.Button,{...e})}function oee(e){const{rootRef:t,...r}=e;return Ut.createElement("div",{...r,ref:t})}function see(e){return Ut.createElement("select",{...e})}function lee(e){const{week:t,...r}=e;return Ut.createElement("tr",{...r})}function cee(e){return Ut.createElement("th",{...e})}function uee(e){return Ut.createElement("thead",{"aria-hidden":!0},Ut.createElement("tr",{...e}))}function hee(e){const{week:t,...r}=e;return Ut.createElement("th",{...r})}function dee(e){return Ut.createElement("th",{...e})}function fee(e){return Ut.createElement("tbody",{...e})}function pee(e){const{components:t}=Iv();return Ut.createElement(t.Dropdown,{...e})}const mee=Object.freeze(Object.defineProperty({__proto__:null,Button:VJ,CaptionLabel:qJ,Chevron:GJ,Day:HJ,DayButton:ZJ,Dropdown:WJ,DropdownNav:YJ,Footer:XJ,Month:KJ,MonthCaption:QJ,MonthGrid:JJ,Months:eee,MonthsDropdown:tee,Nav:nee,NextMonthButton:ree,Option:iee,PreviousMonthButton:aee,Root:oee,Select:see,Week:lee,WeekNumber:hee,WeekNumberHeader:dee,Weekday:cee,Weekdays:uee,Weeks:fee,YearsDropdown:pee},Symbol.toStringTag,{value:"Module"}));function qh(e,t,r=!1,a=Vu){let{from:d,to:p}=e;const{differenceInCalendarDays:m,isSameDay:s}=a;return d&&p?(m(p,d)<0&&([d,p]=[p,d]),m(t,d)>=(r?1:0)&&m(p,t)>=(r?1:0)):!r&&p?s(p,t):!r&&d?s(d,t):!1}function uj(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function mT(e){return!!(e&&typeof e=="object"&&"from"in e)}function hj(e){return!!(e&&typeof e=="object"&&"after"in e)}function dj(e){return!!(e&&typeof e=="object"&&"before"in e)}function fj(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function pj(e,t){return Array.isArray(e)&&e.every(t.isDate)}function Gh(e,t,r=Vu){const a=Array.isArray(t)?t:[t],{isSameDay:d,differenceInCalendarDays:p,isAfter:m}=r;return a.some(s=>{if(typeof s=="boolean")return s;if(r.isDate(s))return d(e,s);if(pj(s,r))return s.includes(e);if(mT(s))return qh(s,e,!1,r);if(fj(s))return Array.isArray(s.dayOfWeek)?s.dayOfWeek.includes(e.getDay()):s.dayOfWeek===e.getDay();if(uj(s)){const M=p(s.before,e),C=p(s.after,e),A=M>0,D=C<0;return m(s.before,s.after)?D&&A:A||D}return hj(s)?p(e,s.after)>0:dj(s)?p(s.before,e)>0:typeof s=="function"?s(e):!1})}function gee(e,t,r,a,d){const{disabled:p,hidden:m,modifiers:s,showOutsideDays:M,broadcastCalendar:C,today:A}=t,{isSameDay:D,isSameMonth:R,startOfMonth:j,isBefore:G,endOfMonth:V,isAfter:H}=d,Q=r&&j(r),te=a&&V(a),ne={[_i.focused]:[],[_i.outside]:[],[_i.disabled]:[],[_i.hidden]:[],[_i.today]:[]},me={};for(const fe of e){const{date:_e,displayMonth:ye}=fe,Oe=!!(ye&&!R(_e,ye)),nt=!!(Q&&G(_e,Q)),ft=!!(te&&H(_e,te)),rt=!!(p&&Gh(_e,p,d)),at=!!(m&&Gh(_e,m,d))||nt||ft||!C&&!M&&Oe||C&&M===!1&&Oe,Et=D(_e,A??d.today());Oe&&ne.outside.push(fe),rt&&ne.disabled.push(fe),at&&ne.hidden.push(fe),Et&&ne.today.push(fe),s&&Object.keys(s).forEach(At=>{const zt=s?.[At];zt&&Gh(_e,zt,d)&&(me[At]?me[At].push(fe):me[At]=[fe])})}return fe=>{const _e={[_i.focused]:!1,[_i.disabled]:!1,[_i.hidden]:!1,[_i.outside]:!1,[_i.today]:!1},ye={};for(const Oe in ne){const nt=ne[Oe];_e[Oe]=nt.some(ft=>ft===fe)}for(const Oe in me)ye[Oe]=me[Oe].some(nt=>nt===fe);return{..._e,...ye}}}function yee(e,t,r={}){return Object.entries(e).filter(([,d])=>d===!0).reduce((d,[p])=>(r[p]?d.push(r[p]):t[_i[p]]?d.push(t[_i[p]]):t[Fc[p]]&&d.push(t[Fc[p]]),d),[t[sn.Day]])}function vee(e){return{...mee,...e}}function _ee(e){const t={"data-mode":e.mode??void 0,"data-required":"required"in e?e.required:void 0,"data-multiple-months":e.numberOfMonths&&e.numberOfMonths>1||void 0,"data-week-numbers":e.showWeekNumber||void 0,"data-broadcast-calendar":e.broadcastCalendar||void 0,"data-nav-layout":e.navLayout||void 0};return Object.entries(e).forEach(([r,a])=>{r.startsWith("data-")&&(t[r]=a)}),t}function gT(){const e={};for(const t in sn)e[sn[t]]=`rdp-${sn[t]}`;for(const t in _i)e[_i[t]]=`rdp-${_i[t]}`;for(const t in Fc)e[Fc[t]]=`rdp-${Fc[t]}`;for(const t in Gs)e[Gs[t]]=`rdp-${Gs[t]}`;return e}function mj(e,t,r){return(r??new rl(t)).formatMonthYear(e)}const bee=mj;function xee(e,t,r){return(r??new rl(t)).format(e,"d")}function wee(e,t=Vu){return t.format(e,"LLLL")}function See(e,t,r){return(r??new rl(t)).format(e,"cccccc")}function Tee(e,t=Vu){return e<10?t.formatNumber(`0${e.toLocaleString()}`):t.formatNumber(`${e.toLocaleString()}`)}function Mee(){return""}function gj(e,t=Vu){return t.format(e,"yyyy")}const Cee=gj,Eee=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:mj,formatDay:xee,formatMonthCaption:bee,formatMonthDropdown:wee,formatWeekNumber:Tee,formatWeekNumberHeader:Mee,formatWeekdayName:See,formatYearCaption:Cee,formatYearDropdown:gj},Symbol.toStringTag,{value:"Module"}));function Aee(e){return e?.formatMonthCaption&&!e.formatCaption&&(e.formatCaption=e.formatMonthCaption),e?.formatYearCaption&&!e.formatYearDropdown&&(e.formatYearDropdown=e.formatYearCaption),{...Eee,...e}}function Pee(e,t,r,a,d){const{startOfMonth:p,startOfYear:m,endOfYear:s,eachMonthOfInterval:M,getMonth:C}=d;return M({start:m(e),end:s(e)}).map(R=>{const j=a.formatMonthDropdown(R,d),G=C(R),V=t&&R<p(t)||r&&R>p(r)||!1;return{value:G,label:j,disabled:V}})}function Dee(e,t={},r={}){let a={...t?.[sn.Day]};return Object.entries(e).filter(([,d])=>d===!0).forEach(([d])=>{a={...a,...r?.[d]}}),a}function kee(e,t,r){const a=e.today(),d=t?e.startOfISOWeek(a):e.startOfWeek(a),p=[];for(let m=0;m<7;m++){const s=e.addDays(d,m);p.push(s)}return p}function Oee(e,t,r,a,d=!1){if(!e||!t)return;const{startOfYear:p,endOfYear:m,eachYearOfInterval:s,getYear:M}=a,C=p(e),A=m(t),D=s({start:C,end:A});return d&&D.reverse(),D.map(R=>{const j=r.formatYearDropdown(R,a);return{value:M(R),label:j,disabled:!1}})}function yj(e,t,r,a){let d=(a??new rl(r)).format(e,"PPPP");return t.today&&(d=`Today, ${d}`),t.selected&&(d=`${d}, selected`),d}const Iee=yj;function vj(e,t,r){return(r??new rl(t)).formatMonthYear(e)}const zee=vj;function Ree(e,t,r,a){let d=(a??new rl(r)).format(e,"PPPP");return t?.today&&(d=`Today, ${d}`),d}function jee(e){return"Choose the Month"}function Lee(){return""}function Nee(e){return"Go to the Next Month"}function Bee(e){return"Go to the Previous Month"}function Fee(e,t,r){return(r??new rl(t)).format(e,"cccc")}function Uee(e,t){return`Week ${e}`}function $ee(e){return"Week Number"}function Vee(e){return"Choose the Year"}const qee=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:zee,labelDay:Iee,labelDayButton:yj,labelGrid:vj,labelGridcell:Ree,labelMonthDropdown:jee,labelNav:Lee,labelNext:Nee,labelPrevious:Bee,labelWeekNumber:Uee,labelWeekNumberHeader:$ee,labelWeekday:Fee,labelYearDropdown:Vee},Symbol.toStringTag,{value:"Module"})),zv=e=>e instanceof HTMLElement?e:null,Y1=e=>[...e.querySelectorAll("[data-animated-month]")??[]],Gee=e=>zv(e.querySelector("[data-animated-month]")),X1=e=>zv(e.querySelector("[data-animated-caption]")),K1=e=>zv(e.querySelector("[data-animated-weeks]")),Hee=e=>zv(e.querySelector("[data-animated-nav]")),Zee=e=>zv(e.querySelector("[data-animated-weekdays]"));function Wee(e,t,{classNames:r,months:a,focused:d,dateLib:p}){const m=F.useRef(null),s=F.useRef(a),M=F.useRef(!1);F.useLayoutEffect(()=>{const C=s.current;if(s.current=a,!t||!e.current||!(e.current instanceof HTMLElement)||a.length===0||C.length===0||a.length!==C.length)return;const A=p.isSameMonth(a[0].date,C[0].date),D=p.isAfter(a[0].date,C[0].date),R=D?r[Gs.caption_after_enter]:r[Gs.caption_before_enter],j=D?r[Gs.weeks_after_enter]:r[Gs.weeks_before_enter],G=m.current,V=e.current.cloneNode(!0);if(V instanceof HTMLElement?(Y1(V).forEach(ne=>{if(!(ne instanceof HTMLElement))return;const me=Gee(ne);me&&ne.contains(me)&&ne.removeChild(me);const fe=X1(ne);fe&&fe.classList.remove(R);const _e=K1(ne);_e&&_e.classList.remove(j)}),m.current=V):m.current=null,M.current||A||d)return;const H=G instanceof HTMLElement?Y1(G):[],Q=Y1(e.current);if(Q?.every(te=>te instanceof HTMLElement)&&H&&H.every(te=>te instanceof HTMLElement)){M.current=!0,e.current.style.isolation="isolate";const te=Hee(e.current);te&&(te.style.zIndex="1"),Q.forEach((ne,me)=>{const fe=H[me];if(!fe)return;ne.style.position="relative",ne.style.overflow="hidden";const _e=X1(ne);_e&&_e.classList.add(R);const ye=K1(ne);ye&&ye.classList.add(j);const Oe=()=>{M.current=!1,e.current&&(e.current.style.isolation=""),te&&(te.style.zIndex=""),_e&&_e.classList.remove(R),ye&&ye.classList.remove(j),ne.style.position="",ne.style.overflow="",ne.contains(fe)&&ne.removeChild(fe)};fe.style.pointerEvents="none",fe.style.position="absolute",fe.style.overflow="hidden",fe.setAttribute("aria-hidden","true");const nt=Zee(fe);nt&&(nt.style.opacity="0");const ft=X1(fe);ft&&(ft.classList.add(D?r[Gs.caption_before_exit]:r[Gs.caption_after_exit]),ft.addEventListener("animationend",Oe));const rt=K1(fe);rt&&rt.classList.add(D?r[Gs.weeks_before_exit]:r[Gs.weeks_after_exit]),ne.insertBefore(fe,ne.firstChild)})}})}function Yee(e,t,r,a){const d=e[0],p=e[e.length-1],{ISOWeek:m,fixedWeeks:s,broadcastCalendar:M}=r??{},{addDays:C,differenceInCalendarDays:A,differenceInCalendarMonths:D,endOfBroadcastWeek:R,endOfISOWeek:j,endOfMonth:G,endOfWeek:V,isAfter:H,startOfBroadcastWeek:Q,startOfISOWeek:te,startOfWeek:ne}=a,me=M?Q(d,a):m?te(d):ne(d),fe=M?R(p):m?j(G(p)):V(G(p)),_e=A(fe,me),ye=D(p,d)+1,Oe=[];for(let rt=0;rt<=_e;rt++){const at=C(me,rt);if(t&&H(at,t))break;Oe.push(at)}const ft=(M?35:42)*ye;if(s&&Oe.length<ft){const rt=ft-Oe.length;for(let at=0;at<rt;at++){const Et=C(Oe[Oe.length-1],1);Oe.push(Et)}}return Oe}function Xee(e){const t=[];return e.reduce((r,a)=>{const d=a.weeks.reduce((p,m)=>p.concat(m.days.slice()),t.slice());return r.concat(d.slice())},t.slice())}function Kee(e,t,r,a){const{numberOfMonths:d=1}=r,p=[];for(let m=0;m<d;m++){const s=a.addMonths(e,m);if(t&&s>t)break;p.push(s)}return p}function cP(e,t,r,a){const{month:d,defaultMonth:p,today:m=a.today(),numberOfMonths:s=1}=e;let M=d||p||m;const{differenceInCalendarMonths:C,addMonths:A,startOfMonth:D}=a;if(r&&C(r,M)<s-1){const R=-1*(s-1);M=A(r,R)}return t&&C(M,t)<0&&(M=t),D(M)}function Qee(e,t,r,a){const{addDays:d,endOfBroadcastWeek:p,endOfISOWeek:m,endOfMonth:s,endOfWeek:M,getISOWeek:C,getWeek:A,startOfBroadcastWeek:D,startOfISOWeek:R,startOfWeek:j}=a,G=e.reduce((V,H)=>{const Q=r.broadcastCalendar?D(H,a):r.ISOWeek?R(H):j(H),te=r.broadcastCalendar?p(H):r.ISOWeek?m(s(H)):M(s(H)),ne=t.filter(ye=>ye>=Q&&ye<=te),me=r.broadcastCalendar?35:42;if(r.fixedWeeks&&ne.length<me){const ye=t.filter(Oe=>{const nt=me-ne.length;return Oe>te&&Oe<=d(te,nt)});ne.push(...ye)}const fe=ne.reduce((ye,Oe)=>{const nt=r.ISOWeek?C(Oe):A(Oe),ft=ye.find(at=>at.weekNumber===nt),rt=new lj(Oe,H,a);return ft?ft.days.push(rt):ye.push(new $J(nt,[rt])),ye},[]),_e=new UJ(H,fe);return V.push(_e),V},[]);return r.reverseMonths?G.reverse():G}function Jee(e,t){let{startMonth:r,endMonth:a}=e;const{startOfYear:d,startOfDay:p,startOfMonth:m,endOfMonth:s,addYears:M,endOfYear:C,newDate:A,today:D}=t,{fromYear:R,toYear:j,fromMonth:G,toMonth:V}=e;!r&&G&&(r=G),!r&&R&&(r=t.newDate(R,0,1)),!a&&V&&(a=V),!a&&j&&(a=A(j,11,31));const H=e.captionLayout==="dropdown"||e.captionLayout==="dropdown-years";return r?r=m(r):R?r=A(R,0,1):!r&&H&&(r=d(M(e.today??D(),-100))),a?a=s(a):j?a=A(j,11,31):!a&&H&&(a=C(e.today??D())),[r&&p(r),a&&p(a)]}function ete(e,t,r,a){if(r.disableNavigation)return;const{pagedNavigation:d,numberOfMonths:p=1}=r,{startOfMonth:m,addMonths:s,differenceInCalendarMonths:M}=a,C=d?p:1,A=m(e);if(!t)return s(A,C);if(!(M(t,e)<p))return s(A,C)}function tte(e,t,r,a){if(r.disableNavigation)return;const{pagedNavigation:d,numberOfMonths:p}=r,{startOfMonth:m,addMonths:s,differenceInCalendarMonths:M}=a,C=d?p??1:1,A=m(e);if(!t)return s(A,-C);if(!(M(A,t)<=0))return s(A,-C)}function nte(e){const t=[];return e.reduce((r,a)=>r.concat(a.weeks.slice()),t.slice())}function Bb(e,t){const[r,a]=F.useState(e);return[t===void 0?r:t,a]}function rte(e,t){const[r,a]=Jee(e,t),{startOfMonth:d,endOfMonth:p}=t,m=cP(e,r,a,t),[s,M]=Bb(m,e.month?m:void 0);F.useEffect(()=>{const _e=cP(e,r,a,t);M(_e)},[e.timeZone]);const C=Kee(s,a,e,t),A=Yee(C,e.endMonth?p(e.endMonth):void 0,e,t),D=Qee(C,A,e,t),R=nte(D),j=Xee(D),G=tte(s,r,e,t),V=ete(s,a,e,t),{disableNavigation:H,onMonthChange:Q}=e,te=_e=>R.some(ye=>ye.days.some(Oe=>Oe.isEqualTo(_e))),ne=_e=>{if(H)return;let ye=d(_e);r&&ye<d(r)&&(ye=d(r)),a&&ye>d(a)&&(ye=d(a)),M(ye),Q?.(ye)};return{months:D,weeks:R,days:j,navStart:r,navEnd:a,previousMonth:G,nextMonth:V,goToMonth:ne,goToDay:_e=>{te(_e)||ne(_e.date)}}}var Eu;(function(e){e[e.Today=0]="Today",e[e.Selected=1]="Selected",e[e.LastFocused=2]="LastFocused",e[e.FocusedModifier=3]="FocusedModifier"})(Eu||(Eu={}));function uP(e){return!e[_i.disabled]&&!e[_i.hidden]&&!e[_i.outside]}function ite(e,t,r,a){let d,p=-1;for(const m of e){const s=t(m);uP(s)&&(s[_i.focused]&&p<Eu.FocusedModifier?(d=m,p=Eu.FocusedModifier):a?.isEqualTo(m)&&p<Eu.LastFocused?(d=m,p=Eu.LastFocused):r(m.date)&&p<Eu.Selected?(d=m,p=Eu.Selected):s[_i.today]&&p<Eu.Today&&(d=m,p=Eu.Today))}return d||(d=e.find(m=>uP(t(m)))),d}function ate(e,t,r,a,d,p,m){const{ISOWeek:s,broadcastCalendar:M}=p,{addDays:C,addMonths:A,addWeeks:D,addYears:R,endOfBroadcastWeek:j,endOfISOWeek:G,endOfWeek:V,max:H,min:Q,startOfBroadcastWeek:te,startOfISOWeek:ne,startOfWeek:me}=m;let _e={day:C,week:D,month:A,year:R,startOfWeek:ye=>M?te(ye,m):s?ne(ye):me(ye),endOfWeek:ye=>M?j(ye):s?G(ye):V(ye)}[e](r,t==="after"?1:-1);return t==="before"&&a?_e=H([a,_e]):t==="after"&&d&&(_e=Q([d,_e])),_e}function _j(e,t,r,a,d,p,m,s=0){if(s>365)return;const M=ate(e,t,r.date,a,d,p,m),C=!!(p.disabled&&Gh(M,p.disabled,m)),A=!!(p.hidden&&Gh(M,p.hidden,m)),D=M,R=new lj(M,D,m);return!C&&!A?R:_j(e,t,R,a,d,p,m,s+1)}function ote(e,t,r,a,d){const{autoFocus:p}=e,[m,s]=F.useState(),M=ite(t.days,r,a||(()=>!1),m),[C,A]=F.useState(p?M:void 0);return{isFocusTarget:V=>!!M?.isEqualTo(V),setFocused:A,focused:C,blur:()=>{s(C),A(void 0)},moveFocus:(V,H)=>{if(!C)return;const Q=_j(V,H,C,t.navStart,t.navEnd,e,d);Q&&(e.disableNavigation&&!t.days.some(ne=>ne.isEqualTo(Q))||(t.goToDay(Q),A(Q)))}}}function ste(e,t){const{selected:r,required:a,onSelect:d}=e,[p,m]=Bb(r,d?r:void 0),s=d?r:p,{isSameDay:M}=t,C=j=>s?.some(G=>M(G,j))??!1,{min:A,max:D}=e;return{selected:s,select:(j,G,V)=>{let H=[...s??[]];if(C(j)){if(s?.length===A||a&&s?.length===1)return;H=s?.filter(Q=>!M(Q,j))}else s?.length===D?H=[j]:H=[...H,j];return d||m(H),d?.(H,j,G,V),H},isSelected:C}}function lte(e,t,r=0,a=0,d=!1,p=Vu){const{from:m,to:s}=t||{},{isSameDay:M,isAfter:C,isBefore:A}=p;let D;if(!m&&!s)D={from:e,to:r>0?void 0:e};else if(m&&!s)M(m,e)?r===0?D={from:m,to:e}:d?D={from:m,to:void 0}:D=void 0:A(e,m)?D={from:e,to:m}:D={from:m,to:e};else if(m&&s)if(M(m,e)&&M(s,e))d?D={from:m,to:s}:D=void 0;else if(M(m,e))D={from:m,to:r>0?void 0:e};else if(M(s,e))D={from:e,to:r>0?void 0:e};else if(A(e,m))D={from:e,to:s};else if(C(e,m))D={from:m,to:e};else if(C(e,s))D={from:m,to:e};else throw new Error("Invalid range");if(D?.from&&D?.to){const R=p.differenceInCalendarDays(D.to,D.from);a>0&&R>a?D={from:e,to:void 0}:r>1&&R<r&&(D={from:e,to:void 0})}return D}function cte(e,t,r=Vu){const a=Array.isArray(t)?t:[t];let d=e.from;const p=r.differenceInCalendarDays(e.to,e.from),m=Math.min(p,6);for(let s=0;s<=m;s++){if(a.includes(d.getDay()))return!0;d=r.addDays(d,1)}return!1}function hP(e,t,r=Vu){return qh(e,t.from,!1,r)||qh(e,t.to,!1,r)||qh(t,e.from,!1,r)||qh(t,e.to,!1,r)}function ute(e,t,r=Vu){const a=Array.isArray(t)?t:[t];if(a.filter(s=>typeof s!="function").some(s=>typeof s=="boolean"?s:r.isDate(s)?qh(e,s,!1,r):pj(s,r)?s.some(M=>qh(e,M,!1,r)):mT(s)?s.from&&s.to?hP(e,{from:s.from,to:s.to},r):!1:fj(s)?cte(e,s.dayOfWeek,r):uj(s)?r.isAfter(s.before,s.after)?hP(e,{from:r.addDays(s.after,1),to:r.addDays(s.before,-1)},r):Gh(e.from,s,r)||Gh(e.to,s,r):hj(s)||dj(s)?Gh(e.from,s,r)||Gh(e.to,s,r):!1))return!0;const m=a.filter(s=>typeof s=="function");if(m.length){let s=e.from;const M=r.differenceInCalendarDays(e.to,e.from);for(let C=0;C<=M;C++){if(m.some(A=>A(s)))return!0;s=r.addDays(s,1)}}return!1}function hte(e,t){const{disabled:r,excludeDisabled:a,selected:d,required:p,onSelect:m}=e,[s,M]=Bb(d,m?d:void 0),C=m?d:s;return{selected:C,select:(R,j,G)=>{const{min:V,max:H}=e,Q=R?lte(R,C,V,H,p,t):void 0;return a&&r&&Q?.from&&Q.to&&ute({from:Q.from,to:Q.to},r,t)&&(Q.from=R,Q.to=void 0),m||M(Q),m?.(Q,R,j,G),Q},isSelected:R=>C&&qh(C,R,!1,t)}}function dte(e,t){const{selected:r,required:a,onSelect:d}=e,[p,m]=Bb(r,d?r:void 0),s=d?r:p,{isSameDay:M}=t;return{selected:s,select:(D,R,j)=>{let G=D;return!a&&s&&s&&M(D,s)&&(G=void 0),d||m(G),d?.(G,D,R,j),G},isSelected:D=>s?M(s,D):!1}}function fte(e,t){const r=dte(e,t),a=ste(e,t),d=hte(e,t);switch(e.mode){case"single":return r;case"multiple":return a;case"range":return d;default:return}}function pte(e){let t=e;t.timeZone&&(t={...e},t.today&&(t.today=new _o(t.today,t.timeZone)),t.month&&(t.month=new _o(t.month,t.timeZone)),t.defaultMonth&&(t.defaultMonth=new _o(t.defaultMonth,t.timeZone)),t.startMonth&&(t.startMonth=new _o(t.startMonth,t.timeZone)),t.endMonth&&(t.endMonth=new _o(t.endMonth,t.timeZone)),t.mode==="single"&&t.selected?t.selected=new _o(t.selected,t.timeZone):t.mode==="multiple"&&t.selected?t.selected=t.selected?.map(Ue=>new _o(Ue,t.timeZone)):t.mode==="range"&&t.selected&&(t.selected={from:t.selected.from?new _o(t.selected.from,t.timeZone):void 0,to:t.selected.to?new _o(t.selected.to,t.timeZone):void 0}));const{components:r,formatters:a,labels:d,dateLib:p,locale:m,classNames:s}=F.useMemo(()=>{const Ue={...pT,...t.locale};return{dateLib:new rl({locale:Ue,weekStartsOn:t.broadcastCalendar?1:t.weekStartsOn,firstWeekContainsDate:t.firstWeekContainsDate,useAdditionalWeekYearTokens:t.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:t.useAdditionalDayOfYearTokens,timeZone:t.timeZone,numerals:t.numerals},t.dateLib),components:vee(t.components),formatters:Aee(t.formatters),labels:{...qee,...t.labels},locale:Ue,classNames:{...gT(),...t.classNames}}},[t.locale,t.broadcastCalendar,t.weekStartsOn,t.firstWeekContainsDate,t.useAdditionalWeekYearTokens,t.useAdditionalDayOfYearTokens,t.timeZone,t.numerals,t.dateLib,t.components,t.formatters,t.labels,t.classNames]),{captionLayout:M,mode:C,navLayout:A,numberOfMonths:D=1,onDayBlur:R,onDayClick:j,onDayFocus:G,onDayKeyDown:V,onDayMouseEnter:H,onDayMouseLeave:Q,onNextClick:te,onPrevClick:ne,showWeekNumber:me,styles:fe}=t,{formatCaption:_e,formatDay:ye,formatMonthDropdown:Oe,formatWeekNumber:nt,formatWeekNumberHeader:ft,formatWeekdayName:rt,formatYearDropdown:at}=a,Et=rte(t,p),{days:At,months:zt,navStart:Le,navEnd:Qe,previousMonth:Ve,nextMonth:ht,goToMonth:qt}=Et,Ae=gee(At,t,Le,Qe,p),{isSelected:qe,select:_t,selected:Tt}=fte(t,p)??{},{blur:jt,focused:Ht,isFocusTarget:bt,moveFocus:nn,setFocused:pt}=ote(t,Et,Ae,qe??(()=>!1),p),{labelDayButton:Rt,labelGridcell:Ft,labelGrid:ot,labelMonthDropdown:rn,labelNav:Wt,labelPrevious:Vn,labelNext:Zn,labelWeekday:Wr,labelWeekNumber:Pa,labelWeekNumberHeader:Oi,labelYearDropdown:qo}=d,fs=F.useMemo(()=>kee(p,t.ISOWeek),[p,t.ISOWeek]),wo=C!==void 0||j!==void 0,ha=F.useCallback(()=>{Ve&&(qt(Ve),ne?.(Ve))},[Ve,qt,ne]),Rr=F.useCallback(()=>{ht&&(qt(ht),te?.(ht))},[qt,ht,te]),ec=F.useCallback((Ue,st)=>Ge=>{Ge.preventDefault(),Ge.stopPropagation(),pt(Ue),_t?.(Ue.date,st,Ge),j?.(Ue.date,st,Ge)},[_t,j,pt]),Ji=F.useCallback((Ue,st)=>Ge=>{pt(Ue),G?.(Ue.date,st,Ge)},[G,pt]),So=F.useCallback((Ue,st)=>Ge=>{jt(),R?.(Ue.date,st,Ge)},[jt,R]),Ii=F.useCallback((Ue,st)=>Ge=>{const Mt={ArrowLeft:[Ge.shiftKey?"month":"day",t.dir==="rtl"?"after":"before"],ArrowRight:[Ge.shiftKey?"month":"day",t.dir==="rtl"?"before":"after"],ArrowDown:[Ge.shiftKey?"year":"week","after"],ArrowUp:[Ge.shiftKey?"year":"week","before"],PageUp:[Ge.shiftKey?"year":"month","before"],PageDown:[Ge.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(Mt[Ge.key]){Ge.preventDefault(),Ge.stopPropagation();const[Lt,ke]=Mt[Ge.key];nn(Lt,ke)}V?.(Ue.date,st,Ge)},[nn,V,t.dir]),ze=F.useCallback((Ue,st)=>Ge=>{H?.(Ue.date,st,Ge)},[H]),ie=F.useCallback((Ue,st)=>Ge=>{Q?.(Ue.date,st,Ge)},[Q]),ae=F.useCallback(Ue=>st=>{const Ge=Number(st.target.value),Mt=p.setMonth(p.startOfMonth(Ue),Ge);qt(Mt)},[p,qt]),ce=F.useCallback(Ue=>st=>{const Ge=Number(st.target.value),Mt=p.setYear(p.startOfMonth(Ue),Ge);qt(Mt)},[p,qt]),{className:Se,style:Me}=F.useMemo(()=>({className:[s[sn.Root],t.className].filter(Boolean).join(" "),style:{...fe?.[sn.Root],...t.style}}),[s,t.className,t.style,fe]),Ie=_ee(t),$e=F.useRef(null);Wee($e,!!t.animate,{classNames:s,months:zt,focused:Ht,dateLib:p});const Be={dayPickerProps:t,selected:Tt,select:_t,isSelected:qe,months:zt,nextMonth:ht,previousMonth:Ve,goToMonth:qt,getModifiers:Ae,components:r,classNames:s,styles:fe,labels:d,formatters:a};return Ut.createElement(cj.Provider,{value:Be},Ut.createElement(r.Root,{rootRef:t.animate?$e:void 0,className:Se,style:Me,dir:t.dir,id:t.id,lang:t.lang,nonce:t.nonce,title:t.title,role:t.role,"aria-label":t["aria-label"],"aria-labelledby":t["aria-labelledby"],...Ie},Ut.createElement(r.Months,{className:s[sn.Months],style:fe?.[sn.Months]},!t.hideNavigation&&!A&&Ut.createElement(r.Nav,{"data-animated-nav":t.animate?"true":void 0,className:s[sn.Nav],style:fe?.[sn.Nav],"aria-label":Wt(),onPreviousClick:ha,onNextClick:Rr,previousMonth:Ve,nextMonth:ht}),zt.map((Ue,st)=>Ut.createElement(r.Month,{"data-animated-month":t.animate?"true":void 0,className:s[sn.Month],style:fe?.[sn.Month],key:st,displayIndex:st,calendarMonth:Ue},A==="around"&&!t.hideNavigation&&st===0&&Ut.createElement(r.PreviousMonthButton,{type:"button",className:s[sn.PreviousMonthButton],tabIndex:Ve?void 0:-1,"aria-disabled":Ve?void 0:!0,"aria-label":Vn(Ve),onClick:ha,"data-animated-button":t.animate?"true":void 0},Ut.createElement(r.Chevron,{disabled:Ve?void 0:!0,className:s[sn.Chevron],orientation:t.dir==="rtl"?"right":"left"})),Ut.createElement(r.MonthCaption,{"data-animated-caption":t.animate?"true":void 0,className:s[sn.MonthCaption],style:fe?.[sn.MonthCaption],calendarMonth:Ue,displayIndex:st},M?.startsWith("dropdown")?Ut.createElement(r.DropdownNav,{className:s[sn.Dropdowns],style:fe?.[sn.Dropdowns]},(()=>{const Ge=M==="dropdown"||M==="dropdown-months"?Ut.createElement(r.MonthsDropdown,{key:"month",className:s[sn.MonthsDropdown],"aria-label":rn(),classNames:s,components:r,disabled:!!t.disableNavigation,onChange:ae(Ue.date),options:Pee(Ue.date,Le,Qe,a,p),style:fe?.[sn.Dropdown],value:p.getMonth(Ue.date)}):Ut.createElement("span",{key:"month"},Oe(Ue.date,p)),Mt=M==="dropdown"||M==="dropdown-years"?Ut.createElement(r.YearsDropdown,{key:"year",className:s[sn.YearsDropdown],"aria-label":qo(p.options),classNames:s,components:r,disabled:!!t.disableNavigation,onChange:ce(Ue.date),options:Oee(Le,Qe,a,p,!!t.reverseYears),style:fe?.[sn.Dropdown],value:p.getYear(Ue.date)}):Ut.createElement("span",{key:"year"},at(Ue.date,p));return p.getMonthYearOrder()==="year-first"?[Mt,Ge]:[Ge,Mt]})(),Ut.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},_e(Ue.date,p.options,p))):Ut.createElement(r.CaptionLabel,{className:s[sn.CaptionLabel],role:"status","aria-live":"polite"},_e(Ue.date,p.options,p))),A==="around"&&!t.hideNavigation&&st===D-1&&Ut.createElement(r.NextMonthButton,{type:"button",className:s[sn.NextMonthButton],tabIndex:ht?void 0:-1,"aria-disabled":ht?void 0:!0,"aria-label":Zn(ht),onClick:Rr,"data-animated-button":t.animate?"true":void 0},Ut.createElement(r.Chevron,{disabled:ht?void 0:!0,className:s[sn.Chevron],orientation:t.dir==="rtl"?"left":"right"})),st===D-1&&A==="after"&&!t.hideNavigation&&Ut.createElement(r.Nav,{"data-animated-nav":t.animate?"true":void 0,className:s[sn.Nav],style:fe?.[sn.Nav],"aria-label":Wt(),onPreviousClick:ha,onNextClick:Rr,previousMonth:Ve,nextMonth:ht}),Ut.createElement(r.MonthGrid,{role:"grid","aria-multiselectable":C==="multiple"||C==="range","aria-label":ot(Ue.date,p.options,p)||void 0,className:s[sn.MonthGrid],style:fe?.[sn.MonthGrid]},!t.hideWeekdays&&Ut.createElement(r.Weekdays,{"data-animated-weekdays":t.animate?"true":void 0,className:s[sn.Weekdays],style:fe?.[sn.Weekdays]},me&&Ut.createElement(r.WeekNumberHeader,{"aria-label":Oi(p.options),className:s[sn.WeekNumberHeader],style:fe?.[sn.WeekNumberHeader],scope:"col"},ft()),fs.map(Ge=>Ut.createElement(r.Weekday,{"aria-label":Wr(Ge,p.options,p),className:s[sn.Weekday],key:String(Ge),style:fe?.[sn.Weekday],scope:"col"},rt(Ge,p.options,p)))),Ut.createElement(r.Weeks,{"data-animated-weeks":t.animate?"true":void 0,className:s[sn.Weeks],style:fe?.[sn.Weeks]},Ue.weeks.map(Ge=>Ut.createElement(r.Week,{className:s[sn.Week],key:Ge.weekNumber,style:fe?.[sn.Week],week:Ge},me&&Ut.createElement(r.WeekNumber,{week:Ge,style:fe?.[sn.WeekNumber],"aria-label":Pa(Ge.weekNumber,{locale:m}),className:s[sn.WeekNumber],scope:"row",role:"rowheader"},nt(Ge.weekNumber,p)),Ge.days.map(Mt=>{const{date:Lt}=Mt,ke=Ae(Mt);if(ke[_i.focused]=!ke.hidden&&!!Ht?.isEqualTo(Mt),ke[Fc.selected]=qe?.(Lt)||ke.selected,mT(Tt)){const{from:Sn,to:xr}=Tt;ke[Fc.range_start]=!!(Sn&&xr&&p.isSameDay(Lt,Sn)),ke[Fc.range_end]=!!(Sn&&xr&&p.isSameDay(Lt,xr)),ke[Fc.range_middle]=qh(Tt,Lt,!0,p)}const wn=Dee(ke,fe,t.modifiersStyles),On=yee(ke,s,t.modifiersClassNames),$t=!wo&&!ke.hidden?Ft(Lt,ke,p.options,p):void 0;return Ut.createElement(r.Day,{key:`${p.format(Lt,"yyyy-MM-dd")}_${p.format(Mt.displayMonth,"yyyy-MM")}`,day:Mt,modifiers:ke,className:On.join(" "),style:wn,role:"gridcell","aria-selected":ke.selected||void 0,"aria-label":$t,"data-day":p.format(Lt,"yyyy-MM-dd"),"data-month":Mt.outside?p.format(Lt,"yyyy-MM"):void 0,"data-selected":ke.selected||void 0,"data-disabled":ke.disabled||void 0,"data-hidden":ke.hidden||void 0,"data-outside":Mt.outside||void 0,"data-focused":ke.focused||void 0,"data-today":ke.today||void 0},!ke.hidden&&wo?Ut.createElement(r.DayButton,{className:s[sn.DayButton],style:fe?.[sn.DayButton],type:"button",day:Mt,modifiers:ke,disabled:ke.disabled||void 0,tabIndex:bt(Mt)?0:-1,"aria-label":Rt(Lt,ke,p.options,p),onClick:ec(Mt,ke),onBlur:So(Mt,ke),onFocus:Ji(Mt,ke),onKeyDown:Ii(Mt,ke),onMouseEnter:ze(Mt,ke),onMouseLeave:ie(Mt,ke)},ye(Lt,p.options,p)):!ke.hidden&&ye(Mt.date,p.options,p))})))))))),t.footer&&Ut.createElement(r.Footer,{className:s[sn.Footer],style:fe?.[sn.Footer],role:"status","aria-live":"polite"},t.footer)))}const dP=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,fP=Er,mte=(e,t)=>r=>{var a;if(t?.variants==null)return fP(e,r?.class,r?.className);const{variants:d,defaultVariants:p}=t,m=Object.keys(d).map(C=>{const A=r?.[C],D=p?.[C];if(A===null)return null;const R=dP(A)||dP(D);return d[C][R]}),s=r&&Object.entries(r).reduce((C,A)=>{let[D,R]=A;return R===void 0||(C[D]=R),C},{}),M=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((C,A)=>{let{class:D,className:R,...j}=A;return Object.entries(j).every(G=>{let[V,H]=G;return Array.isArray(H)?H.includes({...p,...s}[V]):{...p,...s}[V]===H})?[...C,D,R]:C},[]);return fP(e,m,M,r?.class,r?.className)},uS=mte("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function hS({className:e,variant:t,size:r,asChild:a=!1,...d}){const p=a?DW:"button";return X.jsx(p,{"data-slot":"button",className:Rn(uS({variant:t,size:r,className:e})),...d})}function pP({className:e,classNames:t,showOutsideDays:r=!0,captionLayout:a="label",buttonVariant:d="ghost",formatters:p,components:m,...s}){const M=gT();return X.jsx(pte,{showOutsideDays:r,className:Rn("bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,e),captionLayout:a,formatters:{formatMonthDropdown:C=>C.toLocaleString("default",{month:"short"}),...p},classNames:{root:Rn("w-fit",M.root),months:Rn("flex gap-4 flex-col md:flex-row relative",M.months),month:Rn("flex flex-col w-full gap-4",M.month),nav:Rn("flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",M.nav),button_previous:Rn(uS({variant:d}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",M.button_previous),button_next:Rn(uS({variant:d}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",M.button_next),month_caption:Rn("flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",M.month_caption),dropdowns:Rn("w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",M.dropdowns),dropdown_root:Rn("relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",M.dropdown_root),dropdown:Rn("absolute bg-popover inset-0 opacity-0",M.dropdown),caption_label:Rn("select-none font-medium",a==="label"?"text-sm":"rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",M.caption_label),table:"w-full border-collapse",weekdays:Rn("flex",M.weekdays),weekday:Rn("text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",M.weekday),week:Rn("flex w-full mt-2",M.week),week_number_header:Rn("select-none w-(--cell-size)",M.week_number_header),week_number:Rn("text-[0.8rem] select-none text-muted-foreground",M.week_number),day:Rn("relative w-full h-full p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",M.day),range_start:Rn("rounded-l-md bg-accent",M.range_start),range_middle:Rn("rounded-none",M.range_middle),range_end:Rn("rounded-r-md bg-accent",M.range_end),today:Rn("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",M.today),outside:Rn("text-muted-foreground aria-selected:text-muted-foreground",M.outside),disabled:Rn("text-muted-foreground opacity-50",M.disabled),hidden:Rn("invisible",M.hidden),...t},components:{Root:({className:C,rootRef:A,...D})=>X.jsx("div",{"data-slot":"calendar",ref:A,className:Rn(C),...D}),Chevron:({className:C,orientation:A,...D})=>A==="left"?X.jsx(yN,{className:Rn("size-4",C),...D}):A==="right"?X.jsx(NP,{className:Rn("size-4",C),...D}):X.jsx(_S,{className:Rn("size-4",C),...D}),DayButton:gte,WeekNumber:({children:C,...A})=>X.jsx("td",{...A,children:X.jsx("div",{className:"flex size-(--cell-size) items-center justify-center text-center",children:C})}),...m},...s})}function gte({className:e,day:t,modifiers:r,...a}){const d=gT(),p=F.useRef(null);return F.useEffect(()=>{r.focused&&p.current?.focus()},[r.focused]),X.jsx(hS,{ref:p,variant:"ghost",size:"icon","data-day":t.date.toLocaleDateString(),"data-selected-single":r.selected&&!r.range_start&&!r.range_end&&!r.range_middle,"data-range-start":r.range_start,"data-range-end":r.range_end,"data-range-middle":r.range_middle,className:Rn("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",d.day,e),...a})}const yte={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},vte=(e,t,r)=>{let a;const d=yte[e];return typeof d=="string"?a=d:t===1?a=d.one:a=d.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"en "+a:"hace "+a:a},_te={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},bte={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},xte={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},wte={date:tg({formats:_te,defaultWidth:"full"}),time:tg({formats:bte,defaultWidth:"full"}),dateTime:tg({formats:xte,defaultWidth:"full"})},Ste={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},Tte={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},Mte=(e,t,r,a)=>t.getHours()!==1?Tte[e]:Ste[e],Cte={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},Ete={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},Ate={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},Pte={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},Dte={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},kte={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},Ote=(e,t)=>Number(e)+"º",Ite={ordinalNumber:Ote,era:Pu({values:Cte,defaultWidth:"wide"}),quarter:Pu({values:Ete,defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:Pu({values:Ate,defaultWidth:"wide"}),day:Pu({values:Pte,defaultWidth:"wide"}),dayPeriod:Pu({values:Dte,defaultWidth:"wide",formattingValues:kte,defaultFormattingWidth:"wide"})},zte=/^(\d+)(º)?/i,Rte=/\d+/i,jte={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},Lte={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},Nte={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},Bte={any:[/1/i,/2/i,/3/i,/4/i]},Fte={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},Ute={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},$te={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},Vte={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},qte={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},Gte={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},Hte={ordinalNumber:nj({matchPattern:zte,parsePattern:Rte,valueCallback:function(e){return parseInt(e,10)}}),era:Du({matchPatterns:jte,defaultMatchWidth:"wide",parsePatterns:Lte,defaultParseWidth:"any"}),quarter:Du({matchPatterns:Nte,defaultMatchWidth:"wide",parsePatterns:Bte,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Du({matchPatterns:Fte,defaultMatchWidth:"wide",parsePatterns:Ute,defaultParseWidth:"any"}),day:Du({matchPatterns:$te,defaultMatchWidth:"wide",parsePatterns:Vte,defaultParseWidth:"any"}),dayPeriod:Du({matchPatterns:qte,defaultMatchWidth:"any",parsePatterns:Gte,defaultParseWidth:"any"})},H_={code:"es",formatDistance:vte,formatLong:wte,formatRelative:Mte,localize:Ite,match:Hte,options:{weekStartsOn:1,firstWeekContainsDate:1}},Z_=["Nivel de agua","Caudal","Velocidad","Temperatura","Humedad"],mP={"Nivel de agua":"m",Caudal:"m³/s",Velocidad:"m/s",Temperatura:"°C",Humedad:"%"},Zte=Array.from({length:20},(e,t)=>({date:new Date(2025,9,t+1).toISOString().split("T")[0],"Nivel de agua":+(.8+t*.01).toFixed(2),Caudal:+(3.2+t*.1).toFixed(2),Velocidad:+(1.1+t*.05).toFixed(2),Temperatura:+(14+t*.2).toFixed(1),Humedad:75+t}));function Wte(){const[e,t]=F.useState(Z_[0]),[r,a]=F.useState(Z_[1]),[d,p]=F.useState(new Date(2025,9,1)),[m,s]=F.useState(new Date(2025,9,20)),M=Zte.filter(A=>{const D=new Date(A.date);return(!d||D>=d)&&(!m||D<=m)}),C=()=>alert(`Exportando gráfico: ${e} vs ${r}`);return X.jsxs("div",{className:"flex flex-col gap-6 ",children:[X.jsxs("div",{className:"flex justify-between flex-wrap gap-4",children:[X.jsxs("div",{className:"flex gap-4 flex-wrap",children:[X.jsx("div",{className:"flex flex-col ",children:X.jsxs(HA,{value:e,onValueChange:t,children:[X.jsx("label",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Variable 1"}),X.jsx(WA,{className:"w-44 bg-white shadow-none",children:X.jsx(ZA,{placeholder:"Selecciona variable 1"})}),X.jsx(YA,{children:Z_.map(A=>X.jsx(XA,{value:A,children:A},A))})]})}),X.jsx("div",{className:"flex flex-col ",children:X.jsxs(HA,{value:r,onValueChange:a,children:[X.jsx("label",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Variable 2"}),X.jsx(WA,{className:"w-44 bg-white shadow-none",children:X.jsx(ZA,{placeholder:"Selecciona variable 2"})}),X.jsx(YA,{children:Z_.map(A=>X.jsx(XA,{value:A,children:A},A))})]})})]}),X.jsx("div",{className:"flex flex-col gap-1",children:X.jsxs("div",{className:"flex items-end gap-0",children:[X.jsxs("div",{className:"flex flex-col",children:[X.jsx("label",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Fecha de inicio"}),X.jsxs(KA,{children:[X.jsx(QA,{asChild:!0,children:X.jsxs(hS,{variant:"outline",className:"justify-start text-left text-gray-700 font-normal shadow-none rounded-r-none px-3",children:[d?cS(d,"PPP",{locale:H_}):"Fecha inicio",X.jsx(IT,{className:"h-4 w-4 text-gray-500 ml-2"})]})}),X.jsx(JA,{align:"end",sideOffset:4,className:"p-0 w-auto shadow-none",children:X.jsx(pP,{mode:"single",selected:d,onSelect:p,locale:H_,initialFocus:!0,classNames:{day_selected:"bg-blue-500 text-white hover:bg-blue-600 focus:bg-blue-600"}})})]})]}),X.jsx("div",{className:"h-9 w-9 flex items-center justify-center bg-gray-200 border-y border-gray-200",children:X.jsx(sN,{className:"text-gray-500",size:18})}),X.jsxs("div",{className:"flex flex-col",children:[X.jsx("label",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Fecha de fin"}),X.jsxs(KA,{children:[X.jsx(QA,{asChild:!0,children:X.jsxs(hS,{variant:"outline",className:"justify-start text-left text-gray-700 font-normal shadow-none rounded-l-none px-3",children:[m?cS(m,"PPP",{locale:H_}):"Fecha fin",X.jsx(IT,{className:"h-4 w-4 text-gray-500 ml-2"})]})}),X.jsx(JA,{align:"end",sideOffset:4,className:"p-0 w-auto shadow-none",children:X.jsx(pP,{mode:"single",selected:m,onSelect:s,locale:H_,initialFocus:!0,classNames:{day_selected:"bg-blue-500 text-white hover:bg-blue-600 focus:bg-blue-600"}})})]})]})]})})]}),X.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[X.jsxs("div",{className:"flex-1 lg:flex-[3] flex flex-col bg-white rounded-lg border border-gray-200",children:[X.jsxs("div",{className:"flex justify-between items-center mb-2 border-b border-gray-200 p-3",children:[X.jsxs("h3",{className:"flex items-center gap-2 text-gray-700 font-semibold text-md",children:[X.jsx(LP,{size:20,className:"text-blue-600"})," ",e," vs ",r]}),X.jsxs("button",{onClick:C,className:"flex items-center gap-1 text-blue-600 hover:text-blue-800",children:[X.jsx(BP,{size:20})," Exportar"]})]}),X.jsx("div",{className:"p-0 w-full h-100 lg:h-140",children:X.jsx(YG,{width:"100%",height:"100%",children:X.jsxs(AW,{data:M,margin:{top:20,right:20,bottom:20,left:20},style:{fontSize:14},children:[X.jsx(sz,{strokeDasharray:"3 3"}),X.jsx(pz,{dataKey:"date",tick:{fontSize:12}}),X.jsx(Ww,{yAxisId:"left",tick:{fontSize:12},label:{value:mP[e],angle:-90,position:"insideLeft",style:{fontSize:12}}}),X.jsx(Ww,{yAxisId:"right",orientation:"right",tick:{fontSize:12},label:{value:mP[r],angle:90,position:"insideRight",style:{fontSize:12}}}),X.jsx(BG,{wrapperStyle:{fontSize:12}}),X.jsx(ub,{wrapperStyle:{fontSize:12}}),X.jsx(Gw,{yAxisId:"left",type:"monotone",dataKey:e,stroke:"#2563eb",activeDot:{r:6}}),X.jsx(Gw,{yAxisId:"right",type:"monotone",dataKey:r,stroke:"#f97316"})]})})})]}),X.jsxs(Zs,{className:"flex-1 lg:flex-[1]",children:[X.jsx(Ws,{className:"border-b border-gray-200 pb-4",children:X.jsxs(Ys,{className:"flex items-center gap-2 text-gray-700",children:[X.jsx(HN,{size:20,className:"text-blue-600"})," Análisis automático IA"]})}),X.jsx(Xs,{className:"text-sm text-gray-700 overflow-auto",children:X.jsx("p",{children:"Aquí se mostrará un análisis automático generado por IA sobre las variables seleccionadas en el rango de fechas elegido."})})]})]})]})}const gP=[{id:"1",type:"alta",title:"Desborde en el canal principal",description:"El nivel de agua ha superado el umbral crítico de 1.2 m.",date:"2025-10-10 14:35"},{id:"2",type:"media",title:"Incremento sostenido del caudal",description:"Se ha detectado un incremento del 15% en las últimas 6 horas.",date:"2025-10-10 08:20"},{id:"3",type:"baja",title:"Sensor de temperatura sin datos",description:"No se han recibido datos en las últimas 12 horas.",date:"2025-10-09 22:10"}];function Yte(){return X.jsxs("div",{className:"flex flex-col gap-4",children:[X.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[X.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Resumen de Alertas"}),X.jsxs("p",{className:"text-sm text-gray-500",children:["Total de alertas activas: ",gP.length]})]}),gP.map(e=>{const t=e.type==="alta"?"bg-red-50 border-red-400 text-red-700":e.type==="media"?"bg-yellow-50 border-yellow-400 text-yellow-700":"bg-blue-50 border-blue-400 text-blue-700",r=e.type==="alta"?a0:e.type==="media"?IN:wN;return X.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-lg border ${t}`,children:[X.jsx(r,{size:22,className:"mt-0.5 shrink-0"}),X.jsxs("div",{className:"flex flex-col",children:[X.jsx("h3",{className:"font-semibold text-sm",children:e.title}),X.jsx("p",{className:"text-sm",children:e.description}),X.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.date})]})]},e.id)})]})}const Xte=[{id:"1",title:"Reporte mensual de caudal - Setiembre 2025",date:"2025-10-01",type:"Caudal",status:"completado"},{id:"2",title:"Evaluación de niveles por estación",date:"2025-09-25",type:"Nivel de agua",status:"completado"},{id:"3",title:"Informe de alertas registradas",date:"2025-10-10",type:"Alertas",status:"pendiente"}];function Kte(){return X.jsxs("div",{className:"flex flex-col gap-4",children:[X.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[X.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Reportes Generados"}),X.jsx("p",{className:"text-sm text-gray-500",children:"Accede a los reportes generados automáticamente o descárgalos en formato PDF."})]}),X.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:X.jsxs("table",{className:"w-full text-sm",children:[X.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:X.jsxs("tr",{children:[X.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-600",children:"Reporte"}),X.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-600",children:"Tipo"}),X.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-600",children:"Fecha"}),X.jsx("th",{className:"text-left px-4 py-3 font-semibold text-gray-600",children:"Estado"}),X.jsx("th",{className:"text-center px-4 py-3 font-semibold text-gray-600",children:"Acciones"})]})}),X.jsx("tbody",{children:Xte.map(e=>X.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition",children:[X.jsxs("td",{className:"px-4 py-3 flex items-center gap-2",children:[X.jsx(i0,{size:18,className:"text-blue-500"}),e.title]}),X.jsx("td",{className:"px-4 py-3 text-gray-600",children:e.type}),X.jsx("td",{className:"px-4 py-3 text-gray-600",children:e.date}),X.jsx("td",{className:"px-4 py-3",children:X.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.status==="completado"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:e.status==="completado"?"Completado":"Pendiente"})}),X.jsxs("td",{className:"px-4 py-3 flex justify-center gap-2",children:[X.jsx("button",{className:"p-1.5 rounded-md bg-blue-100 hover:bg-blue-200 text-blue-600",children:X.jsx(AN,{size:16})}),X.jsx("button",{className:"p-1.5 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-600",children:X.jsx(BP,{size:16})})]})]},e.id))})]})})]})}const Qte=[{id:"resumen",label:"Resumen"},{id:"analisis",label:"Análisis"},{id:"alertas",label:"Alertas"},{id:"reportes",label:"Reportes"}];function Jte({station:e}){const[t,r]=F.useState("resumen");return X.jsxs("div",{className:"flex flex-col w-full h-full rounded-lg overflow-hidden",children:[X.jsxs("div",{className:"px-6 py-3 border-b bg-white",children:[X.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e?.name}),X.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",e?.id]})]}),X.jsx("div",{className:"flex bg-white sticky top-0 z-10 border-b border-gray-200",children:Qte.map(a=>X.jsx("button",{onClick:()=>r(a.id),className:`px-6 py-3 text-sm font-medium ${t===a.id?"text-blue-600 border-b-2 border-blue-600 bg-white":"text-gray-500 hover:bg-gray-100"}`,children:a.label},a.id))}),X.jsxs("div",{className:"flex-1 bg-gray-50 p-6 overflow-auto",children:[t==="resumen"&&X.jsx(G3,{}),t==="analisis"&&X.jsx(Wte,{}),t==="alertas"&&X.jsx(Yte,{}),t==="reportes"&&X.jsx(Kte,{})]})]})}function ene(){return X.jsx("div",{className:"flex-1 flex items-center justify-center bg-white border rounded-lg mr-4 mb-4",children:X.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Predicciones"})})}function tne(){return X.jsx("div",{className:"flex-1 flex items-center justify-center bg-white border rounded-lg mr-4 mb-4",children:X.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Reportes"})})}function nne(){return X.jsx("div",{className:"flex-1 flex items-center justify-center bg-white border rounded-lg mr-4 mb-4",children:X.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Alertas"})})}function W_({title:e,value:t,icon:r}){return X.jsxs("div",{className:"flex items-center justify-between bg-gray-50 border border-gray-200 rounded-xl p-4 hover:shadow-sm transition",children:[X.jsxs("div",{children:[X.jsx("p",{className:"text-sm text-gray-500",children:e}),X.jsx("p",{className:"text-xl font-bold text-gray-800",children:t})]}),X.jsx("div",{className:"p-2 bg-white rounded-full shadow-sm",children:r})]})}const rne=[{id:1,name:"Estación Santa Eulalia",lat:-11.927,lon:-76.639,owner:"Natek"},{id:2,name:"Estación Yuracmayo",lat:-11.845,lon:-76.481,owner:"Natek"},{id:3,name:"Estación Carhuamayoc",lat:-11.812,lon:-76.491,owner:"Natek"}];function ine(){return X.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[X.jsx("li",{className:"p-2 bg-red-50 border border-red-100 rounded-lg",children:"🌊 Alerta de crecida en Río Santa"}),X.jsx("li",{className:"p-2 bg-yellow-50 border border-yellow-100 rounded-lg",children:"⚠️ Nivel alto en Estación Carhuamayoc"}),X.jsx("li",{className:"p-2 bg-green-50 border border-green-100 rounded-lg",children:"✅ Condiciones normales en Río Rímac"})]})}function ane(){return X.jsxs("ul",{className:"divide-y divide-gray-100 text-sm text-gray-700",children:[X.jsxs("li",{className:"py-2 flex justify-between",children:[X.jsx("span",{children:"📄 Reporte semanal - Cuenca Santa"})," ",X.jsx("span",{className:"text-gray-500",children:"10 Oct 2025"})]}),X.jsxs("li",{className:"py-2 flex justify-between",children:[X.jsx("span",{children:"📄 Informe técnico - Río Rímac"})," ",X.jsx("span",{className:"text-gray-500",children:"08 Oct 2025"})]}),X.jsxs("li",{className:"py-2 flex justify-between",children:[X.jsx("span",{children:"📄 Resumen mensual - Andahuaylas"})," ",X.jsx("span",{className:"text-gray-500",children:"02 Oct 2025"})]})]})}function one(){return X.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[X.jsxs("li",{className:"flex justify-between p-2 bg-gray-50 rounded-lg border",children:[X.jsx("span",{children:"Estación Santa Eulalia"}),X.jsx("span",{className:"font-semibold text-blue-600",children:"1.42 m"})]}),X.jsxs("li",{className:"flex justify-between p-2 bg-gray-50 rounded-lg border",children:[X.jsx("span",{children:"Estación Yuracmayo"}),X.jsx("span",{className:"font-semibold text-blue-600",children:"0.87 m"})]}),X.jsxs("li",{className:"flex justify-between p-2 bg-gray-50 rounded-lg border",children:[X.jsx("span",{children:"Estación Carhuamayoc"}),X.jsx("span",{className:"font-semibold text-blue-600",children:"1.03 m"})]})]})}function sne(){return X.jsxs("div",{className:"text-sm text-gray-700 leading-relaxed bg-gray-50 border border-gray-200 rounded-xl p-4",children:["🤖 ",X.jsx("span",{className:"font-semibold",children:"Análisis Inteligente:"})," Durante la última semana se registró un incremento sostenido del nivel de agua en la cuenca del Santa (+12%) y una ligera disminución en Yuracmayo (-5%). Se recomienda verificar posibles acumulaciones por lluvias recientes."]})}function lne(){return X.jsx("div",{className:"flex flex-col h-screen overflow-hidden",children:X.jsx("div",{className:"flex-1 overflow-y-auto p-0 pb-20 space-y-6",children:X.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[X.jsxs(Zs,{className:"col-span-3",children:[X.jsx(Ws,{children:X.jsx(Ys,{className:"text-lg font-semibold text-gray-700",children:"Resumen General"})}),X.jsx(Xs,{children:X.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[X.jsx(W_,{title:"Estaciones",value:"42",icon:X.jsx(ew,{className:"text-blue-600"})}),X.jsx(W_,{title:"Cuencas Monitoreadas",value:"7",icon:X.jsx($P,{className:"text-teal-600"})}),X.jsx(W_,{title:"Alertas Emitidas",value:"5",icon:X.jsx(a0,{className:"text-red-500"})}),X.jsx(W_,{title:"Reportes Generales",value:"18",icon:X.jsx(i0,{className:"text-gray-600"})})]})})]}),X.jsxs(Zs,{className:"col-span-3 xl:col-span-2 flex flex-col min-h-[420px]",children:[X.jsx(Ws,{className:"flex justify-between items-center border-b",children:X.jsxs(Ys,{className:"text-gray-700 font-semibold flex items-center gap-2",children:[X.jsx(FP,{className:"text-blue-600"})," Mapa de Estaciones"]})}),X.jsx(Xs,{className:"flex-1 p-0 rounded-t-none overflow-hidden",children:X.jsx(qP,{stations:rne})})]}),X.jsxs(Zs,{className:"col-span-3 xl:col-span-1 flex flex-col min-h-[420px] overflow-hidden",children:[X.jsx(Ws,{className:"flex justify-between items-center border-b",children:X.jsxs(Ys,{className:"text-gray-700 font-semibold flex items-center gap-2",children:[X.jsx(vS,{className:"text-red-500"})," Últimas Alertas"]})}),X.jsx(Xs,{className:"flex-1 overflow-y-auto",children:X.jsx(ine,{})})]}),X.jsxs(Zs,{className:"col-span-3 xl:col-span-1 flex flex-col min-h-[420px] overflow-hidden",children:[X.jsx(Ws,{className:"flex justify-between items-center border-b",children:X.jsxs(Ys,{className:"text-gray-700 font-semibold flex items-center gap-2",children:[X.jsx(i0,{className:"text-gray-700"})," Últimos Reportes"]})}),X.jsx(Xs,{className:"flex-1 overflow-y-auto",children:X.jsx(ane,{})})]}),X.jsxs(Zs,{className:"col-span-3 xl:col-span-1 flex flex-col min-h-[420px] overflow-hidden",children:[X.jsx(Ws,{className:"flex justify-between items-center border-b",children:X.jsxs(Ys,{className:"text-gray-700 font-semibold flex items-center gap-2",children:[X.jsx(aN,{className:"text-green-600"})," Últimas Mediciones"]})}),X.jsx(Xs,{className:"flex-1 overflow-y-auto",children:X.jsx(one,{})})]}),X.jsxs(Zs,{className:"col-span-3 xl:col-span-1 flex flex-col min-h-[420px] overflow-hidden",children:[X.jsx(Ws,{className:"flex justify-between items-center border-b",children:X.jsxs(Ys,{className:"text-gray-700 font-semibold flex items-center gap-2",children:[X.jsx(uN,{className:"text-purple-600"})," Resumen Inteligente"]})}),X.jsx(Xs,{className:"flex-1 overflow-y-auto",children:X.jsx(sne,{})})]})]})})})}const yP=[{id:"1",name:"Rímac - Puente Nuevo",river:"Río Rímac",lat:-12.01,lon:-77.04,owner:"Natek",subscribed:!0,alertLevel:"bajo"},{id:"2",name:"Chillón - Puente Comas",river:"Río Chillón",lat:-11.87,lon:-77.08,owner:"SENAMHI",subscribed:!1,alertLevel:"medio"},{id:"3",name:"Rímac - Puente Santa Rosa",river:"Río Rímac",lat:-12.02,lon:-77.05,owner:"Natek",subscribed:!0,alertLevel:"alto"},{id:"4",name:"Lurín - Puente Pachacamac",river:"Río Lurín",lat:-12.22,lon:-76.885,owner:"ANA",subscribed:!1,alertLevel:"bajo"},{id:"5",name:"Chillón - Puente Carabayllo",river:"Río Chillón",lat:-11.88,lon:-77.1,owner:"Natek",subscribed:!0,alertLevel:"medio"},{id:"6",name:"Rímac - Puente Callao",river:"Río Rímac",lat:-12.045,lon:-77.06,owner:"SENAMHI",subscribed:!1,alertLevel:"alto"},{id:"7",name:"Lurín - Puente Izcuchaca",river:"Río Lurín",lat:-12.18,lon:-76.9,owner:"Natek",subscribed:!0,alertLevel:"bajo"},{id:"8",name:"Santa Eulalia - Puente Central",river:"Río Santa Eulalia",lat:-11.83,lon:-76.61,owner:"INAIGEM",subscribed:!1,alertLevel:"medio"},{id:"9",name:"Rímac - Puente Nuevo Norte",river:"Río Rímac",lat:-11.995,lon:-77.035,owner:"Natek",subscribed:!0,alertLevel:"medio"},{id:"10",name:"Chillón - Puente Puente Piedra",river:"Río Chillón",lat:-11.855,lon:-77.06,owner:"ANA",subscribed:!1,alertLevel:"bajo"},{id:"11",name:"Lurín - Puente Surco",river:"Río Lurín",lat:-12.21,lon:-76.88,owner:"Natek",subscribed:!0,alertLevel:"alto"},{id:"12",name:"Santa Eulalia - Puente Huachipa",river:"Río Santa Eulalia",lat:-11.825,lon:-76.62,owner:"SENAMHI",subscribed:!1,alertLevel:"medio"},{id:"13",name:"Rímac - Puente La Marina",river:"Río Rímac",lat:-12.03,lon:-77.045,owner:"Natek",subscribed:!0,alertLevel:"bajo"},{id:"14",name:"Chillón - Puente Ancón",river:"Río Chillón",lat:-11.79,lon:-77.17,owner:"INAIGEM",subscribed:!1,alertLevel:"alto"},{id:"15",name:"Lurín - Puente Santa Anita",river:"Río Lurín",lat:-12.195,lon:-76.89,owner:"Natek",subscribed:!0,alertLevel:"medio"}];function cne(){const[e,t]=F.useState(null),[r,a]=F.useState(!0),[d,p]=F.useState("Home"),m=W0(),s=rd();return F.useEffect(()=>{s.pathname==="/stations"&&t(null)},[s]),X.jsxs("div",{className:"bg-gray-100 h-screen flex flex-col transition-colors pb-4",children:[X.jsx(a3,{isSidebarOpen:r,toggleSidebar:()=>a(!r),pageTitle:d,selectedStationName:e?.name||""}),X.jsxs("div",{className:"flex flex-1 pt-16 overflow-hidden",children:[X.jsx(n3,{isCollapsed:!r,onChangePage:M=>{switch(p(M),M){case"Home":m("/");break;case"Estaciones":m("/stations");break;case"Predicciones":m("/predictions");break;case"Reportes":m("/reports");break;case"Alertas":m("/alerts");break}}}),X.jsxs("div",{className:"flex flex-1 overflow-hidden transition-all duration-300 h-full",children:[X.jsx("main",{className:`flex-1 overflow-hidden transition-all duration-300 ${r?"ml-64":"ml-[68px]"}`,children:X.jsxs(_L,{children:[X.jsx(bp,{path:"/",element:X.jsx(lne,{})}),X.jsx(bp,{path:"/stations",element:X.jsx(u3,{stations:yP,onSelect:M=>{t(M),m(`/stations/${M.id}`)}})}),X.jsx(bp,{path:"/stations/:id",element:X.jsx(Jte,{station:e??yP[0]})}),X.jsx(bp,{path:"/predictions",element:X.jsx(ene,{})}),X.jsx(bp,{path:"/reports",element:X.jsx(tne,{})}),X.jsx(bp,{path:"/alerts",element:X.jsx(nne,{})})]})}),X.jsx(i3,{})]})]})]})}Pj.createRoot(document.getElementById("root")).render(X.jsx(F.StrictMode,{children:X.jsx($L,{children:X.jsx(cne,{})})}));
